From MAILER-DAEMON Sun Feb  1 02:17:35 2004
Return-Path: 
 <lucene-user-return-6934-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 97327 invoked from network); 1 Feb 2004 02:17:35 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 1 Feb 2004 02:17:35 -0000
Received: (qmail 81970 invoked by uid 500); 1 Feb 2004 02:17:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81800 invoked by uid 500); 1 Feb 2004 02:17:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81753 invoked from network); 1 Feb 2004 02:17:07 -0000
Received: from unknown (HELO tibor.swiftdsl.com.au) (202.154.92.226)
  by daedalus.apache.org with SMTP; 1 Feb 2004 02:17:07 -0000
Received: (qmail 10151 invoked from network); 1 Feb 2004 02:22:58 -0000
Received: from unknown (HELO madeinozlaptop) ([218.214.161.196])
          (envelope-sender <seaton@gateway.net.au>)
          by tibor.swiftdsl.com.au (qmail-ldap-1.03) with SMTP
          for <lucene-user@jakarta.apache.org>; 1 Feb 2004 02:22:58 -0000
From: "Stephen Eaton" <seaton@gateway.net.au>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Lucene with Postgres db
Date: Sun, 1 Feb 2004 10:17:08 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <200401311256.i0VCuQB20682@plain.rackshack.net>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
Thread-Index: AcPn8xpDOoNwaHTbQsq6VKd2fTcJBQAdiKcg
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

What I do is do a db select and build up a result set of all the
documents/fields I need to search then I index them.  This is usually
performed once a day and does so on all db records.  I'm currently using
turbine and torque to do this.=20

> -----Original Message-----
> From: Ankur Goel [mailto:ankurg@brickred.com]=20
> Sent: Saturday, 31 January 2004 8:10 PM
> To: lucene-user@jakarta.apache.org
> Subject: Lucene with Postgres db
>=20
> Hi,
>=20
> I have to search the documents which are stored in postgres db.=20
>=20
> Can someone give a clue how to go about it?
>=20
> Thanks
>=20
> Ankur Goel
> Brickred Technologies
> B-2 IInd Floor, Sector-31
> Noida,India
> P:+91-1202456361
> C:+91-9810161323
> E:ankurg@brickred.com
> http://www.brickred.com
> =A0
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>=20
>=20
> __________ NOD32 1.614 (20040129) Information __________
>=20
> This message was checked by NOD32 antivirus system.
> http://www.nod32.com
>=20
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb  1 11:16:46 2004
Return-Path: 
 <lucene-user-return-6935-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58273 invoked from network); 1 Feb 2004 11:16:46 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 1 Feb 2004 11:16:46 -0000
Received: (qmail 17080 invoked by uid 500); 1 Feb 2004 11:16:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 17037 invoked by uid 500); 1 Feb 2004 11:16:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16988 invoked from network); 1 Feb 2004 11:16:08 -0000
Received: from unknown (HELO smtprelay01.ispgateway.de) (62.67.200.156)
  by daedalus.apache.org with SMTP; 1 Feb 2004 11:16:08 -0000
Received: (qmail 17718 invoked from network); 1 Feb 2004 11:16:21 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.243.180])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 1 Feb 2004 11:16:21 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 357641FE3
	for <lucene-user@jakarta.apache.org>; Sun,  1 Feb 2004 12:16:20 +0100 (CET)
From: lucene@nitwit.de
To: lucene-user@jakarta.apache.org
Subject: SQLDirectory
Date: Sun, 1 Feb 2004 12:16:19 +0100
User-Agent: KMail/1.5.4
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200402011216.19771.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi!

There was some third-party SQLDirectory for lucene 1.2 which was abandoned for 
a matter of performance. Well, why not loading the index into RAM? Is there 
some ("official") SQLDirectory for 1.3?

searcher = new IndexSearcher(IndexReader.open(new RAMDirectory(new 
SQLDirectory()));

I'd really like to have the index where I do have all the data - in the 
database.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb  1 11:16:58 2004
Return-Path: 
 <lucene-user-return-6936-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58358 invoked from network); 1 Feb 2004 11:16:58 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 1 Feb 2004 11:16:58 -0000
Received: (qmail 17659 invoked by uid 500); 1 Feb 2004 11:16:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 17610 invoked by uid 500); 1 Feb 2004 11:16:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 17539 invoked from network); 1 Feb 2004 11:16:13 -0000
Received: from unknown (HELO coolum.aussiehosts.com) (216.12.200.93)
  by daedalus.apache.org with SMTP; 1 Feb 2004 11:16:13 -0000
Received: (qmail 24446 invoked by uid 0); 1 Feb 2004 11:16:32 -0000
Date: 1 Feb 2004 11:16:32 -0000
Message-ID: <20040201111632.24445.qmail@coolum.aussiehosts.com>
Reply-To: jem@loftinspace.com.au
From: jem@loftinspace.com.au
To: lucene-user@jakarta.apache.org
CC: 
Subject: Jem has a new address
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thank you for your recent email. Unfortunately, due to spam overload, I no longer accept mail to this address. 

If you would like to receive my new email address, please call me. My phone number is listed in www.whitepages.com.au

Best wishes
Jem



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb  1 11:20:16 2004
Return-Path: 
 <lucene-user-return-6937-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 59399 invoked from network); 1 Feb 2004 11:20:16 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 1 Feb 2004 11:20:16 -0000
Received: (qmail 28678 invoked by uid 500); 1 Feb 2004 11:19:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 28472 invoked by uid 500); 1 Feb 2004 11:19:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 28446 invoked from network); 1 Feb 2004 11:19:39 -0000
Received: from unknown (HELO smtprelay02.ispgateway.de) (62.67.200.157)
  by daedalus.apache.org with SMTP; 1 Feb 2004 11:19:39 -0000
Received: (qmail 32232 invoked from network); 1 Feb 2004 11:19:52 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.243.180])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 1 Feb 2004 11:19:52 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 7816A1A0F
	for <lucene-user@jakarta.apache.org>; Sun,  1 Feb 2004 12:19:51 +0100 (CET)
From: lucene@nitwit.de
To: lucene-user@jakarta.apache.org
Subject: HTMLDocument
Date: Sun, 1 Feb 2004 12:19:51 +0100
User-Agent: KMail/1.5.4
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200402011219.51189.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi!

Is there any HTMLDocument out there? The one in the demo package of lucene 
does not handle non-wellformed HTML files (what about nekohtml?) and seems to 
have some other inabilities and bugs as well (and why isn't it part of the 
distro but in a demo package?!)?


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb  1 11:20:26 2004
Return-Path: 
 <lucene-user-return-6938-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 59479 invoked from network); 1 Feb 2004 11:20:26 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 1 Feb 2004 11:20:26 -0000
Received: (qmail 29005 invoked by uid 500); 1 Feb 2004 11:19:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 28955 invoked by uid 500); 1 Feb 2004 11:19:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 28890 invoked from network); 1 Feb 2004 11:19:43 -0000
Received: from unknown (HELO coolum.aussiehosts.com) (216.12.200.93)
  by daedalus.apache.org with SMTP; 1 Feb 2004 11:19:43 -0000
Received: (qmail 25219 invoked by uid 0); 1 Feb 2004 11:20:03 -0000
Date: 1 Feb 2004 11:20:03 -0000
Message-ID: <20040201112003.25218.qmail@coolum.aussiehosts.com>
Reply-To: jem@loftinspace.com.au
From: jem@loftinspace.com.au
To: lucene-user@jakarta.apache.org
CC: 
Subject: Jem has a new address
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thank you for your recent email. Unfortunately, due to spam overload, I no longer accept mail to this address. 

If you would like to receive my new email address, please call me. My phone number is listed in www.whitepages.com.au

Best wishes
Jem



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb  1 11:23:21 2004
Return-Path: 
 <lucene-user-return-6939-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 60509 invoked from network); 1 Feb 2004 11:23:21 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 1 Feb 2004 11:23:21 -0000
Received: (qmail 37935 invoked by uid 500); 1 Feb 2004 11:22:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 37766 invoked by uid 500); 1 Feb 2004 11:22:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 37746 invoked from network); 1 Feb 2004 11:22:45 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.64)
  by daedalus.apache.org with SMTP; 1 Feb 2004 11:22:45 -0000
Received: (cpmta 23847 invoked from network); 1 Feb 2004 03:22:59 -0800
Received: from 24.51.109.181 (HELO ?192.168.1.100?)
  by smtp.hatcher.net (209.228.32.64) with SMTP; 1 Feb 2004 03:22:59 -0800
X-Sent: 1 Feb 2004 11:22:59 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <200402011216.19771.lucene@nitwit.de>
References: <200402011216.19771.lucene@nitwit.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <FB45609D-54A8-11D8-97DA-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: SQLDirectory
Date: Sun, 1 Feb 2004 06:22:55 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 1, 2004, at 6:16 AM, lucene@nitwit.de wrote:
> There was some third-party SQLDirectory for lucene 1.2 which was 
> abandoned for
> a matter of performance. Well, why not loading the index into RAM? Is 
> there
> some ("official") SQLDirectory for 1.3?

If you look back in the list archives a few weeks ago there is someone 
who has implemented a Directory within SQL Server I believe and has 
said the performance is quite good.

There is a Berkeley DB DBDirectory implementation in Lucene's sandbox 
repository as of a few weeks ago also.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb  1 11:23:30 2004
Return-Path: 
 <lucene-user-return-6940-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 60583 invoked from network); 1 Feb 2004 11:23:30 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 1 Feb 2004 11:23:30 -0000
Received: (qmail 38362 invoked by uid 500); 1 Feb 2004 11:22:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 38340 invoked by uid 500); 1 Feb 2004 11:22:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 38293 invoked from network); 1 Feb 2004 11:22:49 -0000
Received: from unknown (HELO coolum.aussiehosts.com) (216.12.200.93)
  by daedalus.apache.org with SMTP; 1 Feb 2004 11:22:49 -0000
Received: (qmail 25886 invoked by uid 0); 1 Feb 2004 11:23:09 -0000
Date: 1 Feb 2004 11:23:09 -0000
Message-ID: <20040201112309.25885.qmail@coolum.aussiehosts.com>
Reply-To: jem@loftinspace.com.au
From: jem@loftinspace.com.au
To: lucene-user@jakarta.apache.org
CC: 
Subject: Jem has a new address
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thank you for your recent email. Unfortunately, due to spam overload, I no longer accept mail to this address. 

If you would like to receive my new email address, please call me. My phone number is listed in www.whitepages.com.au

Best wishes
Jem



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb  1 12:21:53 2004
Return-Path: 
 <lucene-user-return-6941-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74548 invoked from network); 1 Feb 2004 12:21:53 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 1 Feb 2004 12:21:53 -0000
Received: (qmail 72151 invoked by uid 500); 1 Feb 2004 12:21:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 72127 invoked by uid 500); 1 Feb 2004 12:21:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 72111 invoked from network); 1 Feb 2004 12:21:43 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.72)
  by daedalus.apache.org with SMTP; 1 Feb 2004 12:21:43 -0000
Received: (cpmta 28112 invoked from network); 1 Feb 2004 04:21:43 -0800
Received: from 24.51.109.181 (HELO ?192.168.1.100?)
  by smtp.hatcher.net (209.228.32.72) with SMTP; 1 Feb 2004 04:21:43 -0800
X-Sent: 1 Feb 2004 12:21:43 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <200402011219.51189.lucene@nitwit.de>
References: <200402011219.51189.lucene@nitwit.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <30429514-54B1-11D8-97DA-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: HTMLDocument
Date: Sun, 1 Feb 2004 07:21:40 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 1, 2004, at 6:19 AM, lucene@nitwit.de wrote:
> Hi!
>
> Is there any HTMLDocument out there? The one in the demo package of 
> lucene
> does not handle non-wellformed HTML files (what about nekohtml?) and 
> seems to
> have some other inabilities and bugs as well (and why isn't it part of 
> the
> distro but in a demo package?!)?

Nutch uses NekoHTML, so you can browse around that codebase and borrow 
its implementation.  The sandbox has a contribution/ant directory which 
contains an HTMLDocument that uses JTidy to parse HTML which does a 
pretty good job at handling bad HTML.

Why isn't it in the distribution?  Parsing HTML and turning it into a 
Lucene document is not always done the same way and doing so is really 
on top of the core, not integral to it.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb  1 12:22:05 2004
Return-Path: 
 <lucene-user-return-6942-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74646 invoked from network); 1 Feb 2004 12:22:05 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 1 Feb 2004 12:22:05 -0000
Received: (qmail 72656 invoked by uid 500); 1 Feb 2004 12:21:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 72632 invoked by uid 500); 1 Feb 2004 12:21:47 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 72595 invoked from network); 1 Feb 2004 12:21:47 -0000
Received: from unknown (HELO coolum.aussiehosts.com) (216.12.200.93)
  by daedalus.apache.org with SMTP; 1 Feb 2004 12:21:47 -0000
Received: (qmail 7468 invoked by uid 0); 1 Feb 2004 12:21:52 -0000
Date: 1 Feb 2004 12:21:52 -0000
Message-ID: <20040201122152.7467.qmail@coolum.aussiehosts.com>
Reply-To: jem@loftinspace.com.au
From: jem@loftinspace.com.au
To: lucene-user@jakarta.apache.org
CC: 
Subject: Jem has a new address
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thank you for your recent email. Unfortunately, due to spam overload, I no longer accept mail to this address. 

If you would like to receive my new email address, please call me. My phone number is listed in www.whitepages.com.au

Best wishes
Jem



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb  1 12:25:10 2004
Return-Path: 
 <lucene-user-return-6943-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 75439 invoked from network); 1 Feb 2004 12:25:10 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 1 Feb 2004 12:25:10 -0000
Received: (qmail 81301 invoked by uid 500); 1 Feb 2004 12:24:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81267 invoked by uid 500); 1 Feb 2004 12:24:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81249 invoked from network); 1 Feb 2004 12:24:57 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.64)
  by daedalus.apache.org with SMTP; 1 Feb 2004 12:24:57 -0000
Received: (cpmta 28280 invoked from network); 1 Feb 2004 04:24:56 -0800
Received: from 24.51.109.181 (HELO ?192.168.1.100?)
  by smtp.hatcher.net (209.228.32.64) with SMTP; 1 Feb 2004 04:24:56 -0800
X-Sent: 1 Feb 2004 12:24:56 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <20040129100818.17756.qmail@mail.com>
References: <20040129100818.17756.qmail@mail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <A3101450-54B1-11D8-97DA-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Date Range support
Date: Sun, 1 Feb 2004 07:24:52 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Jan 29, 2004, at 5:08 AM, tom wa wrote:
> I'm trying to create an index which can also be searched with date 
> ranges. My first attempt using the Lucene date format ran in to 
> trouble after my index grew and I couldn't search over more than a few 
> days.
> I saw some other posts explaining why this happens and the suggestion 
> seemed to be to use strings of the format yyyyMMdd. Using that format 
> worked great until I remembered that my search needs
>  to be able to support different timezones. Adding the hour to my 
> field causes the same problem above and my queries stop working when 
> using a range of about 2 months.

When you say you couldn't search and that it stopped working, do you 
mean it was just unacceptably slow?


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb  1 12:25:18 2004
Return-Path: 
 <lucene-user-return-6944-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 75510 invoked from network); 1 Feb 2004 12:25:18 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 1 Feb 2004 12:25:18 -0000
Received: (qmail 81879 invoked by uid 500); 1 Feb 2004 12:25:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81839 invoked by uid 500); 1 Feb 2004 12:25:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81781 invoked from network); 1 Feb 2004 12:25:02 -0000
Received: from unknown (HELO coolum.aussiehosts.com) (216.12.200.93)
  by daedalus.apache.org with SMTP; 1 Feb 2004 12:25:02 -0000
Received: (qmail 8322 invoked by uid 0); 1 Feb 2004 12:25:07 -0000
Date: 1 Feb 2004 12:25:07 -0000
Message-ID: <20040201122507.8321.qmail@coolum.aussiehosts.com>
Reply-To: jem@loftinspace.com.au
From: jem@loftinspace.com.au
To: lucene-user@jakarta.apache.org
CC: 
Subject: Jem has a new address
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thank you for your recent email. Unfortunately, due to spam overload, I no longer accept mail to this address. 

If you would like to receive my new email address, please call me. My phone number is listed in www.whitepages.com.au

Best wishes
Jem



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb  1 14:14:04 2004
Return-Path: 
 <lucene-user-return-6945-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 7776 invoked from network); 1 Feb 2004 14:14:04 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 1 Feb 2004 14:14:04 -0000
Received: (qmail 57774 invoked by uid 500); 1 Feb 2004 14:13:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 57706 invoked by uid 500); 1 Feb 2004 14:13:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 57651 invoked from network); 1 Feb 2004 14:13:51 -0000
Received: from unknown (HELO hi-net.cz) (62.77.118.60)
  by daedalus.apache.org with SMTP; 1 Feb 2004 14:13:51 -0000
Received: (qmail 6625 invoked from network); 1 Feb 2004 14:13:50 -0000
Received: from unknown (HELO fw.shark) (10.102.51.30)
  by mail.hi-net.cz with SMTP; 1 Feb 2004 14:13:50 -0000
Received: from seznam.cz (0-3.shark [192.168.0.3])
	by fw.shark (8.12.9/8.12.9) with ESMTP id i11EDVcl021524
	for <lucene-user@jakarta.apache.org>; Sun, 1 Feb 2004 15:13:36 +0100 (CET)
Message-ID: <401D0989.6010603@seznam.cz>
Date: Sun, 01 Feb 2004 15:13:29 +0100
From: Leo Galambos <Leo.G@seznam.cz>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040113
X-Accept-Language: cs, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Lucene with Postgres db
References: <200401311256.i0VCuQB20682@plain.rackshack.net>
In-Reply-To: <200401311256.i0VCuQB20682@plain.rackshack.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Have you tried a special add-on for pgsql - 
http://www.sai.msu.su/~megera/postgres/gist/tsearch/V2/

Lucene is faster than tsearch (I hope so), but tsearch neednot be 
synchronized with the main DB...up to you.

Cheers,
Leo

Ankur Goel wrote:

>Hi,
>
>I have to search the documents which are stored in postgres db. 
>
>Can someone give a clue how to go about it?
>
>Thanks
>
>Ankur Goel
>Brickred Technologies
>B-2 IInd Floor, Sector-31
>Noida,India
>P:+91-1202456361
>C:+91-9810161323
>E:ankurg@brickred.com
>http://www.brickred.com
> 
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
>
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb  1 14:14:14 2004
Return-Path: 
 <lucene-user-return-6946-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 7850 invoked from network); 1 Feb 2004 14:14:14 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 1 Feb 2004 14:14:14 -0000
Received: (qmail 58244 invoked by uid 500); 1 Feb 2004 14:13:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58210 invoked by uid 500); 1 Feb 2004 14:13:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58164 invoked from network); 1 Feb 2004 14:13:55 -0000
Received: from unknown (HELO coolum.aussiehosts.com) (216.12.200.93)
  by daedalus.apache.org with SMTP; 1 Feb 2004 14:13:55 -0000
Received: (qmail 3253 invoked by uid 0); 1 Feb 2004 14:14:01 -0000
Date: 1 Feb 2004 14:14:01 -0000
Message-ID: <20040201141401.3252.qmail@coolum.aussiehosts.com>
Reply-To: jem@loftinspace.com.au
From: jem@loftinspace.com.au
To: lucene-user@jakarta.apache.org
CC: 
Subject: Jem has a new address
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thank you for your recent email. Unfortunately, due to spam overload, I no longer accept mail to this address. 

If you would like to receive my new email address, please call me. My phone number is listed in www.whitepages.com.au

Best wishes
Jem



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb  1 14:14:26 2004
Return-Path: 
 <lucene-user-return-6947-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 7944 invoked from network); 1 Feb 2004 14:14:26 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 1 Feb 2004 14:14:26 -0000
Received: (qmail 59173 invoked by uid 500); 1 Feb 2004 14:14:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 59125 invoked by uid 500); 1 Feb 2004 14:14:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 59032 invoked from network); 1 Feb 2004 14:14:03 -0000
Received: from unknown (HELO smtprelay01.ispgateway.de) (62.67.200.156)
  by daedalus.apache.org with SMTP; 1 Feb 2004 14:14:03 -0000
Received: (qmail 6485 invoked from network); 1 Feb 2004 14:14:04 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.243.180])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 1 Feb 2004 14:14:04 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 5E0191FE1
	for <lucene-user@jakarta.apache.org>; Sun,  1 Feb 2004 15:14:05 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: HTMLDocument
Date: Sun, 1 Feb 2004 15:14:05 +0100
User-Agent: KMail/1.5.4
References: <200402011219.51189.lucene@nitwit.de>
 <30429514-54B1-11D8-97DA-000393A564E6@ehatchersolutions.com>
In-Reply-To: <30429514-54B1-11D8-97DA-000393A564E6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200402011514.05146.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Sunday 01 February 2004 13:21, Erik Hatcher wrote:
> On Feb 1, 2004, at 6:19 AM, lucene@nitwit.de wrote:

> Nutch uses NekoHTML, so you can browse around that codebase and borrow

Nutch(.org)? No code there...


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb  1 14:14:36 2004
Return-Path: 
 <lucene-user-return-6948-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8048 invoked from network); 1 Feb 2004 14:14:36 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 1 Feb 2004 14:14:36 -0000
Received: (qmail 60526 invoked by uid 500); 1 Feb 2004 14:14:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 60470 invoked by uid 500); 1 Feb 2004 14:14:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 60416 invoked from network); 1 Feb 2004 14:14:17 -0000
Received: from unknown (HELO coolum.aussiehosts.com) (216.12.200.93)
  by daedalus.apache.org with SMTP; 1 Feb 2004 14:14:17 -0000
Received: (qmail 3346 invoked by uid 0); 1 Feb 2004 14:14:22 -0000
Date: 1 Feb 2004 14:14:22 -0000
Message-ID: <20040201141422.3345.qmail@coolum.aussiehosts.com>
Reply-To: jem@loftinspace.com.au
From: jem@loftinspace.com.au
To: lucene-user@jakarta.apache.org
CC: 
Subject: Jem has a new address
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thank you for your recent email. Unfortunately, due to spam overload, I no longer accept mail to this address. 

If you would like to receive my new email address, please call me. My phone number is listed in www.whitepages.com.au

Best wishes
Jem



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb  1 14:28:12 2004
Return-Path: 
 <lucene-user-return-6949-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 19500 invoked from network); 1 Feb 2004 14:28:12 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 1 Feb 2004 14:28:12 -0000
Received: (qmail 95152 invoked by uid 500); 1 Feb 2004 14:27:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 95115 invoked by uid 500); 1 Feb 2004 14:27:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 95055 invoked from network); 1 Feb 2004 14:27:58 -0000
Received: from unknown (HELO bender.local) (213.240.172.49)
  by daedalus.apache.org with SMTP; 1 Feb 2004 14:27:58 -0000
Received: from athlon (pD9E41298.dip.t-dialin.net [217.228.18.152])
	by bender.local (Postfix) with SMTP id E58658C0C2
	for <lucene-user@jakarta.apache.org>; Sun,  1 Feb 2004 15:27:58 +0100 (CET)
Message-ID: <005001c3e8cf$988a4a60$c801a8c0@athlon>
From: "Felix Huber" <huberfelix@webtopia.de>
To: <lucene-user@jakarta.apache.org>
References: <200402011219.51189.lucene@nitwit.de>
 <30429514-54B1-11D8-97DA-000393A564E6@ehatchersolutions.com>
 <200402011514.05146.lucene@nitwit.de>
Subject: Re: HTMLDocument
Date: Sun, 1 Feb 2004 15:27:56 +0100
Organization: Webtopia
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


>
> Nutch(.org)? No code there...
>

Of course it's there: http://cvs.sourceforge.net/viewcvs.py/nutch/nutch/


Greets,
Felix


Webtopia - Felix Huber
Robert-Gerwig-Str. 1
D-78141 Sch�nwald - Germany


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb  1 14:28:21 2004
Return-Path: 
 <lucene-user-return-6950-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 19576 invoked from network); 1 Feb 2004 14:28:21 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 1 Feb 2004 14:28:21 -0000
Received: (qmail 95754 invoked by uid 500); 1 Feb 2004 14:28:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 95719 invoked by uid 500); 1 Feb 2004 14:28:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 95608 invoked from network); 1 Feb 2004 14:28:03 -0000
Received: from unknown (HELO coolum.aussiehosts.com) (216.12.200.93)
  by daedalus.apache.org with SMTP; 1 Feb 2004 14:28:03 -0000
Received: (qmail 6755 invoked by uid 0); 1 Feb 2004 14:28:09 -0000
Date: 1 Feb 2004 14:28:09 -0000
Message-ID: <20040201142809.6754.qmail@coolum.aussiehosts.com>
Reply-To: jem@loftinspace.com.au
From: jem@loftinspace.com.au
To: lucene-user@jakarta.apache.org
CC: 
Subject: Jem has a new address
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thank you for your recent email. Unfortunately, due to spam overload, I no longer accept mail to this address. 

If you would like to receive my new email address, please call me. My phone number is listed in www.whitepages.com.au

Best wishes
Jem



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb  2 02:54:42 2004
Return-Path: 
 <lucene-user-return-6951-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61308 invoked from network); 2 Feb 2004 02:54:42 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 2 Feb 2004 02:54:42 -0000
Received: (qmail 67992 invoked by uid 500); 2 Feb 2004 02:54:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 67776 invoked by uid 500); 2 Feb 2004 02:54:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 67748 invoked from network); 2 Feb 2004 02:54:14 -0000
Received: from unknown (HELO mail2.hq.bidders.co.jp) (211.0.1.179)
  by daedalus.apache.org with SMTP; 2 Feb 2004 02:54:14 -0000
Received: from localhost ([192.168.20.203])
	by mail2.hq.bidders.co.jp (8.9.3+3.2W/3.7W-MailExcahenger) with ESMTP id
 LAA05843
	for <lucene-user@jakarta.apache.org>; Mon, 2 Feb 2004 11:54:22 +0900
To: lucene-user@jakarta.apache.org
Subject: RE: Japanese Analyzer
In-Reply-To: Your message of "Fri, 30 Jan 2004 11:57:54 -0500"
	<187D6D956106D84E9D8B280F6458FE1402F3DCF5@merc12.na.sas.com>
References: <187D6D956106D84E9D8B280F6458FE1402F3DCF5@merc12.na.sas.com>
X-Mailer: Mew version 1.92.4 on XEmacs 21.4 (Portable Code)
Mime-Version: 1.0
Content-Type: Text/Plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-Id: <20040202115419R.saotome@hq.bidders.co.jp>
Date: Mon, 02 Feb 2004 11:54:19 +0900
From: Masami Saotome <saotome@hq.bidders.co.jp>
X-Dispatcher: imput version 20021213(IM143)
Lines: 54
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


As far as I know:
the following URL, There is an Japanese analyzer using morphological analysis.

http://yamaguch.sytes.net/~tora/opensource/sen/
But, this page is Japanese only.

Regards

> I've been using the CJKAnalyzer for a while now and our native japanese speaking development staff haven't had any complaints with the results they are getting in their searches.
> 
> Just be sure you get all the character encoding issues straight. One of the gotchas I ran into when I first started working with this was improper character encoding handling in my web application.
> 
> Eric
> 
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
> Sent: Thursday, January 29, 2004 1:46 PM
> To: Lucene Users List
> Subject: Re: Japanese Analyzer
> 
> 
> I think that's the only one we've got.
> You can browse the Lucene Sandbox contributions directory, it's there.
> 
> Otis
> 
> --- "Weir, Michael" <Michael.Weir@cognos.com> wrote:
> > Is the CJKAnalyzer the best to use for Japanese?  If not, which is?
> > If so,
> > from where can I download it?
> > Thanks.
> > 
> > Michael Weir . Transform Research Inc. . 613.238.1363 x.114
> > 
> > This message may contain privileged and/or confidential information.
> > If you
> > have received this e-mail in error or are not the intended recipient,
> > you
> > may not use, copy, disseminate or distribute it; do not open any
> > attachments, delete it immediately from your system and notify the
> > sender
> > promptly by e-mail that you have done so.  Thank you.
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb  2 02:54:53 2004
Return-Path: 
 <lucene-user-return-6952-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61403 invoked from network); 2 Feb 2004 02:54:53 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 2 Feb 2004 02:54:53 -0000
Received: (qmail 68287 invoked by uid 500); 2 Feb 2004 02:54:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 68244 invoked by uid 500); 2 Feb 2004 02:54:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 68196 invoked from network); 2 Feb 2004 02:54:19 -0000
Received: from unknown (HELO coolum.aussiehosts.com) (216.12.200.93)
  by daedalus.apache.org with SMTP; 2 Feb 2004 02:54:19 -0000
Received: (qmail 28071 invoked by uid 0); 2 Feb 2004 02:54:29 -0000
Date: 2 Feb 2004 02:54:29 -0000
Message-ID: <20040202025429.28070.qmail@coolum.aussiehosts.com>
Reply-To: jem@loftinspace.com.au
From: jem@loftinspace.com.au
To: lucene-user@jakarta.apache.org
CC: 
Subject: Jem has a new address
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thank you for your recent email. Unfortunately, due to spam overload, I no longer accept mail to this address. 

If you would like to receive my new email address, please call me. My phone number is listed in www.whitepages.com.au

Best wishes
Jem



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb  2 09:42:39 2004
Return-Path: 
 <lucene-user-return-6953-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 72097 invoked from network); 2 Feb 2004 09:42:39 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 2 Feb 2004 09:42:39 -0000
Received: (qmail 27828 invoked by uid 500); 2 Feb 2004 09:41:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 27779 invoked by uid 500); 2 Feb 2004 09:41:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 27721 invoked from network); 2 Feb 2004 09:41:52 -0000
Received: from unknown (HELO smtp.uk.colt.net) (195.110.64.125)
  by daedalus.apache.org with SMTP; 2 Feb 2004 09:41:52 -0000
Received: from rte.ie (mx.rte.ie [217.173.98.209])
	by smtp.uk.colt.net (Postfix) with ESMTP id C4AE524754
	for <lucene-user@jakarta.apache.org>; Mon,  2 Feb 2004 09:41:50 +0000 (GMT)
Subject: Re: HTMLDocument
From: John Moylan <johnm@rte.ie>
Reply-To: johnm@rte.ie
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <200402011219.51189.lucene@nitwit.de>
References: <200402011219.51189.lucene@nitwit.de>
Content-Type: text/plain
Organization: Radio Telifis Eireann
Message-Id: <1075714893.6196.0.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.2.2 (1.2.2-5) 
Date: 02 Feb 2004 09:41:34 +0000
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Another easy HTML parser is HTMLparser.sf.net

John

On Sun, 2004-02-01 at 11:19, lucene@nitwit.de wrote:
> Hi!
> 
> Is there any HTMLDocument out there? The one in the demo package of lucene 
> does not handle non-wellformed HTML files (what about nekohtml?) and seems to 
> have some other inabilities and bugs as well (and why isn't it part of the 
> distro but in a demo package?!)?
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
-- 
John Moylan
----------------------
ePublishing
Radio Telefis Eireann,
Montrose House,
Donnybrook,
Dublin 4,
Eire
t:+353 1 2083564
e:john.moylan@rte.ie


******************************************************************************
The information in this e-mail is confidential and may be legally privileged.
It is intended solely for the addressee. Access to this e-mail by anyone else
is unauthorised. If you are not the intended recipient, any disclosure,
copying, distribution, or any action taken or omitted to be taken in reliance
on it, is prohibited and may be unlawful.
Please note that emails to, from and within RT� may be subject to the Freedom
of Information Act 1997 and may be liable to disclosure.
******************************************************************************

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb  2 20:09:08 2004
Return-Path: 
 <lucene-user-return-6954-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8542 invoked from network); 2 Feb 2004 20:09:08 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 2 Feb 2004 20:09:08 -0000
Received: (qmail 48421 invoked by uid 500); 2 Feb 2004 20:08:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 48359 invoked by uid 500); 2 Feb 2004 20:08:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 48290 invoked from network); 2 Feb 2004 20:08:20 -0000
Received: from unknown (HELO wall.quontis.com) (66.120.216.177)
  by daedalus.apache.org with SMTP; 2 Feb 2004 20:08:20 -0000
Received: from MMcompaq01 (unknown [10.6.18.128])
	by wall.quontis.com (Postfix) with ESMTP id DA8D69EA9C
	for <lucene-user@jakarta.apache.org>; Mon,  2 Feb 2004 11:28:10 -0800 (PST)
From: "Jochen" <lucenelist@quontis.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: SQLDirectory
Date: Mon, 2 Feb 2004 12:08:25 -0800
Message-ID: <009e01c3e9c8$510997a0$8012060a@MMcompaq01>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.4510
x-mimeole: Produced By Microsoft MimeOLE V6.00.2800.1165
In-Reply-To: <FB45609D-54A8-11D8-97DA-000393A564E6@ehatchersolutions.com>
Importance: Normal
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Look for this subject line:

RE: Lucene Optimized Query Broken?

> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Sunday, February 01, 2004 3:23 AM
> To: Lucene Users List
> Subject: Re: SQLDirectory
> 
> On Feb 1, 2004, at 6:16 AM, lucene@nitwit.de wrote:
> > There was some third-party SQLDirectory for lucene 1.2 which was
> > abandoned for
> > a matter of performance. Well, why not loading the index into RAM? Is
> > there
> > some ("official") SQLDirectory for 1.3?
> 
> If you look back in the list archives a few weeks ago there is someone
> who has implemented a Directory within SQL Server I believe and has
> said the performance is quite good.
> 
> There is a Berkeley DB DBDirectory implementation in Lucene's sandbox
> repository as of a few weeks ago also.
> 
> 	Erik
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb  2 20:22:26 2004
Return-Path: 
 <lucene-user-return-6955-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25325 invoked from network); 2 Feb 2004 20:22:26 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 2 Feb 2004 20:22:26 -0000
Received: (qmail 8582 invoked by uid 500); 2 Feb 2004 20:21:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 8530 invoked by uid 500); 2 Feb 2004 20:21:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 8398 invoked from network); 2 Feb 2004 20:21:57 -0000
Received: from unknown (HELO smtprelay02.ispgateway.de) (62.67.200.157)
  by daedalus.apache.org with SMTP; 2 Feb 2004 20:21:57 -0000
Received: (qmail 17987 invoked from network); 2 Feb 2004 20:22:00 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.240.239])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 2 Feb 2004 20:22:00 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 0C6421CD6
	for <lucene-user@jakarta.apache.org>; Mon,  2 Feb 2004 21:22:39 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: SQLDirectory
Date: Mon, 2 Feb 2004 21:22:38 +0100
User-Agent: KMail/1.5.4
References: <009e01c3e9c8$510997a0$8012060a@MMcompaq01>
In-Reply-To: <009e01c3e9c8$510997a0$8012060a@MMcompaq01>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200402022122.38406.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Monday 02 February 2004 21:08, Jochen wrote:
> RE: Lucene Optimized Query Broken?

Thanks for the hint. Alas, I also didn't find it there :-( Anyway, I need 
something that does work on any (Postgres) SQL db.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb  2 20:28:20 2004
Return-Path: 
 <lucene-user-return-6956-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 28386 invoked from network); 2 Feb 2004 20:28:20 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 2 Feb 2004 20:28:20 -0000
Received: (qmail 34796 invoked by uid 500); 2 Feb 2004 20:27:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 34715 invoked by uid 500); 2 Feb 2004 20:27:31 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 34618 invoked from network); 2 Feb 2004 20:27:31 -0000
Received: from unknown (HELO smtprelay02.ispgateway.de) (62.67.200.157)
  by daedalus.apache.org with SMTP; 2 Feb 2004 20:27:31 -0000
Received: (qmail 18881 invoked from network); 2 Feb 2004 20:27:34 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.240.239])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 2 Feb 2004 20:27:34 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 1927E1CD6
	for <lucene-user@jakarta.apache.org>; Mon,  2 Feb 2004 21:28:14 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: HTMLDocument
Date: Mon, 2 Feb 2004 21:28:13 +0100
User-Agent: KMail/1.5.4
References: <200402011219.51189.lucene@nitwit.de>
 <200402011514.05146.lucene@nitwit.de> <005001c3e8cf$988a4a60$c801a8c0@athlon>
In-Reply-To: <005001c3e8cf$988a4a60$c801a8c0@athlon>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200402022128.13845.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Sunday 01 February 2004 15:27, Felix Huber wrote:
> Of course it's there: http://cvs.sourceforge.net/viewcvs.py/nutch/nutch/

Thanks. But didn't find that "contribution/ant directory" there anyway...:-(


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb  2 20:58:36 2004
Return-Path: 
 <lucene-user-return-6957-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 43496 invoked from network); 2 Feb 2004 20:58:36 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 2 Feb 2004 20:58:36 -0000
Received: (qmail 48900 invoked by uid 500); 2 Feb 2004 20:58:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 48862 invoked by uid 500); 2 Feb 2004 20:58:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 48832 invoked from network); 2 Feb 2004 20:58:13 -0000
Received: from unknown (HELO tomts13-srv.bellnexxia.net) (209.226.175.34)
  by daedalus.apache.org with SMTP; 2 Feb 2004 20:58:13 -0000
Received: from everest.konova.com ([65.95.46.56])
          by tomts13-srv.bellnexxia.net
          (InterMail vM.5.01.06.05 201-253-122-130-105-20030824) with ESMTP
          id
 <20040202205817.DGDP23150.tomts13-srv.bellnexxia.net@everest.konova.com>
          for <lucene-user@jakarta.apache.org>;
          Mon, 2 Feb 2004 15:58:17 -0500
Received: from massif (IDENT:root@localhost [127.0.0.1])
	by everest.konova.com (8.11.6/8.11.6) with SMTP id i12Kw9N17908
	for <lucene-user@jakarta.apache.org>; Mon, 2 Feb 2004 15:58:09 -0500
From: "Philippe Laflamme" <plaflamme@konova.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: RE: SQLDirectory
Date: Mon, 2 Feb 2004 16:00:20 -0500
Message-ID: <DNEDJIGLNAJOFEMFBJIJOEPACDAA.plaflamme@konova.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <200402022122.38406.lucene@nitwit.de>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
Importance: Normal
X-MailScanner: Found to be clean
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I've worked on an implementation for Postgres. I used the Large Object API
provided by the Postgres JDBC driver. It works fine but I doubt it is very
scalable because the number of open connections during indexing can become
very high.

Lucene opens many different files when writing to an index. This results in
opening one PG connection per open file. While working on a small index (30
000 files), I saw the number of open connections become quite high (approx
150). If you don't have a lot of RAM, this is problematic. Maybe someone
more knowledgable of Lucene can confirm the quantity of open files while
indexing?

If Lucene needs more files when the index grows, this solution is not
scalable, your database server will eventually choke and performance will
degrade to make indexing impossibly slow.

I think the main goal of having an SQL directory is to make the index more
accessible. I've found that using my implementation to _copy_ an existing
index to and from a Postgres DB is quite useful. I usually create an index
in an FSDirectory and then copy it over into the PgsqlDirectory...

I'll look into making the implementation available if you're interested.

Anyone have thoughts on this?

Thanks,
Phil

> -----Original Message-----
> From: lucene@nitwit.de [mailto:lucene@nitwit.de]
> Sent: February 2, 2004 15:23
> To: Lucene Users List
> Subject: Re: SQLDirectory
>
>
> On Monday 02 February 2004 21:08, Jochen wrote:
> > RE: Lucene Optimized Query Broken?
>
> Thanks for the hint. Alas, I also didn't find it there :-( Anyway, I need
> something that does work on any (Postgres) SQL db.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb  2 21:02:16 2004
Return-Path: 
 <lucene-user-return-6958-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 45635 invoked from network); 2 Feb 2004 21:02:16 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 2 Feb 2004 21:02:16 -0000
Received: (qmail 65500 invoked by uid 500); 2 Feb 2004 21:01:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 65471 invoked by uid 500); 2 Feb 2004 21:01:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 65448 invoked from network); 2 Feb 2004 21:01:52 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.65)
  by daedalus.apache.org with SMTP; 2 Feb 2004 21:01:52 -0000
Received: (cpmta 15448 invoked from network); 2 Feb 2004 13:01:57 -0800
Received: from 128.143.210.135 (HELO ?128.143.210.135?)
  by smtp.hatcher.net (209.228.32.65) with SMTP; 2 Feb 2004 13:01:57 -0800
X-Sent: 2 Feb 2004 21:01:57 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <200402022128.13845.lucene@nitwit.de>
References: <200402011219.51189.lucene@nitwit.de>
 <200402011514.05146.lucene@nitwit.de> <005001c3e8cf$988a4a60$c801a8c0@athlon>
 <200402022128.13845.lucene@nitwit.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <0697E7B2-55C3-11D8-94F7-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: HTMLDocument
Date: Mon, 2 Feb 2004 16:01:52 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 2, 2004, at 3:28 PM, lucene@nitwit.de wrote:
> On Sunday 01 February 2004 15:27, Felix Huber wrote:
>> Of course it's there: 
>> http://cvs.sourceforge.net/viewcvs.py/nutch/nutch/
>
> Thanks. But didn't find that "contribution/ant directory" there 
> anyway...:-(

contribution/ant is not part of Nutch, it is in the Jakarta CVS 
repository jakarta-lucene-sandbox.  Details here:

	<http://jakarta.apache.org/lucene/docs/lucene-sandbox/>

you will have to pull it from CVS to use it, and build it yourself.  
There are plans to release binary versions eventually, but for now it 
is "batteries not included"

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb  2 21:04:04 2004
Return-Path: 
 <lucene-user-return-6959-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 46672 invoked from network); 2 Feb 2004 21:04:04 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 2 Feb 2004 21:04:04 -0000
Received: (qmail 75150 invoked by uid 500); 2 Feb 2004 21:03:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 75108 invoked by uid 500); 2 Feb 2004 21:03:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 75065 invoked from network); 2 Feb 2004 21:03:41 -0000
Received: from unknown (HELO smtprelay02.ispgateway.de) (62.67.200.157)
  by daedalus.apache.org with SMTP; 2 Feb 2004 21:03:41 -0000
Received: (qmail 25811 invoked from network); 2 Feb 2004 21:03:45 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.240.239])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 2 Feb 2004 21:03:45 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 54C341CD6
	for <lucene-user@jakarta.apache.org>; Mon,  2 Feb 2004 22:04:27 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: SQLDirectory
Date: Mon, 2 Feb 2004 22:04:27 +0100
User-Agent: KMail/1.5.4
References: <DNEDJIGLNAJOFEMFBJIJOEPACDAA.plaflamme@konova.com>
In-Reply-To: <DNEDJIGLNAJOFEMFBJIJOEPACDAA.plaflamme@konova.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200402022204.27124.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Monday 02 February 2004 22:00, Philippe Laflamme wrote:
> I'll look into making the implementation available if you're interested.

I'd be very interested!

Please :)
Timo


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb  3 00:54:21 2004
Return-Path: 
 <lucene-user-return-6960-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 78439 invoked from network); 3 Feb 2004 00:54:21 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 3 Feb 2004 00:54:21 -0000
Received: (qmail 32405 invoked by uid 500); 3 Feb 2004 00:53:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 32353 invoked by uid 500); 3 Feb 2004 00:53:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 32329 invoked from network); 3 Feb 2004 00:53:55 -0000
Received: from unknown (HELO soto.kasei.com) (80.76.206.154)
  by daedalus.apache.org with SMTP; 3 Feb 2004 00:53:55 -0000
Received: by soto.kasei.com (Postfix, from userid 1011)
	id 527F11CC92; Tue,  3 Feb 2004 00:54:03 +0000 (GMT)
Date: Tue, 3 Feb 2004 00:54:03 +0000
From: Tony Bowden <tony-lucene@kasei.com>
To: lucene-user@jakarta.apache.org
Subject: ANNOUNCE: Plucene
Message-ID: <20040203005403.GB14500@soto.kasei.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.5.5.1+cvs20040105i
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Plucene 1.0 has just been released to CPAN, and is available at
  http://search.cpan.org/dist/Plucene/

This is a port of Lucene to Perl, and should mirror the Java version
fairly closely.

More details on the rationale behind Plucene are available at
  http://www.kasei.com/archives/001039.html

Thank you to the Lucene team for a wonderful product. Hopefully Plucene
can help take that to a wider group of developers.

Tony


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb  3 02:17:28 2004
Return-Path: 
 <lucene-user-return-6961-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 18232 invoked from network); 3 Feb 2004 02:17:28 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 3 Feb 2004 02:17:28 -0000
Received: (qmail 48815 invoked by uid 500); 3 Feb 2004 02:16:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 48777 invoked by uid 500); 3 Feb 2004 02:16:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 48677 invoked from network); 3 Feb 2004 02:16:56 -0000
Received: from unknown (HELO smtp02.mrf.mail.rcn.net) (207.172.4.61)
  by daedalus.apache.org with SMTP; 3 Feb 2004 02:16:56 -0000
Received: from 209-6-197-64.c3-0.smr-ubr1.sbo-smr.ma.cable.rcn.com
 ([209.6.197.64] helo=[10.0.10.99])
	by smtp02.mrf.mail.rcn.net with esmtp (Exim 3.35 #4)
	id 1Anq7c-0001IV-00
	for lucene-user@jakarta.apache.org; Mon, 02 Feb 2004 21:17:04 -0500
Subject: Re: ANNOUNCE: Plucene
From: Boris Goldowsky <boris@alum.mit.edu>
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20040203005403.GB14500@soto.kasei.com>
References: <20040203005403.GB14500@soto.kasei.com>
Content-Type: text/plain
Message-Id: <1075774623.12327.76.camel@yuff.moxyledge.org>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.5 (1.4.5-7) 
Date: Mon, 02 Feb 2004 21:17:03 -0500
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Mon, 2004-02-02 at 19:54, Tony Bowden wrote:
> Plucene 1.0 has just been released to CPAN, and is available at
>   http://search.cpan.org/dist/Plucene/
> 
> This is a port of Lucene to Perl, and should mirror the Java version
> fairly closely.

This sounds very interesting.  How does the performance compare to the
java Lucene?

Boris



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb  3 12:12:53 2004
Return-Path: 
 <lucene-user-return-6962-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21065 invoked from network); 3 Feb 2004 12:12:53 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 3 Feb 2004 12:12:53 -0000
Received: (qmail 71000 invoked by uid 500); 3 Feb 2004 12:12:35 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 70910 invoked by uid 500); 3 Feb 2004 12:12:34 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 70833 invoked from network); 3 Feb 2004 12:12:34 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.65)
  by daedalus.apache.org with SMTP; 3 Feb 2004 12:12:34 -0000
Received: (cpmta 8691 invoked from network); 3 Feb 2004 04:12:33 -0800
Received: from 24.51.109.181 (HELO ?192.168.1.100?)
  by smtp.hatcher.net (209.228.32.65) with SMTP; 3 Feb 2004 04:12:33 -0800
X-Sent: 3 Feb 2004 12:12:33 GMT
Mime-Version: 1.0 (Apple Message framework v612)
Content-Transfer-Encoding: 7bit
Message-Id: <3B04719B-5642-11D8-8F40-000393A564E6@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: Lucene List <lucene-dev@jakarta.apache.org>,
 lucene-user@jakarta.apache.org
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Lucene 1.3 FINALly mirrored
Date: Tue, 3 Feb 2004 07:12:26 -0500
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Doug asked me to take care of the logistics of pushing the Lucene 1.3 
FINAL release to the Apache site properly so that it is mirrored 
worldwide.  Last weekend I said the right magic incantations and it 
looks like it has been successful.  So, without further ado, Lucene 1.3 
is now completely official.  To grab it, start at the binary download 
site:

	http://jakarta.apache.org/site/binindex.cgi


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb  3 12:29:15 2004
Return-Path: 
 <lucene-user-return-6963-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 32304 invoked from network); 3 Feb 2004 12:29:15 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 3 Feb 2004 12:29:15 -0000
Received: (qmail 28239 invoked by uid 500); 3 Feb 2004 12:28:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 27992 invoked by uid 500); 3 Feb 2004 12:28:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 27812 invoked from network); 3 Feb 2004 12:28:36 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.64)
  by daedalus.apache.org with SMTP; 3 Feb 2004 12:28:36 -0000
Received: (cpmta 28710 invoked from network); 3 Feb 2004 04:28:36 -0800
Received: from 24.51.109.181 (HELO ?192.168.1.100?)
  by smtp.hatcher.net (209.228.32.64) with SMTP; 3 Feb 2004 04:28:36 -0800
X-Sent: 3 Feb 2004 12:28:36 GMT
In-Reply-To: <3B04719B-5642-11D8-8F40-000393A564E6@ehatchersolutions.com>
References: <3B04719B-5642-11D8-8F40-000393A564E6@ehatchersolutions.com>
Mime-Version: 1.0 (Apple Message framework v612)
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <7AEE786A-5644-11D8-8F40-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
Cc: lucene-user@jakarta.apache.org
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Lucene 1.3 FINALly mirrored
Date: Tue, 3 Feb 2004 07:28:32 -0500
To: "Lucene Developers List" <lucene-dev@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 3, 2004, at 7:12 AM, Erik Hatcher wrote:
> Doug asked me to take care of the logistics of pushing the Lucene 1.3 
> FINAL release to the Apache site properly so that it is mirrored 
> worldwide.  Last weekend I said the right magic incantations and it 
> looks like it has been successful.  So, without further ado, Lucene 
> 1.3 is now completely official.  To grab it, start at the binary 
> download site:
>
> 	http://jakarta.apache.org/site/binindex.cgi

I just became aware of a type I made on the binindex and sourceindex 
pages.  I have corrected it, committed it, and things will be fixed 
when all the mirrors sync up.  If you get a broken link, add "-final" 
after "1.3" in the URL and it'll work.  Sorry 'bout that.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb  3 18:10:36 2004
Return-Path: 
 <lucene-user-return-6964-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58696 invoked from network); 3 Feb 2004 18:10:36 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 3 Feb 2004 18:10:36 -0000
Received: (qmail 2873 invoked by uid 500); 3 Feb 2004 18:10:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2787 invoked by uid 500); 3 Feb 2004 18:10:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2758 invoked from network); 3 Feb 2004 18:10:15 -0000
Received: from unknown (HELO main.gmane.org) (80.91.224.249)
  by daedalus.apache.org with SMTP; 3 Feb 2004 18:10:15 -0000
Received: from root by main.gmane.org with local (Exim 3.35 #1 (Debian))
	id 1Ao506-0006N5-00
	for <lucene-user@jakarta.apache.org>; Tue, 03 Feb 2004 19:10:18 +0100
Received: from 62.245.130.98 ([62.245.130.98])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Tue Feb  3 18:10:18 2004
Received: from dmitri.ilyin by 62.245.130.98 with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Tue Feb  3 18:10:18 2004
X-Injected-Via-Gmane: http://gmane.org/
To: lucene-user@jakarta.apache.org
From: Dmitri Ilyin <dmitri.ilyin@dynamic.de>
Subject: weblogic cluster, index on NFS and locking problem
Date: Tue, 03 Feb 2004 19:09:11 +0100
Lines: 28
Message-ID: <bvonup$5fc$1@sea.gmane.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: 62.245.130.98
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
 rv:1.4) Gecko/20030624
X-Accept-Language: en-us, en
Sender: news <news@sea.gmane.org>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

We run our application on weblogic cluster. the lucene index service 
runs on both server in cluster and they both write to one index 
directory, shared via NFS. We have experenced a problem with commit.lock 
file, that seems not to be deleted and stayed in the index directory, so 
we could not start indexing any more becouse lucene could not 
create/read commit.lock file.

I'm not sure what excatly our problem is. It could be NFS problem or it 
could be our "usage" problem. We are just starting to use lucene and 
could made something wrong.

We use lucene to index and to search documents. Write/read could be 
concurent.

I saw in the list some messages about problems with lock files on NFS 
file system. But i could not realy understand what the problem is.

How can we improve our solution?? What do we have to do excatly to avoid 
problem with stayed commit.lock file???

thaks for any advise

regards

Dmitri



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb  3 22:59:05 2004
Return-Path: 
 <lucene-user-return-6965-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 31636 invoked from network); 3 Feb 2004 22:59:05 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 3 Feb 2004 22:59:05 -0000
Received: (qmail 77546 invoked by uid 500); 3 Feb 2004 22:58:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77516 invoked by uid 500); 3 Feb 2004 22:58:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77494 invoked from network); 3 Feb 2004 22:58:42 -0000
Received: from unknown (HELO mxsf18.cluster1.charter.net) (209.225.28.218)
  by daedalus.apache.org with SMTP; 3 Feb 2004 22:58:42 -0000
Received: from peter (cpe-66-189-44-169.ma.charter.com [66.189.44.169])
	by mxsf18.cluster1.charter.net (8.12.10/8.12.8) with SMTP id i13MuxuL013591
	for <lucene-user@jakarta.apache.org>; Tue, 3 Feb 2004 17:56:59 -0500 (EST)
	(envelope-from peter.keegan@charter.net)
Message-ID: <004c01c3eaa9$06f66710$02a8a8c0@peter>
From: "Peter Keegan" <peter.keegan@charter.net>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <bvonup$5fc$1@sea.gmane.org>
Subject: Re: weblogic cluster, index on NFS and locking problem
Date: Tue, 3 Feb 2004 17:56:58 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Suggestion: make sure the NFS lock daemon (lockd) is running on the NFS
server.

Peter

----- Original Message ----- 
From: "Dmitri Ilyin" <dmitri.ilyin@dynamic.de>
To: <lucene-user@jakarta.apache.org>
Sent: Tuesday, February 03, 2004 1:09 PM
Subject: weblogic cluster, index on NFS and locking problem


> Hi,
>
> We run our application on weblogic cluster. the lucene index service
> runs on both server in cluster and they both write to one index
> directory, shared via NFS. We have experenced a problem with commit.lock
> file, that seems not to be deleted and stayed in the index directory, so
> we could not start indexing any more becouse lucene could not
> create/read commit.lock file.
>
> I'm not sure what excatly our problem is. It could be NFS problem or it
> could be our "usage" problem. We are just starting to use lucene and
> could made something wrong.
>
> We use lucene to index and to search documents. Write/read could be
> concurent.
>
> I saw in the list some messages about problems with lock files on NFS
> file system. But i could not realy understand what the problem is.
>
> How can we improve our solution?? What do we have to do excatly to avoid
> problem with stayed commit.lock file???
>
> thaks for any advise
>
> regards
>
> Dmitri
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb  4 03:01:49 2004
Return-Path: 
 <lucene-user-return-6966-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 43916 invoked from network); 4 Feb 2004 03:01:49 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 4 Feb 2004 03:01:49 -0000
Received: (qmail 5201 invoked by uid 500); 4 Feb 2004 03:01:23 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 5078 invoked by uid 500); 4 Feb 2004 03:01:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 5054 invoked from network); 4 Feb 2004 03:01:22 -0000
Received: from unknown (HELO slc-xchg1.slc.mainstreamdata.com) (209.63.42.32)
  by daedalus.apache.org with SMTP; 4 Feb 2004 03:01:22 -0000
content-class: urn:content-classes:message
Subject: Newbie Phrase Query question
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Tue, 3 Feb 2004 20:01:31 -0700
Message-ID: 
 <A60AC49BA89F4F4D9D86F2B7519111E8040A55@dilbert.mainstreamdata.com>
X-MimeOLE: Produced By Microsoft Exchange V6.0.6487.1
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Newbie Phrase Query question
Thread-Index: AcPqyzCb4Wa2JJTkSmahUCOb7ay0WQ==
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <lucene-user@jakarta.apache.org>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'm having problems searching for an exact match with a phrase.
Essentially, I think my problem is that the tokenizer is tossing the
double quotes around the phrase, tokenizing each word and so I end up
with the document hit I want plus several more I don't (the latter
having some of the words, but not exact matches).  Here's the specifics.


First, I'm using the CJKTokenizer from WebLucene which I believe is a
modified version of the stopword tokenizer enhanced to handle asian
characters (that's according to the header; I don't think the asian
characters have anything to do with my problem). =20

The documents I need to search, for reasons related to the application,
often end up with hyphenated words in critical places.  For example, the
original text to be indexed might be something like "this is Bill-Fred".

When this is tokenized initially, I end up with two tokens "bill" and
"fred" (the tokenizer converts to lower case;  "this" and "is" are
removed as stop words; the hyphen is removed by the tokenizer).  So far
so good.

I pass the phrase I want an exact match on to a QueryParser in quotes
(so "Bill-Fred" is the search string; quotes included).  I watched the
output of the tokenizer from the query parser and it is clearly tossing
the double quotes and tokenizing each word separately.  It passes the
words "bill" and "fred" as separate entities back to the QueryParser.
Looking at the tokenizer code, I understand why.  Obviously, that's why
I end up with documents that contain the words even if they are not
exact matches.

Here's the question.  I can modify the CJKTokenizer so that when it sees
"Fred-Bill" it creates a single token that looks like "fred bill".
Would this now work?  Is this the right thing to do?  I realize this
means that I'd hit on "Fred-Bill" and "Fred Bill", but I can probably
live with that. =20

However, it also seems like I now have a problem if the original text
contains a quotation from someone that happens to be part of the
document (i.e., the original text has double quotes in it).  It seems
like I need to ignore quotes for the initial index, but use them to
build phrases when I'm tokenizing a search string in the QueryParser.
Do I need two tokenizers?

Does any of this make any sense?  I'm not quite sure what the
QueryParser wants to see to properly do a phrase match.  Is QueryParser
the wrong thing to be using here?  Suggestions or comments?

Scott

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb  4 03:26:23 2004
Return-Path: 
 <lucene-user-return-6967-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 53891 invoked from network); 4 Feb 2004 03:26:23 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 4 Feb 2004 03:26:23 -0000
Received: (qmail 61723 invoked by uid 500); 4 Feb 2004 03:25:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 61537 invoked by uid 500); 4 Feb 2004 03:25:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 61515 invoked from network); 4 Feb 2004 03:25:56 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.72)
  by daedalus.apache.org with SMTP; 4 Feb 2004 03:25:56 -0000
Received: (cpmta 2085 invoked from network); 3 Feb 2004 19:26:04 -0800
Received: from 24.51.109.181 (HELO ?192.168.1.100?)
  by smtp.hatcher.net (209.228.32.72) with SMTP; 3 Feb 2004 19:26:04 -0800
X-Sent: 4 Feb 2004 03:26:04 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: 
 <A60AC49BA89F4F4D9D86F2B7519111E8040A55@dilbert.mainstreamdata.com>
References: 
 <A60AC49BA89F4F4D9D86F2B7519111E8040A55@dilbert.mainstreamdata.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <D8FC56BB-56C1-11D8-B2F3-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Newbie Phrase Query question
Date: Tue, 3 Feb 2004 22:25:57 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The best suggestion I have is to look at the code in my first java.net 
article (Intro Lucene) and borrow the Analyzer utility code to see what 
happens to a sample string as it is analyzed.  Then pass that same 
string to QueryParser (along with the same analyzer) and see what the 
Query.toString(<default field name>) returns.  This should shed light 
on the issue more clearly.

	Erik


On Feb 3, 2004, at 10:01 PM, Scott Smith wrote:

> I'm having problems searching for an exact match with a phrase.
> Essentially, I think my problem is that the tokenizer is tossing the
> double quotes around the phrase, tokenizing each word and so I end up
> with the document hit I want plus several more I don't (the latter
> having some of the words, but not exact matches).  Here's the 
> specifics.
>
>
> First, I'm using the CJKTokenizer from WebLucene which I believe is a
> modified version of the stopword tokenizer enhanced to handle asian
> characters (that's according to the header; I don't think the asian
> characters have anything to do with my problem).
>
> The documents I need to search, for reasons related to the application,
> often end up with hyphenated words in critical places.  For example, 
> the
> original text to be indexed might be something like "this is 
> Bill-Fred".
>
> When this is tokenized initially, I end up with two tokens "bill" and
> "fred" (the tokenizer converts to lower case;  "this" and "is" are
> removed as stop words; the hyphen is removed by the tokenizer).  So far
> so good.
>
> I pass the phrase I want an exact match on to a QueryParser in quotes
> (so "Bill-Fred" is the search string; quotes included).  I watched the
> output of the tokenizer from the query parser and it is clearly tossing
> the double quotes and tokenizing each word separately.  It passes the
> words "bill" and "fred" as separate entities back to the QueryParser.
> Looking at the tokenizer code, I understand why.  Obviously, that's why
> I end up with documents that contain the words even if they are not
> exact matches.
>
> Here's the question.  I can modify the CJKTokenizer so that when it 
> sees
> "Fred-Bill" it creates a single token that looks like "fred bill".
> Would this now work?  Is this the right thing to do?  I realize this
> means that I'd hit on "Fred-Bill" and "Fred Bill", but I can probably
> live with that.
>
> However, it also seems like I now have a problem if the original text
> contains a quotation from someone that happens to be part of the
> document (i.e., the original text has double quotes in it).  It seems
> like I need to ignore quotes for the initial index, but use them to
> build phrases when I'm tokenizing a search string in the QueryParser.
> Do I need two tokenizers?
>
> Does any of this make any sense?  I'm not quite sure what the
> QueryParser wants to see to properly do a phrase match.  Is QueryParser
> the wrong thing to be using here?  Suggestions or comments?
>
> Scott
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb  4 09:46:14 2004
Return-Path: 
 <lucene-user-return-6968-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 27084 invoked from network); 4 Feb 2004 09:46:14 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 4 Feb 2004 09:46:14 -0000
Received: (qmail 69068 invoked by uid 500); 4 Feb 2004 09:45:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69039 invoked by uid 500); 4 Feb 2004 09:45:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 68995 invoked from network); 4 Feb 2004 09:45:37 -0000
Received: from unknown (HELO main.gmane.org) (80.91.224.249)
  by daedalus.apache.org with SMTP; 4 Feb 2004 09:45:37 -0000
Received: from list by main.gmane.org with local (Exim 3.35 #1 (Debian))
	id 1AoJbS-0007tV-00
	for <lucene-user@jakarta.apache.org>; Wed, 04 Feb 2004 10:45:50 +0100
Received: from 62.245.130.98 ([62.245.130.98])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Wed Feb  4 09:45:50 2004
Received: from dmitri.ilyin by 62.245.130.98 with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Wed Feb  4 09:45:50 2004
X-Injected-Via-Gmane: http://gmane.org/
To: lucene-user@jakarta.apache.org
From: Dmitri Ilyin <dmitri.ilyin@dynamic.de>
Subject: Re: weblogic cluster, index on NFS and locking problem
Date: Wed, 04 Feb 2004 10:48:46 +0100
Lines: 52
Message-ID: <bvqf0d$q2i$1@sea.gmane.org>
References: <bvonup$5fc$1@sea.gmane.org>
 <004c01c3eaa9$06f66710$02a8a8c0@peter>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: 62.245.130.98
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
 rv:1.4) Gecko/20030624
X-Accept-Language: en-us, en
In-Reply-To: <004c01c3eaa9$06f66710$02a8a8c0@peter>
Sender: news <news@sea.gmane.org>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

What is it good for???
unfortunately i don't have any access to NFS server. It runs at 
customers in production environment.
> Suggestion: make sure the NFS lock daemon (lockd) is running on the NFS
> server.
> 
> Peter
> 
> ----- Original Message ----- 
> From: "Dmitri Ilyin" <dmitri.ilyin@dynamic.de>
> To: <lucene-user@jakarta.apache.org>
> Sent: Tuesday, February 03, 2004 1:09 PM
> Subject: weblogic cluster, index on NFS and locking problem
> 
> 
> 
>>Hi,
>>
>>We run our application on weblogic cluster. the lucene index service
>>runs on both server in cluster and they both write to one index
>>directory, shared via NFS. We have experenced a problem with commit.lock
>>file, that seems not to be deleted and stayed in the index directory, so
>>we could not start indexing any more becouse lucene could not
>>create/read commit.lock file.
>>
>>I'm not sure what excatly our problem is. It could be NFS problem or it
>>could be our "usage" problem. We are just starting to use lucene and
>>could made something wrong.
>>
>>We use lucene to index and to search documents. Write/read could be
>>concurent.
>>
>>I saw in the list some messages about problems with lock files on NFS
>>file system. But i could not realy understand what the problem is.
>>
>>How can we improve our solution?? What do we have to do excatly to avoid
>>problem with stayed commit.lock file???
>>
>>thaks for any advise
>>
>>regards
>>
>>Dmitri
>>
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb  4 10:01:13 2004
Return-Path: 
 <lucene-user-return-6969-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 36764 invoked from network); 4 Feb 2004 10:01:13 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 4 Feb 2004 10:01:13 -0000
Received: (qmail 16092 invoked by uid 500); 4 Feb 2004 10:00:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 15933 invoked by uid 500); 4 Feb 2004 10:00:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 15903 invoked from network); 4 Feb 2004 10:00:37 -0000
Received: from unknown (HELO smtprelay01.ispgateway.de) (62.67.200.156)
  by daedalus.apache.org with SMTP; 4 Feb 2004 10:00:37 -0000
Received: (qmail 5188 invoked from network); 4 Feb 2004 10:00:49 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.221.195])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 4 Feb 2004 10:00:49 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 5A5341772
	for <lucene-user@jakarta.apache.org>; Wed,  4 Feb 2004 11:00:49 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: HTMLDocument
Date: Wed, 4 Feb 2004 11:00:48 +0100
User-Agent: KMail/1.6
References: <200402011219.51189.lucene@nitwit.de>
 <1075714893.6196.0.camel@localhost.localdomain>
In-Reply-To: <1075714893.6196.0.camel@localhost.localdomain>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200402041100.48942.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Monday 02 February 2004 10:41, John Moylan wrote:
> Another easy HTML parser is HTMLparser.sf.net

This one doesn't seem to be a SAX parser...:-\

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb  4 12:36:56 2004
Return-Path: 
 <lucene-user-return-6970-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 31133 invoked from network); 4 Feb 2004 12:36:56 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 4 Feb 2004 12:36:56 -0000
Received: (qmail 54960 invoked by uid 500); 4 Feb 2004 12:36:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 54927 invoked by uid 500); 4 Feb 2004 12:36:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 54900 invoked from network); 4 Feb 2004 12:36:42 -0000
Received: from unknown (HELO dougal.magus.co.uk) (193.130.109.2)
  by daedalus.apache.org with SMTP; 4 Feb 2004 12:36:42 -0000
X-MimeOLE: Produced By Microsoft Exchange V6.0.6249.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: weblogic cluster, index on NFS and locking problem
Date: Wed, 4 Feb 2004 12:33:37 -0000
Message-ID: <51194813DA293D4CA3FC4AD392F8D99305B0F359@dougal.magus.co.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: weblogic cluster, index on NFS and locking problem
Thread-Index: AcPrA0U9jAavIBdQRgua5YY9yd1T4QAFnO3A
From: "David Townsend" <david.townsend@magus.co.uk>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

We work on NFS and have had major problems with locking, which often =
leads to the indices becoming corrupt.  Our solution was to replace file =
locking with a database system.   I can release the code but I'm not =
sure of the process or where to put it.  It basically two classes one =
that extends the Directory class and one that deals with the database =
interaction.

David Townsend

-----Original Message-----
From: Dmitri Ilyin [mailto:dmitri.ilyin@dynamic.de]
Sent: 04 February 2004 09:49
To: lucene-user@jakarta.apache.org
Subject: Re: weblogic cluster, index on NFS and locking problem


What is it good for???
unfortunately i don't have any access to NFS server. It runs at=20
customers in production environment.
> Suggestion: make sure the NFS lock daemon (lockd) is running on the =
NFS
> server.
>=20
> Peter
>=20
> ----- Original Message -----=20
> From: "Dmitri Ilyin" <dmitri.ilyin@dynamic.de>
> To: <lucene-user@jakarta.apache.org>
> Sent: Tuesday, February 03, 2004 1:09 PM
> Subject: weblogic cluster, index on NFS and locking problem
>=20
>=20
>=20
>>Hi,
>>
>>We run our application on weblogic cluster. the lucene index service
>>runs on both server in cluster and they both write to one index
>>directory, shared via NFS. We have experenced a problem with =
commit.lock
>>file, that seems not to be deleted and stayed in the index directory, =
so
>>we could not start indexing any more becouse lucene could not
>>create/read commit.lock file.
>>
>>I'm not sure what excatly our problem is. It could be NFS problem or =
it
>>could be our "usage" problem. We are just starting to use lucene and
>>could made something wrong.
>>
>>We use lucene to index and to search documents. Write/read could be
>>concurent.
>>
>>I saw in the list some messages about problems with lock files on NFS
>>file system. But i could not realy understand what the problem is.
>>
>>How can we improve our solution?? What do we have to do excatly to =
avoid
>>problem with stayed commit.lock file???
>>
>>thaks for any advise
>>
>>regards
>>
>>Dmitri
>>
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb  4 12:41:02 2004
Return-Path: 
 <lucene-user-return-6971-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 34065 invoked from network); 4 Feb 2004 12:41:02 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 4 Feb 2004 12:41:02 -0000
Received: (qmail 67192 invoked by uid 500); 4 Feb 2004 12:40:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 67151 invoked by uid 500); 4 Feb 2004 12:40:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 66985 invoked from network); 4 Feb 2004 12:40:35 -0000
Received: from unknown (HELO web12705.mail.yahoo.com) (216.136.173.242)
  by daedalus.apache.org with SMTP; 4 Feb 2004 12:40:35 -0000
Message-ID: <20040204124036.12854.qmail@web12705.mail.yahoo.com>
Received: from [194.152.209.3] by web12705.mail.yahoo.com via HTTP;
 Wed, 04 Feb 2004 04:40:36 PST
Date: Wed, 4 Feb 2004 04:40:36 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: RE: weblogic cluster, index on NFS and locking problem
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <51194813DA293D4CA3FC4AD392F8D99305B0F359@dougal.magus.co.uk>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The best way to submit contributions is via Bugzilla.
For instance, here is the current queue of contributed code, patches,
etc.:
http://issues.apache.org/bugzilla/buglist.cgi?bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&email1=&emailtype1=substring&emailassigned_to1=1&email2=&emailtype2=substring&emailreporter2=1&bugidtype=include&bug_id=&changedin=&votes=&chfieldfrom=&chfieldto=Now&chfieldvalue=&product=Lucene&short_desc=%5BPATCH%5D&short_desc_type=allwordssubstr&long_desc=&long_desc_type=allwordssubstr&bug_file_loc=&bug_file_loc_type=allwordssubstr&keywords=&keywords_type=anywords&field0-0-0=noop&type0-0-0=noop&value0-0-0=&cmdtype=doit&order=%27Importance%27

The process consists of:
- opening a Bugzilla account
- Opening a 'bug' in Bugzilla with the Subject that starts with
"[PATCH]"
- Attaching the contribution (as ZIP of patches or as diff -u style
patch, if it's a smaller patch)

Thanks,
Otis

--- David Townsend <david.townsend@magus.co.uk> wrote:
> We work on NFS and have had major problems with locking, which often
> leads to the indices becoming corrupt.  Our solution was to replace
> file locking with a database system.   I can release the code but I'm
> not sure of the process or where to put it.  It basically two classes
> one that extends the Directory class and one that deals with the
> database interaction.
> 
> David Townsend
> 
> -----Original Message-----
> From: Dmitri Ilyin [mailto:dmitri.ilyin@dynamic.de]
> Sent: 04 February 2004 09:49
> To: lucene-user@jakarta.apache.org
> Subject: Re: weblogic cluster, index on NFS and locking problem
> 
> 
> What is it good for???
> unfortunately i don't have any access to NFS server. It runs at 
> customers in production environment.
> > Suggestion: make sure the NFS lock daemon (lockd) is running on the
> NFS
> > server.
> > 
> > Peter
> > 
> > ----- Original Message ----- 
> > From: "Dmitri Ilyin" <dmitri.ilyin@dynamic.de>
> > To: <lucene-user@jakarta.apache.org>
> > Sent: Tuesday, February 03, 2004 1:09 PM
> > Subject: weblogic cluster, index on NFS and locking problem
> > 
> > 
> > 
> >>Hi,
> >>
> >>We run our application on weblogic cluster. the lucene index
> service
> >>runs on both server in cluster and they both write to one index
> >>directory, shared via NFS. We have experenced a problem with
> commit.lock
> >>file, that seems not to be deleted and stayed in the index
> directory, so
> >>we could not start indexing any more becouse lucene could not
> >>create/read commit.lock file.
> >>
> >>I'm not sure what excatly our problem is. It could be NFS problem
> or it
> >>could be our "usage" problem. We are just starting to use lucene
> and
> >>could made something wrong.
> >>
> >>We use lucene to index and to search documents. Write/read could be
> >>concurent.
> >>
> >>I saw in the list some messages about problems with lock files on
> NFS
> >>file system. But i could not realy understand what the problem is.
> >>
> >>How can we improve our solution?? What do we have to do excatly to
> avoid
> >>problem with stayed commit.lock file???
> >>
> >>thaks for any advise
> >>
> >>regards
> >>
> >>Dmitri
> >>
> >>
> >>
>
>>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> >>
> >>
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb  4 13:39:28 2004
Return-Path: 
 <lucene-user-return-6972-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 71888 invoked from network); 4 Feb 2004 13:39:28 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 4 Feb 2004 13:39:28 -0000
Received: (qmail 94379 invoked by uid 500); 4 Feb 2004 13:39:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94347 invoked by uid 500); 4 Feb 2004 13:39:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94298 invoked from network); 4 Feb 2004 13:39:12 -0000
Received: from unknown (HELO smtprelay01.ispgateway.de) (62.67.200.156)
  by daedalus.apache.org with SMTP; 4 Feb 2004 13:39:12 -0000
Received: (qmail 31878 invoked from network); 4 Feb 2004 13:39:12 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.221.195])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 4 Feb 2004 13:39:12 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id AEB0E210E
	for <lucene-user@jakarta.apache.org>; Wed,  4 Feb 2004 14:39:13 +0100 (CET)
From: lucene@nitwit.de
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: [newbie] Hit quality rating
Date: Wed, 4 Feb 2004 14:39:13 +0100
User-Agent: KMail/1.6
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Message-Id: <200402041439.13113.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi!

Is there a hit quality rating in Lucene or are there only hits and non-hits?

Timo

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb  4 13:44:44 2004
Return-Path: 
 <lucene-user-return-6973-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 75001 invoked from network); 4 Feb 2004 13:44:44 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 4 Feb 2004 13:44:44 -0000
Received: (qmail 16380 invoked by uid 500); 4 Feb 2004 13:44:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16321 invoked by uid 500); 4 Feb 2004 13:44:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16276 invoked from network); 4 Feb 2004 13:44:31 -0000
Received: from unknown (HELO main.gmane.org) (80.91.224.249)
  by daedalus.apache.org with SMTP; 4 Feb 2004 13:44:31 -0000
Received: from list by main.gmane.org with local (Exim 3.35 #1 (Debian))
	id 1AoNKS-0002FI-00
	for <lucene-user@jakarta.apache.org>; Wed, 04 Feb 2004 14:44:32 +0100
Received: from 62.245.130.98 ([62.245.130.98])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Wed Feb  4 13:44:32 2004
Received: from dmitri.ilyin by 62.245.130.98 with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Wed Feb  4 13:44:32 2004
X-Injected-Via-Gmane: http://gmane.org/
To: lucene-user@jakarta.apache.org
From: Dmitri Ilyin <dmitri.ilyin@dynamic.de>
Subject: Re: weblogic cluster, index on NFS and locking problem
Date: Wed, 04 Feb 2004 14:47:27 +0100
Lines: 78
Message-ID: <4020F7EF.7090005@dynamic.de>
References: <51194813DA293D4CA3FC4AD392F8D99305B0F359@dougal.magus.co.uk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: 62.245.130.98
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
 rv:1.4) Gecko/20030624
X-Accept-Language: en-us, en
In-Reply-To: <51194813DA293D4CA3FC4AD392F8D99305B0F359@dougal.magus.co.uk>
Sender: news <news@sea.gmane.org>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

David please let me know if you submit your code. So we could take a 
look at it. It sounds very good for us.

Dmitri


> We work on NFS and have had major problems with locking, which often leads to the indices becoming corrupt.  Our solution was to replace file locking with a database system.   I can release the code but I'm not sure of the process or where to put it.  It basically two classes one that extends the Directory class and one that deals with the database interaction.
> 
> David Townsend
> 
> -----Original Message-----
> From: Dmitri Ilyin [mailto:dmitri.ilyin@dynamic.de]
> Sent: 04 February 2004 09:49
> To: lucene-user@jakarta.apache.org
> Subject: Re: weblogic cluster, index on NFS and locking problem
> 
> 
> What is it good for???
> unfortunately i don't have any access to NFS server. It runs at 
> customers in production environment.
> 
>>Suggestion: make sure the NFS lock daemon (lockd) is running on the NFS
>>server.
>>
>>Peter
>>
>>----- Original Message ----- 
>>From: "Dmitri Ilyin" <dmitri.ilyin@dynamic.de>
>>To: <lucene-user@jakarta.apache.org>
>>Sent: Tuesday, February 03, 2004 1:09 PM
>>Subject: weblogic cluster, index on NFS and locking problem
>>
>>
>>
>>
>>>Hi,
>>>
>>>We run our application on weblogic cluster. the lucene index service
>>>runs on both server in cluster and they both write to one index
>>>directory, shared via NFS. We have experenced a problem with commit.lock
>>>file, that seems not to be deleted and stayed in the index directory, so
>>>we could not start indexing any more becouse lucene could not
>>>create/read commit.lock file.
>>>
>>>I'm not sure what excatly our problem is. It could be NFS problem or it
>>>could be our "usage" problem. We are just starting to use lucene and
>>>could made something wrong.
>>>
>>>We use lucene to index and to search documents. Write/read could be
>>>concurent.
>>>
>>>I saw in the list some messages about problems with lock files on NFS
>>>file system. But i could not realy understand what the problem is.
>>>
>>>How can we improve our solution?? What do we have to do excatly to avoid
>>>problem with stayed commit.lock file???
>>>
>>>thaks for any advise
>>>
>>>regards
>>>
>>>Dmitri
>>>
>>>
>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>>
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb  4 13:48:26 2004
Return-Path: 
 <lucene-user-return-6974-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 77236 invoked from network); 4 Feb 2004 13:48:26 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 4 Feb 2004 13:48:26 -0000
Received: (qmail 33747 invoked by uid 500); 4 Feb 2004 13:48:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 33553 invoked by uid 500); 4 Feb 2004 13:48:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 33536 invoked from network); 4 Feb 2004 13:48:11 -0000
Received: from unknown (HELO web12703.mail.yahoo.com) (216.136.173.240)
  by daedalus.apache.org with SMTP; 4 Feb 2004 13:48:11 -0000
Message-ID: <20040204134812.92524.qmail@web12703.mail.yahoo.com>
Received: from [194.152.209.3] by web12703.mail.yahoo.com via HTTP;
 Wed, 04 Feb 2004 05:48:12 PST
Date: Wed, 4 Feb 2004 05:48:12 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: [newbie] Hit quality rating
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <200402041439.13113.lucene@nitwit.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

There is score.
Look at Similarity class.

Otis

--- lucene@nitwit.de wrote:
> Hi!
> 
> Is there a hit quality rating in Lucene or are there only hits and
> non-hits?
> 
> Timo
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb  4 14:08:39 2004
Return-Path: 
 <lucene-user-return-6975-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 92739 invoked from network); 4 Feb 2004 14:08:39 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 4 Feb 2004 14:08:39 -0000
Received: (qmail 27251 invoked by uid 500); 4 Feb 2004 14:07:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 27223 invoked by uid 500); 4 Feb 2004 14:07:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 27180 invoked from network); 4 Feb 2004 14:07:42 -0000
Received: from unknown (HELO smtprelay02.ispgateway.de) (62.67.200.157)
  by daedalus.apache.org with SMTP; 4 Feb 2004 14:07:42 -0000
Received: (qmail 24611 invoked from network); 4 Feb 2004 14:07:42 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.221.195])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 4 Feb 2004 14:07:42 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 6D65C210E
	for <lucene-user@jakarta.apache.org>; Wed,  4 Feb 2004 15:07:44 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: [newbie] Hit quality rating
Date: Wed, 4 Feb 2004 15:07:43 +0100
User-Agent: KMail/1.6
References: <20040204134812.92524.qmail@web12703.mail.yahoo.com>
In-Reply-To: <20040204134812.92524.qmail@web12703.mail.yahoo.com>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200402041507.43821.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wednesday 04 February 2004 14:48, Otis Gospodnetic wrote:
> There is score.

Oops, you are right Hits.score(). But it seems I have to implement a sorting 
iterator on my own :-\

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb  4 14:14:53 2004
Return-Path: 
 <lucene-user-return-6976-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 97250 invoked from network); 4 Feb 2004 14:14:53 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 4 Feb 2004 14:14:53 -0000
Received: (qmail 56385 invoked by uid 500); 4 Feb 2004 14:14:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 56276 invoked by uid 500); 4 Feb 2004 14:14:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 56260 invoked from network); 4 Feb 2004 14:14:37 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.83)
  by daedalus.apache.org with SMTP; 4 Feb 2004 14:14:37 -0000
Received: (cpmta 17325 invoked from network); 4 Feb 2004 06:14:38 -0800
Received: from 128.143.135.76 (HELO ?128.143.135.76?)
  by smtp.hatcher.net (209.228.32.83) with SMTP; 4 Feb 2004 06:14:38 -0800
X-Sent: 4 Feb 2004 14:14:38 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <200402041507.43821.lucene@nitwit.de>
References: <20040204134812.92524.qmail@web12703.mail.yahoo.com>
 <200402041507.43821.lucene@nitwit.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <75D1B1BE-571C-11D8-B14D-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: [newbie] Hit quality rating
Date: Wed, 4 Feb 2004 09:14:35 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 4, 2004, at 9:07 AM, lucene@nitwit.de wrote:
> On Wednesday 04 February 2004 14:48, Otis Gospodnetic wrote:
>> There is score.
>
> Oops, you are right Hits.score(). But it seems I have to implement a 
> sorting
> iterator on my own :-\

Well, the original design is to have hits sorted by score.... you want 
the most relevant first.  Sorting defeats the purpose of a score in 
many respects.

But in the latest CVS (unreleased, must build it yourself) version of 
Lucene, a very slick contribution has been added to sort by an integer 
field.  Other datatypes are in the works.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb  4 14:28:47 2004
Return-Path: 
 <lucene-user-return-6977-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 15304 invoked from network); 4 Feb 2004 14:28:47 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 4 Feb 2004 14:28:47 -0000
Received: (qmail 15514 invoked by uid 500); 4 Feb 2004 14:28:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 15479 invoked by uid 500); 4 Feb 2004 14:28:31 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 15428 invoked from network); 4 Feb 2004 14:28:30 -0000
Received: from unknown (HELO expasy-ng.isb-sib.ch) (192.33.215.142)
  by daedalus.apache.org with SMTP; 4 Feb 2004 14:28:30 -0000
Received: from caliente (router.isb-sib.ch [192.33.215.254])
	(authenticated bits=0)
	by expasy-ng.isb-sib.ch (8.12.10/8.12.8) with ESMTP id i14ESSbs012065
	for <lucene-user@jakarta.apache.org>; Wed, 4 Feb 2004 15:28:28 +0100
Message-ID: <003701c3eb2b$2bdf2030$c300000a@caliente>
From: "Eric Jain" <Eric.Jain@isb-sib.ch>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20040204134812.92524.qmail@web12703.mail.yahoo.com>
 <200402041507.43821.lucene@nitwit.de>
 <75D1B1BE-571C-11D8-B14D-000393A564E6@ehatchersolutions.com>
Subject: Re: [newbie] Hit quality rating
Date: Wed, 4 Feb 2004 15:28:34 +0100
Organization: Swiss Institute of Bioinformatics
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-sib-MailScanner-Information: Please contact the ISP for more information
X-sib-MailScanner: Found to be clean
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> But in the latest CVS (unreleased, must build it yourself) version of
> Lucene, a very slick contribution has been added to sort by an integer
> field.  Other datatypes are in the works.

Excellent!

I imagine support for 'long' fields won't be long off. (Stupid pun...)

Do you already know if there is any significant impact on performance
(positive or negative) when using a field rather than the score for
sorting?

--
Eric Jain


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb  4 17:22:07 2004
Return-Path: 
 <lucene-user-return-6978-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 27065 invoked from network); 4 Feb 2004 17:22:07 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 4 Feb 2004 17:22:07 -0000
Received: (qmail 33444 invoked by uid 500); 4 Feb 2004 17:21:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 33279 invoked by uid 500); 4 Feb 2004 17:21:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 33218 invoked from network); 4 Feb 2004 17:21:37 -0000
Received: from unknown (HELO hotmail.com) (64.4.27.77)
  by daedalus.apache.org with SMTP; 4 Feb 2004 17:21:37 -0000
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Wed, 4 Feb 2004 09:21:41 -0800
Received: from 200.214.14.1 by by8fd.bay8.hotmail.msn.com with HTTP;
	Wed, 04 Feb 2004 17:21:40 GMT
X-Originating-IP: [200.214.14.1]
X-Originating-Email: [william_wws@hotmail.com]
X-Sender: william_wws@hotmail.com
From: "William W" <william_wws@hotmail.com>
To: lucene-user@jakarta.apache.org
Bcc: 
Subject: Lucene Book
Date: Wed, 04 Feb 2004 17:21:40 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
Message-ID: <BAY8-F77BDfVfMs5f0J00007515@hotmail.com>
X-OriginalArrivalTime: 04 Feb 2004 17:21:41.0183 (UTC)
 FILETIME=[5A992CF0:01C3EB43]
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hi Erik,
How is the book ? ;)
William.

_________________________________________________________________
Check out the new MSN 9 Dial-up � fast & reliable Internet access with prime 
features! http://join.msn.com/?pgmarket=en-us&page=dialup/home&ST=1


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb  4 18:19:31 2004
Return-Path: 
 <lucene-user-return-6979-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 63762 invoked from network); 4 Feb 2004 18:19:31 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 4 Feb 2004 18:19:31 -0000
Received: (qmail 93789 invoked by uid 500); 4 Feb 2004 18:18:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 93717 invoked by uid 500); 4 Feb 2004 18:18:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 93524 invoked from network); 4 Feb 2004 18:18:11 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.65)
  by daedalus.apache.org with SMTP; 4 Feb 2004 18:18:11 -0000
Received: (cpmta 10186 invoked from network); 4 Feb 2004 10:18:14 -0800
Received: from 128.143.135.76 (HELO ?128.143.135.76?)
  by smtp.hatcher.net (209.228.32.65) with SMTP; 4 Feb 2004 10:18:14 -0800
X-Sent: 4 Feb 2004 18:18:14 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <BAY8-F77BDfVfMs5f0J00007515@hotmail.com>
References: <BAY8-F77BDfVfMs5f0J00007515@hotmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <7B52111C-573E-11D8-BD77-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Lucene Book
Date: Wed, 4 Feb 2004 13:18:07 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 4, 2004, at 12:21 PM, William W wrote:
> Hi Erik,
> How is the book ? ;)
> William.

:)

Otis and I are burning the midnight oil to get this thing done as soon 
as possible.  We are probably 3/4 done with the manuscript.  We've been 
through one review cycle.  The bulk should be done by the end of March 
leaving it up to the sluggish publishing process before it hits the 
shelves.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb  4 18:53:38 2004
Return-Path: 
 <lucene-user-return-6980-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 85639 invoked from network); 4 Feb 2004 18:53:38 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 4 Feb 2004 18:53:38 -0000
Received: (qmail 47287 invoked by uid 500); 4 Feb 2004 18:53:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 47253 invoked by uid 500); 4 Feb 2004 18:53:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 47206 invoked from network); 4 Feb 2004 18:53:13 -0000
Received: from unknown (HELO hotmail.com) (64.4.27.17)
  by daedalus.apache.org with SMTP; 4 Feb 2004 18:53:13 -0000
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Wed, 4 Feb 2004 10:53:18 -0800
Received: from 200.214.14.1 by by8fd.bay8.hotmail.msn.com with HTTP;
	Wed, 04 Feb 2004 18:53:17 GMT
X-Originating-IP: [200.214.14.1]
X-Originating-Email: [william_wws@hotmail.com]
X-Sender: william_wws@hotmail.com
From: "William W" <william_wws@hotmail.com>
To: lucene-user@jakarta.apache.org
Bcc: 
Subject: Re: Lucene Book
Date: Wed, 04 Feb 2004 18:53:17 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
Message-ID: <BAY8-F17wv3YQD1wumT0003bdcf@hotmail.com>
X-OriginalArrivalTime: 04 Feb 2004 18:53:18.0197 (UTC)
 FILETIME=[2712F250:01C3EB50]
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Erik,

I'm very anxious ! :)

Thanks !!

William.

>From: Erik Hatcher <erik@ehatchersolutions.com>
>Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>Subject: Re: Lucene Book
>Date: Wed, 4 Feb 2004 13:18:07 -0500
>
>On Feb 4, 2004, at 12:21 PM, William W wrote:
>>Hi Erik,
>>How is the book ? ;)
>>William.
>
>:)
>
>Otis and I are burning the midnight oil to get this thing done as soon as 
>possible.  We are probably 3/4 done with the manuscript.  We've been 
>through one review cycle.  The bulk should be done by the end of March 
>leaving it up to the sluggish publishing process before it hits the 
>shelves.
>
>	Erik
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

_________________________________________________________________
Let the new MSN Premium Internet Software make the most of your high-speed 
experience. http://join.msn.com/?pgmarket=en-us&page=byoa/prem&ST=1


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb  4 23:38:59 2004
Return-Path: 
 <lucene-user-return-6981-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 3727 invoked from network); 4 Feb 2004 23:38:59 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 4 Feb 2004 23:38:59 -0000
Received: (qmail 99802 invoked by uid 500); 4 Feb 2004 23:38:33 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 99744 invoked by uid 500); 4 Feb 2004 23:38:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 99718 invoked from network); 4 Feb 2004 23:38:32 -0000
Received: from unknown (HELO web11506.mail.yahoo.com) (216.136.172.38)
  by daedalus.apache.org with SMTP; 4 Feb 2004 23:38:32 -0000
Message-ID: <20040204233839.51209.qmail@web11506.mail.yahoo.com>
Received: from [171.75.59.184] by web11506.mail.yahoo.com via HTTP;
 Wed, 04 Feb 2004 15:38:39 PST
Date: Wed, 4 Feb 2004 15:38:39 -0800 (PST)
From: Caroline Jen <jiapei_jen@yahoo.com>
Subject: Need Advices and Help
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I am trying to build message inboxes for all
registered members of a web site.  Therefore, each
thread (i.e. under a certain discussion topic) can
have several postings.  And each registered member's
inbox showes a number of threads.

post receiver (register member) --> threads --> posts

I have figured out all the properties of a thread;
such as threadID, receiver, sender,
lastPostMemberName, threadCreationDate,
threadLastPostDate, threadViewCount, threadReplyCount,
..., etc.

I have also figured out all the properties of a
posting; such as postID, parentPostID, threadID,
receiver, sender, lastEditMemberName, postTopic,
postBody, postCreationDate, postLastEditDate, ...,
etc.

I want to use the Lucene to store and search threads
and postings.

What should be the "key"?  What is the proper way to
store messages so that I can list threads when a
registered member wants to view his/her inbox?

__________________________________
Do you Yahoo!?
Yahoo! SiteBuilder - Free web site building tool. Try it!
http://webhosting.yahoo.com/ps/sb/

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb  5 12:00:19 2004
Return-Path: 
 <lucene-user-return-6982-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 18227 invoked from network); 5 Feb 2004 12:00:19 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 5 Feb 2004 12:00:19 -0000
Received: (qmail 24647 invoked by uid 500); 5 Feb 2004 11:59:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 24564 invoked by uid 500); 5 Feb 2004 11:59:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 24467 invoked from network); 5 Feb 2004 11:59:49 -0000
Received: from unknown (HELO web12708.mail.yahoo.com) (216.136.173.245)
  by daedalus.apache.org with SMTP; 5 Feb 2004 11:59:49 -0000
Message-ID: <20040205115949.24754.qmail@web12708.mail.yahoo.com>
Received: from [194.152.216.223] by web12708.mail.yahoo.com via HTTP;
 Thu, 05 Feb 2004 03:59:49 PST
Date: Thu, 5 Feb 2004 03:59:49 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Need Advices and Help
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20040204233839.51209.qmail@web11506.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I believe it would be something like Message-ID or 
--- Caroline Jen <jiapei_jen@yahoo.com> wrote:
> I am trying to build message inboxes for all
> registered members of a web site.  Therefore, each
> thread (i.e. under a certain discussion topic) can
> have several postings.  And each registered member's
> inbox showes a number of threads.
> 
> post receiver (register member) --> threads --> posts
> 
> I have figured out all the properties of a thread;
> such as threadID, receiver, sender,
> lastPostMemberName, threadCreationDate,
> threadLastPostDate, threadViewCount, threadReplyCount,
> ..., etc.
> 
> I have also figured out all the properties of a
> posting; such as postID, parentPostID, threadID,
> receiver, sender, lastEditMemberName, postTopic,
> postBody, postCreationDate, postLastEditDate, ...,
> etc.
> 
> I want to use the Lucene to store and search threads
> and postings.
> 
> What should be the "key"?  What is the proper way to
> store messages so that I can list threads when a
> registered member wants to view his/her inbox?
> 
> __________________________________
> Do you Yahoo!?
> Yahoo! SiteBuilder - Free web site building tool. Try it!
> http://webhosting.yahoo.com/ps/sb/
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb  5 12:02:08 2004
Return-Path: 
 <lucene-user-return-6983-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 20615 invoked from network); 5 Feb 2004 12:02:08 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 5 Feb 2004 12:02:08 -0000
Received: (qmail 35724 invoked by uid 500); 5 Feb 2004 12:01:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 35684 invoked by uid 500); 5 Feb 2004 12:01:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 35662 invoked from network); 5 Feb 2004 12:01:54 -0000
Received: from unknown (HELO web12708.mail.yahoo.com) (216.136.173.245)
  by daedalus.apache.org with SMTP; 5 Feb 2004 12:01:54 -0000
Message-ID: <20040205120154.25909.qmail@web12708.mail.yahoo.com>
Received: from [194.152.216.223] by web12708.mail.yahoo.com via HTTP;
 Thu, 05 Feb 2004 04:01:54 PST
Date: Thu, 5 Feb 2004 04:01:54 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Need Advices and Help
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20040204233839.51209.qmail@web11506.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I believe it would be the value of a 'Message-ID' or 'Reference' or
'Reference-ID' message header.

However, I remember reading that mail readers are not very good at
sticking to a standard (some RFC, I guess), so they don't always
provide the corrent ID, or they store it under non-standard names, etc.

My suggestion: Look up Zoe (see Lucene Powered By page), download it,
check its source and learn from it.

Otis

--- Caroline Jen <jiapei_jen@yahoo.com> wrote:
> I am trying to build message inboxes for all
> registered members of a web site.  Therefore, each
> thread (i.e. under a certain discussion topic) can
> have several postings.  And each registered member's
> inbox showes a number of threads.
> 
> post receiver (register member) --> threads --> posts
> 
> I have figured out all the properties of a thread;
> such as threadID, receiver, sender,
> lastPostMemberName, threadCreationDate,
> threadLastPostDate, threadViewCount, threadReplyCount,
> ..., etc.
> 
> I have also figured out all the properties of a
> posting; such as postID, parentPostID, threadID,
> receiver, sender, lastEditMemberName, postTopic,
> postBody, postCreationDate, postLastEditDate, ...,
> etc.
> 
> I want to use the Lucene to store and search threads
> and postings.
> 
> What should be the "key"?  What is the proper way to
> store messages so that I can list threads when a
> registered member wants to view his/her inbox?
> 
> __________________________________
> Do you Yahoo!?
> Yahoo! SiteBuilder - Free web site building tool. Try it!
> http://webhosting.yahoo.com/ps/sb/
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb  5 12:10:42 2004
Return-Path: 
 <lucene-user-return-6984-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 31795 invoked from network); 5 Feb 2004 12:10:42 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 5 Feb 2004 12:10:42 -0000
Received: (qmail 74274 invoked by uid 500); 5 Feb 2004 12:10:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 74216 invoked by uid 500); 5 Feb 2004 12:10:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 74106 invoked from network); 5 Feb 2004 12:10:25 -0000
Received: from unknown (HELO web12704.mail.yahoo.com) (216.136.173.241)
  by daedalus.apache.org with SMTP; 5 Feb 2004 12:10:25 -0000
Message-ID: <20040205121025.36861.qmail@web12704.mail.yahoo.com>
Received: from [194.152.216.223] by web12704.mail.yahoo.com via HTTP;
 Thu, 05 Feb 2004 04:10:25 PST
Date: Thu, 5 Feb 2004 04:10:25 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: ANNOUNCE: Plucene
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20040203005403.GB14500@soto.kasei.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Good news, I was looking forward to the Perl port.
I added it to the list of Lucene ports on Lucene site.

Otis

--- Tony Bowden <tony-lucene@kasei.com> wrote:
> 
> Plucene 1.0 has just been released to CPAN, and is available at
>   http://search.cpan.org/dist/Plucene/
> 
> This is a port of Lucene to Perl, and should mirror the Java version
> fairly closely.
> 
> More details on the rationale behind Plucene are available at
>   http://www.kasei.com/archives/001039.html
> 
> Thank you to the Lucene team for a wonderful product. Hopefully
> Plucene
> can help take that to a wider group of developers.
> 
> Tony
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb  5 12:13:34 2004
Return-Path: 
 <lucene-user-return-6985-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 35211 invoked from network); 5 Feb 2004 12:13:34 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 5 Feb 2004 12:13:34 -0000
Received: (qmail 83895 invoked by uid 500); 5 Feb 2004 12:13:23 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 83866 invoked by uid 500); 5 Feb 2004 12:13:23 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 83851 invoked from network); 5 Feb 2004 12:13:23 -0000
Received: from unknown (HELO smtpout.mac.com) (17.250.248.87)
  by daedalus.apache.org with SMTP; 5 Feb 2004 12:13:23 -0000
Received: from mac.com (smtpin08-en2 [10.13.10.153])
	by smtpout.mac.com (Xserve/MantshX 2.0) with ESMTP id i15CDNp3002265
	for <lucene-user@jakarta.apache.org>; Thu, 5 Feb 2004 04:13:23 -0800 (PST)
Received: from [10.0.1.48] (adsl-62-167-119-43.adslplus.ch [62.167.119.43])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin08/MantshX 3.0) with ESMTP id i15CDLNq002728
	for <lucene-user@jakarta.apache.org>; Thu, 5 Feb 2004 04:13:22 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <20040205120154.25909.qmail@web12708.mail.yahoo.com>
References: <20040205120154.25909.qmail@web12708.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <BCE636F7-57D4-11D8-867E-000393760B7E@mac.com>
Content-Transfer-Encoding: quoted-printable
From: petite_abeille <petite_abeille@mac.com>
Subject: [OT] Re: Need Advices and Help
Date: Thu, 5 Feb 2004 13:13:42 +0100
To: Lucene Users List <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Feb 05, 2004, at 13:01, Otis Gospodnetic wrote:

> I believe it would be the value of a 'Message-ID' or 'Reference' or
> 'Reference-ID' message header.
>
> However, I remember reading that mail readers are not very good at
> sticking to a standard (some RFC, I guess), so they don't always
> provide the corrent ID, or they store it under non-standard names, =
etc.
>
> My suggestion: Look up Zoe (see Lucene Powered By page), download it,
> check its source and learn from it.

http://zoe.nu/itstories/story.php?data=3Dstories&num=3D24&sec=3D3

And be ready for a lot of pain and suffering ;)

Trying to "normalize" email is not for the faint-hearted.

Just my 2=A2.

Cheers,

PA.



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb  5 14:59:11 2004
Return-Path: 
 <lucene-user-return-6987-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 32516 invoked from network); 5 Feb 2004 14:59:11 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 5 Feb 2004 14:59:11 -0000
Received: (qmail 99152 invoked by uid 500); 5 Feb 2004 14:29:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 99080 invoked by uid 500); 5 Feb 2004 14:29:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 99020 invoked from network); 5 Feb 2004 14:29:19 -0000
Received: from unknown (HELO mail2.gmhwh.org) (12.110.19.38)
  by daedalus.apache.org with SMTP; 5 Feb 2004 14:29:19 -0000
X-Server-Uuid: 1ea73c7c-c7d8-11d5-bae0-0002a564cf8c
Message-ID: <s021efc0.013@wh-inet.gmhwh.org>
Date: Thu, 05 Feb 2004 07:24:35 -0700
From: "Charlie Smith" <SmithCW@ldschurch.org>
To: lucene-user@jakarta.apache.org
Subject: Re: ANNOUNCE: Plucene
MIME-Version: 1.0
X-WSS-ID: 6C3C8DB81309619-01-02
Content-Type: text/plain;
 charset=us-ascii
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Can we post to this forum for help with plucene?
There is reference to a simplanalyzer.  Is there another that would be used to
parse ms word, word perfect files?
>>> tony-lucene@kasei.com 2/2/2004 5:54:03 PM >>>

Plucene 1.0 has just been released to CPAN, and is available at
  http://search.cpan.org/dist/Plucene/ 

This is a port of Lucene to Perl, and should mirror the Java version
fairly closely.

More details on the rationale behind Plucene are available at
  http://www.kasei.com/archives/001039.html 

Thank you to the Lucene team for a wonderful product. Hopefully Plucene
can help take that to a wider group of developers.

Tony


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org 
For additional commands, e-mail: lucene-user-help@jakarta.apache.org 



------------------------------------------------------------------------------
This message may contain confidential information, and is intended only for the use of the individual(s) to whom it is addressed.


==============================================================================


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb  5 14:59:08 2004
Return-Path: 
 <lucene-user-return-6986-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 32334 invoked from network); 5 Feb 2004 14:59:08 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 5 Feb 2004 14:59:08 -0000
Received: (qmail 94750 invoked by uid 500); 5 Feb 2004 14:28:35 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94692 invoked by uid 500); 5 Feb 2004 14:28:34 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94581 invoked from network); 5 Feb 2004 14:28:33 -0000
Received: from unknown (HELO mail3.gmhwh.org) (198.31.239.197)
  by daedalus.apache.org with SMTP; 5 Feb 2004 14:28:33 -0000
Received: from 192.168.8.246 by mail3.gmhwh.org with ESMTP (<SMTP Relay>
 (MMS v5.5.3)); Thu, 05 Feb 2004 07:30:54 -0600
Received: from WH-INET-MTA by wh-inet.gmhwh.org with Novell_GroupWise;
 Thu, 05 Feb 2004 07:28:12 -0700
Message-ID: <s021f08c.052@wh-inet.gmhwh.org>
X-Mailer: Novell GroupWise Internet Agent 6.5.1
Date: Thu, 05 Feb 2004 07:27:45 -0700
From: "Charlie Smith" <SmithCW@ldschurch.org>
To: lucene-user@jakarta.apache.org
Subject: Re: ANNOUNCE: Plucene
MIME-Version: 1.0
X-WSS-ID: 6C3C8C141643819-01-01
Content-Type: text/plain;
 charset=us-ascii
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Can we post to this forum for help with plucene?
There is reference to a simplanalyzer.  Is there another that would be used to
parse ms word, word perfect files?

>>>Tony wrote on 2/2/2004 5:54:03 PM >>>

Plucene 1.0 has just been released to CPAN, and is available at
  http://search.cpan.org/dist/Plucene/ 

This is a port of Lucene to Perl, and should mirror the Java version
fairly closely.

More details on the rationale behind Plucene are available at
  http://www.kasei.com/archives/001039.html 

Thank you to the Lucene team for a wonderful product. Hopefully Plucene
can help take that to a wider group of developers.

Tony


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org 
For additional commands, e-mail: lucene-user-help@jakarta.apache.org 




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb  5 15:52:00 2004
Return-Path: 
 <lucene-user-return-6988-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 73019 invoked from network); 5 Feb 2004 15:52:00 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 5 Feb 2004 15:52:00 -0000
Received: (qmail 16984 invoked by uid 500); 5 Feb 2004 15:09:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16931 invoked by uid 500); 5 Feb 2004 15:09:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16851 invoked from network); 5 Feb 2004 15:09:45 -0000
Received: from unknown (HELO smtp.uk.colt.net) (195.110.64.125)
  by daedalus.apache.org with SMTP; 5 Feb 2004 15:09:45 -0000
Received: from rte.ie (mx.rte.ie [217.173.98.209])
	by smtp.uk.colt.net (Postfix) with ESMTP id 2214E23BE6
	for <lucene-user@jakarta.apache.org>; Thu,  5 Feb 2004 15:09:43 +0000 (GMT)
Subject: FUTEX LOCK - IBM jre probs
From: John Moylan <johnm@rte.ie>
Reply-To: johnm@rte.ie
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <s021f08c.052@wh-inet.gmhwh.org>
References: <s021f08c.052@wh-inet.gmhwh.org>
Content-Type: text/plain
Organization: Radio Telifis Eireann
Message-Id: <1075993776.3207.16.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.2.2 (1.2.2-5) 
Date: 05 Feb 2004 15:09:36 +0000
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Folks,

I'm getting a FUTEX lock when I use the indexer with
IBMJava2-JRE-1.4.1-8 (the jre that comes with RedHat AS3)

Sun's 1.4 SDK works fine.

Best Regards,
John


-- 
John Moylan
----------------------
ePublishing
Radio Telefis Eireann,
Montrose House,
Donnybrook,
Dublin 4,
Eire
t:+353 1 2083564
e:john.moylan@rte.ie


******************************************************************************
The information in this e-mail is confidential and may be legally privileged.
It is intended solely for the addressee. Access to this e-mail by anyone else
is unauthorised. If you are not the intended recipient, any disclosure,
copying, distribution, or any action taken or omitted to be taken in reliance
on it, is prohibited and may be unlawful.
Please note that emails to, from and within RT� may be subject to the Freedom
of Information Act 1997 and may be liable to disclosure.
******************************************************************************

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb  5 16:11:07 2004
Return-Path: 
 <lucene-user-return-6989-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 89134 invoked from network); 5 Feb 2004 16:11:07 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 5 Feb 2004 16:11:07 -0000
Received: (qmail 87648 invoked by uid 500); 5 Feb 2004 15:22:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 87590 invoked by uid 500); 5 Feb 2004 15:22:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 87535 invoked from network); 5 Feb 2004 15:22:39 -0000
Received: from unknown (HELO gwia201.syr.edu) (128.230.248.25)
  by daedalus.apache.org with SMTP; 5 Feb 2004 15:22:39 -0000
Received: from MTA2-MTA by gwia201.syr.edu
	with Novell_GroupWise; Thu, 05 Feb 2004 10:22:39 -0500
Message-Id: <s022196f.049@gwia201.syr.edu>
X-Mailer: Novell GroupWise Internet Agent 6.0.4
Date: Thu, 05 Feb 2004 10:22:29 -0500
From: "Grant Ingersoll" <gsingers@syr.edu>
To: <lucene-user@jakarta.apache.org>
Subject: Using Explain and fieldNorm
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

Was wondering what the fieldNorm section means when using the Explain =
functionality?  How does this relate to the scoring algorithm given in the =
Similarity javadocs?

Thanks,
Grant


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb  5 16:50:47 2004
Return-Path: 
 <lucene-user-return-6990-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 17371 invoked from network); 5 Feb 2004 16:50:47 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 5 Feb 2004 16:50:47 -0000
Received: (qmail 50102 invoked by uid 500); 5 Feb 2004 15:54:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 50041 invoked by uid 500); 5 Feb 2004 15:54:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49625 invoked from network); 5 Feb 2004 15:54:08 -0000
Received: from unknown (HELO exchange.hq.openratings.com) (141.149.165.226)
  by daedalus.apache.org with SMTP; 5 Feb 2004 15:54:08 -0000
Received: by exchange.hq.openratings.com with Internet Mail Service
 (5.5.2655.55)
	id <CXY6PPZ9>; Thu, 5 Feb 2004 10:54:09 -0500
Message-ID: 
 <4A46E75D51A2D5119F2A00B0D03D7F0901C68226@exchange.hq.openratings.com>
From: Dan Quaroni <dquaroni@OPENRATINGS.com>
To: 'Lucene Users List' <lucene-user@jakarta.apache.org>
Subject: RE: FUTEX LOCK - IBM jre probs
Date: Thu, 5 Feb 2004 10:53:59 -0500 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I've tried the IBM jre on a number of occassions and have always found =
that
it didn't behave the way the sun one does...  In the end I gave up on =
it.

-----Original Message-----
From: John Moylan [mailto:johnm@rte.ie]
Sent: Thursday, February 05, 2004 10:10 AM
To: Lucene Users List
Subject: FUTEX LOCK - IBM jre probs


Hi Folks,

I'm getting a FUTEX lock when I use the indexer with
IBMJava2-JRE-1.4.1-8 (the jre that comes with RedHat AS3)

Sun's 1.4 SDK works fine.

Best Regards,
John


--=20
John Moylan
----------------------
ePublishing
Radio Telefis Eireann,
Montrose House,
Donnybrook,
Dublin 4,
Eire
t:+353 1 2083564
e:john.moylan@rte.ie


************************************************************************=
****
**
The information in this e-mail is confidential and may be legally
privileged.
It is intended solely for the addressee. Access to this e-mail by =
anyone
else
is unauthorised. If you are not the intended recipient, any disclosure,
copying, distribution, or any action taken or omitted to be taken in
reliance
on it, is prohibited and may be unlawful.
Please note that emails to, from and within RT=C9 may be subject to the
Freedom
of Information Act 1997 and may be liable to disclosure.
************************************************************************=
****
**

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb  5 22:02:19 2004
Return-Path: 
 <lucene-user-return-6993-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 5797 invoked from network); 5 Feb 2004 22:02:19 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 5 Feb 2004 22:02:19 -0000
Received: (qmail 97931 invoked by uid 500); 5 Feb 2004 22:01:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 97904 invoked by uid 500); 5 Feb 2004 22:01:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 97887 invoked from network); 5 Feb 2004 22:01:54 -0000
Received: from unknown (HELO rwcrmhc11.comcast.net) (204.127.198.35)
  by daedalus.apache.org with SMTP; 5 Feb 2004 22:01:54 -0000
Received: from apache.org (c-24-5-145-151.client.comcast.net[24.5.145.151])
          by comcast.net (rwcrmhc11) with SMTP
          id <200402051900370130074qmre>; Thu, 5 Feb 2004 19:00:37 +0000
Message-ID: <402292CE.2030109@apache.org>
Date: Thu, 05 Feb 2004 11:00:30 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.4.1) Gecko/20031114
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Using Explain and fieldNorm
References: <s022196f.049@gwia201.syr.edu>
In-Reply-To: <s022196f.049@gwia201.syr.edu>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Using the terminology in

 
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/Similarity.html

fieldNorm is defined as

   getBoost(t.field in d) * lengthNorm(t.field in d)

These two values are multipled into a single value at index time, and it 
is unfortunately impossible to separate them at search time, when 
explanations are produced.

If you never apply boosts, fieldNorm() is just lengthNorm().  If you 
apply boosts, then it is these two factors combined.

Doug

Grant Ingersoll wrote:
> Hi,
> 
> Was wondering what the fieldNorm section means when using the Explain functionality?  How does this relate to the scoring algorithm given in the Similarity javadocs?
> 
> Thanks,
> Grant
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb  5 20:23:31 2004
Return-Path: 
 <lucene-user-return-6991-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54306 invoked from network); 5 Feb 2004 20:23:31 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 5 Feb 2004 20:23:31 -0000
Received: (qmail 90656 invoked by uid 500); 5 Feb 2004 19:52:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 90476 invoked by uid 500); 5 Feb 2004 19:52:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 90439 invoked from network); 5 Feb 2004 19:52:28 -0000
Received: from unknown (HELO web12906.mail.yahoo.com) (216.136.174.73)
  by daedalus.apache.org with SMTP; 5 Feb 2004 19:52:28 -0000
Message-ID: <20040205195233.93916.qmail@web12906.mail.yahoo.com>
Received: from [68.121.98.68] by web12906.mail.yahoo.com via HTTP;
 Thu, 05 Feb 2004 11:52:33 PST
Date: Thu, 5 Feb 2004 11:52:33 -0800 (PST)
From: Ardor Wei <ardorfly@yahoo.com>
Subject: File locking problem still exists
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <51194813DA293D4CA3FC4AD392F8D99305B0F359@dougal.magus.co.uk>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,
we have 2 threads: 1 writes to general index
(D:\lucent\index) and the other writes to real-time
index (D:\lucene\realtimeIndex). The threads are
actually running a loop (writing to the directory once
every 1 minute). We still always have problems like
"can't delete _f17" "can't find _f17). Our IndexReader
only does reading. We traced code and couldn't find
any obvious problem in the code. Our platform is Win.
What's the real problem? This has troubled me for a
long time. Any expert can give me some help?

Thanks in advance!

Ardor

__________________________________
Do you Yahoo!?
Yahoo! Finance: Get your refund fast by filing online.
http://taxes.yahoo.com/filing.html

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb  5 21:27:49 2004
Return-Path: 
 <lucene-user-return-6992-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 87166 invoked from network); 5 Feb 2004 21:27:49 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 5 Feb 2004 21:27:49 -0000
Received: (qmail 54410 invoked by uid 500); 5 Feb 2004 21:27:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 54366 invoked by uid 500); 5 Feb 2004 21:27:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 54348 invoked from network); 5 Feb 2004 21:27:25 -0000
Received: from unknown (HELO rwcrmhc13.comcast.net) (204.127.198.39)
  by daedalus.apache.org with SMTP; 5 Feb 2004 21:27:25 -0000
Received: from antioch (chr152dhcp341.chrchv01.md.comcast.net[68.33.153.85])
          by comcast.net (rwcrmhc13) with SMTP
          id <2004020520254201500kbks1e>; Thu, 5 Feb 2004 20:25:42 +0000
From: "Justin Woody" <justin.woody@comcast.net>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: Query question
Date: Thu, 5 Feb 2004 15:27:42 -0500
Message-ID: <00a501c3ec26$824331e0$0401a8c0@antioch>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00A6_01C3EBFC.996D29E0"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_00A6_01C3EBFC.996D29E0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Hello all,

I am a relatively new user to Lucene. I have indexed several database
tables, but I am having problems returning the search results I would
like. Here is the example

I have unStored index on the description column

Description examples:
department a building 4
building 9 department 2
system builder room 89

If I search the index for "building" it comes back fine (2 records) or
"builder" (1record), but if I search for "build*" I only receive one
record, in my example, the second record. The client would like all 3
records to come back. Is there a way I can make that happen? I've been
trying different query types and syntax, but haven't been able to
succeed.

Thanks

Justin


------=_NextPart_000_00A6_01C3EBFC.996D29E0--


From MAILER-DAEMON Thu Feb  5 22:02:30 2004
Return-Path: 
 <lucene-user-return-6994-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 5874 invoked from network); 5 Feb 2004 22:02:30 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 5 Feb 2004 22:02:30 -0000
Received: (qmail 98016 invoked by uid 500); 5 Feb 2004 22:01:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 97980 invoked by uid 500); 5 Feb 2004 22:01:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 97944 invoked from network); 5 Feb 2004 22:01:54 -0000
Received: from unknown (HELO rwcrmhc11.comcast.net) (204.127.198.35)
  by daedalus.apache.org with SMTP; 5 Feb 2004 22:01:54 -0000
Received: from apache.org (c-24-5-145-151.client.comcast.net[24.5.145.151])
          by comcast.net (rwcrmhc11) with SMTP
          id <200402052151330130070dgae>; Thu, 5 Feb 2004 21:51:33 +0000
Message-ID: <4022BADE.7040007@apache.org>
Date: Thu, 05 Feb 2004 13:51:26 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.4.1) Gecko/20031114
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: SQLDirectory
References: <DNEDJIGLNAJOFEMFBJIJOEPACDAA.plaflamme@konova.com>
In-Reply-To: <DNEDJIGLNAJOFEMFBJIJOEPACDAA.plaflamme@konova.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Philippe Laflamme wrote:
> I've worked on an implementation for Postgres. I used the Large Object API
> provided by the Postgres JDBC driver. It works fine but I doubt it is very
> scalable because the number of open connections during indexing can become
> very high.
> 
> Lucene opens many different files when writing to an index. This results in
> opening one PG connection per open file. While working on a small index (30
> 000 files), I saw the number of open connections become quite high (approx
> 150). If you don't have a lot of RAM, this is problematic.

A connection per file sounds very heavyweight.

The way I would try to implement Directory with SQL is to have a single
table of buffers per index, e.g., with columns ID, BLOCK_NUMBER and
DATA.  The contents of a file are the appended DATA columns with the
same ID, ordered by the BLOCK_NUMBER field.  This would be indexed by ID
and BLOCK_NUMBER, together a unique key.

The BLOCK_NUMBER field indicates which part of the file the row
concerns.  Thus the DATA of BLOCK_NUMBER=0 might hold the first 1024
bytes, the DATA of BLOCK_NUMBER=1 might hold the next 1024 bytes, and so
on.  This would permit efficient random access.

You'll need another table with NAME, ID, and MODIFIED_DATE, with a
single entry per file.  The length of a file can be computed with a
query that finds the length of DATA in the last BLOCK_NUMBER with an ID.

I would initially cache a single connection to the database and
serialize requests over it.  A pool of connections might be more
efficient when multiple threads are searching, but I would benchmark
that before investing much in such an implementation.

Has anyone yet implemented an SQL Directory this way?

Doug



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb  5 22:25:52 2004
Return-Path: 
 <lucene-user-return-6995-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 19171 invoked from network); 5 Feb 2004 22:25:52 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 5 Feb 2004 22:25:52 -0000
Received: (qmail 97896 invoked by uid 500); 5 Feb 2004 22:25:23 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 97846 invoked by uid 500); 5 Feb 2004 22:25:23 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 97799 invoked from network); 5 Feb 2004 22:25:23 -0000
Received: from unknown (HELO web11507.mail.yahoo.com) (216.136.172.39)
  by daedalus.apache.org with SMTP; 5 Feb 2004 22:25:23 -0000
Message-ID: <20040205222529.63144.qmail@web11507.mail.yahoo.com>
Received: from [64.157.51.153] by web11507.mail.yahoo.com via HTTP;
 Thu, 05 Feb 2004 14:25:29 PST
Date: Thu, 5 Feb 2004 14:25:29 -0800 (PST)
From: Caroline Jen <jiapei_jen@yahoo.com>
Subject: Re: [OT] Re: Need Advices and Help
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <BCE636F7-57D4-11D8-867E-000393760B7E@mac.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi, I did not explain my problem well; henceforth,
resulting in some misunderstanding.  And I do not have
any experience in the Lucene.

My Project: build a message inbox for all "registered
members" of a web site.

Messages: 

     Messages are sent and received "within" the web
site.  Messages are not going to be sent or received
over the internet.  Therefore, mail readers are not
involved.  And there is no message header.

     Messages are sent from one member to another
member on the web site.  Therefore, my program reads a
message similar to the way of reading a filled-out
form.  My program reads and stores the text fields;
such as receiver, sender, subject, message body.  And
I know how to read data and store data into a database
using Java.

Problem:

     I have to provide a message inbox for each member
of the web site.  Therefore, when a member clicks on
the "View Messages" button, I must search the database
for MemberName == receiver  
and shows an inbox for that member.  The inbox should
have a number of threads (i.e. discussion topics) that
were forwarded to that registered member.

And, if a certain thread is selected for viewing, I am
supposed to show several postings under that
particular discussion topic. 

So, Lucene is supposed to search
 
1. MemberName == receiver and list all threads in a
certain order for that member

2. search all postings and list them in a certain
order under a selected thread
 
post receiver (register member) --> threads --> posts 

I have figured out all the properties of a thread;
such as threadID, receiver, sender,
lastPostMemberName, threadCreationDate,
threadLastPostDate, threadViewCount, threadReplyCount,
..., etc. 

I have also figured out all the properties of a
posting; such as postID, parentPostID, threadID,
receiver, sender, lastEditMemberName, postTopic,
postBody, postCreationDate, postLastEditDate, ...,
etc.

What is the proper way of indexing messages?  And how
do I use the Lucene to do the search later on?

-C
--- petite_abeille <petite_abeille@mac.com> wrote:
> 
> On Feb 05, 2004, at 13:01, Otis Gospodnetic wrote:
> 
> > I believe it would be the value of a 'Message-ID'
> or 'Reference' or
> > 'Reference-ID' message header.
> >
> > However, I remember reading that mail readers are
> not very good at
> > sticking to a standard (some RFC, I guess), so
> they don't always
> > provide the corrent ID, or they store it under
> non-standard names, etc.
> >
> > My suggestion: Look up Zoe (see Lucene Powered By
> page), download it,
> > check its source and learn from it.
> 
>
http://zoe.nu/itstories/story.php?data=stories&num=24&sec=3
> 
> And be ready for a lot of pain and suffering ;)
> 
> Trying to "normalize" email is not for the
> faint-hearted.
> 
> Just my 2�.
> 
> Cheers,
> 
> PA.
> 
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> 


__________________________________
Do you Yahoo!?
Yahoo! Finance: Get your refund fast by filing online.
http://taxes.yahoo.com/filing.html

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb  5 23:34:04 2004
Return-Path: 
 <lucene-user-return-6996-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 46910 invoked from network); 5 Feb 2004 23:34:04 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 5 Feb 2004 23:34:04 -0000
Received: (qmail 10333 invoked by uid 500); 5 Feb 2004 23:33:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 10300 invoked by uid 500); 5 Feb 2004 23:33:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 10284 invoked from network); 5 Feb 2004 23:33:41 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.72)
  by daedalus.apache.org with SMTP; 5 Feb 2004 23:33:41 -0000
Received: (cpmta 2182 invoked from network); 5 Feb 2004 15:33:48 -0800
Received: from 24.51.109.181 (HELO ?192.168.1.100?)
  by smtp.hatcher.net (209.228.32.72) with SMTP; 5 Feb 2004 15:33:48 -0800
X-Sent: 5 Feb 2004 23:33:48 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <00a501c3ec26$824331e0$0401a8c0@antioch>
References: <00a501c3ec26$824331e0$0401a8c0@antioch>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <BC89CB94-5833-11D8-A0A9-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Query question
Date: Thu, 5 Feb 2004 18:33:43 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 5, 2004, at 3:27 PM, Justin Woody wrote:
> If I search the index for "building" it comes back fine (2 records) or
> "builder" (1record), but if I search for "build*" I only receive one
> record, in my example, the second record. The client would like all 3
> records to come back. Is there a way I can make that happen? I've been
> trying different query types and syntax, but haven't been able to
> succeed.

We need more details to know what is going on.  What analyzer are you 
using with indexing?

How are you building the query objects?   QueryParser?  Same Analyzer 
as with indexer?

(Succinct) code is the best :)

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb  6 01:19:41 2004
Return-Path: 
 <lucene-user-return-6997-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 944 invoked from network); 6 Feb 2004 01:19:41 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 6 Feb 2004 01:19:41 -0000
Received: (qmail 26710 invoked by uid 500); 6 Feb 2004 01:19:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26665 invoked by uid 500); 6 Feb 2004 01:19:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26643 invoked from network); 6 Feb 2004 01:19:14 -0000
Received: from unknown (HELO slc-xchg1.slc.mainstreamdata.com) (209.63.42.32)
  by daedalus.apache.org with SMTP; 6 Feb 2004 01:19:14 -0000
X-MimeOLE: Produced By Microsoft Exchange V6.0.6487.1
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Newbie Phrase Query question
Date: Thu, 5 Feb 2004 18:19:22 -0700
Message-ID: 
 <A60AC49BA89F4F4D9D86F2B7519111E8040B52@dilbert.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Newbie Phrase Query question
Thread-Index: AcPqzqFAzPoOJRR/SfSVqSw0z6j3QwBdGo4w
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Actually, I found your "QueryParser Rules" article the most useful.  It
explained a number of things that I had puzzled about.  Query.toString()
helped also.

So, obvious in hindsight, an exact phrase match still goes through the
tokenizer.  If there are stop words or you're stemming or etc., you need
to tokenize the phrase before trying to get an exact match.  Clearly,
that has implications for what "exact phrase match" means.

The toString() told me that the quotes are handled by the queryParser.
The weblucene cjk tokenizer works just fine with it and I didn't make
any changes to it.

The "bad" news is that after going through all of this, the code just
started to work as expected.  I'm not sure what I did to fix it.

There is a minor issue I found that I think works as documented, but
wonder why it's that way.  If you enter a search string that's a
hyphenated word such as "fred-bill" (w/o the quotes), the QueryParser
generates a search string to find all documents with fred but w/o bill.
I believe this is expected behavior based on the javadocs.  The effect
of this is that a hyphenated word gives unexpected results unless
surrounded by quotes.  Perhaps the syntax should have been "fred -bill"
(space before the hyphen required) to indicate that you didn't want bill
and that it's not a hyphenated word.  Seems a tad more general.  It's an
issue for me because my application deals with hyphenated words a lot
and I don't think my users would ever understand when quotes should be
used and when they should not (most of them won't figure out how to use
the "not" syntax).  I can solve it by requiring the user to enter a
space before the hyphen if they mean "not" and then have the search code
automatically add the quotes for hyphenated words.  It's just a little
painful.  Just a thought for 1.4. ;-)

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: Tuesday, February 03, 2004 8:26 PM
To: Lucene Users List
Subject: Re: Newbie Phrase Query question


The best suggestion I have is to look at the code in my first java.net=20
article (Intro Lucene) and borrow the Analyzer utility code to see what=20
happens to a sample string as it is analyzed.  Then pass that same=20
string to QueryParser (along with the same analyzer) and see what the=20
Query.toString(<default field name>) returns.  This should shed light=20
on the issue more clearly.

	Erik


On Feb 3, 2004, at 10:01 PM, Scott Smith wrote:

> I'm having problems searching for an exact match with a phrase.=20
> Essentially, I think my problem is that the tokenizer is tossing the=20
> double quotes around the phrase, tokenizing each word and so I end up=20
> with the document hit I want plus several more I don't (the latter=20
> having some of the words, but not exact matches).  Here's the=20
> specifics.
>
>
> First, I'm using the CJKTokenizer from WebLucene which I believe is a=20
> modified version of the stopword tokenizer enhanced to handle asian=20
> characters (that's according to the header; I don't think the asian=20
> characters have anything to do with my problem).
>
> The documents I need to search, for reasons related to the=20
> application, often end up with hyphenated words in critical places. =20
> For example, the original text to be indexed might be something like=20
> "this is Bill-Fred".
>
> When this is tokenized initially, I end up with two tokens "bill" and=20
> "fred" (the tokenizer converts to lower case;  "this" and "is" are=20
> removed as stop words; the hyphen is removed by the tokenizer).  So=20
> far so good.
>
> I pass the phrase I want an exact match on to a QueryParser in quotes=20
> (so "Bill-Fred" is the search string; quotes included).  I watched the

> output of the tokenizer from the query parser and it is clearly=20
> tossing the double quotes and tokenizing each word separately.  It=20
> passes the words "bill" and "fred" as separate entities back to the=20
> QueryParser. Looking at the tokenizer code, I understand why. =20
> Obviously, that's why I end up with documents that contain the words=20
> even if they are not exact matches.
>
> Here's the question.  I can modify the CJKTokenizer so that when it
> sees
> "Fred-Bill" it creates a single token that looks like "fred bill".
> Would this now work?  Is this the right thing to do?  I realize this
> means that I'd hit on "Fred-Bill" and "Fred Bill", but I can probably
> live with that.
>
> However, it also seems like I now have a problem if the original text=20
> contains a quotation from someone that happens to be part of the=20
> document (i.e., the original text has double quotes in it).  It seems=20
> like I need to ignore quotes for the initial index, but use them to=20
> build phrases when I'm tokenizing a search string in the QueryParser.=20
> Do I need two tokenizers?
>
> Does any of this make any sense?  I'm not quite sure what the=20
> QueryParser wants to see to properly do a phrase match.  Is=20
> QueryParser the wrong thing to be using here?  Suggestions or=20
> comments?
>
> Scott
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb  6 02:18:42 2004
Return-Path: 
 <lucene-user-return-6998-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25430 invoked from network); 6 Feb 2004 02:18:42 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 6 Feb 2004 02:18:42 -0000
Received: (qmail 11408 invoked by uid 500); 6 Feb 2004 02:18:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 11316 invoked by uid 500); 6 Feb 2004 02:18:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 11298 invoked from network); 6 Feb 2004 02:18:17 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.71)
  by daedalus.apache.org with SMTP; 6 Feb 2004 02:18:17 -0000
Received: (cpmta 24694 invoked from network); 5 Feb 2004 18:18:26 -0800
Received: from 24.51.109.181 (HELO ?192.168.1.100?)
  by smtp.hatcher.net (209.228.32.71) with SMTP; 5 Feb 2004 18:18:26 -0800
X-Sent: 6 Feb 2004 02:18:26 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: 
 <A60AC49BA89F4F4D9D86F2B7519111E8040B52@dilbert.mainstreamdata.com>
References: 
 <A60AC49BA89F4F4D9D86F2B7519111E8040B52@dilbert.mainstreamdata.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <BC5AF356-584A-11D8-A0A9-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Newbie Phrase Query question
Date: Thu, 5 Feb 2004 21:18:21 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 5, 2004, at 8:19 PM, Scott Smith wrote:
> There is a minor issue I found that I think works as documented, but
> wonder why it's that way.  If you enter a search string that's a
> hyphenated word such as "fred-bill" (w/o the quotes), the QueryParser
> generates a search string to find all documents with fred but w/o bill.
> I believe this is expected behavior based on the javadocs.

This is actually a documented bug that needs to be fixed.  If there is 
no whitespace, the dash should not be taken as term negation, but 
rather the entire unit should be passed to the analyzer.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb  6 02:53:51 2004
Return-Path: 
 <lucene-user-return-6999-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 43367 invoked from network); 6 Feb 2004 02:53:51 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 6 Feb 2004 02:53:51 -0000
Received: (qmail 93778 invoked by uid 500); 6 Feb 2004 02:53:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 93248 invoked by uid 500); 6 Feb 2004 02:53:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 93227 invoked from network); 6 Feb 2004 02:53:24 -0000
Received: from unknown (HELO hotmail.com) (64.4.9.80)
  by daedalus.apache.org with SMTP; 6 Feb 2004 02:53:24 -0000
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Thu, 5 Feb 2004 18:53:33 -0800
Received: from 63.122.3.197 by lw9fd.law9.hotmail.msn.com with HTTP;
	Fri, 06 Feb 2004 02:53:33 GMT
X-Originating-IP: [63.122.3.197]
X-Originating-Email: [searcharchitect@hotmail.com]
X-Sender: searcharchitect@hotmail.com
From: "search architect" <searcharchitect@hotmail.com>
To: lucene-user@jakarta.apache.org
Bcc: 
Subject: Search Architect Job
Date: Fri, 06 Feb 2004 02:53:33 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
Message-ID: <Law9-F80a8aGcuPwjnn000183ce@hotmail.com>
X-OriginalArrivalTime: 06 Feb 2004 02:53:33.0900 (UTC)
 FILETIME=[68FC08C0:01C3EC5C]
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello Everybody,

This may not be the right group for posting a job, but I couldn't find a 
better one. My friend's company is looking for a full time Technical 
Architect/designer. I don't know the exact job title. Here is the one line 
description of who they are looking for. It's a small sized company that's 
been around for 5 yrs.
" A J2EE technical architect with more than 5 yrs experience working on 
Linux/Unix platform, XML technologies and architected some search engine 
solutions using popular search engines like lucene, verity etc. Job is based 
in bay area, california."
If you are interested email me.

Thanks,
Guru.

_________________________________________________________________
Plan your next US getaway to one of the super destinations here. 
http://special.msn.com/local/hotdestinations.armx


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb  6 09:20:09 2004
Return-Path: 
 <lucene-user-return-7000-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 96400 invoked from network); 6 Feb 2004 09:20:09 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 6 Feb 2004 09:20:09 -0000
Received: (qmail 15289 invoked by uid 500); 6 Feb 2004 09:19:35 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 15264 invoked by uid 500); 6 Feb 2004 09:19:34 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 15236 invoked from network); 6 Feb 2004 09:19:34 -0000
Received: from unknown (HELO web61104.mail.yahoo.com) (216.155.196.106)
  by daedalus.apache.org with SMTP; 6 Feb 2004 09:19:34 -0000
Message-ID: <20040206091947.46698.qmail@web61104.mail.yahoo.com>
Received: from [203.129.220.200] by web61104.mail.yahoo.com via HTTP;
 Fri, 06 Feb 2004 01:19:47 PST
Date: Fri, 6 Feb 2004 01:19:47 -0800 (PST)
From: Pawan preet <pawanpreetsingheng@yahoo.com>
Subject: Re: Search Architect Job
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <Law9-F80a8aGcuPwjnn000183ce@hotmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1903057988-1076059187=:45588"
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-1903057988-1076059187=:45588
Content-Type: text/plain; charset=us-ascii


It is nice to receive your mail.I want to tell you about myself.I am from India. I am a Software Engg. with experience of 3.5 months.I am doing work on a search engine which will be launched in the future time in India.Linux is the plateform and i have good hold over Java - Xml Technologies. If you would like to contact me,please send me a positive response to my mail address : pawanpreeteng@yahoo.com
                           With thanks,
                            Pawan.
search architect <searcharchitect@hotmail.com> wrote:
Hello Everybody,

This may not be the right group for posting a job, but I couldn't find a 
better one. My friend's company is looking for a full time Technical 
Architect/designer. I don't know the exact job title. Here is the one line 
description of who they are looking for. It's a small sized company that's 
been around for 5 yrs.
" A J2EE technical architect with more than 5 yrs experience working on 
Linux/Unix platform, XML technologies and architected some search engine 
solutions using popular search engines like lucene, verity etc. Job is based 
in bay area, california."
If you are interested email me.

Thanks,
Guru.

_________________________________________________________________
Plan your next US getaway to one of the super destinations here. 
http://special.msn.com/local/hotdestinations.armx


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------
Do you Yahoo!?
Yahoo! Finance: Get your refund fast by filing online
--0-1903057988-1076059187=:45588--

From MAILER-DAEMON Fri Feb  6 14:25:42 2004
Return-Path: 
 <lucene-user-return-7001-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 80222 invoked from network); 6 Feb 2004 14:25:42 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 6 Feb 2004 14:25:42 -0000
Received: (qmail 15102 invoked by uid 500); 6 Feb 2004 14:25:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 14986 invoked by uid 500); 6 Feb 2004 14:25:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 14948 invoked from network); 6 Feb 2004 14:25:25 -0000
Received: from unknown (HELO rwcrmhc13.comcast.net) (204.127.198.39)
  by daedalus.apache.org with SMTP; 6 Feb 2004 14:25:25 -0000
Received: from antioch (chr152dhcp341.chrchv01.md.comcast.net[68.33.153.85])
          by comcast.net (rwcrmhc13) with SMTP
          id <2004020614252601500k44f5e>; Fri, 6 Feb 2004 14:25:26 +0000
From: "Justin Woody" <justin.woody@comcast.net>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Query question
Date: Fri, 6 Feb 2004 09:27:25 -0500
Message-ID: <00c501c3ecbd$5827e710$0401a8c0@antioch>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
In-Reply-To: <BC89CB94-5833-11D8-A0A9-000393A564E6@ehatchersolutions.com>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Erik,

Here is the IndexWriter with the Standard analyzer:
Class variable: IndexWriter writer;


writer = IndexWriter(indexDirectory, new StandardAnalyzer(), true); 

While looping over the ResultSet I call this method:

private void indexDoc(ResultSet rs) throws Exception {
        Document doc = new Document();
                
        doc.add(Field.UnIndexed("value", rs.getString("value")));
        doc.add(Field.UnIndexed("name", rs.getString("name")));

        doc.add(Field.UnStored("content",rs.getString("indexed")));

        writer.addDocument(doc);
    }

The "indexed" data is a concatenation of the Code and Desciptor(s)
fields that they want to search by. They are concatenated with a space.
Ex. Select col1 as value, col2 as name, col3 || ' ' || col2 || ' ' ||
col5 as indexed from tableName. Since there are many tables that are
similar in structure I wrote the queries like this so I could multi
thread the re indexing process on a frequent basis and use one generic
class.

Here is my test search class:

public IndexSearchTest(String search, String index) throws Exception {
        String indexName = dirLucene + index +"/";
        System.out.println("Index Name " + indexName);

        IndexSearcher searcher = new
IndexSearcher(IndexReader.open(indexName));
        
        Query query = QueryParser.parse(search.toUpperCase(), "content",
new StandardAnalyzer());
        
        Hits hits = searcher.search(query);
        Document result;
        System.out.println("Begin Search Results");
        for (int i=0;i<hits.length();i++) {
            result = hits.doc(i);
            System.out.println("Key :" + result.get("value") + " Desc: "
+ result.get("name")) ;
        }
        System.out.println("Finished Search: " +hits.length());
    }

Thanks in advance,
Justin

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: Thursday, February 05, 2004 6:34 PM
To: Lucene Users List
Subject: Re: Query question


On Feb 5, 2004, at 3:27 PM, Justin Woody wrote:
> If I search the index for "building" it comes back fine (2 records) or

> "builder" (1record), but if I search for "build*" I only receive one 
> record, in my example, the second record. The client would like all 3 
> records to come back. Is there a way I can make that happen? I've been

> trying different query types and syntax, but haven't been able to 
> succeed.

We need more details to know what is going on.  What analyzer are you 
using with indexing?

How are you building the query objects?   QueryParser?  Same Analyzer 
as with indexer?

(Succinct) code is the best :)

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb  6 16:20:27 2004
Return-Path: 
 <lucene-user-return-7002-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 48773 invoked from network); 6 Feb 2004 16:20:27 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 6 Feb 2004 16:20:27 -0000
Received: (qmail 19710 invoked by uid 500); 6 Feb 2004 16:20:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 19677 invoked by uid 500); 6 Feb 2004 16:20:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 19649 invoked from network); 6 Feb 2004 16:20:08 -0000
Received: from unknown (HELO tomts22-srv.bellnexxia.net) (209.226.175.184)
  by daedalus.apache.org with SMTP; 6 Feb 2004 16:20:08 -0000
Received: from everest.konova.com ([65.95.46.56])
          by tomts22-srv.bellnexxia.net
          (InterMail vM.5.01.06.05 201-253-122-130-105-20030824) with ESMTP
          id
 <20040206162010.BNPY26187.tomts22-srv.bellnexxia.net@everest.konova.com>
          for <lucene-user@jakarta.apache.org>;
          Fri, 6 Feb 2004 11:20:10 -0500
Received: from massif (IDENT:root@localhost [127.0.0.1])
	by everest.konova.com (8.11.6/8.11.6) with SMTP id i16GK4N16446
	for <lucene-user@jakarta.apache.org>; Fri, 6 Feb 2004 11:20:04 -0500
From: "Philippe Laflamme" <plaflamme@konova.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: RE: SQLDirectory
Date: Fri, 6 Feb 2004 11:22:07 -0500
Message-ID: <DNEDJIGLNAJOFEMFBJIJGEAPCEAA.plaflamme@konova.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <4022BADE.7040007@apache.org>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
Importance: Normal
X-MailScanner: Found to be clean
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> A connection per file sounds very heavyweight.

Indeed it is. Using Postgres' LargeObjects to represent a file has its
limitations: everytime Lucene requires a stream on a file, a connection is
required (and cannot be shared). Implementing it this way was quick, but not
at all optimal.

Your suggestion is quite interesting. It would not require the usage of
Blobs which are not very portable. It could be implement using standard SQL
types and would make an elegant SQLDirectory (and not an RDBMS specific
Directory).

Has anyone tried something like this? I could modify the PgSQLDirectory I've
created, but having previous experiences would be very helpful...

Regards,
Phil

> -----Original Message-----
> From: Doug Cutting [mailto:cutting@apache.org]
> Sent: February 5, 2004 16:51
> To: Lucene Users List
> Subject: Re: SQLDirectory
>
>
> Philippe Laflamme wrote:
> > I've worked on an implementation for Postgres. I used the Large
> Object API
> > provided by the Postgres JDBC driver. It works fine but I doubt
> it is very
> > scalable because the number of open connections during indexing
> can become
> > very high.
> >
> > Lucene opens many different files when writing to an index.
> This results in
> > opening one PG connection per open file. While working on a
> small index (30
> > 000 files), I saw the number of open connections become quite
> high (approx
> > 150). If you don't have a lot of RAM, this is problematic.
>
> A connection per file sounds very heavyweight.
>
> The way I would try to implement Directory with SQL is to have a single
> table of buffers per index, e.g., with columns ID, BLOCK_NUMBER and
> DATA.  The contents of a file are the appended DATA columns with the
> same ID, ordered by the BLOCK_NUMBER field.  This would be indexed by ID
> and BLOCK_NUMBER, together a unique key.
>
> The BLOCK_NUMBER field indicates which part of the file the row
> concerns.  Thus the DATA of BLOCK_NUMBER=0 might hold the first 1024
> bytes, the DATA of BLOCK_NUMBER=1 might hold the next 1024 bytes, and so
> on.  This would permit efficient random access.
>
> You'll need another table with NAME, ID, and MODIFIED_DATE, with a
> single entry per file.  The length of a file can be computed with a
> query that finds the length of DATA in the last BLOCK_NUMBER with an ID.
>
> I would initially cache a single connection to the database and
> serialize requests over it.  A pool of connections might be more
> efficient when multiple threads are searching, but I would benchmark
> that before investing much in such an implementation.
>
> Has anyone yet implemented an SQL Directory this way?
>
> Doug
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb  6 16:42:12 2004
Return-Path: 
 <lucene-user-return-7003-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 60888 invoked from network); 6 Feb 2004 16:42:12 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 6 Feb 2004 16:42:12 -0000
Received: (qmail 16290 invoked by uid 500); 6 Feb 2004 16:41:47 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16264 invoked by uid 500); 6 Feb 2004 16:41:47 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16200 invoked from network); 6 Feb 2004 16:41:46 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.84)
  by daedalus.apache.org with SMTP; 6 Feb 2004 16:41:46 -0000
Received: (cpmta 4521 invoked from network); 6 Feb 2004 08:41:48 -0800
Received: from 128.143.211.16 (HELO ?128.143.211.16?)
  by smtp.hatcher.net (209.228.32.84) with SMTP; 6 Feb 2004 08:41:48 -0800
X-Sent: 6 Feb 2004 16:41:48 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <00c501c3ecbd$5827e710$0401a8c0@antioch>
References: <00c501c3ecbd$5827e710$0401a8c0@antioch>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <5952EE4C-58C3-11D8-A28B-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Query question
Date: Fri, 6 Feb 2004 11:41:44 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Everything you are doing looks ok to me.  Next step is to run some 
sample text through something like the AnalyzerDemo.analyze method 
shown here:

	<http://today.java.net/pub/a/today/2003/07/30/LuceneIntro.html>

Be sure to use real world data, although "builder building" would be a 
good first pass to ensure all is working well then.  If you are really 
searching for "build*" using the code you've shown (without the 
quotes!) then it should work from my quick look at what you've done.

	Erik

On Feb 6, 2004, at 9:27 AM, Justin Woody wrote:

> Hi Erik,
>
> Here is the IndexWriter with the Standard analyzer:
> Class variable: IndexWriter writer;
>
>
> writer = IndexWriter(indexDirectory, new StandardAnalyzer(), true);
>
> While looping over the ResultSet I call this method:
>
> private void indexDoc(ResultSet rs) throws Exception {
>         Document doc = new Document();
>
>         doc.add(Field.UnIndexed("value", rs.getString("value")));
>         doc.add(Field.UnIndexed("name", rs.getString("name")));
>
>         doc.add(Field.UnStored("content",rs.getString("indexed")));
>
>         writer.addDocument(doc);
>     }
>
> The "indexed" data is a concatenation of the Code and Desciptor(s)
> fields that they want to search by. They are concatenated with a space.
> Ex. Select col1 as value, col2 as name, col3 || ' ' || col2 || ' ' ||
> col5 as indexed from tableName. Since there are many tables that are
> similar in structure I wrote the queries like this so I could multi
> thread the re indexing process on a frequent basis and use one generic
> class.
>
> Here is my test search class:
>
> public IndexSearchTest(String search, String index) throws Exception {
>         String indexName = dirLucene + index +"/";
>         System.out.println("Index Name " + indexName);
>
>         IndexSearcher searcher = new
> IndexSearcher(IndexReader.open(indexName));
>
>         Query query = QueryParser.parse(search.toUpperCase(), 
> "content",
> new StandardAnalyzer());
>
>         Hits hits = searcher.search(query);
>         Document result;
>         System.out.println("Begin Search Results");
>         for (int i=0;i<hits.length();i++) {
>             result = hits.doc(i);
>             System.out.println("Key :" + result.get("value") + " Desc: 
> "
> + result.get("name")) ;
>         }
>         System.out.println("Finished Search: " +hits.length());
>     }
>
> Thanks in advance,
> Justin
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Thursday, February 05, 2004 6:34 PM
> To: Lucene Users List
> Subject: Re: Query question
>
>
> On Feb 5, 2004, at 3:27 PM, Justin Woody wrote:
>> If I search the index for "building" it comes back fine (2 records) or
>
>> "builder" (1record), but if I search for "build*" I only receive one
>> record, in my example, the second record. The client would like all 3
>> records to come back. Is there a way I can make that happen? I've been
>
>> trying different query types and syntax, but haven't been able to
>> succeed.
>
> We need more details to know what is going on.  What analyzer are you
> using with indexing?
>
> How are you building the query objects?   QueryParser?  Same Analyzer
> as with indexer?
>
> (Succinct) code is the best :)
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb  6 19:02:30 2004
Return-Path: 
 <lucene-user-return-7004-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 41409 invoked from network); 6 Feb 2004 19:02:30 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 6 Feb 2004 19:02:30 -0000
Received: (qmail 21947 invoked by uid 500); 6 Feb 2004 19:02:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 21920 invoked by uid 500); 6 Feb 2004 19:02:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 21867 invoked from network); 6 Feb 2004 19:02:09 -0000
Received: from unknown (HELO germany.prod.thop-ny.triplehop.com)
 (216.74.150.80)
  by daedalus.apache.org with SMTP; 6 Feb 2004 19:02:09 -0000
Received: from hui2000 ([208.246.29.6]) by germany.prod.thop-ny.triplehop.com
 with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 6 Feb 2004 14:07:48 -0500
Message-ID: <052801c3ece4$028ed6c0$9e0010ac@thopny.triplehop.com>
From: "hui" <hui@triplehop.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <DNEDJIGLNAJOFEMFBJIJOEPACDAA.plaflamme@konova.com>
 <4022BADE.7040007@apache.org>
Subject: upgrade to lucene 1.3rc1 to 1.3 final
Date: Fri, 6 Feb 2004 14:04:13 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-OriginalArrivalTime: 06 Feb 2004 19:07:48.0718 (UTC)
 FILETIME=[82C568E0:01C3ECE4]
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,
Trying to upgrade the lucene1.3rc1 to 1.3 final, I got lots of problem on
the write.lock. Is there any option to set it compatiable with 1.3rc with
"write.lock" created in each index directory. With multiple applications
accessing multiple indices, I really got the problem to make them work
together with the new default write.lock option.
If not, can anyone give me a hint on which files are best to rollback for
1.3 final.
Thx.

Regards,
hui


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb  6 19:30:57 2004
Return-Path: 
 <lucene-user-return-7005-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 56837 invoked from network); 6 Feb 2004 19:30:57 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 6 Feb 2004 19:30:57 -0000
Received: (qmail 34501 invoked by uid 500); 6 Feb 2004 19:30:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 34441 invoked by uid 500); 6 Feb 2004 19:30:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 34375 invoked from network); 6 Feb 2004 19:30:28 -0000
Received: from unknown (HELO rwcrmhc11.comcast.net) (204.127.198.35)
  by daedalus.apache.org with SMTP; 6 Feb 2004 19:30:28 -0000
Received: from antioch (chr152dhcp341.chrchv01.md.comcast.net[68.33.153.85])
          by comcast.net (rwcrmhc11) with SMTP
          id <20040206193032013006sjaoe>; Fri, 6 Feb 2004 19:30:32 +0000
From: "Justin Woody" <justin.woody@comcast.net>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Query question
Date: Fri, 6 Feb 2004 14:32:31 -0500
Message-ID: <017101c3ece7$f720ac60$0401a8c0@antioch>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
In-Reply-To: <5952EE4C-58C3-11D8-A28B-000393A564E6@ehatchersolutions.com>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Erik,

The analysis class is parsing the terms as expected. However, no partial
terms will return results. I've tried the following:
build
build*
"build"
"build*"

All return 0 hits unless the entire word (in this case build) appears.
I've tried this with multiple keywords. Any other ideas?
Thanks,
Justin

Looking forward to your book, there's not enough info out there for
Lucene.

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: Friday, February 06, 2004 11:42 AM
To: Lucene Users List
Subject: Re: Query question


Everything you are doing looks ok to me.  Next step is to run some 
sample text through something like the AnalyzerDemo.analyze method 
shown here:

	<http://today.java.net/pub/a/today/2003/07/30/LuceneIntro.html>

Be sure to use real world data, although "builder building" would be a 
good first pass to ensure all is working well then.  If you are really 
searching for "build*" using the code you've shown (without the 
quotes!) then it should work from my quick look at what you've done.

	Erik

On Feb 6, 2004, at 9:27 AM, Justin Woody wrote:

> Hi Erik,
>
> Here is the IndexWriter with the Standard analyzer:
> Class variable: IndexWriter writer;
>
>
> writer = IndexWriter(indexDirectory, new StandardAnalyzer(), true);
>
> While looping over the ResultSet I call this method:
>
> private void indexDoc(ResultSet rs) throws Exception {
>         Document doc = new Document();
>
>         doc.add(Field.UnIndexed("value", rs.getString("value")));
>         doc.add(Field.UnIndexed("name", rs.getString("name")));
>
>         doc.add(Field.UnStored("content",rs.getString("indexed")));
>
>         writer.addDocument(doc);
>     }
>
> The "indexed" data is a concatenation of the Code and Desciptor(s) 
> fields that they want to search by. They are concatenated with a 
> space. Ex. Select col1 as value, col2 as name, col3 || ' ' || col2 || 
> ' ' || col5 as indexed from tableName. Since there are many tables 
> that are similar in structure I wrote the queries like this so I could

> multi thread the re indexing process on a frequent basis and use one 
> generic class.
>
> Here is my test search class:
>
> public IndexSearchTest(String search, String index) throws Exception {
>         String indexName = dirLucene + index +"/";
>         System.out.println("Index Name " + indexName);
>
>         IndexSearcher searcher = new 
> IndexSearcher(IndexReader.open(indexName));
>
>         Query query = QueryParser.parse(search.toUpperCase(),
> "content",
> new StandardAnalyzer());
>
>         Hits hits = searcher.search(query);
>         Document result;
>         System.out.println("Begin Search Results");
>         for (int i=0;i<hits.length();i++) {
>             result = hits.doc(i);
>             System.out.println("Key :" + result.get("value") + " Desc:
> "
> + result.get("name")) ;
>         }
>         System.out.println("Finished Search: " +hits.length());
>     }
>
> Thanks in advance,
> Justin
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Thursday, February 05, 2004 6:34 PM
> To: Lucene Users List
> Subject: Re: Query question
>
>
> On Feb 5, 2004, at 3:27 PM, Justin Woody wrote:
>> If I search the index for "building" it comes back fine (2 records) 
>> or
>
>> "builder" (1record), but if I search for "build*" I only receive one 
>> record, in my example, the second record. The client would like all 3

>> records to come back. Is there a way I can make that happen? I've 
>> been
>
>> trying different query types and syntax, but haven't been able to 
>> succeed.
>
> We need more details to know what is going on.  What analyzer are you 
> using with indexing?
>
> How are you building the query objects?   QueryParser?  Same Analyzer
> as with indexer?
>
> (Succinct) code is the best :)
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb  6 21:01:45 2004
Return-Path: 
 <lucene-user-return-7006-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8585 invoked from network); 6 Feb 2004 21:01:45 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 6 Feb 2004 21:01:45 -0000
Received: (qmail 71052 invoked by uid 500); 6 Feb 2004 21:01:25 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 71029 invoked by uid 500); 6 Feb 2004 21:01:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 71010 invoked from network); 6 Feb 2004 21:01:24 -0000
Received: from unknown (HELO five.zapatec.com) (66.117.150.100)
  by daedalus.apache.org with SMTP; 6 Feb 2004 21:01:24 -0000
Received: from rlx11.zapatec.com (rlx11.pr.zapatec.com [192.168.1.132])
	by five.zapatec.com (Postfix) with ESMTP id A17A25D26
	for <lucene-user@jakarta.apache.org>; Fri,  6 Feb 2004 13:01:30 -0800 (PST)
Received: (from dror@localhost)
	by rlx11.zapatec.com (8.12.3/8.12.3/Submit) id i16L1Uet011235
	for lucene-user@jakarta.apache.org; Fri, 6 Feb 2004 13:01:30 -0800 (PST)
	(envelope-from dror)
Date: Fri, 6 Feb 2004 13:01:30 -0800
From: Dror Matalon <dror@zapatec.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: SQLDirectory
Message-ID: <20040206210130.GW329@rlx11.zapatec.com>
References: <4022BADE.7040007@apache.org>
 <DNEDJIGLNAJOFEMFBJIJGEAPCEAA.plaflamme@konova.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <DNEDJIGLNAJOFEMFBJIJGEAPCEAA.plaflamme@konova.com>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Fri, Feb 06, 2004 at 11:22:07AM -0500, Philippe Laflamme wrote:
> > A connection per file sounds very heavyweight.
> 
> Indeed it is. Using Postgres' LargeObjects to represent a file has its
> limitations: everytime Lucene requires a stream on a file, a connection is
> required (and cannot be shared). Implementing it this way was quick, but not
> at all optimal.

But large objects have much better read/write performence than using
regular text fields.

> 
> Your suggestion is quite interesting. It would not require the usage of
> Blobs which are not very portable. It could be implement using standard SQL
> types and would make an elegant SQLDirectory (and not an RDBMS specific
> Directory).

I suspect you're going to get lousy performence compared to using
regular files. Why is it that you want to save the index files in a db?
It's not like you'll have any additional meta data or functionality. The
only advantage that I can think of is that you can have control of
read/write locking across machines. In other words, you can have one
machine doing the writing and one or more machines doing the
reading/searching.

> 
> Has anyone tried something like this? I could modify the PgSQLDirectory I've
> created, but having previous experiences would be very helpful...
> 
> Regards,
> Phil
> 
> > -----Original Message-----
> > From: Doug Cutting [mailto:cutting@apache.org]
> > Sent: February 5, 2004 16:51
> > To: Lucene Users List
> > Subject: Re: SQLDirectory
> >
> >
> > Philippe Laflamme wrote:
> > > I've worked on an implementation for Postgres. I used the Large
> > Object API
> > > provided by the Postgres JDBC driver. It works fine but I doubt
> > it is very
> > > scalable because the number of open connections during indexing
> > can become
> > > very high.
> > >
> > > Lucene opens many different files when writing to an index.
> > This results in
> > > opening one PG connection per open file. While working on a
> > small index (30
> > > 000 files), I saw the number of open connections become quite
> > high (approx
> > > 150). If you don't have a lot of RAM, this is problematic.
> >
> > A connection per file sounds very heavyweight.
> >
> > The way I would try to implement Directory with SQL is to have a single
> > table of buffers per index, e.g., with columns ID, BLOCK_NUMBER and
> > DATA.  The contents of a file are the appended DATA columns with the
> > same ID, ordered by the BLOCK_NUMBER field.  This would be indexed by ID
> > and BLOCK_NUMBER, together a unique key.
> >
> > The BLOCK_NUMBER field indicates which part of the file the row
> > concerns.  Thus the DATA of BLOCK_NUMBER=0 might hold the first 1024
> > bytes, the DATA of BLOCK_NUMBER=1 might hold the next 1024 bytes, and so
> > on.  This would permit efficient random access.
> >
> > You'll need another table with NAME, ID, and MODIFIED_DATE, with a
> > single entry per file.  The length of a file can be computed with a
> > query that finds the length of DATA in the last BLOCK_NUMBER with an ID.
> >
> > I would initially cache a single connection to the database and
> > serialize requests over it.  A pool of connections might be more
> > efficient when multiple threads are searching, but I would benchmark
> > that before investing much in such an implementation.
> >
> > Has anyone yet implemented an SQL Directory this way?
> >
> > Doug
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 

-- 
Dror Matalon
Zapatec Inc 
1700 MLK Way
Berkeley, CA 94709
http://www.fastbuzz.com
http://www.zapatec.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb  6 21:11:23 2004
Return-Path: 
 <lucene-user-return-7007-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 12437 invoked from network); 6 Feb 2004 21:11:23 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 6 Feb 2004 21:11:23 -0000
Received: (qmail 9747 invoked by uid 500); 6 Feb 2004 21:11:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 9721 invoked by uid 500); 6 Feb 2004 21:11:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 9703 invoked from network); 6 Feb 2004 21:11:02 -0000
Received: from unknown (HELO sccrmhc11.comcast.net) (204.127.202.55)
  by daedalus.apache.org with SMTP; 6 Feb 2004 21:11:02 -0000
Received: from apache.org (c-24-5-145-151.client.comcast.net[24.5.145.151])
          by comcast.net (sccrmhc11) with ESMTP
          id <2004020621110701100t7k4ge>; Fri, 6 Feb 2004 21:11:07 +0000
Message-ID: <402402EA.60208@apache.org>
Date: Fri, 06 Feb 2004 13:11:06 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040116
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: SQLDirectory
References: <4022BADE.7040007@apache.org>
 <DNEDJIGLNAJOFEMFBJIJGEAPCEAA.plaflamme@konova.com>
 <20040206210130.GW329@rlx11.zapatec.com>
In-Reply-To: <20040206210130.GW329@rlx11.zapatec.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Dror Matalon wrote:
> I suspect you're going to get lousy performence compared to using
> regular files.

Perhaps, but in theory it shouldn't be a lot worse than, e.g., accessing 
an index over NFS.  The tables might get fragmented as the index 
evolves, and database optimization might help performance.

> Why is it that you want to save the index files in a db?

> It's not like you'll have any additional meta data or functionality. The
> only advantage that I can think of is that you can have control of
> read/write locking across machines. In other words, you can have one
> machine doing the writing and one or more machines doing the
> reading/searching.

Transactional consistency is another reason: index data and application 
data can always be synchronized.

Also, in some environments, the only supported access to reliable, 
redundant, shared data might be through a database.  An SQLDirectory 
would enable one to deploy a Lucene-based application in such an 
environment without having to, e.g., get permission from operations to 
enable NFS.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb  6 21:15:33 2004
Return-Path: 
 <lucene-user-return-7008-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 13937 invoked from network); 6 Feb 2004 21:15:33 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 6 Feb 2004 21:15:33 -0000
Received: (qmail 28323 invoked by uid 500); 6 Feb 2004 21:14:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 28262 invoked by uid 500); 6 Feb 2004 21:14:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 28194 invoked from network); 6 Feb 2004 21:14:58 -0000
Received: from unknown (HELO mh2pdmz3a.bloomberg.com) (208.22.56.38)
  by daedalus.apache.org with SMTP; 6 Feb 2004 21:14:58 -0000
Received: from ns9.bloomberg.com (ns9.bloomberg.com [160.43.164.52]) by
 mh2pdmz3a.bloomberg.com with ESMTP for lucene-user@jakarta.apache.org;
 Fri, 6 Feb 2004 16:15:03 -0500
Received: from ny2535.corp.bloomberg.com (ny2535.bloomberg.com [172.20.73.26])
	by ns9.bloomberg.com (8.11.7p1+Sun/8.10.2) with ESMTP id i16LF1q04635
	for <lucene-user@jakarta.apache.org>; Fri, 6 Feb 2004 16:15:02 -0500 (EST)
Received: from ny2526.corp.bloomberg.com (unverified) by
 ny2535.corp.bloomberg.com
 (Content Technologies SMTPRS 4.3.12) with ESMTP id
 <T6798051291ac14491a78c@ny2535.corp.bloomberg.com> for
 <lucene-user@jakarta.apache.org>;
 Fri, 6 Feb 2004 16:15:00 -0500
content-class: urn:content-classes:message
Subject: RE: SQLDirectory
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Date: Fri, 6 Feb 2004 16:15:00 -0500
Message-Id: <3B530EF12E388B408ECC3162BA8C00F427C8A1@ny2526.corp.bloomberg.com>
X-MimeOLE: Produced By Microsoft Exchange V6.0.6375.0
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: SQLDirectory
Thread-Index: AcPs9cSb4RURnm9gTB+rRAChyfE4HgAABckA
From: "Chong, Herb" <HChong3@bloomberg.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

there are a couple of people who participated in TREC that used a =
relational database to directly store the postings list for each term. =
from what i recall, search performance in terms of elapsed time was =
reasonable, not particularly fast nor slow. i gather that each term's =
posting list was an individual BLOB in the database. the term string was =
used as the index column. i believe the group used stemming.

Herb...

-----Original Message-----
From: Doug Cutting [mailto:cutting@apache.org]
Sent: Friday, February 06, 2004 4:11 PM
To: Lucene Users List
Subject: Re: SQLDirectory

Also, in some environments, the only supported access to reliable,=20
redundant, shared data might be through a database.  An SQLDirectory=20
would enable one to deploy a Lucene-based application in such an=20
environment without having to, e.g., get permission from operations to=20
enable NFS.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb  6 21:24:11 2004
Return-Path: 
 <lucene-user-return-7009-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 17446 invoked from network); 6 Feb 2004 21:24:11 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 6 Feb 2004 21:24:11 -0000
Received: (qmail 64044 invoked by uid 500); 6 Feb 2004 21:23:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 64000 invoked by uid 500); 6 Feb 2004 21:23:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 63981 invoked from network); 6 Feb 2004 21:23:47 -0000
Received: from unknown (HELO tomts25-srv.bellnexxia.net) (209.226.175.188)
  by daedalus.apache.org with SMTP; 6 Feb 2004 21:23:47 -0000
Received: from everest.konova.com ([65.95.46.56])
          by tomts25-srv.bellnexxia.net
          (InterMail vM.5.01.06.05 201-253-122-130-105-20030824) with ESMTP
          id
 <20040206212352.INIP1499.tomts25-srv.bellnexxia.net@everest.konova.com>
          for <lucene-user@jakarta.apache.org>;
          Fri, 6 Feb 2004 16:23:52 -0500
Received: from massif (IDENT:root@localhost [127.0.0.1])
	by everest.konova.com (8.11.6/8.11.6) with SMTP id i16LNoN21250
	for <lucene-user@jakarta.apache.org>; Fri, 6 Feb 2004 16:23:50 -0500
From: "Philippe Laflamme" <plaflamme@konova.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: RE: SQLDirectory
Date: Fri, 6 Feb 2004 16:25:53 -0500
Message-ID: <DNEDJIGLNAJOFEMFBJIJEEBDCEAA.plaflamme@konova.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <20040206210130.GW329@rlx11.zapatec.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
Importance: Normal
X-MailScanner: Found to be clean
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> > > A connection per file sounds very heavyweight.
> >
> > Indeed it is. Using Postgres' LargeObjects to represent a file has its
> > limitations: every time Lucene requires a stream on a file, a
> connection is
> > required (and cannot be shared). Implementing it this way was
> quick, but not
> > at all optimal.
>
> But large objects have much better read/write performence than using
> regular text fields.

Maybe, but they require opening a lot of connections on the database (at
least, for Postgres' implementation). I don't know much about Lucene's
requirements regarding the number of files generated during indexing but
they seem large. So if the number of concurrently open files grows as the
index grows, opening a connection per file is not an option.

> >
> > Your suggestion is quite interesting. It would not require the usage of
> > Blobs which are not very portable. It could be implement using
> standard SQL
> > types and would make an elegant SQLDirectory (and not an RDBMS specific
> > Directory).
>
> I suspect you're going to get lousy performence compared to using
> regular files.

Yes and it was to be expected: it's doubtful that a large object be faster
than any regular file.

Postgres uses a regular file per large object, so with the additional
overhead of the JDBC driver, I was expecting slower performances. I did not
expect the number of connections to become so high though.

> Why is it that you want to save the index files in a db?
> It's not like you'll have any additional meta data or functionality. The
> only advantage that I can think of is that you can have control of
> read/write locking across machines. In other words, you can have one
> machine doing the writing and one or more machines doing the
> reading/searching.

I'm not looking for blazing indexing performance, I'm more interested in the
searching side of things. Making an index available on several different
hosts is trivial using a database, but not so easy using a file system.
Also, using database replication makes distributing an index a breeze... To
me, it's more a matter of creating a scalable design.

Any thoughts on that would be appreciated...

Regards,
Phil


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb  6 21:28:23 2004
Return-Path: 
 <lucene-user-return-7010-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 19352 invoked from network); 6 Feb 2004 21:28:23 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 6 Feb 2004 21:28:23 -0000
Received: (qmail 85959 invoked by uid 500); 6 Feb 2004 21:28:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 85926 invoked by uid 500); 6 Feb 2004 21:28:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 85898 invoked from network); 6 Feb 2004 21:28:02 -0000
Received: from unknown (HELO rwcrmhc11.comcast.net) (204.127.198.35)
  by daedalus.apache.org with SMTP; 6 Feb 2004 21:28:02 -0000
Received: from apache.org (c-24-5-145-151.client.comcast.net[24.5.145.151])
          by comcast.net (rwcrmhc11) with ESMTP
          id <200402062128080130072ldpe>; Fri, 6 Feb 2004 21:28:08 +0000
Message-ID: <402406E7.3000006@apache.org>
Date: Fri, 06 Feb 2004 13:28:07 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040116
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: SQLDirectory
References: <3B530EF12E388B408ECC3162BA8C00F427C8A1@ny2526.corp.bloomberg.com>
In-Reply-To: 
 <3B530EF12E388B408ECC3162BA8C00F427C8A1@ny2526.corp.bloomberg.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

That sort of representation works well for a static index, but it's not 
efficient to modify.  One could do this in Lucene by directly 
implementing the IndexReader API against an SQL database.  The database 
tables could be populated from a file-based IndexReader.  But I think 
implementing IndexWriter this way would be very slow.

Doug

Chong, Herb wrote:
> there are a couple of people who participated in TREC that used a relational database to directly store the postings list for each term. from what i recall, search performance in terms of elapsed time was reasonable, not particularly fast nor slow. i gather that each term's posting list was an individual BLOB in the database. the term string was used as the index column. i believe the group used stemming.
> 
> Herb...
> 
> -----Original Message-----
> From: Doug Cutting [mailto:cutting@apache.org]
> Sent: Friday, February 06, 2004 4:11 PM
> To: Lucene Users List
> Subject: Re: SQLDirectory
> 
> Also, in some environments, the only supported access to reliable, 
> redundant, shared data might be through a database.  An SQLDirectory 
> would enable one to deploy a Lucene-based application in such an 
> environment without having to, e.g., get permission from operations to 
> enable NFS.
> 
> Doug
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb  6 21:33:08 2004
Return-Path: 
 <lucene-user-return-7011-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21615 invoked from network); 6 Feb 2004 21:33:08 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 6 Feb 2004 21:33:08 -0000
Received: (qmail 4519 invoked by uid 500); 6 Feb 2004 21:32:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 4485 invoked by uid 500); 6 Feb 2004 21:32:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 4462 invoked from network); 6 Feb 2004 21:32:46 -0000
Received: from unknown (HELO mh2pdmz3a.bloomberg.com) (208.22.56.38)
  by daedalus.apache.org with SMTP; 6 Feb 2004 21:32:46 -0000
Received: from ns11.bloomberg.com (ns11.bloomberg.com [160.43.8.220]) by
 mh2pdmz3a.bloomberg.com with ESMTP for lucene-user@jakarta.apache.org;
 Fri, 6 Feb 2004 16:32:51 -0500
Received: from ny2535.corp.bloomberg.com (ny2535.bloomberg.com [172.20.73.26])
	by ns11.bloomberg.com (8.11.7p1+Sun/8.10.2) with ESMTP id i16LWoM00133
	for <lucene-user@jakarta.apache.org>; Fri, 6 Feb 2004 16:32:51 -0500 (EST)
Received: from ny2526.corp.bloomberg.com (unverified) by
 ny2535.corp.bloomberg.com
 (Content Technologies SMTPRS 4.3.12) with ESMTP id
 <T6798156525ac14491a78c@ny2535.corp.bloomberg.com> for
 <lucene-user@jakarta.apache.org>;
 Fri, 6 Feb 2004 16:32:50 -0500
content-class: urn:content-classes:message
Subject: RE: SQLDirectory
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Date: Fri, 6 Feb 2004 16:32:50 -0500
Message-Id: <3B530EF12E388B408ECC3162BA8C00F427C8A2@ny2526.corp.bloomberg.com>
X-MimeOLE: Produced By Microsoft Exchange V6.0.6375.0
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: SQLDirectory
Thread-Index: AcPs+CRXe8spoWwASvepDPXO9+FOFwAABUcw
From: "Chong, Herb" <HChong3@bloomberg.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

i agree mostly. however, i wonder if moderate sized indices that haven't =
been merged might be able to realize adequate performance this way while =
at the same time allowing some of the other desireable properties of =
using a database. what i am thinking of is that instead of a single =
posting list for a term that there be several moderately large ones, =
something like a set of indices from separate indexing runs before they =
are merged. delete performance would still be lousy, but add performance =
might be OK if the add operations were done in memory before committing =
them to the database. there would be a second index column, something =
like index number or something like that.

Herb...

-----Original Message-----
From: Doug Cutting [mailto:cutting@apache.org]
Sent: Friday, February 06, 2004 4:28 PM
To: Lucene Users List
Subject: Re: SQLDirectory


That sort of representation works well for a static index, but it's not=20
efficient to modify.  One could do this in Lucene by directly=20
implementing the IndexReader API against an SQL database.  The database=20
tables could be populated from a file-based IndexReader.  But I think=20
implementing IndexWriter this way would be very slow.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb  6 21:39:37 2004
Return-Path: 
 <lucene-user-return-7012-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 24362 invoked from network); 6 Feb 2004 21:39:37 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 6 Feb 2004 21:39:37 -0000
Received: (qmail 29826 invoked by uid 500); 6 Feb 2004 21:39:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 29785 invoked by uid 500); 6 Feb 2004 21:39:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 29732 invoked from network); 6 Feb 2004 21:39:06 -0000
Received: from unknown (HELO sccrmhc12.comcast.net) (204.127.202.56)
  by daedalus.apache.org with SMTP; 6 Feb 2004 21:39:06 -0000
Received: from apache.org (c-24-5-145-151.client.comcast.net[24.5.145.151])
          by comcast.net (sccrmhc12) with ESMTP
          id <20040206213911012008400ue>; Fri, 6 Feb 2004 21:39:11 +0000
Message-ID: <4024097E.7080505@apache.org>
Date: Fri, 06 Feb 2004 13:39:10 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040116
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: SQLDirectory
References: <3B530EF12E388B408ECC3162BA8C00F427C8A2@ny2526.corp.bloomberg.com>
In-Reply-To: 
 <3B530EF12E388B408ECC3162BA8C00F427C8A2@ny2526.corp.bloomberg.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

That could work.  It would essentially be using a MultiSearcher against 
a set of SQL-based IndexReaders, no?

Doug

Chong, Herb wrote:
> i agree mostly. however, i wonder if moderate sized indices that haven't been merged might be able to realize adequate performance this way while at the same time allowing some of the other desireable properties of using a database. what i am thinking of is that instead of a single posting list for a term that there be several moderately large ones, something like a set of indices from separate indexing runs before they are merged. delete performance would still be lousy, but add performance might be OK if the add operations were done in memory before committing them to the database. there would be a second index column, something like index number or something like that.
> 
> Herb...
> 
> -----Original Message-----
> From: Doug Cutting [mailto:cutting@apache.org]
> Sent: Friday, February 06, 2004 4:28 PM
> To: Lucene Users List
> Subject: Re: SQLDirectory
> 
> 
> That sort of representation works well for a static index, but it's not 
> efficient to modify.  One could do this in Lucene by directly 
> implementing the IndexReader API against an SQL database.  The database 
> tables could be populated from a file-based IndexReader.  But I think 
> implementing IndexWriter this way would be very slow.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb  6 21:41:16 2004
Return-Path: 
 <lucene-user-return-7013-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25480 invoked from network); 6 Feb 2004 21:41:16 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 6 Feb 2004 21:41:16 -0000
Received: (qmail 36724 invoked by uid 500); 6 Feb 2004 21:40:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 36543 invoked by uid 500); 6 Feb 2004 21:40:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 36514 invoked from network); 6 Feb 2004 21:40:54 -0000
Received: from unknown (HELO mh2pdmz3a.bloomberg.com) (208.22.56.38)
  by daedalus.apache.org with SMTP; 6 Feb 2004 21:40:54 -0000
Received: from ns9.bloomberg.com (ns9.bloomberg.com [160.43.164.52]) by
 mh2pdmz3a.bloomberg.com with ESMTP for lucene-user@jakarta.apache.org;
 Fri, 6 Feb 2004 16:40:59 -0500
Received: from ny2535.corp.bloomberg.com (ny2535.bloomberg.com [172.20.73.26])
	by ns9.bloomberg.com (8.11.7p1+Sun/8.10.2) with ESMTP id i16Lewq03989
	for <lucene-user@jakarta.apache.org>; Fri, 6 Feb 2004 16:40:59 -0500 (EST)
Received: from ny2526.corp.bloomberg.com (unverified) by
 ny2535.corp.bloomberg.com
 (Content Technologies SMTPRS 4.3.12) with ESMTP id
 <T67981cd67bac14491a78c@ny2535.corp.bloomberg.com> for
 <lucene-user@jakarta.apache.org>;
 Fri, 6 Feb 2004 16:40:58 -0500
content-class: urn:content-classes:message
Subject: RE: SQLDirectory
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Date: Fri, 6 Feb 2004 16:40:58 -0500
Message-Id: <3B530EF12E388B408ECC3162BA8C00F427C8A4@ny2526.corp.bloomberg.com>
X-MimeOLE: Produced By Microsoft Exchange V6.0.6375.0
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: SQLDirectory
Thread-Index: AcPs+bUirVis3U5MSmmNLhoyqO8eqwAABwGg
From: "Chong, Herb" <HChong3@bloomberg.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

i haven't used a MultiSearcher, but from what i have read, i believe =
that the concept is the same.

Herb...

-----Original Message-----
From: Doug Cutting [mailto:cutting@apache.org]
Sent: Friday, February 06, 2004 4:39 PM
To: Lucene Users List
Subject: Re: SQLDirectory


That could work.  It would essentially be using a MultiSearcher against=20
a set of SQL-based IndexReaders, no?

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb  6 21:50:47 2004
Return-Path: 
 <lucene-user-return-7014-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 30272 invoked from network); 6 Feb 2004 21:50:47 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 6 Feb 2004 21:50:47 -0000
Received: (qmail 75766 invoked by uid 500); 6 Feb 2004 21:49:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 75726 invoked by uid 500); 6 Feb 2004 21:49:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 75573 invoked from network); 6 Feb 2004 21:49:55 -0000
Received: from unknown (HELO five.zapatec.com) (66.117.150.100)
  by daedalus.apache.org with SMTP; 6 Feb 2004 21:49:55 -0000
Received: from rlx11.zapatec.com (rlx11.pr.zapatec.com [192.168.1.132])
	by five.zapatec.com (Postfix) with ESMTP id 289985D23
	for <lucene-user@jakarta.apache.org>; Fri,  6 Feb 2004 13:50:01 -0800 (PST)
Received: (from dror@localhost)
	by rlx11.zapatec.com (8.12.3/8.12.3/Submit) id i16Lo0YO011292
	for lucene-user@jakarta.apache.org; Fri, 6 Feb 2004 13:50:00 -0800 (PST)
	(envelope-from dror)
Date: Fri, 6 Feb 2004 13:50:00 -0800
From: Dror Matalon <dror@zapatec.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: SQLDirectory
Message-ID: <20040206215000.GX329@rlx11.zapatec.com>
References: <4022BADE.7040007@apache.org>
 <DNEDJIGLNAJOFEMFBJIJGEAPCEAA.plaflamme@konova.com>
 <20040206210130.GW329@rlx11.zapatec.com> <402402EA.60208@apache.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <402402EA.60208@apache.org>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Fri, Feb 06, 2004 at 01:11:06PM -0800, Doug Cutting wrote:
> Dror Matalon wrote:
> >I suspect you're going to get lousy performence compared to using
> >regular files.
> 
> Perhaps, but in theory it shouldn't be a lot worse than, e.g., accessing 
> an index over NFS.  The tables might get fragmented as the index 
> evolves, and database optimization might help performance.

Based on my experience it'll be slower if you use large object and
significantly slower if you don't. The db just can't push data as fast
as NFS does, and NFS has caching on the client side. 

We tested some of these issues at some point, and I wish I had the
numbers in front of me.
THere are some numbers at:
http://archives.postgresql.org/pgsql-jdbc/2002-04/msg00100.php


> 
> >Why is it that you want to save the index files in a db?
> 
> >It's not like you'll have any additional meta data or functionality. The
> >only advantage that I can think of is that you can have control of
> >read/write locking across machines. In other words, you can have one
> >machine doing the writing and one or more machines doing the
> >reading/searching.
> 
> Transactional consistency is another reason: index data and application 
> data can always be synchronized.
> 

That's a very good reason. But again, if you do this, you'll slow
performance even more. Still for small indexes where data integrity is
important it could help. 

> Also, in some environments, the only supported access to reliable, 
> redundant, shared data might be through a database.  An SQLDirectory 
> would enable one to deploy a Lucene-based application in such an 
> environment without having to, e.g., get permission from operations to 
> enable NFS.

That's a compelling argument. For small indexes it might be the best
solution. 

I'd be interested in seeing some benchmarks using SQLDirectory compared
to local file.

By the way, we *are* using NFS. We just make sure that the reader uses a
snapshot of the index.

> 
> Doug
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 

-- 
Dror Matalon
Zapatec Inc 
1700 MLK Way
Berkeley, CA 94709
http://www.fastbuzz.com
http://www.zapatec.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb  6 22:00:28 2004
Return-Path: 
 <lucene-user-return-7015-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 34736 invoked from network); 6 Feb 2004 22:00:28 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 6 Feb 2004 22:00:28 -0000
Received: (qmail 16324 invoked by uid 500); 6 Feb 2004 22:00:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16288 invoked by uid 500); 6 Feb 2004 22:00:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16258 invoked from network); 6 Feb 2004 22:00:03 -0000
Received: from unknown (HELO rlx13.zapatec.com) (66.117.144.213)
  by daedalus.apache.org with SMTP; 6 Feb 2004 22:00:03 -0000
Received: from rlx11.zapatec.com (rlx11.pr.zapatec.com [192.168.1.132])
	by rlx13.zapatec.com (Postfix) with ESMTP id 443EFA941
	for <lucene-user@jakarta.apache.org>; Fri,  6 Feb 2004 14:00:10 -0800 (PST)
Received: (from dror@localhost)
	by rlx11.zapatec.com (8.12.3/8.12.3/Submit) id i16M09SN011314
	for lucene-user@jakarta.apache.org; Fri, 6 Feb 2004 14:00:09 -0800 (PST)
	(envelope-from dror)
Date: Fri, 6 Feb 2004 14:00:09 -0800
From: Dror Matalon <dror@zapatec.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: SQLDirectory
Message-ID: <20040206220009.GZ329@rlx11.zapatec.com>
References: <20040206210130.GW329@rlx11.zapatec.com>
 <DNEDJIGLNAJOFEMFBJIJEEBDCEAA.plaflamme@konova.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <DNEDJIGLNAJOFEMFBJIJEEBDCEAA.plaflamme@konova.com>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Fri, Feb 06, 2004 at 04:25:53PM -0500, Philippe Laflamme wrote:
> > > > A connection per file sounds very heavyweight.
> > >
> > > Indeed it is. Using Postgres' LargeObjects to represent a file has its
> > > limitations: every time Lucene requires a stream on a file, a
> > connection is
> > > required (and cannot be shared). Implementing it this way was
> > quick, but not
> > > at all optimal.
> >
> > But large objects have much better read/write performence than using
> > regular text fields.
> 
> Maybe, but they require opening a lot of connections on the database (at
> least, for Postgres' implementation). I don't know much about Lucene's
> requirements regarding the number of files generated during indexing but
> they seem large. So if the number of concurrently open files grows as the
> index grows, opening a connection per file is not an option.

I've seen Lucene opene hundreds of files. It'd be quite an overhead to
open hundreds of connections to the database.

> 
> > >
> > > Your suggestion is quite interesting. It would not require the usage of
> > > Blobs which are not very portable. It could be implement using
> > standard SQL
> > > types and would make an elegant SQLDirectory (and not an RDBMS specific
> > > Directory).
> >
> > I suspect you're going to get lousy performence compared to using
> > regular files.
> 
> Yes and it was to be expected: it's doubtful that a large object be faster
> than any regular file.
> 
> Postgres uses a regular file per large object, so with the additional
> overhead of the JDBC driver, I was expecting slower performances. I did not
> expect the number of connections to become so high though.

I didn't realize that. I guess it make sense since that way you'd have
the best performence when you're reading/writing/seeking.

> 
> > Why is it that you want to save the index files in a db?
> > It's not like you'll have any additional meta data or functionality. The
> > only advantage that I can think of is that you can have control of
> > read/write locking across machines. In other words, you can have one
> > machine doing the writing and one or more machines doing the
> > reading/searching.
> 
> I'm not looking for blazing indexing performance, I'm more interested in the
> searching side of things. Making an index available on several different
> hosts is trivial using a database, but not so easy using a file system.
> Also, using database replication makes distributing an index a breeze... To
> me, it's more a matter of creating a scalable design.
> 

Fair enough.  We use postgres a lot, but as I mentioned earlier, we've
handled scaling issue using NFS and snapshots. I'm curious to see what
happens with your database approach.

> Any thoughts on that would be appreciated...

I'd give Doug's idea a shot. Use a lot of small text fields to store the
index.

Regards,

Dror

> 
> Regards,
> Phil
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 

-- 
Dror Matalon
Zapatec Inc 
1700 MLK Way
Berkeley, CA 94709
http://www.fastbuzz.com
http://www.zapatec.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb  6 22:45:10 2004
Return-Path: 
 <lucene-user-return-7016-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 53605 invoked from network); 6 Feb 2004 22:45:10 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 6 Feb 2004 22:45:10 -0000
Received: (qmail 94283 invoked by uid 500); 6 Feb 2004 22:44:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94256 invoked by uid 500); 6 Feb 2004 22:44:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94239 invoked from network); 6 Feb 2004 22:44:47 -0000
Received: from unknown (HELO rwcrmhc11.comcast.net) (204.127.198.35)
  by daedalus.apache.org with SMTP; 6 Feb 2004 22:44:47 -0000
Received: from antioch (chr152dhcp341.chrchv01.md.comcast.net[68.33.153.85])
          by comcast.net (rwcrmhc11) with SMTP
          id <2004020622445401300798phe>; Fri, 6 Feb 2004 22:44:54 +0000
From: "Justin Woody" <justin.woody@comcast.net>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Query question
Date: Fri, 6 Feb 2004 17:46:49 -0500
Message-ID: <018d01c3ed03$1df3af20$0401a8c0@antioch>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
In-Reply-To: <017101c3ece7$f720ac60$0401a8c0@antioch>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik,

I think I found the problem. I thought queries were case sensitive, but
after running your AnalyzerDemo, it seems that it was indexing all of my
information in lower case. Anyway, when I did a toLowerCase() on my
search string, the expected results were returned. Does this sound
right?

Thanks
Justin

-----Original Message-----
From: Justin Woody [mailto:justin.woody@comcast.net] 
Sent: Friday, February 06, 2004 2:33 PM
To: 'Lucene Users List'
Subject: RE: Query question


Hi Erik,

The analysis class is parsing the terms as expected. However, no partial
terms will return results. I've tried the following:
build
build*
"build"
"build*"

All return 0 hits unless the entire word (in this case build) appears.
I've tried this with multiple keywords. Any other ideas?
Thanks,
Justin

Looking forward to your book, there's not enough info out there for
Lucene.

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: Friday, February 06, 2004 11:42 AM
To: Lucene Users List
Subject: Re: Query question


Everything you are doing looks ok to me.  Next step is to run some 
sample text through something like the AnalyzerDemo.analyze method 
shown here:

	<http://today.java.net/pub/a/today/2003/07/30/LuceneIntro.html>

Be sure to use real world data, although "builder building" would be a 
good first pass to ensure all is working well then.  If you are really 
searching for "build*" using the code you've shown (without the 
quotes!) then it should work from my quick look at what you've done.

	Erik

On Feb 6, 2004, at 9:27 AM, Justin Woody wrote:

> Hi Erik,
>
> Here is the IndexWriter with the Standard analyzer:
> Class variable: IndexWriter writer;
>
>
> writer = IndexWriter(indexDirectory, new StandardAnalyzer(), true);
>
> While looping over the ResultSet I call this method:
>
> private void indexDoc(ResultSet rs) throws Exception {
>         Document doc = new Document();
>
>         doc.add(Field.UnIndexed("value", rs.getString("value")));
>         doc.add(Field.UnIndexed("name", rs.getString("name")));
>
>         doc.add(Field.UnStored("content",rs.getString("indexed")));
>
>         writer.addDocument(doc);
>     }
>
> The "indexed" data is a concatenation of the Code and Desciptor(s) 
> fields that they want to search by. They are concatenated with a 
> space. Ex. Select col1 as value, col2 as name, col3 || ' ' || col2 || 
> ' ' || col5 as indexed from tableName. Since there are many tables 
> that are similar in structure I wrote the queries like this so I could

> multi thread the re indexing process on a frequent basis and use one 
> generic class.
>
> Here is my test search class:
>
> public IndexSearchTest(String search, String index) throws Exception {
>         String indexName = dirLucene + index +"/";
>         System.out.println("Index Name " + indexName);
>
>         IndexSearcher searcher = new 
> IndexSearcher(IndexReader.open(indexName));
>
>         Query query = QueryParser.parse(search.toUpperCase(),
> "content",
> new StandardAnalyzer());
>
>         Hits hits = searcher.search(query);
>         Document result;
>         System.out.println("Begin Search Results");
>         for (int i=0;i<hits.length();i++) {
>             result = hits.doc(i);
>             System.out.println("Key :" + result.get("value") + " Desc:
> "
> + result.get("name")) ;
>         }
>         System.out.println("Finished Search: " +hits.length());
>     }
>
> Thanks in advance,
> Justin
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Thursday, February 05, 2004 6:34 PM
> To: Lucene Users List
> Subject: Re: Query question
>
>
> On Feb 5, 2004, at 3:27 PM, Justin Woody wrote:
>> If I search the index for "building" it comes back fine (2 records) 
>> or
>
>> "builder" (1record), but if I search for "build*" I only receive one 
>> record, in my example, the second record. The client would like all 3

>> records to come back. Is there a way I can make that happen? I've 
>> been
>
>> trying different query types and syntax, but haven't been able to 
>> succeed.
>
> We need more details to know what is going on.  What analyzer are you 
> using with indexing?
>
> How are you building the query objects?   QueryParser?  Same Analyzer
> as with indexer?
>
> (Succinct) code is the best :)
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sat Feb  7 12:33:22 2004
Return-Path: 
 <lucene-user-return-7017-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 47311 invoked from network); 7 Feb 2004 12:33:22 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 7 Feb 2004 12:33:22 -0000
Received: (qmail 4455 invoked by uid 500); 7 Feb 2004 12:33:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 4065 invoked by uid 500); 7 Feb 2004 12:33:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 4035 invoked from network); 7 Feb 2004 12:33:11 -0000
Received: from unknown (HELO expasy-ng.isb-sib.ch) (192.33.215.142)
  by daedalus.apache.org with SMTP; 7 Feb 2004 12:33:11 -0000
Received: from caliente (router.isb-sib.ch [192.33.215.254])
	(authenticated bits=0)
	by expasy-ng.isb-sib.ch (8.12.10/8.12.8) with ESMTP id i17CX5bs013374
	for <lucene-user@jakarta.apache.org>; Sat, 7 Feb 2004 13:33:05 +0100
Message-ID: <001101c3ed76$93421050$c300000a@caliente>
From: "Eric Jain" <Eric.Jain@isb-sib.ch>
To: "lucene-user" <lucene-user@jakarta.apache.org>
Subject: Nightly snapshots
Date: Sat, 7 Feb 2004 13:33:22 +0100
Organization: Swiss Institute of Bioinformatics
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-sib-MailScanner-Information: Please contact the ISP for more information
X-sib-MailScanner: Found to be clean
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

How come there is no nightly snapshot newer than 2003-09-09 at
http://cvs.apache.org/builds/jakarta-lucene/nightly/?


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sat Feb  7 22:30:12 2004
Return-Path: 
 <lucene-user-return-7018-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68403 invoked from network); 7 Feb 2004 22:30:12 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 7 Feb 2004 22:30:12 -0000
Received: (qmail 68696 invoked by uid 500); 7 Feb 2004 22:29:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 68659 invoked by uid 500); 7 Feb 2004 22:29:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 68577 invoked from network); 7 Feb 2004 22:29:40 -0000
Received: from unknown (HELO server007.webpack.hosteurope.de) (80.237.130.15)
  by daedalus.apache.org with SMTP; 7 Feb 2004 22:29:40 -0000
Received: from 80.129.72.224 (p508148E0.dip0.t-ipconnect.de [80.129.72.224])
	(authenticated bits=0)
	by server007.webpack.hosteurope.de (8.12.8/8.12.8) with ESMTP id
 i17MThgu013999
	for <lucene-user@jakarta.apache.org>; Sat, 7 Feb 2004 23:29:43 +0100
Date: Sat, 7 Feb 2004 23:32:35 +0100
From: Ramy Hardan <java@hardan.de>
X-Mailer: The Bat! (v2.00.6)
Reply-To: Ramy Hardan <java@hardan.de>
X-Priority: 3 (Normal)
Message-ID: <17640017652.20040207233235@hardan.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Search Refinement Approaches
In-Reply-To: <5952EE4C-58C3-11D8-A28B-000393A564E6@ehatchersolutions.com>
References: <00c501c3ecbd$5827e710$0401a8c0@antioch>
 <5952EE4C-58C3-11D8-A28B-000393A564E6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

Reviewing javadocs and previous posts, search refinement or 'search
within search' is best done with a Filter. To fill the Filter's BitSet
with the results of a search, a HitCollector is the obvious solution.
Unfortunately when using HitCollector I have to implement all the
functionality the Hits class usually provides myself.

Is there an efficient way to search refinement preferably without
losing the Hits class? I can think of the following approaches:

- Don't use Hits: collect all scores and document numbers with a
  HitCollector and sort them by score after the search. Retrieve the
  needed documents from IndexReader via document number.
- Use Hits: Briefly examining the source reveals this possiblilty:
  subclass BitSet and override the boolean get(int bitIndex) method to
  additionally set the bit at bitIndex in another BitSet. Use this
  subclass in a Filter and initialize it with all ones (in the first
  search). This way I can tell which documents are tested by the
  IndexSearcher against the Filter by examining the second BitSet and
  use it as a Filter for the refining search. Here's a scetch of this
  for clarification:

  public class FilterBitSet extends BitSet {
    private BitSet bitsForRefiningFilter;

    public boolean get( int bitIndex ) {
      boolean result = super.get( bitIndex );
      if (result) bitsForRefiningFilter.set( bitIndex );
      return result;
    }
  }

  Is this really possible? (might be more of a question for dev)

Last question about document numbers:
When and how exactly do they change? The javadoc states they change
upon addition and deletion. May I assume that a particular document
number is stable as long as it is not changed (deleted and added)
although other documents are added/deleted and optimize() is NOT
called? If yes, is this about to change in the foreseeable future?

Thanks in advance

Ramy

  



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb  8 03:20:27 2004
Return-Path: 
 <lucene-user-return-7019-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 47273 invoked from network); 8 Feb 2004 03:20:27 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 8 Feb 2004 03:20:27 -0000
Received: (qmail 49205 invoked by uid 500); 8 Feb 2004 03:20:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49174 invoked by uid 500); 8 Feb 2004 03:20:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49146 invoked from network); 8 Feb 2004 03:20:02 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.64)
  by daedalus.apache.org with SMTP; 8 Feb 2004 03:20:02 -0000
Received: (cpmta 20887 invoked from network); 7 Feb 2004 19:20:05 -0800
Received: from 24.51.109.181 (HELO ?192.168.1.102?)
  by smtp.hatcher.net (209.228.32.64) with SMTP; 7 Feb 2004 19:20:05 -0800
X-Sent: 8 Feb 2004 03:20:05 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <17640017652.20040207233235@hardan.de>
References: <00c501c3ecbd$5827e710$0401a8c0@antioch>
 <5952EE4C-58C3-11D8-A28B-000393A564E6@ehatchersolutions.com>
 <17640017652.20040207233235@hardan.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <ACE2F812-59E5-11D8-AA44-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Search Refinement Approaches
Date: Sat, 7 Feb 2004 22:19:59 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 7, 2004, at 5:32 PM, Ramy Hardan wrote:
> Is there an efficient way to search refinement preferably without
> losing the Hits class?

I'm not quite following your Filter questions, but QueryFilter seems to 
fit the bill for what you are trying to do.  Just keep around the 
previous query, and filter on it for successive searches.

> Last question about document numbers:
> When and how exactly do they change? The javadoc states they change
> upon addition and deletion. May I assume that a particular document
> number is stable as long as it is not changed (deleted and added)
> although other documents are added/deleted and optimize() is NOT
> called? If yes, is this about to change in the foreseeable future?

Document numbers change when a hole has been made by a delete and the 
index is optimized.  So, I think your assumption is fine, but 
personally I'm weary of relying on something potentially transient.  
Perhaps there is another way to accomplish what you are after?  A 
TermQuery is very fast, so maybe that could get you directly to a 
document of interest instead?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb  8 16:13:18 2004
Return-Path: 
 <lucene-user-return-7020-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 55586 invoked from network); 8 Feb 2004 16:13:18 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 8 Feb 2004 16:13:18 -0000
Received: (qmail 40871 invoked by uid 500); 8 Feb 2004 16:13:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 40840 invoked by uid 500); 8 Feb 2004 16:13:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 40824 invoked from network); 8 Feb 2004 16:13:03 -0000
Received: from unknown (HELO mail-out4.apple.com) (17.254.13.23)
  by daedalus.apache.org with SMTP; 8 Feb 2004 16:13:03 -0000
Received: from mailgate1.apple.com (a17-128-100-225.apple.com
 [17.128.100.225])
	by mail-out4.apple.com (8.12.11/8.12.11) with ESMTP id i18GD6C0022882
	for <lucene-user@jakarta.apache.org>; Sun, 8 Feb 2004 08:13:06 -0800 (PST)
Received: from relay2.apple.com (relay2.apple.com) by mailgate1.apple.com
 (Content Technologies SMTPRS 4.3.6) with ESMTP id
 <T67a0989771118064e13c8@mailgate1.apple.com> for
 <lucene-user@jakarta.apache.org>;
 Sun, 8 Feb 2004 08:13:06 -0800
Received: from apple.com ([17.112.72.134])
	by relay2.apple.com (8.12.11/8.12.11) with ESMTP id i18GD4Il019173
	for <lucene-user@jakarta.apache.org>; Sun, 8 Feb 2004 16:13:04 GMT
Date: Sun, 8 Feb 2004 11:13:03 -0500
Mime-Version: 1.0 (Apple Message framework v553)
Content-Type: text/plain; charset=US-ASCII; format=flowed
Subject: Newbie: PerFieldAnalyzerWrapper or Build a dynamic BooleanQuery
From: David Black <black@apple.com>
To: lucene-user@jakarta.apache.org
Content-Transfer-Encoding: 7bit
Message-Id: <AC4C7D81-5A51-11D8-B791-0003938892E6@apple.com>
X-Mailer: Apple Mail (2.553)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'm having difficulty understanding a couple of things and I appreciate 
any help here.

Let's assume I have an object that is composed of the following 
fields...

UID:  434      (Keyword/Stored)
TITLE:  "Java For Dum Dums"   (Text/Stored)
AUTHOR:  "Fred Smith"      -  Text/Stored
DESCRIPTION: "This would be a big long field"   - Text/Unstored
CONTEXT: "/Resources/Books/Computers & Technology/Languages/Java"   - 
Keyword

In order to let my code handle the dynamic definition of fields, I've 
been using the MuliFieldQueryParser and have had lots of trouble with 
the UID field.

I experimented with this thoroughly and discovered that using the word 
"dog"  as a UID works but "a1", "1", etc  doesn't.  It appears that an 
"untokenized" field is still analyzed for "real" words so my "UID" 
field which contains a code seems to get treated differently during 
indexing and searching.  I'm I nuts?

Another experiment showed me that a Term query during the search seems 
to work fine.  Hmmm.

Here's My Questions.....

1. Is the PerFieldAnalyzerWrapper the answer to this and if so, how do 
I use it?

2. Or would it be better for me to explicitly create a TermQuery for my 
UID and add it to a boolean query with the MutliFieldQueryParser output 
of the other fields?

3. Why would a field that was analyzed during indexing not be 
retrievable during search with the same analyzer.


A HUGE THANKS IN ADVANCE TO ANYONE WHO CAN HELP ME UNDERSTAND / ANSWER 
THIS.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb  8 17:39:33 2004
Return-Path: 
 <lucene-user-return-7021-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 88456 invoked from network); 8 Feb 2004 17:39:33 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 8 Feb 2004 17:39:33 -0000
Received: (qmail 58640 invoked by uid 500); 8 Feb 2004 17:39:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58610 invoked by uid 500); 8 Feb 2004 17:39:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58580 invoked from network); 8 Feb 2004 17:39:14 -0000
Received: from unknown (HELO server007.webpack.hosteurope.de) (80.237.130.15)
  by daedalus.apache.org with SMTP; 8 Feb 2004 17:39:14 -0000
Received: from 80.129.67.146 (p50814392.dip0.t-ipconnect.de [80.129.67.146])
	(authenticated bits=0)
	by server007.webpack.hosteurope.de (8.12.8/8.12.8) with ESMTP id
 i18HdFgu001458
	for <lucene-user@jakarta.apache.org>; Sun, 8 Feb 2004 18:39:16 +0100
Date: Sun, 8 Feb 2004 18:40:45 +0100
From: Ramy Hardan <java@hardan.de>
X-Mailer: The Bat! (v2.00.6)
Reply-To: Ramy Hardan <java@hardan.de>
X-Priority: 3 (Normal)
Message-ID: <68108907801.20040208184045@hardan.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Search Refinement Approaches
In-Reply-To: <ACE2F812-59E5-11D8-AA44-000393A564E6@ehatchersolutions.com>
References: <00c501c3ecbd$5827e710$0401a8c0@antioch>
 <5952EE4C-58C3-11D8-A28B-000393A564E6@ehatchersolutions.com>
 <17640017652.20040207233235@hardan.de>
 <ACE2F812-59E5-11D8-AA44-000393A564E6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Sunday, February 8, 2004, 4:19:59 AM, Erik Hatcher wrote:

> On Feb 7, 2004, at 5:32 PM, Ramy Hardan wrote:
>> Is there an efficient way to search refinement preferably without
>> losing the Hits class?

> I'm not quite following your Filter questions, but QueryFilter seems to
> fit the bill for what you are trying to do.  Just keep around the 
> previous query, and filter on it for successive searches.

First, thanks for your answer. Basically QueryFilter provides what I
need. But isn't the search actually executed twice, once for
retrieving the Hits and once for creating the QueryFilter instance if
refinement is needed afterwards? This is what I try to prevent. I see
that for the same query and unmodified index I can reuse a queryFilter
but this is quite unlikely in my scenario. Additionaly QueryFilter
doesn't seem to be ready for multiple refinement steps (like searching
for printers - HP - Laser - more than 16 ppm).

I'll try to implement different approaches, profile them and come back
with some evidence rather than bothering you with my speculations.
Thanks

Ramy


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb  8 18:35:45 2004
Return-Path: 
 <lucene-user-return-7022-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9036 invoked from network); 8 Feb 2004 18:35:45 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 8 Feb 2004 18:35:45 -0000
Received: (qmail 4094 invoked by uid 500); 8 Feb 2004 18:35:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 4068 invoked by uid 500); 8 Feb 2004 18:35:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 4050 invoked from network); 8 Feb 2004 18:35:28 -0000
Received: from unknown (HELO five.zapatec.com) (66.117.150.100)
  by daedalus.apache.org with SMTP; 8 Feb 2004 18:35:28 -0000
Received: from rlx11.zapatec.com (rlx11.pr.zapatec.com [192.168.1.132])
	by five.zapatec.com (Postfix) with ESMTP id AB4395D23
	for <lucene-user@jakarta.apache.org>; Sun,  8 Feb 2004 10:35:32 -0800 (PST)
Received: (from dror@localhost)
	by rlx11.zapatec.com (8.12.3/8.12.3/Submit) id i18IZWUQ015249
	for lucene-user@jakarta.apache.org; Sun, 8 Feb 2004 10:35:32 -0800 (PST)
	(envelope-from dror)
Date: Sun, 8 Feb 2004 10:35:32 -0800
From: Dror Matalon <dror@zapatec.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Search Refinement Approaches
Message-ID: <20040208183532.GB11782@rlx11.zapatec.com>
References: <00c501c3ecbd$5827e710$0401a8c0@antioch>
 <5952EE4C-58C3-11D8-A28B-000393A564E6@ehatchersolutions.com>
 <17640017652.20040207233235@hardan.de>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <17640017652.20040207233235@hardan.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Ramy,

Maybe I'm misunderstand the question but wouldn't creating a 
that ANDs the original query and the new one do what you want?

so if the original query was
foo bar

and the refinment is 
blah

create a new query that does:

(foo bar) AND (bar)

Seems a lot easier but maybe I'm missing something.

Regards,

Dror

On Sat, Feb 07, 2004 at 11:32:35PM +0100, Ramy Hardan wrote:
> Hi,
> 
> Reviewing javadocs and previous posts, search refinement or 'search
> within search' is best done with a Filter. To fill the Filter's BitSet
> with the results of a search, a HitCollector is the obvious solution.
> Unfortunately when using HitCollector I have to implement all the
> functionality the Hits class usually provides myself.
> 
> Is there an efficient way to search refinement preferably without
> losing the Hits class? I can think of the following approaches:
> 
> - Don't use Hits: collect all scores and document numbers with a
>   HitCollector and sort them by score after the search. Retrieve the
>   needed documents from IndexReader via document number.
> - Use Hits: Briefly examining the source reveals this possiblilty:
>   subclass BitSet and override the boolean get(int bitIndex) method to
>   additionally set the bit at bitIndex in another BitSet. Use this
>   subclass in a Filter and initialize it with all ones (in the first
>   search). This way I can tell which documents are tested by the
>   IndexSearcher against the Filter by examining the second BitSet and
>   use it as a Filter for the refining search. Here's a scetch of this
>   for clarification:
> 
>   public class FilterBitSet extends BitSet {
>     private BitSet bitsForRefiningFilter;
> 
>     public boolean get( int bitIndex ) {
>       boolean result = super.get( bitIndex );
>       if (result) bitsForRefiningFilter.set( bitIndex );
>       return result;
>     }
>   }
> 
>   Is this really possible? (might be more of a question for dev)
> 
> Last question about document numbers:
> When and how exactly do they change? The javadoc states they change
> upon addition and deletion. May I assume that a particular document
> number is stable as long as it is not changed (deleted and added)
> although other documents are added/deleted and optimize() is NOT
> called? If yes, is this about to change in the foreseeable future?
> 
> Thanks in advance
> 
> Ramy
> 
>   
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 

-- 
Dror Matalon
Zapatec Inc 
1700 MLK Way
Berkeley, CA 94709
http://www.fastbuzz.com
http://www.zapatec.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb  8 19:05:25 2004
Return-Path: 
 <lucene-user-return-7023-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21224 invoked from network); 8 Feb 2004 19:05:25 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 8 Feb 2004 19:05:25 -0000
Received: (qmail 82937 invoked by uid 500); 8 Feb 2004 19:05:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 82913 invoked by uid 500); 8 Feb 2004 19:05:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 82890 invoked from network); 8 Feb 2004 19:05:07 -0000
Received: from unknown (HELO mail.seeqa.com) (64.81.59.34)
  by daedalus.apache.org with SMTP; 8 Feb 2004 19:05:07 -0000
Received: from Spooler by mail.seeqa.com (Mercury/32 v3.31) ID MO00337C;
    8 Feb 04 11:07:21 -0800
Received: from spooler by mail.seeqa.com (Mercury/32 v3.31);
 8 Feb 04 11:07:05 -0800
Received: from seeqa.com (64.81.59.34) by mail.seeqa.com (Mercury/32 v3.31)
 with ESMTP ID MG00337B;
   8 Feb 04 11:07:04 -0800
Message-ID: <402688D8.8010904@seeqa.com>
Date: Sun, 08 Feb 2004 11:07:04 -0800
From: Chris Kimm <chris@seeqa.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;
 rv:1.4b) Gecko/20030507
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: lucene-user@jakarta.apache.org
Subject: Matching a single document
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

This may not fit any of Lucene's usage models, but is there a way to 
match a single document - before it has been indexed - to a query?

The motivation for this is to add a listener to the IndexWriter which 
listens for documents matching existing Query objects.  Two possible 
approaches, both of which seem ungainly, are 1) creating a temporary 
index for each document being indexed or 2) Writing a class that matches 
document Fields with Query Terms.  This second approach would require a 
way to extract individual Terms from Queries.  Is that possible?

Thanks,

Chris




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb  8 21:47:32 2004
Return-Path: 
 <lucene-user-return-7024-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 91246 invoked from network); 8 Feb 2004 21:47:32 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 8 Feb 2004 21:47:32 -0000
Received: (qmail 58751 invoked by uid 500); 8 Feb 2004 21:47:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58511 invoked by uid 500); 8 Feb 2004 21:47:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58490 invoked from network); 8 Feb 2004 21:47:12 -0000
Received: from unknown (HELO web12703.mail.yahoo.com) (216.136.173.240)
  by daedalus.apache.org with SMTP; 8 Feb 2004 21:47:12 -0000
Message-ID: <20040208214718.46737.qmail@web12703.mail.yahoo.com>
Received: from [83.131.124.167] by web12703.mail.yahoo.com via HTTP;
 Sun, 08 Feb 2004 13:47:18 PST
Date: Sun, 8 Feb 2004 13:47:18 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Nightly snapshots
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <001101c3ed76$93421050$c300000a@caliente>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

A problem with Gump, I believe.

Otis

--- Eric Jain <Eric.Jain@isb-sib.ch> wrote:
> How come there is no nightly snapshot newer than 2003-09-09 at
> http://cvs.apache.org/builds/jakarta-lucene/nightly/?
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb  8 23:46:11 2004
Return-Path: 
 <lucene-user-return-7025-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 50749 invoked from network); 8 Feb 2004 23:46:11 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 8 Feb 2004 23:46:11 -0000
Received: (qmail 34284 invoked by uid 500); 8 Feb 2004 23:45:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 34201 invoked by uid 500); 8 Feb 2004 23:45:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 34170 invoked from network); 8 Feb 2004 23:45:49 -0000
Received: from unknown (HELO server007.webpack.hosteurope.de) (80.237.130.15)
  by daedalus.apache.org with SMTP; 8 Feb 2004 23:45:49 -0000
Received: from 80.129.80.14 (p5081500E.dip0.t-ipconnect.de [80.129.80.14])
	(authenticated bits=0)
	by server007.webpack.hosteurope.de (8.12.8/8.12.8) with ESMTP id
 i18NjraT019876
	for <lucene-user@jakarta.apache.org>; Mon, 9 Feb 2004 00:45:54 +0100
Date: Mon, 9 Feb 2004 00:48:45 +0100
From: Ramy Hardan <java@hardan.de>
X-Mailer: The Bat! (v2.00.6)
Reply-To: Ramy Hardan <java@hardan.de>
X-Priority: 3 (Normal)
Message-ID: <183130987880.20040209004845@hardan.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Search Refinement Approaches
In-Reply-To: <20040208183532.GB11782@rlx11.zapatec.com>
References: <00c501c3ecbd$5827e710$0401a8c0@antioch>
 <5952EE4C-58C3-11D8-A28B-000393A564E6@ehatchersolutions.com>
 <17640017652.20040207233235@hardan.de>
 <20040208183532.GB11782@rlx11.zapatec.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello Dror,

Sunday, February 8, 2004, 7:35:32 PM, you wrote:

> Hi Ramy,

> Maybe I'm misunderstand the question but wouldn't creating a 
> that ANDs the original query and the new one do what you want?

You are absolutely right. This approach would yield the desired
result. But what I'm concerned about is to find the most performant
way of achieving this. I'm afraid that queries become slower as they
get more complex (the refinement levels increase). The bottom line
probably is that I have to implement the different strategies and
compare their performance.

Thanks and best regards

Ramy

> On Sat, Feb 07, 2004 at 11:32:35PM +0100, Ramy Hardan wrote:
>> Hi,
>> 
>> Reviewing javadocs and previous posts, search refinement or 'search
>> within search' is best done with a Filter. To fill the Filter's BitSet
>> with the results of a search, a HitCollector is the obvious solution.
>> Unfortunately when using HitCollector I have to implement all the
>> functionality the Hits class usually provides myself.
>> 
>> Is there an efficient way to search refinement preferably without
>> losing the Hits class? I can think of the following approaches:
>> 
>> - Don't use Hits: collect all scores and document numbers with a
>>   HitCollector and sort them by score after the search. Retrieve the
>>   needed documents from IndexReader via document number.
>> - Use Hits: Briefly examining the source reveals this possiblilty:
>>   subclass BitSet and override the boolean get(int bitIndex) method to
>>   additionally set the bit at bitIndex in another BitSet. Use this
>>   subclass in a Filter and initialize it with all ones (in the first
>>   search). This way I can tell which documents are tested by the
>>   IndexSearcher against the Filter by examining the second BitSet and
>>   use it as a Filter for the refining search. Here's a scetch of this
>>   for clarification:
>> 
>>   public class FilterBitSet extends BitSet {
>>     private BitSet bitsForRefiningFilter;
>> 
>>     public boolean get( int bitIndex ) {
>>       boolean result = super.get( bitIndex );
>>       if (result) bitsForRefiningFilter.set( bitIndex );
>>       return result;
>>     }
>>   }
>> 
>>   Is this really possible? (might be more of a question for dev)




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb  9 00:27:29 2004
Return-Path: 
 <lucene-user-return-7026-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 62143 invoked from network); 9 Feb 2004 00:27:29 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 9 Feb 2004 00:27:29 -0000
Received: (qmail 30133 invoked by uid 500); 9 Feb 2004 00:27:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 29976 invoked by uid 500); 9 Feb 2004 00:27:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 29958 invoked from network); 9 Feb 2004 00:27:05 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.84)
  by daedalus.apache.org with SMTP; 9 Feb 2004 00:27:05 -0000
Received: (cpmta 7434 invoked from network); 8 Feb 2004 16:27:12 -0800
Received: from 24.51.109.181 (HELO ?192.168.1.102?)
  by smtp.hatcher.net (209.228.32.84) with SMTP; 8 Feb 2004 16:27:12 -0800
X-Sent: 9 Feb 2004 00:27:12 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <AC4C7D81-5A51-11D8-B791-0003938892E6@apple.com>
References: <AC4C7D81-5A51-11D8-B791-0003938892E6@apple.com>
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed
Message-Id: <B1DC2792-5A96-11D8-AC58-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Newbie: PerFieldAnalyzerWrapper or Build a dynamic BooleanQuery
Date: Sun, 8 Feb 2004 19:27:08 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 8, 2004, at 11:13 AM, David Black wrote:
> Let's assume I have an object that is composed of the following=20
> fields...
>
> UID:  434      (Keyword/Stored)
> TITLE:  "Java For Dum Dums"   (Text/Stored)
> AUTHOR:  "Fred Smith"      -  Text/Stored
> DESCRIPTION: "This would be a big long field"   - Text/Unstored
> CONTEXT: "/Resources/Books/Computers & Technology/Languages/Java"   -=20=

> Keyword
>
> In order to let my code handle the dynamic definition of fields, I've=20=

> been using the MuliFieldQueryParser and have had lots of trouble with=20=

> the UID field.
>
> I experimented with this thoroughly and discovered that using the word=20=

> "dog"  as a UID works but "a1", "1", etc  doesn't.

The trouble with QueryParser & Co. is that it simply analyzes=20
everything.  What happens with UID in this case is very analyzer=20
dependent.

>   It appears that an "untokenized" field is still analyzed for "real"=20=

> words so my "UID" field which contains a code seems to get treated=20
> differently during indexing and searching.  I'm I nuts?

You are not nuts.  In fact, I dedicated a section of our upcoming=20
Lucene book to this very topic.  I'm going to paste the section below.

> 1. Is the PerFieldAnalyzerWrapper the answer to this and if so, how do=20=

> I use it?

Yes, it is an answer.  Whether it is *the* answer I'm not sure, but=20
PFAW comes in handy.

> 2. Or would it be better for me to explicitly create a TermQuery for=20=

> my UID and add it to a boolean query with the MutliFieldQueryParser=20
> output of the other fields?

This depends on your use case.  This is really a preferable way to do=20
things and makes it more precise.  But if users demand free form=20
querying on all fields then life is tougher.

> 3. Why would a field that was analyzed during indexing not be=20
> retrievable during search with the same analyzer.

But UID, as you said above, is a Keyword field.  Keyword fields are=20
_not_ analyzed during indexing.  Once indexed, there is no knowledge=20
whether a field was analyzed or not, and QueryParser blindly analyzes=20
it all.

> A HUGE THANKS IN ADVANCE TO ANYONE WHO CAN HELP ME UNDERSTAND / ANSWER=20=

> THIS.

Ok, here is the section from Lucene in Action.  I'll leave the=20
development of KeywordAnalyzer as an exercise for the reader (although=20=

its implementation is trivial, one of the simplest analyzers possible -=20=

only emit one token of the entire contents).  I hope this helps.

	Erik

---------
It is very easy to index a keyword, which is simply a single token=20
added to a field that bypasses tokenization and indexed exactly=20
as-is.=A0It is also straightforward to query for a term through the API=20=

TermQuery.=A0A dilemma can arise, however, if we expose QueryParser to=20=

users and attempts are made to query on Field.Keyword created=20
fields.=A0The =93keyword=94-ness of a field is only known during=20
indexing.=A0There is nothing special about keyword fields once indexed,=20=

as it is simply just another term.

Let=92s see the issue exposed with a straightforward test case that=20
indexes a document with a keyword field, and then attempts to find that=20=

document again.

public class KeywordAnalyzerTest extends TestCase {
=A0RAMDirectory directory;
=A0private IndexSearcher searcher;

=A0public void setUp() throws Exception {
=A0=A0=A0directory =3D new RAMDirectory();

=A0=A0=A0IndexWriter writer =3D new IndexWriter(directory,
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0new SimpleAnalyzer(),
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0true);

=A0=A0=A0Document doc =3D new Document();
=A0=A0=A0doc.add(Field.Keyword("partnum", "Q36"));
=A0=A0=A0doc.add(Field.Text("description", "Illidium Space Modulator"));
=A0=A0=A0writer.addDocument(doc);
=A0=A0=A0writer.close();

=A0=A0=A0searcher =3D new IndexSearcher(directory);
=A0}

=A0=A0public void testTermQuery() throws Exception {
=A0=A0=A0Query query =3D new TermQuery(new Term("partnum", "Q36"));
=A0=A0=A0Hits hits =3D searcher.search(query);
=A0=A0=A0assertEquals(1, hits.length());
=A0}
}

So far so good =96 we=92ve indexed a document and are able to retrieve =
it=20
using a TermQuery.=A0But what happens if we generate a query using=20
QueryParser?

=A0public void testBasicQueryParser() throws Exception {
=A0=A0=A0Query query =3D QueryParser.parse("partnum:Q36 AND SPACE",
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0"description",
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0new SimpleAnalyzer());=A0|#1

=A0=A0=A0Hits hits =3D searcher.search(query);
=A0=A0=A0assertEquals("note Q36 -> q",
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0"+partnum:q +space", =
query.toString("description"));
=A0=A0=A0assertEquals("doc not found :(", 0, hits.length());
=A0}

We=92re jumping ahead of ourselves a little by introducing QueryParser=20=

into the mix here (see section X.x for elaboration on=20
QueryParser).=A0This emphasizes a key point though: indexing and =
analysis=20
are intimately tied to searching.=A0The testBasicQueryParser test shows=20=

that searching for terms created using Field.Keyword when a query is=20
analyzed is problematic.=A0It=92s problematic because QueryParser =
analyzed=20
the partnum field, but it should not have.=A0To solve this discrepancy, =
a=20
KeywordAnalyzer is written to tokenize the entire stream as a single=20
token, imitating how Field.Keyword is handled during indexing. We only=20=

want one field =93analyzed=94 in this manner, so we leverage the=20
PerFieldAnalyzerWrapper to apply it only to the partnumfield.=A0First=20
let=92s look at the KeywordAnalyzer in action as it fixes the situation:

=A0public void testPerFieldAnalyzer() throws Exception {
=A0=A0=A0PerFieldAnalyzerWrapper analyzer =3D new =
PerFieldAnalyzerWrapper(
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0new =
SimpleAnalyzer());
=A0=A0=A0analyzer.addAnalyzer("partnum", new KeywordAnalyzer());=A0=A0=A0|=
#1

=A0=A0=A0Query query =3D QueryParser.parse("partnum:Q36 AND SPACE",
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0"description",
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0analyzer);

=A0=A0=A0Hits hits =3D searcher.search(query);
=A0=A0=A0assertEquals("Q36 kept as-is",
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0"+partnum:Q36 +space", =
query.toString("description"));
=A0=A0=A0assertEquals("doc found!", 1, hits.length());

=A0}



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb  9 01:21:49 2004
Return-Path: 
 <lucene-user-return-7027-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 83341 invoked from network); 9 Feb 2004 01:21:49 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 9 Feb 2004 01:21:49 -0000
Received: (qmail 61259 invoked by uid 500); 9 Feb 2004 01:21:23 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 61225 invoked by uid 500); 9 Feb 2004 01:21:23 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 61207 invoked from network); 9 Feb 2004 01:21:22 -0000
Received: from unknown (HELO mail-out4.apple.com) (17.254.13.23)
  by daedalus.apache.org with SMTP; 9 Feb 2004 01:21:22 -0000
Received: from mailgate2.apple.com (a17-128-100-204.apple.com
 [17.128.100.204])
	by mail-out4.apple.com (8.12.11/8.12.11) with ESMTP id i191LV4h029330
	for <lucene-user@jakarta.apache.org>; Sun, 8 Feb 2004 17:21:31 -0800 (PST)
Received: from relay3.apple.com (relay3.apple.com) by mailgate2.apple.com
 (Content Technologies SMTPRS 4.3.6) with ESMTP id
 <T67a28eae82118064cc748@mailgate2.apple.com> for
 <lucene-user@jakarta.apache.org>;
 Sun, 8 Feb 2004 17:21:31 -0800
Received: from apple.com ([17.112.72.134])
	by relay3.apple.com (8.12.11/8.12.11) with ESMTP id i191LS3T022613
	for <lucene-user@jakarta.apache.org>; Mon, 9 Feb 2004 01:21:29 GMT
Date: Sun, 8 Feb 2004 20:21:27 -0500
Subject: Re: Newbie: PerFieldAnalyzerWrapper or Build a dynamic BooleanQuery
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed
Mime-Version: 1.0 (Apple Message framework v553)
From: David Black <black@apple.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Content-Transfer-Encoding: quoted-printable
In-Reply-To: <B1DC2792-5A96-11D8-AC58-000393A564E6@ehatchersolutions.com>
Message-Id: <4865601E-5A9E-11D8-B791-0003938892E6@apple.com>
X-Mailer: Apple Mail (2.553)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thank you very much from the response...it was very helpful.  After=20
playing around some more, I figured out that my Keyword fields DO get=20
indexed which is why they can be retrieved with a Term query regardless=20=

of the analyzer at index time.  The problem I discovered was that using=20=

a search analyzer with a lower case filter / tokenizer ignores=20
numbers....hence the issue with my UID field.  The biggest help was=20
when i discovered the good toString() in the Query class...really helps=20=

you see what's going on.

Also, I stepped back from the problem and realized that a search on the=20=

"real text" is an end-user activity while operations with my UID are=20
strictly system-level and will be used only by the implementors of the=20=

framework....therefore it just made more sense for me to create another=20=

cover method for retrieving documents based upon an exact Term called. =20=

  I definately will be working with the PerFieldAnalyzerWrapper but I've=20=

got to devise a strategy to recall my field-types at search-time=20
because my framework is completely unaware of specific fields.


Thanks again for the response...look forward to seeing the book.



On Sunday, February 8, 2004, at 07:27 PM, Erik Hatcher wrote:

> On Feb 8, 2004, at 11:13 AM, David Black wrote:
>> Let's assume I have an object that is composed of the following=20
>> fields...
>>
>> UID:  434      (Keyword/Stored)
>> TITLE:  "Java For Dum Dums"   (Text/Stored)
>> AUTHOR:  "Fred Smith"      -  Text/Stored
>> DESCRIPTION: "This would be a big long field"   - Text/Unstored
>> CONTEXT: "/Resources/Books/Computers & Technology/Languages/Java"   -=20=

>> Keyword
>>
>> In order to let my code handle the dynamic definition of fields, I've=20=

>> been using the MuliFieldQueryParser and have had lots of trouble with=20=

>> the UID field.
>>
>> I experimented with this thoroughly and discovered that using the=20
>> word "dog"  as a UID works but "a1", "1", etc  doesn't.
>
> The trouble with QueryParser & Co. is that it simply analyzes=20
> everything.  What happens with UID in this case is very analyzer=20
> dependent.
>
>>   It appears that an "untokenized" field is still analyzed for "real"=20=

>> words so my "UID" field which contains a code seems to get treated=20
>> differently during indexing and searching.  I'm I nuts?
>
> You are not nuts.  In fact, I dedicated a section of our upcoming=20
> Lucene book to this very topic.  I'm going to paste the section below.
>
>> 1. Is the PerFieldAnalyzerWrapper the answer to this and if so, how=20=

>> do I use it?
>
> Yes, it is an answer.  Whether it is *the* answer I'm not sure, but=20
> PFAW comes in handy.
>
>> 2. Or would it be better for me to explicitly create a TermQuery for=20=

>> my UID and add it to a boolean query with the MutliFieldQueryParser=20=

>> output of the other fields?
>
> This depends on your use case.  This is really a preferable way to do=20=

> things and makes it more precise.  But if users demand free form=20
> querying on all fields then life is tougher.
>
>> 3. Why would a field that was analyzed during indexing not be=20
>> retrievable during search with the same analyzer.
>
> But UID, as you said above, is a Keyword field.  Keyword fields are=20
> _not_ analyzed during indexing.  Once indexed, there is no knowledge=20=

> whether a field was analyzed or not, and QueryParser blindly analyzes=20=

> it all.
>
>> A HUGE THANKS IN ADVANCE TO ANYONE WHO CAN HELP ME UNDERSTAND /=20
>> ANSWER THIS.
>
> Ok, here is the section from Lucene in Action.  I'll leave the=20
> development of KeywordAnalyzer as an exercise for the reader (although=20=

> its implementation is trivial, one of the simplest analyzers possible=20=

> - only emit one token of the entire contents).  I hope this helps.
>
> 	Erik
>
> ---------
> It is very easy to index a keyword, which is simply a single token=20
> added to a field that bypasses tokenization and indexed exactly=20
> as-is.=A0It is also straightforward to query for a term through the =
API=20
> TermQuery.=A0A dilemma can arise, however, if we expose QueryParser to=20=

> users and attempts are made to query on Field.Keyword created=20
> fields.=A0The =93keyword=94-ness of a field is only known during=20
> indexing.=A0There is nothing special about keyword fields once =
indexed,=20
> as it is simply just another term.
>
> Let=92s see the issue exposed with a straightforward test case that=20
> indexes a document with a keyword field, and then attempts to find=20
> that document again.
>
> public class KeywordAnalyzerTest extends TestCase {
> =A0RAMDirectory directory;
> =A0private IndexSearcher searcher;
>
> =A0public void setUp() throws Exception {
> =A0=A0=A0directory =3D new RAMDirectory();
>
> =A0=A0=A0IndexWriter writer =3D new IndexWriter(directory,
> =A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0new SimpleAnalyzer(),
> =A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0true);
>
> =A0=A0=A0Document doc =3D new Document();
> =A0=A0=A0doc.add(Field.Keyword("partnum", "Q36"));
> =A0=A0=A0doc.add(Field.Text("description", "Illidium Space =
Modulator"));
> =A0=A0=A0writer.addDocument(doc);
> =A0=A0=A0writer.close();
>
> =A0=A0=A0searcher =3D new IndexSearcher(directory);
> =A0}
>
> =A0=A0public void testTermQuery() throws Exception {
> =A0=A0=A0Query query =3D new TermQuery(new Term("partnum", "Q36"));
> =A0=A0=A0Hits hits =3D searcher.search(query);
> =A0=A0=A0assertEquals(1, hits.length());
> =A0}
> }
>
> So far so good =96 we=92ve indexed a document and are able to retrieve =
it=20
> using a TermQuery.=A0But what happens if we generate a query using=20
> QueryParser?
>
> =A0public void testBasicQueryParser() throws Exception {
> =A0=A0=A0Query query =3D QueryParser.parse("partnum:Q36 AND SPACE",
> =A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0"description",
> =A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0new SimpleAnalyzer());=A0|#1
>
> =A0=A0=A0Hits hits =3D searcher.search(query);
> =A0=A0=A0assertEquals("note Q36 -> q",
> =A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0"+partnum:q +space", =
query.toString("description"));
> =A0=A0=A0assertEquals("doc not found :(", 0, hits.length());
> =A0}
>
> We=92re jumping ahead of ourselves a little by introducing QueryParser=20=

> into the mix here (see section X.x for elaboration on=20
> QueryParser).=A0This emphasizes a key point though: indexing and=20
> analysis are intimately tied to searching.=A0The testBasicQueryParser=20=

> test shows that searching for terms created using Field.Keyword when a=20=

> query is analyzed is problematic.=A0It=92s problematic because =
QueryParser=20
> analyzed the partnum field, but it should not have.=A0To solve this=20
> discrepancy, a KeywordAnalyzer is written to tokenize the entire=20
> stream as a single token, imitating how Field.Keyword is handled=20
> during indexing. We only want one field =93analyzed=94 in this manner, =
so=20
> we leverage the PerFieldAnalyzerWrapper to apply it only to the=20
> partnumfield.=A0First let=92s look at the KeywordAnalyzer in action as =
it=20
> fixes the situation:
>
> =A0public void testPerFieldAnalyzer() throws Exception {
> =A0=A0=A0PerFieldAnalyzerWrapper analyzer =3D new =
PerFieldAnalyzerWrapper(
> =A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0new =
SimpleAnalyzer());
> =A0=A0=A0analyzer.addAnalyzer("partnum", new KeywordAnalyzer());=A0=A0=A0=
|#1
>
> =A0=A0=A0Query query =3D QueryParser.parse("partnum:Q36 AND SPACE",
> =A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0"description",
> =A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0analyzer);
>
> =A0=A0=A0Hits hits =3D searcher.search(query);
> =A0=A0=A0assertEquals("Q36 kept as-is",
> =A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0"+partnum:Q36 +space", =
query.toString("description"));
> =A0=A0=A0assertEquals("doc found!", 1, hits.length());
>
> =A0}
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb  9 16:44:44 2004
Return-Path: 
 <lucene-user-return-7028-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 62190 invoked from network); 9 Feb 2004 16:44:44 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 9 Feb 2004 16:44:44 -0000
Received: (qmail 82078 invoked by uid 500); 9 Feb 2004 16:44:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81921 invoked by uid 500); 9 Feb 2004 16:44:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81834 invoked from network); 9 Feb 2004 16:44:17 -0000
Received: from unknown (HELO sotr0085.cognos.com) (205.210.232.62)
  by daedalus.apache.org with SMTP; 9 Feb 2004 16:44:17 -0000
Received: by sotr0085.cognos.com with Internet Mail Service (5.5.2657.72)
	id <D59L1G9S>; Mon, 9 Feb 2004 11:44:23 -0500
Message-ID: <BF85C64585F2D61190EF0002A5CE6F3407FD3AF2@sottexch2.cognos.com>
From: "Weir, Michael" <Michael.Weir@cognos.com>
To: "Lucene Users List (E-mail)" <lucene-user@jakarta.apache.org>
Subject: Sample code for incremental index update
Date: Mon, 9 Feb 2004 11:44:19 -0500 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C3EF2B.F6893448"
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C3EF2B.F6893448
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Is there sample code anywhere for an 'index update' operation, that
incrementally adds, replaces, and deletes documents from an index? =20

Thanks.

Michael Weir =B7 Transform Research Inc. =B7 613.238.1363 x.114


This message may contain privileged and/or confidential information.  =
If you
have received this e-mail in error or are not the intended recipient, =
you
may not use, copy, disseminate or distribute it; do not open any
attachments, delete it immediately from your system and notify the =
sender
promptly by e-mail that you have done so.  Thank you.

------_=_NextPart_001_01C3EF2B.F6893448--

From MAILER-DAEMON Mon Feb  9 16:54:06 2004
Return-Path: 
 <lucene-user-return-7029-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68187 invoked from network); 9 Feb 2004 16:54:06 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 9 Feb 2004 16:54:06 -0000
Received: (qmail 19870 invoked by uid 500); 9 Feb 2004 16:53:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 19815 invoked by uid 500); 9 Feb 2004 16:53:34 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 19723 invoked from network); 9 Feb 2004 16:53:33 -0000
Received: from unknown (HELO smtp.uk.colt.net) (213.86.171.102)
  by daedalus.apache.org with SMTP; 9 Feb 2004 16:53:33 -0000
Received: from rte.ie (mx.rte.ie [217.173.98.209])
	by smtp.uk.colt.net (Postfix) with ESMTP id DE4ED62FB
	for <lucene-user@jakarta.apache.org>; Mon,  9 Feb 2004 16:51:57 +0000 (GMT)
Subject: Re: Sample code for incremental index update
From: John Moylan <johnm@rte.ie>
Reply-To: johnm@rte.ie
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <BF85C64585F2D61190EF0002A5CE6F3407FD3AF2@sottexch2.cognos.com>
References: <BF85C64585F2D61190EF0002A5CE6F3407FD3AF2@sottexch2.cognos.com>
Content-Type: text/plain; charset=ISO-8859-15
Organization: Radio Telifis Eireann
Message-Id: <1076345614.8640.0.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.2.2 (1.2.2-5) 
Date: 09 Feb 2004 16:53:35 +0000
Content-Transfer-Encoding: 8bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The demo files might be a good place to start looking.

John

On Mon, 2004-02-09 at 16:44, Weir, Michael wrote:
> Is there sample code anywhere for an 'index update' operation, that
> incrementally adds, replaces, and deletes documents from an index?  
> 
> Thanks.
> 
> Michael Weir � Transform Research Inc. � 613.238.1363 x.114
> 
> 
> This message may contain privileged and/or confidential information.  If you
> have received this e-mail in error or are not the intended recipient, you
> may not use, copy, disseminate or distribute it; do not open any
> attachments, delete it immediately from your system and notify the sender
> promptly by e-mail that you have done so.  Thank you.
-- 
John Moylan
----------------------
ePublishing
Radio Telefis Eireann,
Montrose House,
Donnybrook,
Dublin 4,
Eire
t:+353 1 2083564
e:john.moylan@rte.ie


******************************************************************************
The information in this e-mail is confidential and may be legally privileged.
It is intended solely for the addressee. Access to this e-mail by anyone else
is unauthorised. If you are not the intended recipient, any disclosure,
copying, distribution, or any action taken or omitted to be taken in reliance
on it, is prohibited and may be unlawful.
Please note that emails to, from and within RT� may be subject to the Freedom
of Information Act 1997 and may be liable to disclosure.
******************************************************************************

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb  9 17:27:45 2004
Return-Path: 
 <lucene-user-return-7030-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 89131 invoked from network); 9 Feb 2004 17:27:45 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 9 Feb 2004 17:27:45 -0000
Received: (qmail 58780 invoked by uid 500); 9 Feb 2004 17:27:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58740 invoked by uid 500); 9 Feb 2004 17:27:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58671 invoked from network); 9 Feb 2004 17:27:11 -0000
Received: from unknown (HELO sotr0085.cognos.com) (205.210.232.62)
  by daedalus.apache.org with SMTP; 9 Feb 2004 17:27:11 -0000
Received: by sotr0085.cognos.com with Internet Mail Service (5.5.2657.72)
	id <D59L1LMC>; Mon, 9 Feb 2004 12:27:18 -0500
Message-ID: <BF85C64585F2D61190EF0002A5CE6F3407FD3AF3@sottexch2.cognos.com>
From: "Weir, Michael" <Michael.Weir@cognos.com>
To: 'Lucene Users List' <lucene-user@jakarta.apache.org>
Subject: RE: Sample code for incremental index update
Date: Mon, 9 Feb 2004 12:26:33 -0500 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C3EF31.DD0C4C34"
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C3EF31.DD0C4C34
Content-Type: text/plain;
	charset="iso-8859-15"
Content-Transfer-Encoding: quoted-printable

Thanks.  So it's normal that documents are deleted using a reader and =
added
again using a writer? =20

Michael Weir =B7 Transform Research Inc. =B7 613.238.1363 x.114


-----Original Message-----
From: John Moylan [mailto:johnm@rte.ie]
Sent: Monday, February 09, 2004 11:54 AM
To: Lucene Users List
Subject: Re: Sample code for incremental index update


The demo files might be a good place to start looking.

John

On Mon, 2004-02-09 at 16:44, Weir, Michael wrote:
> Is there sample code anywhere for an 'index update' operation, that
> incrementally adds, replaces, and deletes documents from an index? =20
>=20
> Thanks.
>=20
> Michael Weir =B7 Transform Research Inc. =B7 613.238.1363 x.114
>=20
>=20
> This message may contain privileged and/or confidential information.  =
If
you
> have received this e-mail in error or are not the intended recipient, =
you
> may not use, copy, disseminate or distribute it; do not open any
> attachments, delete it immediately from your system and notify the =
sender
> promptly by e-mail that you have done so.  Thank you.
--=20
John Moylan
----------------------
ePublishing
Radio Telefis Eireann,
Montrose House,
Donnybrook,
Dublin 4,
Eire
t:+353 1 2083564
e:john.moylan@rte.ie


************************************************************************=
****
**
The information in this e-mail is confidential and may be legally
privileged.
It is intended solely for the addressee. Access to this e-mail by =
anyone
else
is unauthorised. If you are not the intended recipient, any disclosure,
copying, distribution, or any action taken or omitted to be taken in
reliance
on it, is prohibited and may be unlawful.
Please note that emails to, from and within RT=C9 may be subject to the
Freedom
of Information Act 1997 and may be liable to disclosure.
************************************************************************=
****
**

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


This message may contain privileged and/or confidential information.  =
If you
have received this e-mail in error or are not the intended recipient, =
you
may not use, copy, disseminate or distribute it; do not open any
attachments, delete it immediately from your system and notify the =
sender
promptly by e-mail that you have done so.  Thank you.

------_=_NextPart_001_01C3EF31.DD0C4C34--

From MAILER-DAEMON Mon Feb  9 17:34:38 2004
Return-Path: 
 <lucene-user-return-7031-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 94663 invoked from network); 9 Feb 2004 17:34:38 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 9 Feb 2004 17:34:38 -0000
Received: (qmail 87037 invoked by uid 500); 9 Feb 2004 17:32:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 86941 invoked by uid 500); 9 Feb 2004 17:32:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 86634 invoked from network); 9 Feb 2004 17:32:12 -0000
Received: from unknown (HELO smtp.uk.colt.net) (213.86.171.102)
  by daedalus.apache.org with SMTP; 9 Feb 2004 17:32:12 -0000
Received: from rte.ie (mx.rte.ie [217.173.98.209])
	by smtp.uk.colt.net (Postfix) with ESMTP id B30C2DE18
	for <lucene-user@jakarta.apache.org>; Mon,  9 Feb 2004 17:35:46 +0000 (GMT)
Subject: RE: Sample code for incremental index update
From: John Moylan <johnm@rte.ie>
Reply-To: johnm@rte.ie
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <BF85C64585F2D61190EF0002A5CE6F3407FD3AF3@sottexch2.cognos.com>
References: <BF85C64585F2D61190EF0002A5CE6F3407FD3AF3@sottexch2.cognos.com>
Content-Type: text/plain; charset=ISO-8859-15
Organization: Radio Telifis Eireann
Message-Id: <1076347858.8640.7.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.2.2 (1.2.2-5) 
Date: 09 Feb 2004 17:31:00 +0000
Content-Transfer-Encoding: 8bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Yep 
http://www.jguru.com/faq/view.jsp?EID=492423

On Mon, 2004-02-09 at 17:26, Weir, Michael wrote:
> Thanks.  So it's normal that documents are deleted using a reader and added
> again using a writer?  
> 
> Michael Weir � Transform Research Inc. � 613.238.1363 x.114
> 
> 
> -----Original Message-----
> From: John Moylan [mailto:johnm@rte.ie]
> Sent: Monday, February 09, 2004 11:54 AM
> To: Lucene Users List
> Subject: Re: Sample code for incremental index update
> 
> 
> The demo files might be a good place to start looking.
> 
> John
> 
> On Mon, 2004-02-09 at 16:44, Weir, Michael wrote:
> > Is there sample code anywhere for an 'index update' operation, that
> > incrementally adds, replaces, and deletes documents from an index?  
> > 
> > Thanks.
> > 
> > Michael Weir � Transform Research Inc. � 613.238.1363 x.114
> > 
> > 
> > This message may contain privileged and/or confidential information.  If
> you
> > have received this e-mail in error or are not the intended recipient, you
> > may not use, copy, disseminate or distribute it; do not open any
> > attachments, delete it immediately from your system and notify the sender
> > promptly by e-mail that you have done so.  Thank you.
-- 
John Moylan
----------------------
ePublishing
Radio Telefis Eireann,
Montrose House,
Donnybrook,
Dublin 4,
Eire
t:+353 1 2083564
e:john.moylan@rte.ie


******************************************************************************
The information in this e-mail is confidential and may be legally privileged.
It is intended solely for the addressee. Access to this e-mail by anyone else
is unauthorised. If you are not the intended recipient, any disclosure,
copying, distribution, or any action taken or omitted to be taken in reliance
on it, is prohibited and may be unlawful.
Please note that emails to, from and within RT� may be subject to the Freedom
of Information Act 1997 and may be liable to disclosure.
******************************************************************************

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb  9 19:46:07 2004
Return-Path: 
 <lucene-user-return-7033-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 69665 invoked from network); 9 Feb 2004 19:46:07 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 9 Feb 2004 19:46:07 -0000
Received: (qmail 77964 invoked by uid 500); 9 Feb 2004 19:45:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77925 invoked by uid 500); 9 Feb 2004 19:45:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77898 invoked from network); 9 Feb 2004 19:45:47 -0000
Received: from unknown (HELO mailout10.sul.t-online.com) (194.25.134.21)
  by daedalus.apache.org with SMTP; 9 Feb 2004 19:45:47 -0000
Received: from fwd00.aul.t-online.de
	by mailout10.sul.t-online.com with smtp
	id 1AqGfO-0004uj-03; Mon, 09 Feb 2004 20:01:58 +0100
Received: from pd9ebed16.dip.t-dialin.net
 (bpcVdwZXgev2OkIE4ldL5bhyWPHVa2DD8HoGCO2tQWSp8c3VcM7r0u@[217.235.237.22]) by
 fmrl00.sul.t-online.com
	with esmtp id 1AqGeI-276ThY0; Mon, 9 Feb 2004 20:00:50 +0100
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Matching a single document
Date: Mon, 9 Feb 2004 20:00:38 +0100
User-Agent: KMail/1.5.94
References: <402688D8.8010904@seeqa.com>
In-Reply-To: <402688D8.8010904@seeqa.com>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: quoted-printable
Message-Id: <200402092000.39135@danielnaber.de>
X-Seen: false
X-ID: bpcVdwZXgev2OkIE4ldL5bhyWPHVa2DD8HoGCO2tQWSp8c3VcM7r0u@t-dialin.net
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Sunday 08 February 2004 20:07, Chris Kimm wrote:

> =A0Two possible
> approaches, both of which seem ungainly, are 1) creating a temporary
> index for each document being indexed=20

You can use a RAMDirectory for indexing so nothing needs to be written to=20
disk. This should be quite fast.

> or 2) Writing a class that matches=20
> document Fields with Query Terms. =A0This second approach would require a
> way to extract individual Terms from Queries. =A0Is that possible?

Yes, you need to recursively iterate over all parts of the query. For=20
example, a boolean query may consist of other boolean queries. You need to=
=20
go down until you've got a TermQuery, which holds the term itself (or you=20
could use rewrite() to make this easier).

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb  9 19:07:57 2004
Return-Path: 
 <lucene-user-return-7032-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 49257 invoked from network); 9 Feb 2004 19:07:57 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 9 Feb 2004 19:07:57 -0000
Received: (qmail 20770 invoked by uid 500); 9 Feb 2004 19:07:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 20740 invoked by uid 500); 9 Feb 2004 19:07:31 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 20688 invoked from network); 9 Feb 2004 19:07:31 -0000
Received: from unknown (HELO mail.altrec.com) (63.251.175.11)
  by daedalus.apache.org with SMTP; 9 Feb 2004 19:07:31 -0000
Received: by DENALI with Internet Mail Service (5.5.2656.59)
	id <CPTVR5Z2>; Mon, 9 Feb 2004 11:07:35 -0800
Message-ID: <55903574BD75D311B8A0009027CCC22B031BCF76@DENALI>
From: Gus Kormeier <gusk@altrec.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: MultiFieldQueryParser.setOperator()
Date: Mon, 9 Feb 2004 11:07:33 -0800 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2656.59)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Sorry if this is a newbie question,

I want to change the default search to use AND instead of OR when combining
words.  The default Lucene does a great job at finding documents, but I
would like to return 30 instead of 3,000 hits when someone types multiple
words.
For instance here:
http://www.greatoutdoors.com/go/search.jsp?query=north+face+jacket

I am using:

String [] fields = {"name","brand","description","teaser" };
Analyzer analyzer = new StandardAnalyzer();
Query query = MultiFieldQueryParser.parse(line, fields, analyzer);


I was going to try something like this:
       MultiFieldQueryParser mfqp = new MultiFieldQueryParser(line /* what
is this string to the constructor? */ ,analyzer);
       mfqp.setOperator(mfqp.DEFAULT_OPERATOR_AND);
       Query query = MultiFieldQueryParser.parse(line, fields, analyzer);


But parse(String line,String [] fields,Analyzer a) is static, so
setOperator() has no effect on it.

I was expecting to see a constructor where I could set the String[] for
which fields to search, but it isn't there(API 1.3).  Otherwise the
MultiFieldQueryParser works great for my purposes.

Am I reading the API wrong?  Is there a way to search Multi fields and
setOperator()?

One solution I can see, would it be better to Index all of the fields into
one blob of a field as well, and just search off of that?


Thanks in Advance,
-Gus

P.S. Have been very impressed with the speed and flexibility of Lucene so
far.  


Gus Kormeier - tech | gusk@altrec.com <<mailto:gusk@altrec.com>> |
425.605.4008




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb  9 19:59:14 2004
Return-Path: 
 <lucene-user-return-7034-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 76414 invoked from network); 9 Feb 2004 19:59:14 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 9 Feb 2004 19:59:14 -0000
Received: (qmail 36613 invoked by uid 500); 9 Feb 2004 19:58:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 36571 invoked by uid 500); 9 Feb 2004 19:58:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 36549 invoked from network); 9 Feb 2004 19:58:52 -0000
Received: from unknown (HELO prvmail.dalycommerce.net) (207.140.4.129)
  by daedalus.apache.org with SMTP; 9 Feb 2004 19:58:52 -0000
Received: by PRVMAIL with Internet Mail Service (5.5.2653.19)
	id <D839PQKQ>; Mon, 9 Feb 2004 15:00:36 -0500
Message-ID: <B46260C3550ED8119FD100096BA51BF43A1DA3@PRVMAIL>
From: "Clay, Brian" <bclay@dalycommerce.net>
To: "'lucene-user@jakarta.apache.org'" <lucene-user@jakarta.apache.org>
Subject: Lucene 1.3 final -- Lock/Segment permission errors
Date: Mon, 9 Feb 2004 15:00:33 -0500 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C3EF47.606EB390"
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C3EF47.606EB390
Content-Type: text/plain

We are in the process of migrating an application from WAS 5.1 to Sun
Application server 8 (for technical reason version 7 is incompatible with
our application). Under WAS Lucene works great; however, when building an
index under Sun we get a java.security.AccessControlException when Lucene
attempts to delete any segment file also any time the application attempts
to delete the write.lock file the same error is being thrown. It seems that
the permissions are fine for Read/Write; however, delete is illegal. Though
the documents created are deleted without error.

Has anyone gotten Lucene to work on Sun Application Server 8 or encountered
this problem?

Any help would be great.

Thanks,

Brian Clay

~


------_=_NextPart_001_01C3EF47.606EB390--

From MAILER-DAEMON Mon Feb  9 20:51:58 2004
Return-Path: 
 <lucene-user-return-7035-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 17676 invoked from network); 9 Feb 2004 20:51:58 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 9 Feb 2004 20:51:58 -0000
Received: (qmail 90259 invoked by uid 500); 9 Feb 2004 20:51:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 90231 invoked by uid 500); 9 Feb 2004 20:51:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 90171 invoked from network); 9 Feb 2004 20:51:29 -0000
Received: from unknown (HELO web12705.mail.yahoo.com) (216.136.173.242)
  by daedalus.apache.org with SMTP; 9 Feb 2004 20:51:29 -0000
Message-ID: <20040209205134.78192.qmail@web12705.mail.yahoo.com>
Received: from [195.29.138.168] by web12705.mail.yahoo.com via HTTP;
 Mon, 09 Feb 2004 12:51:34 PST
Date: Mon, 9 Feb 2004 12:51:34 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene 1.3 final -- Lock/Segment permission errors
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <B46260C3550ED8119FD100096BA51BF43A1DA3@PRVMAIL>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I would first look at the exact command line that is used to start the
app server.  Could it be that includes something like
-Djava.io.temp=some-directory-here ?
Lucene uses java.io.temp System property to determine the
location/directory to use for lock files.  Maybe this app server uses
some directory with insufficient permissions.


Otis

--- "Clay, Brian" <bclay@dalycommerce.net> wrote:
> We are in the process of migrating an application from WAS 5.1 to Sun
> Application server 8 (for technical reason version 7 is incompatible
> with
> our application). Under WAS Lucene works great; however, when
> building an
> index under Sun we get a java.security.AccessControlException when
> Lucene
> attempts to delete any segment file also any time the application
> attempts
> to delete the write.lock file the same error is being thrown. It
> seems that
> the permissions are fine for Read/Write; however, delete is illegal.
> Though
> the documents created are deleted without error.
> 
> Has anyone gotten Lucene to work on Sun Application Server 8 or
> encountered
> this problem?
> 
> Any help would be great.
> 
> Thanks,
> 
> Brian Clay
> 
> ~
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb  9 21:09:14 2004
Return-Path: 
 <lucene-user-return-7036-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 32561 invoked from network); 9 Feb 2004 21:09:14 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 9 Feb 2004 21:09:14 -0000
Received: (qmail 56948 invoked by uid 500); 9 Feb 2004 21:08:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 56923 invoked by uid 500); 9 Feb 2004 21:08:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 56899 invoked from network); 9 Feb 2004 21:08:54 -0000
Received: from unknown (HELO twix.hotpop.com) (38.113.3.71)
  by daedalus.apache.org with SMTP; 9 Feb 2004 21:08:54 -0000
Received: from hotpop.com (kubrick.hotpop.com [38.113.3.103])
	by twix.hotpop.com (Postfix) with SMTP id C66B7D6432D
	for <lucene-user@jakarta.apache.org>; Mon,  9 Feb 2004 21:00:17 +0000 (UTC)
Received: from cocof07rbdxa0p (danton-1-81-57-18-97.fbx.proxad.net
 [81.57.18.97])
	by smtp-1.hotpop.com (Postfix) with SMTP id B97CE1A0166
	for <lucene-user@jakarta.apache.org>; Mon,  9 Feb 2004 20:46:47 +0000 (UTC)
Message-ID: <000801c3ef50$eb2f3eb0$61123951@cocof07rbdxa0p>
From: "Nicolas Maisonneuve" <n.maisonneuve@hotpop.com>
To: <lucene-user@jakarta.apache.org>
Subject: featues page in the Lucene web site
Date: Mon, 9 Feb 2004 22:08:48 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0005_01C3EF59.4AC81420"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-HotPOP: -----------------------------------------------
                   Sent By HotPOP.com FREE Email
             Get your FREE POP email at www.HotPOP.com
          -----------------------------------------------
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0005_01C3EF59.4AC81420
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

hy,=20
it would be great if a page with all features of lucene would be created =
in the apache lucene site !

in the sourceforge website (http://lucene.sourceforge.net/features.html) =
,there is this page..but is it updated ?

thanks in advance
nicolas maisonneuve
------=_NextPart_000_0005_01C3EF59.4AC81420--




From MAILER-DAEMON Mon Feb  9 22:03:51 2004
Return-Path: 
 <lucene-user-return-7037-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58828 invoked from network); 9 Feb 2004 22:03:51 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 9 Feb 2004 22:03:51 -0000
Received: (qmail 58102 invoked by uid 500); 9 Feb 2004 22:03:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58069 invoked by uid 500); 9 Feb 2004 22:03:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 57973 invoked from network); 9 Feb 2004 22:03:20 -0000
Received: from unknown (HELO web60803.mail.yahoo.com) (216.155.196.66)
  by daedalus.apache.org with SMTP; 9 Feb 2004 22:03:20 -0000
Message-ID: <20040209220323.61781.qmail@web60803.mail.yahoo.com>
Received: from [38.136.24.2] by web60803.mail.yahoo.com via HTTP;
 Mon, 09 Feb 2004 14:03:23 PST
Date: Mon, 9 Feb 2004 14:03:23 -0800 (PST)
From: Gabe <gjz22@yahoo.com>
Subject: Ordering by a field value
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hi,

I was wondering whether it was possible to sort search
results by the order of the String value of a stored
or unstored field. How would one implement this?

Thanks,
Gabe

__________________________________
Do you Yahoo!?
Yahoo! Finance: Get your refund fast by filing online.
http://taxes.yahoo.com/filing.html

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 10 02:03:56 2004
Return-Path: 
 <lucene-user-return-7038-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 81857 invoked from network); 10 Feb 2004 02:03:56 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 10 Feb 2004 02:03:56 -0000
Received: (qmail 12435 invoked by uid 500); 10 Feb 2004 02:03:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12405 invoked by uid 500); 10 Feb 2004 02:03:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 12388 invoked from network); 10 Feb 2004 02:03:29 -0000
Received: from unknown (HELO slc-xchg1.slc.mainstreamdata.com) (209.63.42.32)
  by daedalus.apache.org with SMTP; 10 Feb 2004 02:03:29 -0000
content-class: urn:content-classes:message
Subject: Another Newbie question--FSDirectory
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Mon, 9 Feb 2004 19:03:38 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6487.1
Message-ID: 
 <A60AC49BA89F4F4D9D86F2B7519111E82C593F@dilbert.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Another Newbie question--FSDirectory
Thread-Index: AcPvehj3VujRFSCWROOpxuI5LC5S5A==
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <lucene-user@jakarta.apache.org>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I was creating the IndexSearcher using a standard String containing the
Lucene index directory pathname.  I noticed that "everyone" seems to
create a FSDirectory and use that to create the searcher.  However, no
one seems to use this for the IndexWriter.  Can someone tell me what the
advantage of using the FSDirectory is over just specifying the index
directory in a String? why it would be used for searching, but not for
indexing?  Anything else relevant to FSDirectory?  Is it mostly
convention and the real reason for it's existence is when you use the
RAMDirectory or CompoundFileDirectory (or you don't want some method to
care what flavor directory it is looking at)?

Scott

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 10 03:00:09 2004
Return-Path: 
 <lucene-user-return-7039-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 16816 invoked from network); 10 Feb 2004 03:00:09 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 10 Feb 2004 03:00:09 -0000
Received: (qmail 54565 invoked by uid 500); 10 Feb 2004 02:59:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 54543 invoked by uid 500); 10 Feb 2004 02:59:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 54521 invoked from network); 10 Feb 2004 02:59:41 -0000
Received: from unknown (HELO mail.gmx.net) (213.165.64.20)
  by daedalus.apache.org with SMTP; 10 Feb 2004 02:59:41 -0000
Received: (qmail 28087 invoked by uid 0); 10 Feb 2004 02:59:50 -0000
Received: from 80.185.233.68 by www29.gmx.net with HTTP;
	Tue, 10 Feb 2004 03:59:50 +0100 (MET)
Date: Tue, 10 Feb 2004 03:59:50 +0100 (MET)
From: brosch@gmx.de
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Subject: index: how to store binary data or objects ?
X-Priority: 3 (Normal)
X-Authenticated: #169788
Message-ID: <28324.1076381990@www29.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Lucent Users!

Searching the documentation, API and this mailinglist results in:
"no way to store objects or binary data in an UnIndexed
org.apache.lucene.document.Field to attach it to the index directly"

Is there a way to do this? What would you suggest to do?

Thank you very much for any help!
Best regards, Markus

-- 
GMX ProMail (250 MB Mailbox, 50 FreeSMS, Virenschutz, 2,99 EUR/Monat...)
jetzt 3 Monate GRATIS + 3x DER SPIEGEL +++ http://www.gmx.net/derspiegel +++


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 10 03:34:06 2004
Return-Path: 
 <lucene-user-return-7040-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 29610 invoked from network); 10 Feb 2004 03:34:06 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 10 Feb 2004 03:34:06 -0000
Received: (qmail 46468 invoked by uid 500); 10 Feb 2004 03:33:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 46429 invoked by uid 500); 10 Feb 2004 03:33:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 46402 invoked from network); 10 Feb 2004 03:33:39 -0000
Received: from unknown (HELO p2.rocketsense.us) (66.98.198.71)
  by daedalus.apache.org with SMTP; 10 Feb 2004 03:33:39 -0000
Received: (qmail 5412 invoked from network); 10 Feb 2004 03:29:36 -0000
Received: from softdnserror (HELO localhost) (127.0.0.1)
  by softdnserror with SMTP; 10 Feb 2004 03:29:36 -0000
Received: from pg2px.pg.com (pg2px.pg.com [192.44.136.113])
	by webmail.ckhill.com (IMP) with HTTP
	for <kevin@ckhill.com@localhost>; Mon,  9 Feb 2004 22:29:36 -0500
Message-ID: <1076383776.4028502093010@webmail.ckhill.com>
Date: Mon,  9 Feb 2004 22:29:36 -0500
From: kevin@ckhill.com
To: lucene-user@jakarta.apache.org
Subject: Index advice...
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.2.1
X-Originating-IP: 192.44.136.113
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hey Lucene-users,

I'm setting up a Lucene index on 5G of PDF files (full-text search).  I've 
been really happy with Lucene so far but I'm curious what tips and strategies 
I can use to optimize my performance at this large size.

So far I am using pretty much all of the defaults (I'm new to Lucene).

I am using PDFBox to add the documents to the index.
I can usually add about 800 or so PDF files and then the add loop:

for ( int i = 0; i < fileNames.length; i++ ) {
	Document doc = IndexFile.index(baseDirectory+documentRoot+"fileNames
[i]); 
	writer.addDocument(doc);
}


really starts to slow down.  Doesn't seem to be memory related.
Thoughts anyone?

Thanks in advance,
CK Hill



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 10 05:45:46 2004
Return-Path: 
 <lucene-user-return-7041-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 1799 invoked from network); 10 Feb 2004 05:45:46 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 10 Feb 2004 05:45:46 -0000
Received: (qmail 62682 invoked by uid 500); 10 Feb 2004 05:45:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 62606 invoked by uid 500); 10 Feb 2004 05:45:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 62474 invoked from network); 10 Feb 2004 05:45:13 -0000
Received: from unknown (HELO smartdatainc.com) (203.129.220.82)
  by daedalus.apache.org with SMTP; 10 Feb 2004 05:45:13 -0000
Received: from raman ([192.168.199.212])
	by smartdatainc.com ([192.168.199.92])
	with SMTP (MDaemon.PRO.v6.5.2.R)
	for <lucene-user@jakarta.apache.org>; Tue, 10 Feb 2004 11:10:11 +0530
Message-ID: <008801c3ef97$f44e7af0$d4c7a8c0@raman>
From: "Raman" <ramang@smartdatainc.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Lucene on DB and HTML
Date: Tue, 10 Feb 2004 11:06:27 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0085_01C3EFC5.EDF77840"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-MDRemoteIP: 192.168.199.212
X-Return-Path: ramang@smartdatainc.com
X-MDaemon-Deliver-To: lucene-user@jakarta.apache.org
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0085_01C3EFC5.EDF77840
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello Friends,
I my project I need to implement lucene search on DB and HTML files =
(lying in two separate directories). Now my problem is:
1. Creating common Index files for both=20
2. How to show the display data that will come out from the DB and HTML.

Pls advise

Regards,
Raman Garg
------=_NextPart_000_0085_01C3EFC5.EDF77840--


From MAILER-DAEMON Tue Feb 10 06:03:21 2004
Return-Path: 
 <lucene-user-return-7042-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 11613 invoked from network); 10 Feb 2004 06:03:21 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 10 Feb 2004 06:03:21 -0000
Received: (qmail 2383 invoked by uid 500); 10 Feb 2004 06:02:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2348 invoked by uid 500); 10 Feb 2004 06:02:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2196 invoked from network); 10 Feb 2004 06:02:46 -0000
Received: from unknown (HELO smartdatainc.com) (203.129.220.82)
  by daedalus.apache.org with SMTP; 10 Feb 2004 06:02:46 -0000
Received: from raman ([192.168.199.212])
	by smartdatainc.com ([192.168.199.92])
	with SMTP (MDaemon.PRO.v6.5.2.R)
	for <lucene-user@jakarta.apache.org>; Tue, 10 Feb 2004 11:32:29 +0530
Message-ID: <01b601c3ef9b$12180800$d4c7a8c0@raman>
From: "Raman" <ramang@smartdatainc.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Lucene on DB and HTML
Date: Tue, 10 Feb 2004 11:29:36 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_01AF_01C3EFC9.29FC9570"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-MDRemoteIP: 192.168.199.212
X-Return-Path: ramang@smartdatainc.com
X-MDaemon-Deliver-To: lucene-user@jakarta.apache.org
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_01AF_01C3EFC9.29FC9570
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello Friends,

I my project I need to implement lucene search on DB and HTML files =
(lying in two separate directories). Now my problem is:
1. Creating common Index files for both=20
2. How to show the display data that will come out from the DB and HTML.

Pls advise

Regards,
Raman Garg
------=_NextPart_000_01AF_01C3EFC9.29FC9570--


From MAILER-DAEMON Tue Feb 10 06:10:08 2004
Return-Path: 
 <lucene-user-return-7043-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 15865 invoked from network); 10 Feb 2004 06:10:08 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 10 Feb 2004 06:10:08 -0000
Received: (qmail 22302 invoked by uid 500); 10 Feb 2004 06:09:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 22266 invoked by uid 500); 10 Feb 2004 06:09:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 22249 invoked from network); 10 Feb 2004 06:09:39 -0000
Received: from unknown (HELO five.zapatec.com) (66.117.150.100)
  by daedalus.apache.org with SMTP; 10 Feb 2004 06:09:39 -0000
Received: from rlx11.zapatec.com (rlx11.pr.zapatec.com [192.168.1.132])
	by five.zapatec.com (Postfix) with ESMTP id 2FD4B5D23
	for <lucene-user@jakarta.apache.org>; Mon,  9 Feb 2004 22:09:50 -0800 (PST)
Received: (from dror@localhost)
	by rlx11.zapatec.com (8.12.3/8.12.3/Submit) id i1A69nvD018405
	for lucene-user@jakarta.apache.org; Mon, 9 Feb 2004 22:09:49 -0800 (PST)
	(envelope-from dror)
Date: Mon, 9 Feb 2004 22:09:49 -0800
From: Dror Matalon <dror@zapatec.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: index: how to store binary data or objects ?
Message-ID: <20040210060949.GA11782@rlx11.zapatec.com>
References: <28324.1076381990@www29.gmx.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <28324.1076381990@www29.gmx.net>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Tue, Feb 10, 2004 at 03:59:50AM +0100, brosch@gmx.de wrote:
> Hi Lucent Users!
> 
> Searching the documentation, API and this mailinglist results in:
> "no way to store objects or binary data in an UnIndexed
> org.apache.lucene.document.Field to attach it to the index directly"
> 
> Is there a way to do this? What would you suggest to do?

1. Store the binary data in files and store the path in Lucene. There's
scallability issues here when you handle more than a few hundred
thousand objects.
2. Store the binary data in a database and store a unique id in Lucene.
This will scale better but binary data fetching from the db might be
slow.

> 
> Thank you very much for any help!
> Best regards, Markus
> 
> -- 
> GMX ProMail (250 MB Mailbox, 50 FreeSMS, Virenschutz, 2,99 EUR/Monat...)
> jetzt 3 Monate GRATIS + 3x DER SPIEGEL +++ http://www.gmx.net/derspiegel +++
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 

-- 
Dror Matalon
Zapatec Inc 
1700 MLK Way
Berkeley, CA 94709
http://www.fastbuzz.com
http://www.zapatec.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 10 08:34:10 2004
Return-Path: 
 <lucene-user-return-7044-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 4823 invoked from network); 10 Feb 2004 08:34:10 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 10 Feb 2004 08:34:10 -0000
Received: (qmail 85363 invoked by uid 500); 10 Feb 2004 08:33:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 85319 invoked by uid 500); 10 Feb 2004 08:33:31 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 85198 invoked from network); 10 Feb 2004 08:33:30 -0000
Received: from unknown (HELO getopt.org) (69.44.16.11)
  by daedalus.apache.org with SMTP; 10 Feb 2004 08:33:30 -0000
Received: from getopt.org (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id i1A8XdA14852
	for <lucene-user@jakarta.apache.org>; Tue, 10 Feb 2004 02:33:40 -0600
Message-ID: <40289729.70707@getopt.org>
Date: Tue, 10 Feb 2004 09:32:41 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 0.5 (Windows/20040207)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: index: how to store binary data or objects ?
References: <28324.1076381990@www29.gmx.net>
 <20040210060949.GA11782@rlx11.zapatec.com>
In-Reply-To: <20040210060949.GA11782@rlx11.zapatec.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Dror Matalon wrote:

> On Tue, Feb 10, 2004 at 03:59:50AM +0100, brosch@gmx.de wrote:
> 
>>Hi Lucent Users!
>>
>>Searching the documentation, API and this mailinglist results in:
>>"no way to store objects or binary data in an UnIndexed
>>org.apache.lucene.document.Field to attach it to the index directly"
>>
>>Is there a way to do this? What would you suggest to do?
> 
> 
> 1. Store the binary data in files and store the path in Lucene. There's
> scallability issues here when you handle more than a few hundred
> thousand objects.

Just a comment: for ext2fs and BSD FFS (dunno about NT) scalability 
issues with this approach can be partially addressed by building a tree 
of subdirectories, instead of using just one. I.e. a file named 
"myThesis.pdf" would go into /m/y/t/myThesis.pdf. This way the time 
needed to list the files in a given directory is reduced (both unixes 
can already cache the inode numbers for name/inode lookup, so there is 
no significant time increase to lookup a longer path).

FreeBSD also has a special kind of filesystem, which uses inodes in a 
flat space (no directories). It was specifically designed for storing 
large numbers of files efficiently. Recent versions of Java on FreeBSD 
(1.4.2) seem to be very stable and performing well, so that could also 
be an option.

After all, a filesystem _is_ a kind of very specialized database... ;-)

-- 
Best regards,
Andrzej Bialecki

-------------------------------------------------
Software Architect, System Integration Specialist
CEN/ISSS EC Workshop, ECIMF project chair
EU FP6 E-Commerce Expert/Evaluator
-------------------------------------------------
FreeBSD developer (http://www.freebsd.org)


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 10 08:42:53 2004
Return-Path: 
 <lucene-user-return-7045-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 11779 invoked from network); 10 Feb 2004 08:42:53 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 10 Feb 2004 08:42:53 -0000
Received: (qmail 14110 invoked by uid 500); 10 Feb 2004 08:42:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 14040 invoked by uid 500); 10 Feb 2004 08:42:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 13963 invoked from network); 10 Feb 2004 08:42:04 -0000
Received: from unknown (HELO web12703.mail.yahoo.com) (216.136.173.240)
  by daedalus.apache.org with SMTP; 10 Feb 2004 08:42:04 -0000
Message-ID: <20040210084216.42454.qmail@web12703.mail.yahoo.com>
Received: from [195.29.133.105] by web12703.mail.yahoo.com via HTTP;
 Tue, 10 Feb 2004 00:42:16 PST
Date: Tue, 10 Feb 2004 00:42:16 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Another Newbie question--FSDirectory
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: 
 <A60AC49BA89F4F4D9D86F2B7519111E82C593F@dilbert.mainstreamdata.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You should probably always try to use Directory, and not String nor
FSDirectory.
Directory is the most abstract 'index type and location entity', and
using it smartly allows you to change your index type and location more
easily, should you ever choose to do that.

Otis

--- Scott Smith <ssmith@mainstreamdata.com> wrote:
> I was creating the IndexSearcher using a standard String containing
> the
> Lucene index directory pathname.  I noticed that "everyone" seems to
> create a FSDirectory and use that to create the searcher.  However,
> no
> one seems to use this for the IndexWriter.  Can someone tell me what
> the
> advantage of using the FSDirectory is over just specifying the index
> directory in a String? why it would be used for searching, but not
> for
> indexing?  Anything else relevant to FSDirectory?  Is it mostly
> convention and the real reason for it's existence is when you use the
> RAMDirectory or CompoundFileDirectory (or you don't want some method
> to
> care what flavor directory it is looking at)?
> 
> Scott
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 10 08:47:59 2004
Return-Path: 
 <lucene-user-return-7046-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 16342 invoked from network); 10 Feb 2004 08:47:59 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 10 Feb 2004 08:47:59 -0000
Received: (qmail 29686 invoked by uid 500); 10 Feb 2004 08:47:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 29660 invoked by uid 500); 10 Feb 2004 08:47:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 29642 invoked from network); 10 Feb 2004 08:47:27 -0000
Received: from unknown (HELO web12708.mail.yahoo.com) (216.136.173.245)
  by daedalus.apache.org with SMTP; 10 Feb 2004 08:47:27 -0000
Message-ID: <20040210084739.58412.qmail@web12708.mail.yahoo.com>
Received: from [195.29.133.105] by web12708.mail.yahoo.com via HTTP;
 Tue, 10 Feb 2004 00:47:39 PST
Date: Tue, 10 Feb 2004 00:47:39 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Index advice...
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <1076383776.4028502093010@webmail.ckhill.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Without seeing more information/code, I can't tell which part of your
system slows down with time, but I can tell you that Lucene's 'add'
does not slow over time (i.e. as the index gets larger).  Therefore, I
would look elsewhere for causes of the slowdown.
The easiest thing to do is add logging to suspicious portions of the
code.  That will narrow the scope of the code you need to analyze.

Otis


--- kevin@ckhill.com wrote:
> Hey Lucene-users,
> 
> I'm setting up a Lucene index on 5G of PDF files (full-text search). 
> I've 
> been really happy with Lucene so far but I'm curious what tips and
> strategies 
> I can use to optimize my performance at this large size.
> 
> So far I am using pretty much all of the defaults (I'm new to
> Lucene).
> 
> I am using PDFBox to add the documents to the index.
> I can usually add about 800 or so PDF files and then the add loop:
> 
> for ( int i = 0; i < fileNames.length; i++ ) {
> 	Document doc = IndexFile.index(baseDirectory+documentRoot+"fileNames
> [i]); 
> 	writer.addDocument(doc);
> }
> 
> 
> really starts to slow down.  Doesn't seem to be memory related.
> Thoughts anyone?
> 
> Thanks in advance,
> CK Hill
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 10 08:50:16 2004
Return-Path: 
 <lucene-user-return-7047-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 18082 invoked from network); 10 Feb 2004 08:50:16 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 10 Feb 2004 08:50:16 -0000
Received: (qmail 36657 invoked by uid 500); 10 Feb 2004 08:49:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 36632 invoked by uid 500); 10 Feb 2004 08:49:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 36609 invoked from network); 10 Feb 2004 08:49:43 -0000
Received: from unknown (HELO web12701.mail.yahoo.com) (216.136.173.238)
  by daedalus.apache.org with SMTP; 10 Feb 2004 08:49:43 -0000
Message-ID: <20040210084955.9161.qmail@web12701.mail.yahoo.com>
Received: from [195.29.133.105] by web12701.mail.yahoo.com via HTTP;
 Tue, 10 Feb 2004 00:49:55 PST
Date: Tue, 10 Feb 2004 00:49:55 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Ordering by a field value
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20040209220323.61781.qmail@web60803.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

There were some recent contributions that should make this possible and
simple to do.
The code should be added to Lucene CVS repository in the next week or
so.

Otis

--- Gabe <gjz22@yahoo.com> wrote:
> 
> Hi,
> 
> I was wondering whether it was possible to sort search
> results by the order of the String value of a stored
> or unstored field. How would one implement this?
> 
> Thanks,
> Gabe
> 
> __________________________________
> Do you Yahoo!?
> Yahoo! Finance: Get your refund fast by filing online.
> http://taxes.yahoo.com/filing.html
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 10 12:22:31 2004
Return-Path: 
 <lucene-user-return-7048-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61615 invoked from network); 10 Feb 2004 12:22:31 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 10 Feb 2004 12:22:31 -0000
Received: (qmail 59167 invoked by uid 500); 10 Feb 2004 12:22:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 59123 invoked by uid 500); 10 Feb 2004 12:22:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 59086 invoked from network); 10 Feb 2004 12:22:19 -0000
Received: from unknown (HELO smtpout.mac.com) (17.250.248.87)
  by daedalus.apache.org with SMTP; 10 Feb 2004 12:22:19 -0000
Received: from mac.com (smtpin07-en2 [10.13.10.152])
	by smtpout.mac.com (Xserve/MantshX 2.0) with ESMTP id i1ACMKp3001648
	for <lucene-user@jakarta.apache.org>; Tue, 10 Feb 2004 04:22:20 -0800 (PST)
Received: from [10.0.1.3] (adsl-62-167-42-207.adslplus.ch [62.167.42.207])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin07/MantshX 3.0) with ESMTP id i1ACMImu012725
	for <lucene-user@jakarta.apache.org>; Tue, 10 Feb 2004 04:22:19 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <28324.1076381990@www29.gmx.net>
References: <28324.1076381990@www29.gmx.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <D143CBDE-5BC3-11D8-9F0B-000393760B7E@mac.com>
Content-Transfer-Encoding: 7bit
From: petite_abeille <petite_abeille@mac.com>
Subject: Re: index: how to store binary data or objects ?
Date: Tue, 10 Feb 2004 13:22:39 +0100
To: Lucene Users List <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Feb 10, 2004, at 03:59, brosch@gmx.de wrote:

> Is there a way to do this?

Lucene deals with text. You could always serialize your objects in a 
byte array, hex encode them or something, and store that in an 
appropriate field.

> What would you suggest to do?

Don't store your objects in Lucene :)

As other have pointed out, you will be much better off storing your 
object somewhere else (files, db, btree, whatever) and only use Lucene 
to store a reference to those objects.

For a concrete example of this approach, take a look at ZOE [1] source 
code [2].

It uses Lucene for, er, indexing and JDBM [2] to store the 
corresponding object's binaries.

Cheers,

PA.

[1] http://zoe.nu/itstories/story.php?data=stories&num=16&sec=1
[2] http://zoe.nu/misc/Workspace20031122.tgz
[3] http://jdbm.sourceforge.net/


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 10 12:30:07 2004
Return-Path: 
 <lucene-user-return-7049-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64793 invoked from network); 10 Feb 2004 12:30:07 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 10 Feb 2004 12:30:07 -0000
Received: (qmail 81666 invoked by uid 500); 10 Feb 2004 12:29:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81632 invoked by uid 500); 10 Feb 2004 12:29:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81600 invoked from network); 10 Feb 2004 12:29:52 -0000
Received: from unknown (HELO hi-net.cz) (62.77.118.60)
  by daedalus.apache.org with SMTP; 10 Feb 2004 12:29:52 -0000
Received: (qmail 3986 invoked from network); 10 Feb 2004 12:29:51 -0000
Received: from unknown (HELO fw.egothor.org) (62.77.93.14)
  by mail.hi-net.cz with SMTP; 10 Feb 2004 12:29:51 -0000
Received: from seznam.cz (0-253.shark [192.168.0.253])
	by fw.egothor.org (8.12.9/8.12.9) with ESMTP id i1ACThVn003927
	for <lucene-user@jakarta.apache.org>; Tue, 10 Feb 2004 13:29:44 +0100 (CET)
Message-ID: <4028CEBB.1090300@seznam.cz>
Date: Tue, 10 Feb 2004 13:29:47 +0100
From: Leo Galambos <Leo.G@seznam.cz>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; cs-CZ;
 rv:1.6) Gecko/20040113
X-Accept-Language: cs, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Index advice...
References: <20040210084739.58412.qmail@web12708.mail.yahoo.com>
In-Reply-To: <20040210084739.58412.qmail@web12708.mail.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Otis Gospodnetic napsal(a):

>Without seeing more information/code, I can't tell which part of your
>system slows down with time, but I can tell you that Lucene's 'add'
>does not slow over time (i.e. as the index gets larger).  Therefore, I
>would look elsewhere for causes of the slowdown.
>  
>

Otis, can you point me to some proofs that time of "insert" operation 
does not depend on the index size, please? Amortized time of "insert" is 
O(log(docsIndexed/mergeFac)), I think. Thus I do not know how it could 
be O(1).

Thank you.
Leo

AFAIK the issue with PDF files can be based on the PDF parser (I already 
encountered this with PDFbox).

>The easiest thing to do is add logging to suspicious portions of the
>code.  That will narrow the scope of the code you need to analyze.
>
>Otis
>
>
>--- kevin@ckhill.com wrote:
>  
>
>>Hey Lucene-users,
>>
>>I'm setting up a Lucene index on 5G of PDF files (full-text search). 
>>I've 
>>been really happy with Lucene so far but I'm curious what tips and
>>strategies 
>>I can use to optimize my performance at this large size.
>>
>>So far I am using pretty much all of the defaults (I'm new to
>>Lucene).
>>
>>I am using PDFBox to add the documents to the index.
>>I can usually add about 800 or so PDF files and then the add loop:
>>
>>for ( int i = 0; i < fileNames.length; i++ ) {
>>	Document doc = IndexFile.index(baseDirectory+documentRoot+"fileNames
>>[i]); 
>>	writer.addDocument(doc);
>>}
>>
>>
>>really starts to slow down.  Doesn't seem to be memory related.
>>Thoughts anyone?
>>
>>Thanks in advance,
>>CK Hill
>>
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>    
>>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 10 12:34:55 2004
Return-Path: 
 <lucene-user-return-7050-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67171 invoked from network); 10 Feb 2004 12:34:55 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 10 Feb 2004 12:34:55 -0000
Received: (qmail 97467 invoked by uid 500); 10 Feb 2004 12:34:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 97432 invoked by uid 500); 10 Feb 2004 12:34:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 97409 invoked from network); 10 Feb 2004 12:34:38 -0000
Received: from unknown (HELO smtpout.mac.com) (17.250.248.83)
  by daedalus.apache.org with SMTP; 10 Feb 2004 12:34:38 -0000
Received: from mac.com (smtpin08-en2 [10.13.10.153])
	by smtpout.mac.com (8.12.6/MantshX 2.0) with ESMTP id i1ACYcmc000909
	for <lucene-user@jakarta.apache.org>; Tue, 10 Feb 2004 04:34:38 -0800 (PST)
Received: from [10.0.1.3] (adsl-62-167-42-207.adslplus.ch [62.167.42.207])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin08/MantshX 3.0) with ESMTP id i1ACYa8S022704
	for <lucene-user@jakarta.apache.org>; Tue, 10 Feb 2004 04:34:37 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <40289729.70707@getopt.org>
References: <28324.1076381990@www29.gmx.net>
 <20040210060949.GA11782@rlx11.zapatec.com> <40289729.70707@getopt.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <8B3563A7-5BC5-11D8-9F0B-000393760B7E@mac.com>
Content-Transfer-Encoding: 7bit
From: petite_abeille <petite_abeille@mac.com>
Subject: Re: index: how to store binary data or objects ?
Date: Tue, 10 Feb 2004 13:35:00 +0100
To: Lucene Users List <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Feb 10, 2004, at 09:32, Andrzej Bialecki wrote:

> Just a comment: for ext2fs and BSD FFS (dunno about NT) scalability 
> issues with this approach can be partially addressed by building a 
> tree of subdirectories, instead of using just one. I.e. a file named 
> "myThesis.pdf" would go into /m/y/t/myThesis.pdf. This way the time 
> needed to list the files in a given directory is reduced (both unixes 
> can already cache the inode numbers for name/inode lookup, so there is 
> no significant time increase to lookup a longer path).

Yes. But you have to watch out for overall path length limit though. An 
alternative strategy is to hash your keys and store that as the 
directory path. This what some browsers do to store their cache.

> FreeBSD also has a special kind of filesystem, which uses inodes in a 
> flat space (no directories). It was specifically designed for storing 
> large numbers of files efficiently. Recent versions of Java on FreeBSD 
> (1.4.2) seem to be very stable and performing well, so that could also 
> be an option.

Yes. The file system can be used to simulate a fairly reasonable 
database. The problem then is not so much the time it takes to look up 
those files, but rather opening, reading, and closing them.

> After all, a filesystem _is_ a kind of very specialized database... ;-)

This is true and works quite well to a certain extend.

But it suffers from one major flaw in my experience: you run out of 
file descriptors very quickly. And lets face it, it's quite slow also 
:)

Cheers,

PA.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 10 12:55:20 2004
Return-Path: 
 <lucene-user-return-7051-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 77955 invoked from network); 10 Feb 2004 12:55:20 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 10 Feb 2004 12:55:20 -0000
Received: (qmail 64643 invoked by uid 500); 10 Feb 2004 12:55:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 64602 invoked by uid 500); 10 Feb 2004 12:55:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 64586 invoked from network); 10 Feb 2004 12:55:06 -0000
Received: from unknown (HELO web12702.mail.yahoo.com) (216.136.173.239)
  by daedalus.apache.org with SMTP; 10 Feb 2004 12:55:06 -0000
Message-ID: <20040210125507.2603.qmail@web12702.mail.yahoo.com>
Received: from [194.152.216.121] by web12702.mail.yahoo.com via HTTP;
 Tue, 10 Feb 2004 04:55:07 PST
Date: Tue, 10 Feb 2004 04:55:07 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Index advice...
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <4028CEBB.1090300@seznam.cz>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


--- Leo Galambos <Leo.G@seznam.cz> wrote:
> Otis Gospodnetic napsal(a):
> 
> >Without seeing more information/code, I can't tell which part of
> your
> >system slows down with time, but I can tell you that Lucene's 'add'
> >does not slow over time (i.e. as the index gets larger).  Therefore,
> I
> >would look elsewhere for causes of the slowdown.
> >  
> >
> 
> Otis, can you point me to some proofs that time of "insert" operation
> 
> does not depend on the index size, please? Amortized time of "insert"
> is O(log(docsIndexed/mergeFac)), I think.

This would imply that Lucene gets slower as it adds more documents to
the index.  Have you observed this behaviour?  I haven't.

> Thus I do not know how it could be O(1).

~ O(1) is what I have observed through experiments with indexing of
several million documents.

Otis


> AFAIK the issue with PDF files can be based on the PDF parser (I
> already 
> encountered this with PDFbox).
> 
> >The easiest thing to do is add logging to suspicious portions of the
> >code.  That will narrow the scope of the code you need to analyze.
> >
> >Otis
> >
> >
> >--- kevin@ckhill.com wrote:
> >  
> >
> >>Hey Lucene-users,
> >>
> >>I'm setting up a Lucene index on 5G of PDF files (full-text
> search). 
> >>I've 
> >>been really happy with Lucene so far but I'm curious what tips and
> >>strategies 
> >>I can use to optimize my performance at this large size.
> >>
> >>So far I am using pretty much all of the defaults (I'm new to
> >>Lucene).
> >>
> >>I am using PDFBox to add the documents to the index.
> >>I can usually add about 800 or so PDF files and then the add loop:
> >>
> >>for ( int i = 0; i < fileNames.length; i++ ) {
> >>	Document doc =
> IndexFile.index(baseDirectory+documentRoot+"fileNames
> >>[i]); 
> >>	writer.addDocument(doc);
> >>}
> >>
> >>
> >>really starts to slow down.  Doesn't seem to be memory related.
> >>Thoughts anyone?
> >>
> >>Thanks in advance,
> >>CK Hill
> >>
> >>
> >>
>
>>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> >>
> >>    
> >>
> >
> >
>
>---------------------------------------------------------------------
> >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> >
> >
> >  
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 10 13:03:23 2004
Return-Path: 
 <lucene-user-return-7052-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 83539 invoked from network); 10 Feb 2004 13:03:23 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 10 Feb 2004 13:03:23 -0000
Received: (qmail 91561 invoked by uid 500); 10 Feb 2004 13:03:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 91522 invoked by uid 500); 10 Feb 2004 13:03:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 91504 invoked from network); 10 Feb 2004 13:03:08 -0000
Received: from unknown (HELO sccmmhc02.asp.att.net) (204.127.203.184)
  by daedalus.apache.org with SMTP; 10 Feb 2004 13:03:08 -0000
Received: from [10.1.210.204] (unknown[208.0.121.20])
          by sccmmhc02.asp.att.net (sccmmhc02) with SMTP
          id <20040210130308mm200egn48e>
          (Authid: sganyo@insightbb.com);
          Tue, 10 Feb 2004 13:03:08 +0000
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <20040210125507.2603.qmail@web12702.mail.yahoo.com>
References: <20040210125507.2603.qmail@web12702.mail.yahoo.com>
Content-Type: multipart/signed; micalg=sha1;
 boundary=Apple-Mail-10--673256189; protocol="application/pkcs7-signature"
Message-Id: <7AE39130-5BC9-11D8-BCEE-000A95D01A94@ganyo.com>
From: Scott ganyo <scott@ganyo.com>
Subject: Re: Index advice...
Date: Tue, 10 Feb 2004 08:03:11 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--Apple-Mail-10--673256189
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed

I have.  While document.add() itself doesn't increase over time, the 
merge does.  Ways of partially overcoming this include increasing the 
mergeFactor (but this will increase the number of file handles used), 
or building blocks of the index in memory and then merging them to 
disk.  This has been discussed before, so you should be able to find 
additional information on this fairly easily.

Scott

On Feb 10, 2004, at 7:55 AM, Otis Gospodnetic wrote:

>
> --- Leo Galambos <Leo.G@seznam.cz> wrote:
>> Otis Gospodnetic napsal(a):
>>
>>> Without seeing more information/code, I can't tell which part of
>> your
>>> system slows down with time, but I can tell you that Lucene's 'add'
>>> does not slow over time (i.e. as the index gets larger).  Therefore,
>> I
>>> would look elsewhere for causes of the slowdown.
>>>
>>>
>>
>> Otis, can you point me to some proofs that time of "insert" operation
>>
>> does not depend on the index size, please? Amortized time of "insert"
>> is O(log(docsIndexed/mergeFac)), I think.
>
> This would imply that Lucene gets slower as it adds more documents to
> the index.  Have you observed this behaviour?  I haven't.
>
>> Thus I do not know how it could be O(1).
>
> ~ O(1) is what I have observed through experiments with indexing of
> several million documents.
>
> Otis
>
>
>> AFAIK the issue with PDF files can be based on the PDF parser (I
>> already
>> encountered this with PDFbox).
>>
>>> The easiest thing to do is add logging to suspicious portions of the
>>> code.  That will narrow the scope of the code you need to analyze.
>>>
>>> Otis
>>>
>>>
>>> --- kevin@ckhill.com wrote:
>>>
>>>
>>>> Hey Lucene-users,
>>>>
>>>> I'm setting up a Lucene index on 5G of PDF files (full-text
>> search).
>>>> I've
>>>> been really happy with Lucene so far but I'm curious what tips and
>>>> strategies
>>>> I can use to optimize my performance at this large size.
>>>>
>>>> So far I am using pretty much all of the defaults (I'm new to
>>>> Lucene).
>>>>
>>>> I am using PDFBox to add the documents to the index.
>>>> I can usually add about 800 or so PDF files and then the add loop:
>>>>
>>>> for ( int i = 0; i < fileNames.length; i++ ) {
>>>> 	Document doc =
>> IndexFile.index(baseDirectory+documentRoot+"fileNames
>>>> [i]);
>>>> 	writer.addDocument(doc);
>>>> }
>>>>
>>>>
>>>> really starts to slow down.  Doesn't seem to be memory related.
>>>> Thoughts anyone?
>>>>
>>>> Thanks in advance,
>>>> CK Hill
>>>>
>>>>
>>>>
>>
>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>> For additional commands, e-mail:
>> lucene-user-help@jakarta.apache.org
>>>>
>>>>
>>>>
>>>
>>>
>>
>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>>
>>>
>>>
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

--Apple-Mail-10--673256189
Content-Transfer-Encoding: base64
Content-Type: application/pkcs7-signature;
	name=smime.p7s
Content-Disposition: attachment;
	filename=smime.p7s

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIGEjCCAssw
ggI0oAMCAQICAwtKHTANBgkqhkiG9w0BAQQFADBiMQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhh
d3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVt
YWlsIElzc3VpbmcgQ0EwHhcNMDMxMjA4MTk0NTI5WhcNMDQxMjA3MTk0NTI5WjBBMR8wHQYDVQQD
ExZUaGF3dGUgRnJlZW1haWwgTWVtYmVyMR4wHAYJKoZIhvcNAQkBFg9zY290dEBnYW55by5jb20w
ggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC2ptQeyZPoLu2i4pPIHtrUiJ05HhAcXGyf
qMsrhx45ToVW4qrKmBNBfARFOe+PWiYUun8U7wKi3GmVWfxvQ7yqeiUu6DnLWMVGmFgx8xZQiIG2
6aa9to5xGL/SOTo7ET2+cSx7zX7CKiFSMALKrVzCXiAunGFp6ONkpqOCMj3Mk0U8QxFIkN3yuTO+
f7a9VH0tM6SPjyOWnR6SMbtU6WBlfO4JWCKnE2u1zzh6vOiYfjiKRpWYkaZu9BCYHAYHNwAHosT5
JaaY/+hV7QSlxHERz08kQv9V3K6PRIr6Ey68BeZnQbZp6E3ua9DWmlZL9gnbRPDob0kMbNiBJTkW
Zo9fAgMBAAGjLDAqMBoGA1UdEQQTMBGBD3Njb3R0QGdhbnlvLmNvbTAMBgNVHRMBAf8EAjAAMA0G
CSqGSIb3DQEBBAUAA4GBAFEM8YLGdg6q71DscLXqUrklI8I3OQ3KpkWMrPHiAnMH3ZG82xyGMe/v
/pRCT60gaC9xLoRi8AmMeUB8ykcVsgGi5YfrO2k4LbFR52tYk9fg0OU7VtpGZW0ehJuiuPrIupX8
R58ex+L0qZcGQ7c/f1ZyGZiaDNV/iQneGskM8p8wMIIDPzCCAqigAwIBAgIBDTANBgkqhkiG9w0B
AQUFADCB0TELMAkGA1UEBhMCWkExFTATBgNVBAgTDFdlc3Rlcm4gQ2FwZTESMBAGA1UEBxMJQ2Fw
ZSBUb3duMRowGAYDVQQKExFUaGF3dGUgQ29uc3VsdGluZzEoMCYGA1UECxMfQ2VydGlmaWNhdGlv
biBTZXJ2aWNlcyBEaXZpc2lvbjEkMCIGA1UEAxMbVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWlsIENB
MSswKQYJKoZIhvcNAQkBFhxwZXJzb25hbC1mcmVlbWFpbEB0aGF3dGUuY29tMB4XDTAzMDcxNzAw
MDAwMFoXDTEzMDcxNjIzNTk1OVowYjELMAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25z
dWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1
aW5nIENBMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDEpjxVc1X7TrnKmVoeaMB1BHCd3+n/
ox7svc31W/Iadr1/DDph8r9RzgHU5VAKMNcCY1osiRVwjt3J8CuFWqo/cVbLrzwLB+fxH5E2JCoT
zyvV84J3PQO+K/67GD4Hv0CAAmTXp6a7n2XRxSpUhQ9IBH+nttE8YQRAHmQZcmC3+wIDAQABo4GU
MIGRMBIGA1UdEwEB/wQIMAYBAf8CAQAwQwYDVR0fBDwwOjA4oDagNIYyaHR0cDovL2NybC50aGF3
dGUuY29tL1RoYXd0ZVBlcnNvbmFsRnJlZW1haWxDQS5jcmwwCwYDVR0PBAQDAgEGMCkGA1UdEQQi
MCCkHjAcMRowGAYDVQQDExFQcml2YXRlTGFiZWwyLTEzODANBgkqhkiG9w0BAQUFAAOBgQBIjNFQ
g+oLLswNo2asZw9/r6y+whehQ5aUnX9MIbj4Nh+qLZ82L8D0HFAgk3A8/a3hYWLD2ToZfoSxmRsA
xRoLgnSeJVCUYsfbJ3FXJY3dqZw5jowgT2Vfldr394fWxghOrvbqNOUQGls1TXfjViF4gtwhGTXe
JLHTHUb/XV9lTzGCAucwggLjAgEBMGkwYjELMAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBD
b25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJ
c3N1aW5nIENBAgMLSh0wCQYFKw4DAhoFAKCCAVMwGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAc
BgkqhkiG9w0BCQUxDxcNMDQwMjEwMTMwMzExWjAjBgkqhkiG9w0BCQQxFgQUkQ5WSl8X1eYn27EE
yhn8qAvVAlwweAYJKwYBBAGCNxAEMWswaTBiMQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhhd3Rl
IENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWls
IElzc3VpbmcgQ0ECAwtKHTB6BgsqhkiG9w0BCRACCzFroGkwYjELMAkGA1UEBhMCWkExJTAjBgNV
BAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25h
bCBGcmVlbWFpbCBJc3N1aW5nIENBAgMLSh0wDQYJKoZIhvcNAQEBBQAEggEAO97WeBhQkVXqGz7G
odczyCn0tODHZfQnd/gx7cwgXCXPKgJXzfFcRerTxsaz1vCk8EzHdTxWupHPTYDWNolrbcnLA0tQ
Auw+Wd+D1Wm+Yq5XZoGQpDcSFmMNdK1E1BrBQMXl24/+xgUbpmSyX3bLf09fVtzunCCcnNfpxf1n
to8eyo8P4kWFBEksdO0ZcSLn99a6nRsxXAeVn4MdbqtaFllimJl4JALs2ZVigjTztNqBdjrRW34T
IIHIaj5wEO96xQKymJeP9D/rCxU8BeMjz2B8WgX80UEugZTis2SkuLnok1pe8zH4qlnoK8VNt7ms
tl0TB6BbvfMgkqk1FQQLcgAAAAAAAA==

--Apple-Mail-10--673256189--


From MAILER-DAEMON Tue Feb 10 13:13:38 2004
Return-Path: 
 <lucene-user-return-7053-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 88838 invoked from network); 10 Feb 2004 13:13:38 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 10 Feb 2004 13:13:38 -0000
Received: (qmail 21214 invoked by uid 500); 10 Feb 2004 13:13:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 21174 invoked by uid 500); 10 Feb 2004 13:13:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 21023 invoked from network); 10 Feb 2004 13:13:17 -0000
Received: from unknown (HELO smtpout.mac.com) (17.250.248.88)
  by daedalus.apache.org with SMTP; 10 Feb 2004 13:13:17 -0000
Received: from mac.com (smtpin08-en2 [10.13.10.153])
	by smtpout.mac.com (Xserve/MantshX 2.0) with ESMTP id i1ADDHa1022647
	for <lucene-user@jakarta.apache.org>; Tue, 10 Feb 2004 05:13:17 -0800 (PST)
Received: from [10.0.1.3] (adsl-62-167-42-207.adslplus.ch [62.167.42.207])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin08/MantshX 3.0) with ESMTP id i1ADDG8S005476
	for <lucene-user@jakarta.apache.org>; Tue, 10 Feb 2004 05:13:17 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <7AE39130-5BC9-11D8-BCEE-000A95D01A94@ganyo.com>
References: <20040210125507.2603.qmail@web12702.mail.yahoo.com>
 <7AE39130-5BC9-11D8-BCEE-000A95D01A94@ganyo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <F1C25C1C-5BCA-11D8-A16E-000393760B7E@mac.com>
Content-Transfer-Encoding: 7bit
From: petite_abeille <petite_abeille@mac.com>
Subject: Re: Index advice...
Date: Tue, 10 Feb 2004 14:13:40 +0100
To: Lucene Users List <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Feb 10, 2004, at 14:03, Scott ganyo wrote:

> I have.  While document.add() itself doesn't increase over time, the 
> merge does.  Ways of partially overcoming this include increasing the 
> mergeFactor (but this will increase the number of file handles used), 
> or building blocks of the index in memory and then merging them to 
> disk.  This has been discussed before, so you should be able to find 
> additional information on this fairly easily.

This is what I noticed also: adding documents by itself is a fairly 
benign operation, but anything that triggers an index merge in one form 
or another is a killer as an index grows in size.

So, overall, adding more documents does slow down the indexing.

At least this is the impression I get. But I would love to be proven 
wrong on this :)

Cheers,

PA.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 10 13:40:43 2004
Return-Path: 
 <lucene-user-return-7054-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 6271 invoked from network); 10 Feb 2004 13:40:43 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 10 Feb 2004 13:40:43 -0000
Received: (qmail 26255 invoked by uid 500); 10 Feb 2004 13:40:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26223 invoked by uid 500); 10 Feb 2004 13:40:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26181 invoked from network); 10 Feb 2004 13:40:27 -0000
Received: from unknown (HELO hi-net.cz) (62.77.118.60)
  by daedalus.apache.org with SMTP; 10 Feb 2004 13:40:27 -0000
Received: (qmail 6258 invoked from network); 10 Feb 2004 13:40:27 -0000
Received: from unknown (HELO fw.egothor.org) (62.77.93.14)
  by mail.hi-net.cz with SMTP; 10 Feb 2004 13:40:27 -0000
Received: from seznam.cz (0-253.shark [192.168.0.253])
	by fw.egothor.org (8.12.9/8.12.9) with ESMTP id i1ADeKVn001766
	for <lucene-user@jakarta.apache.org>; Tue, 10 Feb 2004 14:40:21 +0100 (CET)
Message-ID: <4028DF46.9080509@seznam.cz>
Date: Tue, 10 Feb 2004 14:40:22 +0100
From: Leo Galambos <Leo.G@seznam.cz>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; cs-CZ;
 rv:1.6) Gecko/20040113
X-Accept-Language: cs, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Index advice...
References: <20040210125507.2603.qmail@web12702.mail.yahoo.com>
In-Reply-To: <20040210125507.2603.qmail@web12702.mail.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Otis Gospodnetic napsal(a):

>>Thus I do not know how it could be O(1).
>>    
>>
>
>~ O(1) is what I have observed through experiments with indexing of
>several million documents.
>  
>

What did you exactly measured? Just the time of the insert operation 
(incl. merge(), of course)? Was it a test on real documents?

THX
Leo

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 10 13:53:48 2004
Return-Path: 
 <lucene-user-return-7055-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 14107 invoked from network); 10 Feb 2004 13:53:48 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 10 Feb 2004 13:53:48 -0000
Received: (qmail 69153 invoked by uid 500); 10 Feb 2004 13:53:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69112 invoked by uid 500); 10 Feb 2004 13:53:34 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 69075 invoked from network); 10 Feb 2004 13:53:33 -0000
Received: from unknown (HELO mail.gmx.net) (213.165.64.20)
  by daedalus.apache.org with SMTP; 10 Feb 2004 13:53:33 -0000
Received: (qmail 4563 invoked by uid 0); 10 Feb 2004 13:53:33 -0000
Received: from 80.185.239.206 by www24.gmx.net with HTTP;
	Tue, 10 Feb 2004 14:53:34 +0100 (MET)
Date: Tue, 10 Feb 2004 14:53:34 +0100 (MET)
From: "Markus Brosch" <brosch@gmx.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
MIME-Version: 1.0
References: <20040210060949.GA11782@rlx11.zapatec.com>
Subject: Re: index: how to store binary data or objects ?
X-Priority: 3 (Normal)
X-Authenticated: #169788
Message-ID: <9676.1076421214@www24.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> 1. Store the binary data in files and store the path in Lucene. There's
> scallability issues here when you handle more than a few hundred
> thousand objects.

> 2. Store the binary data in a database and store a unique id in Lucene.
> This will scale better but binary data fetching from the db might be
> slow.

Thank you all for your comments!
In general I understand your suggestions - mostly because of scaling issues.

My application will deal with "small" data sets. The problem is, that I want
to index the content (String) of some objects. I want to refer to that
object once I found this by a keyword or whatever.  So, using a simple map or
tree? 

Another problem is, that my objects can change their content and must be
"reindexed". Is it possible to remove the single index for that object and build
a new one without reindexing all?

Thank you for help!
Best regards, Markus



-- 
GMX ProMail (250 MB Mailbox, 50 FreeSMS, Virenschutz, 2,99 EUR/Monat...)
jetzt 3 Monate GRATIS + 3x DER SPIEGEL +++ http://www.gmx.net/derspiegel +++


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 10 14:07:20 2004
Return-Path: 
 <lucene-user-return-7056-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 22289 invoked from network); 10 Feb 2004 14:07:20 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 10 Feb 2004 14:07:20 -0000
Received: (qmail 22741 invoked by uid 500); 10 Feb 2004 14:07:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 22713 invoked by uid 500); 10 Feb 2004 14:07:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 22692 invoked from network); 10 Feb 2004 14:07:04 -0000
Received: from unknown (HELO smtpout.mac.com) (17.250.248.83)
  by daedalus.apache.org with SMTP; 10 Feb 2004 14:07:04 -0000
Received: from mac.com (smtpin07-en2 [10.13.10.152])
	by smtpout.mac.com (8.12.6/MantshX 2.0) with ESMTP id i1AE75mc013821
	for <lucene-user@jakarta.apache.org>; Tue, 10 Feb 2004 06:07:05 -0800 (PST)
Received: from [10.0.1.3] (adsl-62-167-42-207.adslplus.ch [62.167.42.207])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin07/MantshX 3.0) with ESMTP id i1AE73mu019770
	for <lucene-user@jakarta.apache.org>; Tue, 10 Feb 2004 06:07:04 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <9676.1076421214@www24.gmx.net>
References: <20040210060949.GA11782@rlx11.zapatec.com>
 <9676.1076421214@www24.gmx.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <75D33637-5BD2-11D8-A16E-000393760B7E@mac.com>
Content-Transfer-Encoding: 7bit
From: petite_abeille <petite_abeille@mac.com>
Subject: Re: index: how to store binary data or objects ?
Date: Tue, 10 Feb 2004 15:07:28 +0100
To: Lucene Users List <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Feb 10, 2004, at 14:53, Markus Brosch wrote:

> My application will deal with "small" data sets. The problem is, that 
> I want
> to index the content (String) of some objects. I want to refer to that
> object once I found this by a keyword or whatever.  So, using a simple 
> map or
> tree?

Something along these lines:

- When indexing your object, you create one Lucene document for it and 
store its unique identifier as a keyword along side whatever you want 
to index.

- When retrieving your documents, you can use this keyword to reference 
your object.

> Another problem is, that my objects can change their content and must 
> be
> "reindexed". Is it possible to remove the single index for that object 
> and build
> a new one without reindexing all?

Yes.

Cheers,

PA.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 10 14:18:07 2004
Return-Path: 
 <lucene-user-return-7057-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 31507 invoked from network); 10 Feb 2004 14:18:07 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 10 Feb 2004 14:18:07 -0000
Received: (qmail 68296 invoked by uid 500); 10 Feb 2004 14:17:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 68270 invoked by uid 500); 10 Feb 2004 14:17:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 68250 invoked from network); 10 Feb 2004 14:17:51 -0000
Received: from unknown (HELO web12707.mail.yahoo.com) (216.136.173.244)
  by daedalus.apache.org with SMTP; 10 Feb 2004 14:17:51 -0000
Message-ID: <20040210141753.55035.qmail@web12707.mail.yahoo.com>
Received: from [194.152.216.121] by web12707.mail.yahoo.com via HTTP;
 Tue, 10 Feb 2004 06:17:53 PST
Date: Tue, 10 Feb 2004 06:17:53 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Index advice...
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <4028DF46.9080509@seznam.cz>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


--- Leo Galambos <Leo.G@seznam.cz> wrote:
> Otis Gospodnetic napsal(a):
> 
> >>Thus I do not know how it could be O(1).
> >>    
> >>
> >
> >~ O(1) is what I have observed through experiments with indexing of
> >several million documents.
> >  
> >
> 
> What did you exactly measured? Just the time of the insert operation 
> (incl. merge(), of course)? Was it a test on real documents?

I didn't really measure anything, I only observed this, as my focus was
something else, not performance measurements.
It is true that every time an insert/add triggers a merge operation,
things will slow down, but from what I recall (and this was about 1
year ago), the overall performance was steady as the index grew.

Documents were articifially created from random dictionary words.
Their size was variable, but not by a lot.

Otis


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 10 14:28:12 2004
Return-Path: 
 <lucene-user-return-7058-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 44168 invoked from network); 10 Feb 2004 14:28:12 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 10 Feb 2004 14:28:12 -0000
Received: (qmail 14875 invoked by uid 500); 10 Feb 2004 14:27:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 14834 invoked by uid 500); 10 Feb 2004 14:27:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 14710 invoked from network); 10 Feb 2004 14:27:51 -0000
Received: from unknown (HELO prvmail.dalycommerce.net) (207.140.4.129)
  by daedalus.apache.org with SMTP; 10 Feb 2004 14:27:51 -0000
Received: by PRVMAIL with Internet Mail Service (5.5.2653.19)
	id <1VRVBQA2>; Tue, 10 Feb 2004 09:29:21 -0500
Message-ID: <B46260C3550ED8119FD100096BA51BF43A1DA5@PRVMAIL>
From: "Clay, Brian" <bclay@dalycommerce.net>
To: 'Lucene Users List' <lucene-user@jakarta.apache.org>
Subject: RE: Lucene 1.3 final -- Lock/Segment permission errors
Date: Tue, 10 Feb 2004 09:29:20 -0500
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks.

It actually works out that we have to edit either the java.policy or
[application].policy file to add the directory that we are intending to use.
Unfortunately it is not as dynamic as one would hope.

For those that might have the same problem here is the line that is added to
the .policy file:

permission java.io.Permission "[directory]", "read,write, delete";

Bri

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: Monday, February 09, 2004 3:52 PM
To: Lucene Users List
Subject: Re: Lucene 1.3 final -- Lock/Segment permission errors


I would first look at the exact command line that is used to start the app
server.  Could it be that includes something like
-Djava.io.temp=some-directory-here ? Lucene uses java.io.temp System
property to determine the location/directory to use for lock files.  Maybe
this app server uses some directory with insufficient permissions.


Otis

--- "Clay, Brian" <bclay@dalycommerce.net> wrote:
> We are in the process of migrating an application from WAS 5.1 to Sun 
> Application server 8 (for technical reason version 7 is incompatible 
> with our application). Under WAS Lucene works great; however, when
> building an
> index under Sun we get a java.security.AccessControlException when
> Lucene
> attempts to delete any segment file also any time the application
> attempts
> to delete the write.lock file the same error is being thrown. It
> seems that
> the permissions are fine for Read/Write; however, delete is illegal.
> Though
> the documents created are deleted without error.
> 
> Has anyone gotten Lucene to work on Sun Application Server 8 or 
> encountered this problem?
> 
> Any help would be great.
> 
> Thanks,
> 
> Brian Clay
> 
> ~
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 10 14:35:44 2004
Return-Path: 
 <lucene-user-return-7059-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 49580 invoked from network); 10 Feb 2004 14:35:44 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 10 Feb 2004 14:35:44 -0000
Received: (qmail 46470 invoked by uid 500); 10 Feb 2004 14:35:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 46434 invoked by uid 500); 10 Feb 2004 14:35:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 46371 invoked from network); 10 Feb 2004 14:35:28 -0000
Received: from unknown (HELO mh2dmz1.bloomberg.com) (199.172.169.37)
  by daedalus.apache.org with SMTP; 10 Feb 2004 14:35:28 -0000
Received: from ns9.bloomberg.com (ns9.bloomberg.com [160.43.164.52]) by
 mh2dmz1.bloomberg.com with ESMTP for lucene-user@jakarta.apache.org;
 Tue, 10 Feb 2004 09:35:28 -0500
Received: from ny2535.corp.bloomberg.com (ny2535.bloomberg.com [172.20.73.26])
	by ns9.bloomberg.com (8.11.7p1+Sun/8.10.2) with ESMTP id i1AEZRq04090
	for <lucene-user@jakarta.apache.org>; Tue, 10 Feb 2004 09:35:28 -0500 (EST)
Received: from ny2526.corp.bloomberg.com (unverified) by
 ny2535.corp.bloomberg.com
 (Content Technologies SMTPRS 4.3.12) with ESMTP id
 <T67ab30b3fcac14491a78c@ny2535.corp.bloomberg.com> for
 <lucene-user@jakarta.apache.org>;
 Tue, 10 Feb 2004 09:35:27 -0500
content-class: urn:content-classes:message
Subject: RE: Index advice...
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Date: Tue, 10 Feb 2004 09:35:26 -0500
Message-Id: <3B530EF12E388B408ECC3162BA8C00F427C8BE@ny2526.corp.bloomberg.com>
X-MimeOLE: Produced By Microsoft Exchange V6.0.6375.0
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Index advice...
Thread-Index: AcPv4LUmxhjkP2SyTHKua1ummD77+AAAln1g
From: "Chong, Herb" <HChong3@bloomberg.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

the merges start taking longer and longer on my systems.

Herb....

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
Sent: Tuesday, February 10, 2004 9:18 AM
To: Lucene Users List
Subject: Re: Index advice...

It is true that every time an insert/add triggers a merge operation,
things will slow down, but from what I recall (and this was about 1
year ago), the overall performance was steady as the index grew.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 10 16:01:24 2004
Return-Path: 
 <lucene-user-return-7060-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 12137 invoked from network); 10 Feb 2004 16:01:24 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 10 Feb 2004 16:01:24 -0000
Received: (qmail 11940 invoked by uid 500); 10 Feb 2004 16:01:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 11901 invoked by uid 500); 10 Feb 2004 16:01:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 11867 invoked from network); 10 Feb 2004 16:01:05 -0000
Received: from unknown (HELO web60804.mail.yahoo.com) (216.155.196.67)
  by daedalus.apache.org with SMTP; 10 Feb 2004 16:01:05 -0000
Message-ID: <20040210160106.89928.qmail@web60804.mail.yahoo.com>
Received: from [38.136.24.2] by web60804.mail.yahoo.com via HTTP;
 Tue, 10 Feb 2004 08:01:06 PST
Date: Tue, 10 Feb 2004 08:01:06 -0800 (PST)
From: Gabe <gjz22@yahoo.com>
Subject: Re: Ordering by a field value
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20040210084955.9161.qmail@web12701.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Thanks Otis.

What will the names of the relevant files be and will
I be able to use 1.3 final still (simply integrating
the contributions into my own code) or would I have to
go with the latest code from CVS?

Thanks again,
Gabe

--- Otis Gospodnetic <otis_gospodnetic@yahoo.com>
wrote:
> There were some recent contributions that should
> make this possible and
> simple to do.
> The code should be added to Lucene CVS repository in
> the next week or
> so.
> 
> Otis
> 
> --- Gabe <gjz22@yahoo.com> wrote:
> > 
> > Hi,
> > 
> > I was wondering whether it was possible to sort
> search
> > results by the order of the String value of a
> stored
> > or unstored field. How would one implement this?
> > 
> > Thanks,
> > Gabe
> > 
> > __________________________________
> > Do you Yahoo!?
> > Yahoo! Finance: Get your refund fast by filing
> online.
> > http://taxes.yahoo.com/filing.html
> > 
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> > 
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> 


__________________________________
Do you Yahoo!?
Yahoo! Finance: Get your refund fast by filing online.
http://taxes.yahoo.com/filing.html

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 10 16:08:35 2004
Return-Path: 
 <lucene-user-return-7061-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 17173 invoked from network); 10 Feb 2004 16:08:35 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 10 Feb 2004 16:08:35 -0000
Received: (qmail 39678 invoked by uid 500); 10 Feb 2004 16:08:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 39643 invoked by uid 500); 10 Feb 2004 16:08:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 39621 invoked from network); 10 Feb 2004 16:08:16 -0000
Received: from unknown (HELO web12701.mail.yahoo.com) (216.136.173.238)
  by daedalus.apache.org with SMTP; 10 Feb 2004 16:08:16 -0000
Message-ID: <20040210160819.73811.qmail@web12701.mail.yahoo.com>
Received: from [194.152.216.121] by web12701.mail.yahoo.com via HTTP;
 Tue, 10 Feb 2004 08:08:19 PST
Date: Tue, 10 Feb 2004 08:08:19 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Ordering by a field value
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20040210160106.89928.qmail@web60804.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I suggest you check either Lucene patches link on Lucene site or check
lucene-dev mailing list archives for details.
You should be able to drop the new classes into unzipped Lucene 1.3
final Jar, and re-jar everything.

Otis


--- Gabe <gjz22@yahoo.com> wrote:
> 
> Thanks Otis.
> 
> What will the names of the relevant files be and will
> I be able to use 1.3 final still (simply integrating
> the contributions into my own code) or would I have to
> go with the latest code from CVS?
> 
> Thanks again,
> Gabe
> 
> --- Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> wrote:
> > There were some recent contributions that should
> > make this possible and
> > simple to do.
> > The code should be added to Lucene CVS repository in
> > the next week or
> > so.
> > 
> > Otis
> > 
> > --- Gabe <gjz22@yahoo.com> wrote:
> > > 
> > > Hi,
> > > 
> > > I was wondering whether it was possible to sort
> > search
> > > results by the order of the String value of a
> > stored
> > > or unstored field. How would one implement this?
> > > 
> > > Thanks,
> > > Gabe
> > > 
> > > __________________________________
> > > Do you Yahoo!?
> > > Yahoo! Finance: Get your refund fast by filing
> > online.
> > > http://taxes.yahoo.com/filing.html
> > > 
> > >
> >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> > lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail:
> > lucene-user-help@jakarta.apache.org
> > > 
> > 
> > 
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail:
> > lucene-user-help@jakarta.apache.org
> > 
> 
> 
> __________________________________
> Do you Yahoo!?
> Yahoo! Finance: Get your refund fast by filing online.
> http://taxes.yahoo.com/filing.html
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 10 17:37:10 2004
Return-Path: 
 <lucene-user-return-7062-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 85758 invoked from network); 10 Feb 2004 17:37:10 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 10 Feb 2004 17:37:10 -0000
Received: (qmail 52105 invoked by uid 500); 10 Feb 2004 17:36:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52070 invoked by uid 500); 10 Feb 2004 17:36:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 52032 invoked from network); 10 Feb 2004 17:36:49 -0000
Received: from unknown (HELO hi-net.cz) (62.77.118.60)
  by daedalus.apache.org with SMTP; 10 Feb 2004 17:36:49 -0000
Received: (qmail 13610 invoked from network); 10 Feb 2004 17:36:52 -0000
Received: from unknown (HELO fw.egothor.org) (62.77.93.14)
  by mail.hi-net.cz with SMTP; 10 Feb 2004 17:36:52 -0000
Received: from seznam.cz (0-253.shark [192.168.0.253])
	by fw.egothor.org (8.12.9/8.12.9) with ESMTP id i1AHaoVn012301
	for <lucene-user@jakarta.apache.org>; Tue, 10 Feb 2004 18:36:51 +0100 (CET)
Message-ID: <402916AF.9060302@seznam.cz>
Date: Tue, 10 Feb 2004 18:36:47 +0100
From: Leo Galambos <Leo.G@seznam.cz>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; cs-CZ;
 rv:1.6) Gecko/20040113
X-Accept-Language: cs, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Index advice...
References: <20040210141753.55035.qmail@web12707.mail.yahoo.com>
In-Reply-To: <20040210141753.55035.qmail@web12707.mail.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Otis Gospodnetic napsal(a):

>--- Leo Galambos <Leo.G@seznam.cz> wrote:
>  
>
>>Otis Gospodnetic napsal(a):
>>
>>    
>>
>>>>Thus I do not know how it could be O(1).
>>>>   
>>>>
>>>>        
>>>>
>>>~ O(1) is what I have observed through experiments with indexing of
>>>several million documents.
>>> 
>>>
>>>      
>>>
>>What did you exactly measured? Just the time of the insert operation 
>>(incl. merge(), of course)? Was it a test on real documents?
>>    
>>
>
>I didn't really measure anything, I only observed this, as my focus was
>something else, not performance measurements.
>It is true that every time an insert/add triggers a merge operation,
>things will slow down, but from what I recall (and this was about 1
>year ago), the overall performance was steady as the index grew.
>
>  
>

Try the same test with mergeFactor=2, you will see the difference.

Leo

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 10 19:31:31 2004
Return-Path: 
 <lucene-user-return-7063-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68318 invoked from network); 10 Feb 2004 19:31:31 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 10 Feb 2004 19:31:31 -0000
Received: (qmail 53020 invoked by uid 500); 10 Feb 2004 19:31:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52971 invoked by uid 500); 10 Feb 2004 19:31:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 52880 invoked from network); 10 Feb 2004 19:31:08 -0000
Received: from unknown (HELO slc-xchg1.slc.mainstreamdata.com) (209.63.42.32)
  by daedalus.apache.org with SMTP; 10 Feb 2004 19:31:08 -0000
X-MimeOLE: Produced By Microsoft Exchange V6.0.6487.1
content-class: urn:content-classes:message
Subject: RE: Another Newbie question--FSDirectory
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Tue, 10 Feb 2004 12:31:13 -0700
Message-ID: 
 <A60AC49BA89F4F4D9D86F2B7519111E82C5973@dilbert.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Another Newbie question--FSDirectory
Thread-Index: AcPvsdQh3n7Zk+pgQbeYVm0wiZcCjgAWnx/w
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I agree that is sensible.  Does FSDirectory provide anything more than a
wrapper around OS directory structures?

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
Sent: Tuesday, February 10, 2004 1:42 AM
To: Lucene Users List
Subject: Re: Another Newbie question--FSDirectory


You should probably always try to use Directory, and not String nor
FSDirectory. Directory is the most abstract 'index type and location
entity', and using it smartly allows you to change your index type and
location more easily, should you ever choose to do that.

Otis

--- Scott Smith <ssmith@mainstreamdata.com> wrote:
> I was creating the IndexSearcher using a standard String containing=20
> the Lucene index directory pathname.  I noticed that "everyone" seems=20
> to create a FSDirectory and use that to create the searcher.  However,
> no
> one seems to use this for the IndexWriter.  Can someone tell me what
> the
> advantage of using the FSDirectory is over just specifying the index
> directory in a String? why it would be used for searching, but not
> for
> indexing?  Anything else relevant to FSDirectory?  Is it mostly
> convention and the real reason for it's existence is when you use the
> RAMDirectory or CompoundFileDirectory (or you don't want some method
> to
> care what flavor directory it is looking at)?
>=20
> Scott
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 11 00:48:59 2004
Return-Path: 
 <lucene-user-return-7064-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 60379 invoked from network); 11 Feb 2004 00:48:59 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 11 Feb 2004 00:48:59 -0000
Received: (qmail 5059 invoked by uid 500); 11 Feb 2004 00:48:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 5023 invoked by uid 500); 11 Feb 2004 00:48:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 4997 invoked from network); 11 Feb 2004 00:48:33 -0000
Received: from unknown (HELO web11506.mail.yahoo.com) (216.136.172.38)
  by daedalus.apache.org with SMTP; 11 Feb 2004 00:48:33 -0000
Message-ID: <20040211004841.67157.qmail@web11506.mail.yahoo.com>
Received: from [171.75.56.249] by web11506.mail.yahoo.com via HTTP;
 Tue, 10 Feb 2004 16:48:41 PST
Date: Tue, 10 Feb 2004 16:48:41 -0800 (PST)
From: Caroline Jen <jiapei_jen@yahoo.com>
Subject: The First Parameter of the IndexWriter
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I am constructing a web site.  I am learning the
Lucene so that I can use it to search the database.  I
started with reading the "Introdution In Text Indexing
with Jakarta Apache Lucene" at
http://www.onjava.com/pub/a/onjava/2003/01/15/lucene.html
    
and in the example given, it looks that I have to
specify a directory for the first parameter of the
IndexWriter (see below).

   String indexDir = System.getProperty
       ("java.io.tmpdir", "tmp") + System.getProperty
       ("file.separator") + "index-1";

   Analyzer analyzer = new StandardAnalyzer();
   boolean createFlag = true;

   IndexWriter writer = new IndexWriter(indexDir, 
                                analyzer, createFlag);

I have a record created and stored in a table in my
database whenever a user submits his/her inputs.  And
I want to index that record.  What should be the
indexDir in my case?  Should I follow the above
example and use "java.io.tmpdir"?  I sort of doubt it.
 Please advise.

__________________________________
Do you Yahoo!?
Yahoo! Finance: Get your refund fast by filing online.
http://taxes.yahoo.com/filing.html

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 11 01:40:51 2004
Return-Path: 
 <lucene-user-return-7065-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 84639 invoked from network); 11 Feb 2004 01:40:51 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 11 Feb 2004 01:40:51 -0000
Received: (qmail 35070 invoked by uid 500); 11 Feb 2004 01:40:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 35046 invoked by uid 500); 11 Feb 2004 01:40:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 35025 invoked from network); 11 Feb 2004 01:40:26 -0000
Received: from unknown (HELO hercule.cirano.qc.ca) (207.162.57.26)
  by daedalus.apache.org with SMTP; 11 Feb 2004 01:40:26 -0000
Received: from localhost (vauchers@localhost)
	by hercule.cirano.qc.ca (8.11.6/8.11.0) with ESMTP id i1B1eYL07940
	for <lucene-user@jakarta.apache.org>; Tue, 10 Feb 2004 20:40:34 -0500
X-Authentication-Warning: hercule.cirano.qc.ca: vauchers owned process doing
 -bs
Date: Tue, 10 Feb 2004 20:40:34 -0500 (EST)
From: Stephane James Vaucher <vauchers@cirano.qc.ca>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: The First Parameter of the IndexWriter
In-Reply-To: <20040211004841.67157.qmail@web11506.mail.yahoo.com>
Message-ID: <Pine.LNX.4.33.0402102026330.7799-100000@hercule.cirano.qc.ca>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You should probably take a look at the javadoc:
http://jakarta.apache.org/lucene/docs/api/index.html

As for where to store the index, you'll want to put it somewhere where all
potential users can access it, as well as where there is enough space for
your index. In a nutshell, you need to think of:
- amount of storage required
- permissions (e.g. if you need to access it from a app server with
security restrictions)
- access, on a shared HD or not
- deployment, if for a product, then it should be included in your
installation strategy, so you might use c:/Program Files/.../MyApp/index,
or /usr/local/MyApp/index.

On win, I personnally use my D drive in a path corresponding
to d:/<app-name>/index.

HTH,
sv

On Tue, 10 Feb 2004, Caroline Jen wrote:

> I am constructing a web site.  I am learning the
> Lucene so that I can use it to search the database.  I
> started with reading the "Introdution In Text Indexing
> with Jakarta Apache Lucene" at
> http://www.onjava.com/pub/a/onjava/2003/01/15/lucene.html
>
> and in the example given, it looks that I have to
> specify a directory for the first parameter of the
> IndexWriter (see below).
>
>    String indexDir = System.getProperty
>        ("java.io.tmpdir", "tmp") + System.getProperty
>        ("file.separator") + "index-1";
>
>    Analyzer analyzer = new StandardAnalyzer();
>    boolean createFlag = true;
>
>    IndexWriter writer = new IndexWriter(indexDir,
>                                 analyzer, createFlag);
>
> I have a record created and stored in a table in my
> database whenever a user submits his/her inputs.  And
> I want to index that record.  What should be the
> indexDir in my case?  Should I follow the above
> example and use "java.io.tmpdir"?  I sort of doubt it.
>  Please advise.
>
> __________________________________
> Do you Yahoo!?
> Yahoo! Finance: Get your refund fast by filing online.
> http://taxes.yahoo.com/filing.html
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 11 02:02:51 2004
Return-Path: 
 <lucene-user-return-7066-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 91062 invoked from network); 11 Feb 2004 02:02:51 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 11 Feb 2004 02:02:51 -0000
Received: (qmail 89340 invoked by uid 500); 11 Feb 2004 02:02:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 89301 invoked by uid 500); 11 Feb 2004 02:02:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 89274 invoked from network); 11 Feb 2004 02:02:25 -0000
Received: from unknown (HELO mail.office.vtourist.com) (69.104.69.114)
  by daedalus.apache.org with SMTP; 11 Feb 2004 02:02:25 -0000
Received: from [192.168.208.202] (adsl-69-104-69-113.dsl.irvnca.pacbell.net
 [69.104.69.113])
	(authenticated bits=0)
	by mail.office.vtourist.com (8.12.8/8.12.8) with ESMTP id i1B20hD5004850
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <lucene-user@jakarta.apache.org>; Tue, 10 Feb 2004 18:00:44 -0800
Mime-Version: 1.0 (Apple Message framework v612)
Content-Transfer-Encoding: 7bit
Message-Id: <59110EC0-5C36-11D8-BD18-000A95DB7BCC@office.vtourist.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: lucene-user@jakarta.apache.org
From: Supun Edirisinghe <supun@office.vtourist.com>
Subject: commit.lock file
Date: Tue, 10 Feb 2004 18:02:29 -0800
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi everybody, I'm new to the mail list.

I'm also new to using Lucene.

We use lucene to index some of our pages.

sometimes (for a reason unknown to us) a commit.lock file is left and 
searches using the index  don't work.

what are some of the causes for this commit.lock file to persist.

I've read in the faq that it is written so that access to the segments 
is synchronized correctly.

What are some good strategies to make make this file go away? Would it 
be a good idea to assign a  program to  just check the timestamp on 
that file and just delete it if it has been there for a long time?

all comments are welcome.

thanks


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 11 02:12:03 2004
Return-Path: 
 <lucene-user-return-7067-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 93732 invoked from network); 11 Feb 2004 02:12:03 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 11 Feb 2004 02:12:03 -0000
Received: (qmail 8676 invoked by uid 500); 11 Feb 2004 02:11:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 8614 invoked by uid 500); 11 Feb 2004 02:11:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 8584 invoked from network); 11 Feb 2004 02:11:38 -0000
Received: from unknown (HELO mail.gmx.net) (213.165.64.20)
  by daedalus.apache.org with SMTP; 11 Feb 2004 02:11:38 -0000
Received: (qmail 29685 invoked by uid 0); 11 Feb 2004 02:11:45 -0000
Received: from 80.185.239.206 by www62.gmx.net with HTTP;
	Wed, 11 Feb 2004 03:11:45 +0100 (MET)
Date: Wed, 11 Feb 2004 03:11:45 +0100 (MET)
From: "Markus Brosch" <brosch@gmx.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
MIME-Version: 1.0
References: <75D33637-5BD2-11D8-A16E-000393760B7E@mac.com>
Subject: how to "re-index" 
X-Priority: 3 (Normal)
X-Authenticated: #169788
Message-ID: <5156.1076465505@www62.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> When retrieving your documents, you can use this keyword to reference 
> your object.
> 
> > Another problem is, that my objects can change their content and must 
> > be "reindexed". Is it possible to remove the single index for that
object 
> > and build a new one without reindexing all?
> 
> Yes.

Thank you for your answers!

However, I have problems with "reindexing". 
First, I index all my object contents. Then some of these objects can change
and need to be re-indexed. 

I did it with IndexWriter(Dir, Analyzer, FALSE). With the boolean value
"false" the new document will be added to the index, but the old document still
remains in the index :-/ 

Any suggestions? THANK YOU!

-- 
GMX ProMail (250 MB Mailbox, 50 FreeSMS, Virenschutz, 2,99 EUR/Monat...)
jetzt 3 Monate GRATIS + 3x DER SPIEGEL +++ http://www.gmx.net/derspiegel +++


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 11 02:26:53 2004
Return-Path: 
 <lucene-user-return-7068-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 6772 invoked from network); 11 Feb 2004 02:26:53 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 11 Feb 2004 02:26:53 -0000
Received: (qmail 48431 invoked by uid 500); 11 Feb 2004 02:26:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 48396 invoked by uid 500); 11 Feb 2004 02:26:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 48329 invoked from network); 11 Feb 2004 02:26:22 -0000
Received: from unknown (HELO mail.gmx.net) (213.165.64.20)
  by daedalus.apache.org with SMTP; 11 Feb 2004 02:26:22 -0000
Received: (qmail 18622 invoked by uid 0); 11 Feb 2004 02:26:30 -0000
Received: from 80.185.239.206 by www62.gmx.net with HTTP;
	Wed, 11 Feb 2004 03:26:30 +0100 (MET)
Date: Wed, 11 Feb 2004 03:26:30 +0100 (MET)
From: "Markus Brosch" <brosch@gmx.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
MIME-Version: 1.0
References: <5156.1076465505@www62.gmx.net>
Subject: Re: how to "re-index"
X-Priority: 3 (Normal)
X-Authenticated: #169788
Message-ID: <10977.1076466390@www62.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> However, I have problems with "reindexing". 
> First, I index all my object contents. Then some of these objects can
> change
> and need to be re-indexed. 
> 
> I did it with IndexWriter(Dir, Analyzer, FALSE). With the boolean value
> "false" the new document will be added to the index, but the old document
> still remains in the index :-/ 

Sorry for the second mail, but maybe I sould say that I am looking for an
UPDATE of the index! What I am doing at the moment is adding (see above) and
deleting with IndexReader ...

Thanks ;-)

-- 
GMX ProMail (250 MB Mailbox, 50 FreeSMS, Virenschutz, 2,99 EUR/Monat...)
jetzt 3 Monate GRATIS + 3x DER SPIEGEL +++ http://www.gmx.net/derspiegel +++


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 11 10:00:49 2004
Return-Path: 
 <lucene-user-return-7070-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2125 invoked from network); 11 Feb 2004 10:00:49 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 11 Feb 2004 10:00:49 -0000
Received: (qmail 45660 invoked by uid 500); 11 Feb 2004 10:00:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 45508 invoked by uid 500); 11 Feb 2004 10:00:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 45454 invoked from network); 11 Feb 2004 10:00:07 -0000
Received: from unknown (HELO mail.ntranz.com) (65.19.137.179)
  by daedalus.apache.org with SMTP; 11 Feb 2004 10:00:07 -0000
Received: from [65.19.137.179] by tunes0320w
  (ArGoSoft Mail Server Pro for WinNT/2000/XP, Version 1.8 (1.8.4.0));
 Wed, 11 Feb 2004 01:53:26 -0800
From: "hema@searchendjobs.com" <hema@searchendjobs.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
X-ArGoMail-Auto-Response: Yes
Subject: thanks for your mail
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Message-ID: <ygcone7k30vw1pi.110220040153@mail.ntranz.com>
Date: Wed, 11 Feb 2004 01:53:26 -0800
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Received your mail we will get back to you shortly


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 11 10:00:39 2004
Return-Path: 
 <lucene-user-return-7069-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2005 invoked from network); 11 Feb 2004 10:00:39 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 11 Feb 2004 10:00:39 -0000
Received: (qmail 44955 invoked by uid 500); 11 Feb 2004 10:00:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 44901 invoked by uid 500); 11 Feb 2004 10:00:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 44864 invoked from network); 11 Feb 2004 10:00:01 -0000
Received: from unknown (HELO twix.hotpop.com) (38.113.3.71)
  by daedalus.apache.org with SMTP; 11 Feb 2004 10:00:01 -0000
Received: from hotpop.com (kubrick.hotpop.com [38.113.3.103])
	by twix.hotpop.com (Postfix) with SMTP id E744CD69FBD
	for <lucene-user@jakarta.apache.org>; Wed, 11 Feb 2004 09:50:59 +0000 (UTC)
Received: from cocof07rbdxa0p (danton-1-81-57-18-97.fbx.proxad.net
 [81.57.18.97])
	by smtp-1.hotpop.com (Postfix) with SMTP id 106F91A00BD
	for <lucene-user@jakarta.apache.org>; Wed, 11 Feb 2004 09:37:35 +0000 (UTC)
Message-ID: <001201c3f085$d4467610$61123951@cocof07rbdxa0p>
From: "Nicolas Maisonneuve" <n.maisonneuve@hotpop.com>
To: <lucene-user@jakarta.apache.org>
Subject: spans directory in the CVS version
Date: Wed, 11 Feb 2004 11:00:05 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_000F_01C3F08E.347A5300"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-HotPOP: -----------------------------------------------
                   Sent By HotPOP.com FREE Email
             Get your FREE POP email at www.HotPOP.com
          -----------------------------------------------
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_000F_01C3F08E.347A5300
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

hy,
recently, there is a new subdirectory "spans" in the search directory. =
what is it  and how use it ?

thanks in advance
nicolas maisonneuve
------=_NextPart_000_000F_01C3F08E.347A5300--




From MAILER-DAEMON Wed Feb 11 10:18:59 2004
Return-Path: 
 <lucene-user-return-7071-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 11529 invoked from network); 11 Feb 2004 10:18:59 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 11 Feb 2004 10:18:59 -0000
Received: (qmail 4421 invoked by uid 500); 11 Feb 2004 10:18:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 4388 invoked by uid 500); 11 Feb 2004 10:18:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 4360 invoked from network); 11 Feb 2004 10:18:23 -0000
Received: from unknown (HELO web12707.mail.yahoo.com) (216.136.173.244)
  by daedalus.apache.org with SMTP; 11 Feb 2004 10:18:23 -0000
Message-ID: <20040211101837.38144.qmail@web12707.mail.yahoo.com>
Received: from [83.131.123.206] by web12707.mail.yahoo.com via HTTP;
 Wed, 11 Feb 2004 02:18:37 PST
Date: Wed, 11 Feb 2004 02:18:37 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: how to "re-index"
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <10977.1076466390@www62.gmx.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Update in Lucene means: delete the document and then re-add it.
This may be a FAQ.

Otis

--- Markus Brosch <brosch@gmx.de> wrote:
> > However, I have problems with "reindexing". 
> > First, I index all my object contents. Then some of these objects
> can
> > change
> > and need to be re-indexed. 
> > 
> > I did it with IndexWriter(Dir, Analyzer, FALSE). With the boolean
> value
> > "false" the new document will be added to the index, but the old
> document
> > still remains in the index :-/ 
> 
> Sorry for the second mail, but maybe I sould say that I am looking
> for an
> UPDATE of the index! What I am doing at the moment is adding (see
> above) and
> deleting with IndexReader ...
> 
> Thanks ;-)
> 
> -- 
> GMX ProMail (250 MB Mailbox, 50 FreeSMS, Virenschutz, 2,99
> EUR/Monat...)
> jetzt 3 Monate GRATIS + 3x DER SPIEGEL +++
> http://www.gmx.net/derspiegel +++
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 11 11:02:00 2004
Return-Path: 
 <lucene-user-return-7072-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 35823 invoked from network); 11 Feb 2004 11:02:00 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 11 Feb 2004 11:02:00 -0000
Received: (qmail 46757 invoked by uid 500); 11 Feb 2004 11:01:23 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 46578 invoked by uid 500); 11 Feb 2004 11:01:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 46560 invoked from network); 11 Feb 2004 11:01:21 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.72)
  by daedalus.apache.org with SMTP; 11 Feb 2004 11:01:21 -0000
Received: (cpmta 29078 invoked from network); 11 Feb 2004 03:01:34 -0800
Received: from 24.51.109.181 (HELO ?192.168.1.102?)
  by smtp.hatcher.net (209.228.32.72) with SMTP; 11 Feb 2004 03:01:34 -0800
X-Sent: 11 Feb 2004 11:01:34 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <001201c3f085$d4467610$61123951@cocof07rbdxa0p>
References: <001201c3f085$d4467610$61123951@cocof07rbdxa0p>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <A5388800-5C81-11D8-9375-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: spans directory in the CVS version
Date: Wed, 11 Feb 2004 06:01:29 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 11, 2004, at 5:00 AM, Nicolas Maisonneuve wrote:
> hy,
> recently, there is a new subdirectory "spans" in the search directory. 
> what is it  and how use it ?

Have a look at the test cases which use the new features, and also see 
the CHANGES file which mentions it.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 11 11:33:55 2004
Return-Path: 
 <lucene-user-return-7073-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54258 invoked from network); 11 Feb 2004 11:33:55 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 11 Feb 2004 11:33:55 -0000
Received: (qmail 48277 invoked by uid 500); 11 Feb 2004 11:33:23 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 48177 invoked by uid 500); 11 Feb 2004 11:33:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 48107 invoked from network); 11 Feb 2004 11:33:21 -0000
Received: from unknown (HELO web12703.mail.yahoo.com) (216.136.173.240)
  by daedalus.apache.org with SMTP; 11 Feb 2004 11:33:21 -0000
Message-ID: <20040211113321.96987.qmail@web12703.mail.yahoo.com>
Received: from [194.152.216.187] by web12703.mail.yahoo.com via HTTP;
 Wed, 11 Feb 2004 03:33:21 PST
Date: Wed, 11 Feb 2004 03:33:21 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: commit.lock file
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <59110EC0-5C36-11D8-BD18-000A95DB7BCC@office.vtourist.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

If there are commit.lock files being left over, you should really
investigate why that is happening.  Something is probaly dying, and you
are not catching it and cleaning up by closing things like IndexReader
or IndexWriter.
If you want to forcefully unlock the index, use isLocked and unlock
methods in IndexWriter.  Not recommended, though.

Otis


--- Supun Edirisinghe <supun@office.vtourist.com> wrote:
> Hi everybody, I'm new to the mail list.
> 
> I'm also new to using Lucene.
> 
> We use lucene to index some of our pages.
> 
> sometimes (for a reason unknown to us) a commit.lock file is left and
> 
> searches using the index  don't work.
> 
> what are some of the causes for this commit.lock file to persist.
> 
> I've read in the faq that it is written so that access to the
> segments 
> is synchronized correctly.
> 
> What are some good strategies to make make this file go away? Would
> it 
> be a good idea to assign a  program to  just check the timestamp on 
> that file and just delete it if it has been there for a long time?
> 
> all comments are welcome.
> 
> thanks
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 11 11:39:28 2004
Return-Path: 
 <lucene-user-return-7074-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 57911 invoked from network); 11 Feb 2004 11:39:28 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 11 Feb 2004 11:39:28 -0000
Received: (qmail 68882 invoked by uid 500); 11 Feb 2004 11:39:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 68856 invoked by uid 500); 11 Feb 2004 11:39:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 68833 invoked from network); 11 Feb 2004 11:39:18 -0000
Received: from unknown (HELO web12704.mail.yahoo.com) (216.136.173.241)
  by daedalus.apache.org with SMTP; 11 Feb 2004 11:39:18 -0000
Message-ID: <20040211113918.89237.qmail@web12704.mail.yahoo.com>
Received: from [194.152.216.187] by web12704.mail.yahoo.com via HTTP;
 Wed, 11 Feb 2004 03:39:18 PST
Date: Wed, 11 Feb 2004 03:39:18 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: featues page in the Lucene web site
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <000801c3ef50$eb2f3eb0$61123951@cocof07rbdxa0p>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Nicolas,

That SF page is out of date now.
The best way to learn about different features right now is by reading
articles about Lucene (links on the site) or browsing the Javadocs
(also linked on the site).

Erik Hatcher and I are finishing up a book about Lucene.
Once published, this will be the most comprehensive and up to date
documentation about Lucene.

Otis Gospodnetic


--- Nicolas Maisonneuve <n.maisonneuve@hotpop.com> wrote:
> hy, 
> it would be great if a page with all features of lucene would be
> created in the apache lucene site !
> 
> in the sourceforge website
> (http://lucene.sourceforge.net/features.html) ,there is this
> page..but is it updated ?
> 
> thanks in advance
> nicolas maisonneuve


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 11 19:19:27 2004
Return-Path: 
 <lucene-user-return-7077-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 65634 invoked from network); 11 Feb 2004 19:19:27 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 11 Feb 2004 19:19:27 -0000
Received: (qmail 28906 invoked by uid 500); 11 Feb 2004 19:17:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 28838 invoked by uid 500); 11 Feb 2004 19:17:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 28811 invoked from network); 11 Feb 2004 19:17:11 -0000
Received: from unknown (HELO mail.ntranz.com) (65.19.137.179)
  by daedalus.apache.org with SMTP; 11 Feb 2004 19:17:11 -0000
Received: from [65.19.137.179] by tunes0320w
  (ArGoSoft Mail Server Pro for WinNT/2000/XP, Version 1.8 (1.8.4.0));
 Wed, 11 Feb 2004 10:49:31 -0800
From: "hema@searchendjobs.com" <hema@searchendjobs.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
X-ArGoMail-Auto-Response: Yes
Subject: thanks for your mail
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Message-ID: <ayejk7ag2kez2pd.110220041049@mail.ntranz.com>
Date: Wed, 11 Feb 2004 10:49:31 -0800
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Received your mail we will get back to you shortly


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 11 18:57:02 2004
Return-Path: 
 <lucene-user-return-7075-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 56048 invoked from network); 11 Feb 2004 18:57:02 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 11 Feb 2004 18:57:02 -0000
Received: (qmail 77991 invoked by uid 500); 11 Feb 2004 18:53:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77956 invoked by uid 500); 11 Feb 2004 18:53:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77926 invoked from network); 11 Feb 2004 18:53:56 -0000
Received: from unknown (HELO h-file05.180096hotel.com) (12.14.172.51)
  by daedalus.apache.org with SMTP; 11 Feb 2004 18:53:56 -0000
X-MimeOLE: Produced By Microsoft Exchange V6.0.6375.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C3F0D0.643CDAC9"
Subject: Leading Wild Card Search
Date: Wed, 11 Feb 2004 12:53:52 -0600
Message-ID: 
 <326BDC0F160B8647ACB8396A3C56838707B2A558@h-file05.180096hotel.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Leading Wild Card Search
Thread-Index: AcPw0GP6mOiRj0BpRkqlXye8XO0RRg==
From: "Vipul Sagare" <vsagare@hotels.com>
To: <lucene-user@jakarta.apache.org>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C3F0D0.643CDAC9
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

Lucene docs, FAQs and other research indicates

=20

Note: Leading wildcards (e.g. *ook) are not supported.

=20

=20

Is there any work around for implementation of such feature (if one has
to implement)?

=20

=20


------_=_NextPart_001_01C3F0D0.643CDAC9--

From MAILER-DAEMON Wed Feb 11 19:15:24 2004
Return-Path: 
 <lucene-user-return-7076-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64354 invoked from network); 11 Feb 2004 19:15:24 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 11 Feb 2004 19:15:24 -0000
Received: (qmail 14772 invoked by uid 500); 11 Feb 2004 19:11:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 14747 invoked by uid 500); 11 Feb 2004 19:11:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 14721 invoked from network); 11 Feb 2004 19:11:49 -0000
Received: from unknown (HELO smtp.extremesoftware.dyndns.biz) (66.46.219.63)
  by daedalus.apache.org with SMTP; 11 Feb 2004 19:11:49 -0000
Received: from sydney ([192.168.0.110]) by smtp.extremesoftware.dyndns.biz
 with Microsoft SMTPSVC(6.0.3790.0);
	 Wed, 11 Feb 2004 14:10:23 -0500
Reply-To: <wes@extremesoftware.ca>
From: "Wesley MacDonald" <wes@extremesoftware.ca>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Leading Wild Card Search
Date: Wed, 11 Feb 2004 14:10:23 -0500
Organization: Extreme Software Ltd.
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AcPw0GP6mOiRj0BpRkqlXye8XO0RRgAAZquw
In-Reply-To: 
 <326BDC0F160B8647ACB8396A3C56838707B2A558@h-file05.180096hotel.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
Message-ID: <SYDNEYS048x4ieCNQyf00000005@smtp.extremesoftware.dyndns.biz>
X-OriginalArrivalTime: 11 Feb 2004 19:10:23.0262 (UTC)
 FILETIME=[B2F3B3E0:01C3F0D2]
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Flip your text and add it as another field and when the user enters *word
you can search that field for drow* 

Wesley

-----Original Message-----
From: Vipul Sagare [mailto:vsagare@hotels.com] 
Sent: February 11, 2004 1:54 PM
To: lucene-user@jakarta.apache.org
Subject: Leading Wild Card Search

Lucene docs, FAQs and other research indicates

 

Note: Leading wildcards (e.g. *ook) are not supported.

 

 

Is there any work around for implementation of such feature (if one has to
implement)?

 

 



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 11 20:01:40 2004
Return-Path: 
 <lucene-user-return-7078-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 88235 invoked from network); 11 Feb 2004 20:01:40 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 11 Feb 2004 20:01:40 -0000
Received: (qmail 93543 invoked by uid 500); 11 Feb 2004 20:00:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 93488 invoked by uid 500); 11 Feb 2004 20:00:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 93408 invoked from network); 11 Feb 2004 20:00:52 -0000
Received: from unknown (HELO mta.micromuse.com) (194.131.185.92)
  by daedalus.apache.org with SMTP; 11 Feb 2004 20:00:52 -0000
Received: from tropo.com ([10.0.0.157])
	(authenticated (0 bits))
	by mta.micromuse.com (Switch-2.2.8/Switch-2.2.8) with ESMTP id i1BK0oH21811
	(using TLSv1/SSLv3 with cipher RC4-MD5 (128 bits) verified NO)
	for <lucene-user@jakarta.apache.org>; Wed, 11 Feb 2004 20:00:56 GMT
Message-ID: <402A89F2.8070609@tropo.com>
Date: Wed, 11 Feb 2004 12:00:50 -0800
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;
 rv:1.6a) Gecko/20031030
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Leading Wild Card Search
References: 
 <326BDC0F160B8647ACB8396A3C56838707B2A558@h-file05.180096hotel.com>
In-Reply-To: 
 <326BDC0F160B8647ACB8396A3C56838707B2A558@h-file05.180096hotel.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Vipul Sagare wrote:

>Lucene docs, FAQs and other research indicates
>
> 
>
>Note: Leading wildcards (e.g. *ook) are not supported.
>
> 
>
> 
>
>Is there any work around for implementation of such feature (if one has
>to implement)?
>  
>
I've written a PrefixQuery and it's not hard to do  -I can post it too.
Problem is that it is not integrated into the query parser (.jj) so odds
are noone will use it, and the general sentiment on this list (and 
lucene-dev)
is that prefix queries are evil because it's an expensive operation as 
the query
code has to traverse all terms to "expand" the query. I would prefer
a more user oriented view i.e. just allow it as sometimes it's what you 
need and
the only alternative I can think of, doing a fuzzy query, isn't quite right.


> 
>
> 
>
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 11 21:40:40 2004
Return-Path: 
 <lucene-user-return-7079-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 45593 invoked from network); 11 Feb 2004 21:40:40 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 11 Feb 2004 21:40:40 -0000
Received: (qmail 16210 invoked by uid 500); 11 Feb 2004 21:40:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16171 invoked by uid 500); 11 Feb 2004 21:40:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16076 invoked from network); 11 Feb 2004 21:40:14 -0000
Received: from unknown (HELO mail.office.vtourist.com) (69.104.69.114)
  by daedalus.apache.org with SMTP; 11 Feb 2004 21:40:14 -0000
Received: from supun.office (host-157.media.net [66.113.64.157])
	(authenticated bits=0)
	by mail.office.vtourist.com (8.12.8/8.12.8) with ESMTP id i1BLcOD6012676
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <lucene-user@jakarta.apache.org>; Wed, 11 Feb 2004 13:38:25 -0800
Subject: Re: commit.lock file
From: Supun Edirisinghe <supun@office.vtourist.com>
Reply-To: supun@office.vtourist.com
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20040211113321.96987.qmail@web12703.mail.yahoo.com>
References: <20040211113321.96987.qmail@web12703.mail.yahoo.com>
Content-Type: text/plain
Organization: VirtualTourist.com, Inc.
Message-Id: <1076535627.9610.20.camel@supun.office>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.2.2 (1.2.2-5) 
Date: 11 Feb 2004 13:40:27 -0800
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

thanks otis

you are right. Is there a way the thread using isLock and unlock know
how old the lock is?

my assumption is that if it is older than a couple seconds it is from
something dying or some branch where something is uncaught.

I guess I can try looking at the timestamp of the commit.lock file using
IO. I'm worried that that read of the lock file will be many times the
time
searching. I guess I won't know until I test and that time will only
come in cases where the lock is set. I didn't see any methods in the API
for 
finding the age of the lock. am I wrong?

thanks again


On Wed, 2004-02-11 at 03:33, Otis Gospodnetic wrote:
> If there are commit.lock files being left over, you should really
> investigate why that is happening.  Something is probaly dying, and you
> are not catching it and cleaning up by closing things like IndexReader
> or IndexWriter.
> If you want to forcefully unlock the index, use isLocked and unlock
> methods in IndexWriter.  Not recommended, though.
> 
> Otis
> 
> 
> --- Supun Edirisinghe <supun@office.vtourist.com> wrote:
> > Hi everybody, I'm new to the mail list.
> > 
> > I'm also new to using Lucene.
> > 
> > We use lucene to index some of our pages.
> > 
> > sometimes (for a reason unknown to us) a commit.lock file is left and
> > 
> > searches using the index  don't work.
> > 
> > what are some of the causes for this commit.lock file to persist.
> > 
> > I've read in the faq that it is written so that access to the
> > segments 
> > is synchronized correctly.
> > 
> > What are some good strategies to make make this file go away? Would
> > it 
> > be a good idea to assign a  program to  just check the timestamp on 
> > that file and just delete it if it has been there for a long time?
> > 
> > all comments are welcome.
> > 
> > thanks
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 11 23:06:42 2004
Return-Path: 
 <lucene-user-return-7080-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 87703 invoked from network); 11 Feb 2004 23:06:42 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 11 Feb 2004 23:06:42 -0000
Received: (qmail 67978 invoked by uid 500); 11 Feb 2004 23:06:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 67916 invoked by uid 500); 11 Feb 2004 23:06:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 67842 invoked from network); 11 Feb 2004 23:06:12 -0000
Received: from unknown (HELO smtprelay01.ispgateway.de) (62.67.200.156)
  by daedalus.apache.org with SMTP; 11 Feb 2004 23:06:12 -0000
Received: (qmail 14470 invoked from network); 11 Feb 2004 23:06:17 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.216.228])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 11 Feb 2004 23:06:17 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 2CE06984
	for <lucene-user@jakarta.apache.org>; Thu, 12 Feb 2004 00:06:17 +0100 (CET)
From: lucene@nitwit.de
To: lucene-user@jakarta.apache.org
Subject: Did you mean...
Date: Thu, 12 Feb 2004 00:06:16 +0100
User-Agent: KMail/1.6
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Message-Id: <200402120006.16489.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi!

Can I do things like Google's "Did you mean...?" correction for mistyped words 
with Lucene?

Warm Regards,
Timo

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 11 23:15:41 2004
Return-Path: 
 <lucene-user-return-7081-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 91120 invoked from network); 11 Feb 2004 23:15:41 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 11 Feb 2004 23:15:41 -0000
Received: (qmail 1778 invoked by uid 500); 11 Feb 2004 23:15:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 1742 invoked by uid 500); 11 Feb 2004 23:15:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 1716 invoked from network); 11 Feb 2004 23:15:19 -0000
Received: from unknown (HELO jive.servlets.net) (209.162.192.250)
  by daedalus.apache.org with SMTP; 11 Feb 2004 23:15:19 -0000
Received: from jivesoftware.com (249-127.customer.cloud9.net
 [168.100.249.127])
	(authenticated bits=0)
	by jive.servlets.net (8.12.8/8.12.8) with ESMTP id i1BNFPBv012471
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <lucene-user@jakarta.apache.org>; Wed, 11 Feb 2004 15:15:26 -0800
Message-ID: <402AB798.7020803@jivesoftware.com>
Date: Wed, 11 Feb 2004 18:15:36 -0500
From: Matt Tucker <matt@jivesoftware.com>
User-Agent: Mozilla Thunderbird 0.5 (Windows/20040207)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Did you mean...
References: <200402120006.16489.lucene@nitwit.de>
In-Reply-To: <200402120006.16489.lucene@nitwit.de>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Timo,

We implemented that type of system using a spelling engine by Wintertree:

http://www.wintertree-software.com

There are some free Java spelling packages out there too that you could 
likely use.

Regards,
Matt

lucene@nitwit.de wrote:

> Hi!
> 
> Can I do things like Google's "Did you mean...?" correction for mistyped words 
> with Lucene?
> 
> Warm Regards,
> Timo
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 11 23:23:46 2004
Return-Path: 
 <lucene-user-return-7082-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 95843 invoked from network); 11 Feb 2004 23:23:46 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 11 Feb 2004 23:23:46 -0000
Received: (qmail 33816 invoked by uid 500); 11 Feb 2004 23:23:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 33764 invoked by uid 500); 11 Feb 2004 23:23:23 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 33726 invoked from network); 11 Feb 2004 23:23:23 -0000
Received: from unknown (HELO smtprelay01.ispgateway.de) (62.67.200.156)
  by daedalus.apache.org with SMTP; 11 Feb 2004 23:23:23 -0000
Received: (qmail 16595 invoked from network); 11 Feb 2004 23:23:29 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.216.228])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 11 Feb 2004 23:23:29 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id C7ABB984
	for <lucene-user@jakarta.apache.org>; Thu, 12 Feb 2004 00:23:29 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: ANNOUNCE: Plucene
Date: Thu, 12 Feb 2004 00:23:29 +0100
User-Agent: KMail/1.6
References: <20040203005403.GB14500@soto.kasei.com>
In-Reply-To: <20040203005403.GB14500@soto.kasei.com>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200402120023.29563.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi!

Somewhat off-topic: is there a PHP port of Lucene?

Warm regards
Timo

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 11 23:37:42 2004
Return-Path: 
 <lucene-user-return-7083-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2128 invoked from network); 11 Feb 2004 23:37:42 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 11 Feb 2004 23:37:42 -0000
Received: (qmail 74563 invoked by uid 500); 11 Feb 2004 23:37:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 74535 invoked by uid 500); 11 Feb 2004 23:37:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 74517 invoked from network); 11 Feb 2004 23:37:20 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.84)
  by daedalus.apache.org with SMTP; 11 Feb 2004 23:37:20 -0000
Received: (cpmta 2857 invoked from network); 11 Feb 2004 15:37:26 -0800
Received: from 24.51.109.181 (HELO ?192.168.1.102?)
  by smtp.hatcher.net (209.228.32.84) with SMTP; 11 Feb 2004 15:37:26 -0800
X-Sent: 11 Feb 2004 23:37:26 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <200402120023.29563.lucene@nitwit.de>
References: <20040203005403.GB14500@soto.kasei.com>
 <200402120023.29563.lucene@nitwit.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3E536D15-5CEB-11D8-974B-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: ANNOUNCE: Plucene
Date: Wed, 11 Feb 2004 18:37:24 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

In this case, I'd recommend calling out to a Lucene, CLucene, or  
PLucene.

Sam Ruby plugged it into his Perl-based blog like this:  
<http://radio.weblogs.com/0101679/stories/2002/08/13/ 
luceneSearchFromBlosxom.html>

On Feb 11, 2004, at 6:23 PM, lucene@nitwit.de wrote:

> Hi!
>
> Somewhat off-topic: is there a PHP port of Lucene?
>
> Warm regards
> Timo
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 12 01:51:49 2004
Return-Path: 
 <lucene-user-return-7084-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58618 invoked from network); 12 Feb 2004 01:51:49 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 12 Feb 2004 01:51:49 -0000
Received: (qmail 83867 invoked by uid 500); 12 Feb 2004 01:51:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 83842 invoked by uid 500); 12 Feb 2004 01:51:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 83819 invoked from network); 12 Feb 2004 01:51:23 -0000
Received: from unknown (HELO mta.micromuse.com) (194.131.185.92)
  by daedalus.apache.org with SMTP; 12 Feb 2004 01:51:23 -0000
Received: from tropo.com ([10.0.0.157])
	(authenticated (0 bits))
	by mta.micromuse.com (Switch-2.2.8/Switch-2.2.8) with ESMTP id i1C1pQH25117
	(using TLSv1/SSLv3 with cipher RC4-MD5 (128 bits) verified NO)
	for <lucene-user@jakarta.apache.org>; Thu, 12 Feb 2004 01:51:31 GMT
Message-ID: <402ADC1D.2000501@tropo.com>
Date: Wed, 11 Feb 2004 17:51:25 -0800
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;
 rv:1.6a) Gecko/20031030
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: code for "more like this" query "expansion" - was - Re:
 setMaxClauseCount
 ??
References: <400E9B4D.1070505@apache.org> <13783.1074701331@www3.gmx.net>
 <400EAE4C.7070901@apache.org>
In-Reply-To: <400EAE4C.7070901@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Doug Cutting wrote:

> Karl Koch wrote:
>
>> Do you know good papers about strategies of how
>> to select keywords effectivly beyond the scope of stopword lists and 
>> stemming?
>>
>> Using term frequencies of the document is not really possible since 
>> lucene
>> is not providing access to a document vector, isn't it?
>
>
> Lucene does let you access the document frequency of terms, with 
> IndexReader.docFreq().  Term frequencies can be computed by 
> re-tokenizing the text, which, for a single document, is usually fast 
> enough.  But looking up the docFreq() of every term in the document is 
> probably too slow.
>
> You can use some heuristics to prune the set of terms, to avoid 
> calling docFreq() too much, or at all.  Since you're trying to 
> maximize a tf*idf score, you're probably most interested in terms with 
> a high tf. Choosing a tf threshold even as low as two or three will 
> radically reduce the number of terms under consideration.  Another 
> heuristic is that terms with a high idf (i.e., a low df) tend to be 
> longer.  So you could threshold the terms by the number of characters, 
> not selecting anything less than, e.g., six or seven characters.  With 
> these sorts of heuristics you can usually find small set of, e.g., ten 
> or fewer terms that do a pretty good job of characterizing a document.
>
> It all depends on what you're trying to do.  If you're trying to eek 
> out that last percent of precision and recall regardless of 
> computational difficulty so that you can win a TREC competition, then 
> the techniques I mention above are useless.  But if you're trying to 
> provide a "more like this" button on a search results page that does a 
> decent job and has good performance, such techniques might be useful.
>
> An efficient, effective "more-like-this" query generator would be a 
> great contribution, if anyone's interested.  I'd imagine that it would 
> take a Reader or a String (the document's text), an Analyzer, and 
> return a set of representative terms using heuristics like those 
> above.  The frequency and length thresholds could be parameters, etc.


Well I've done a prelim impl of the above. Maybe someone could proofread 
my code.
The code is hot off the presses and seems to work...

Questions are:
[a] is the code right
[b] are any more (less) params needed to properly "genericize" the 
algorithm? e.g. max "words" to return?
[c] I can tweak the code to be a little more usable..does it make sense 
to return, say, a Query?
[d] then the eternal question - I think these things are interesting but 
my theory is that Queries (is-a Query impls) which are not implemented 
into the QueryParser will never really be used....

Anyway:

There are two parts - the main() quick test I did which is not set up to 
run on another system
right now but shows how the mlt rountine (mlt->MoreLikeThis) is called:



    public static void main( String[] a)
        throws Throwable
    {
        Hashtable stopTable = StopFilter.makeStopTable( 
StopAnalyzer.ENGLISH_STOP_WORDS);
        String fn = "c:/Program Files/Apache 
Group/Apache/htdocs/manual/vhosts/index.html.en";
        PrintStream o = System.out;
        final IndexReader r = IndexReader.open( "localhost_index");

        String body = new com.tropo.html.HTMLTextMuncher( new 
FileInputStream( fn)).getText();
        PriorityQueue q = mlt(  new StringReader( body), 
getDefAnalyzer(), r, "contents", 2, stopTable, 0, 0);

        o.println( "res..." + q.size());
        o.println();

        Object cur;
        while ( (cur = q.pop()) != null)
        {
            Object[] ar = (Object[]) cur;
            o.println( ar[ 0] + " = " + ar[ 1]);
        }


    }




And the impl which will compile with appropriate imports.

import java.io.*;
import java.util.*;
import org.apache.lucene.analysis.*;
import org.apache.lucene.document.*;
import org.apache.lucene.search.*;
import org.apache.lucene.index.*;
import org.apache.lucene.store.*;
import org.apache.lucene.util.*;


    /**
     * Find words for a more-like-this query former.
     *
     * @param r the reader that has the content of the document
     * @param a the analyzer to parse the reader with
     * @param field the field of interest in the document
     * @param minFreq filter out terms that occur less than this in the 
document
     * @param stop a table of stopwords to ignore
     * @param minLen ignore words less than this length or pass in 0 to 
not use this
     * @param maxLen ignore words greater than this length or pass in 0 
to not use this
     * @return a priority queue ordered by docs with the largest score 
(tf*idf)
     */
    public static PriorityQueue mlt( Reader r,
                                     Analyzer a,
                                     IndexReader ir,
                                     String field,
                                     int minFreq,
                                     Hashtable stop,
                                     int minLen,
                                     int maxLen)
        throws IOException
    {
        Similarity sim = new DefaultSimilarity(); // for idf
        TokenStream ts = a.tokenStream( field, r);
        org.apache.lucene.analysis.Token toke;
        Map words = new HashMap();
        while ( (toke = ts.next()) != null)
        {
            String word = toke.termText().toLowerCase();
            if ( stop.contains( word)) continue;
            int len = word.length();
            if ( minLen > 0 && len < minLen) continue;
            if ( maxLen > 0 && len < maxLen) continue;
            if ( words.containsKey( word))
            {
                Integer x = (Integer) words.get( word);
                words.put( word, new Integer( x.intValue()+1));
            }
            else
                words.put( word, new Integer( 1));
        }
        Iterator it = words.keySet().iterator();

        int numDocs = ir.numDocs();
        FreqQ res = new FreqQ( words.size());
       
        while ( it.hasNext())
        {
            String word = (String) it.next();
            int tf = ((Integer) words.get( word)).intValue();
            if (tf < minFreq) continue;
            Term t = new Term( field, word);
            int docFreq = ir.docFreq( t);
            float idf = sim.idf( docFreq, numDocs);
            float score = tf * idf;
            res.insert( new Object[] { word, new Float( score),
                                       new Float( idf),
                                       new Integer( docFreq)});
        }
        return res;
    }

    /**
     *
     */
    static class FreqQ
        extends PriorityQueue
    {
        FreqQ( int s)
        {
            initialize( s);
        }

        protected boolean lessThan(Object a, Object b)
        {
            Object[] aa =(Object[]) a;
            Object[] bb =(Object[]) b;
            Float fa = (Float) aa[ 1];
            Float fb = (Float) bb[ 1];
            return fa.floatValue() > fb.floatValue();
        }
    }


>
> Doug
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 12 03:52:31 2004
Return-Path: 
 <lucene-user-return-7086-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 6710 invoked from network); 12 Feb 2004 03:52:31 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 12 Feb 2004 03:52:31 -0000
Received: (qmail 70087 invoked by uid 500); 12 Feb 2004 03:52:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 70040 invoked by uid 500); 12 Feb 2004 03:52:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 69995 invoked from network); 12 Feb 2004 03:52:03 -0000
Received: from unknown (HELO mail.ntranz.com) (65.19.137.179)
  by daedalus.apache.org with SMTP; 12 Feb 2004 03:52:03 -0000
Received: from [65.19.137.179] by tunes0320w
  (ArGoSoft Mail Server Pro for WinNT/2000/XP, Version 1.8 (1.8.4.0));
 Wed, 11 Feb 2004 19:45:17 -0800
From: "hema@searchendjobs.com" <hema@searchendjobs.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
X-ArGoMail-Auto-Response: Yes
Subject: thanks for your mail
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Message-ID: <k73loutzrg3un63.110220041945@mail.ntranz.com>
Date: Wed, 11 Feb 2004 19:45:17 -0800
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Received your mail we will get back to you shortly


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 12 03:52:24 2004
Return-Path: 
 <lucene-user-return-7085-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 6583 invoked from network); 12 Feb 2004 03:52:24 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 12 Feb 2004 03:52:24 -0000
Received: (qmail 69689 invoked by uid 500); 12 Feb 2004 03:52:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69398 invoked by uid 500); 12 Feb 2004 03:51:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 69372 invoked from network); 12 Feb 2004 03:51:58 -0000
Received: from unknown (HELO smtp03.mrf.mail.rcn.net) (207.172.4.62)
  by daedalus.apache.org with SMTP; 12 Feb 2004 03:51:58 -0000
Received: from 208-59-172-198.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com
 ([208.59.172.198] helo=aleph1.smart.net)
	by smtp03.mrf.mail.rcn.net with esmtp (Exim 3.35 #4)
	id 1Ar7tX-0000eP-02
	for lucene-user@jakarta.apache.org; Wed, 11 Feb 2004 22:52:07 -0500
Message-Id: <5.0.2.1.2.20040211225038.02dc4150@pop3.smart.net>
X-Sender: dbd@pop3.smart.net
X-Mailer: QUALCOMM Windows Eudora Version 5.0.2
Date: Wed, 11 Feb 2004 22:57:39 -0500
To: To:
From: "Daniel B. Davis" <dbd@smart.net>
Subject: What is the status of Query Parser AND / OR ?
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

There was a lot of correspondence during December about this.
Is there any further resolution?




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 12 04:03:24 2004
Return-Path: 
 <lucene-user-return-7087-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 10129 invoked from network); 12 Feb 2004 04:03:24 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 12 Feb 2004 04:03:24 -0000
Received: (qmail 90878 invoked by uid 500); 12 Feb 2004 04:02:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 90832 invoked by uid 500); 12 Feb 2004 04:02:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 90735 invoked from network); 12 Feb 2004 04:02:53 -0000
Received: from unknown (HELO mail.motile.net) (203.32.115.2)
  by daedalus.apache.org with SMTP; 12 Feb 2004 04:02:53 -0000
Received: (qmail 27796 invoked by uid 1008); 12 Feb 2004 04:02:42 -0000
Received: from unknown (HELO iapetus) (esmond.pitt@motile.net@203.32.113.2)
  by 0 with SMTP; 12 Feb 2004 04:02:42 -0000
Message-ID: <005901c3f11d$1bb04bb0$34fafc0a@iapetus>
From: "Esmond Pitt" <esmond.pitt@motile.net>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Inconsistent treatment of field-names between index-time and
 query-time
Date: Thu, 12 Feb 2004 15:03:01 +1100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I have a field Author: and I'm using the StandardAnalyzer. When documents
with this field are added to the index, the field name 'Author' is
case-folded by the analyzer to 'author', and this is how it appears in the
index. Queries using 'Author' therefore do not work, because the field name
is not processed by the analyzer. This seems to be due to line 587 of
QueryParser.jj (as at 1.3-final), which is part of the following:

Query Clause(String field) : {
  Query q;
  Token fieldToken=null, boost=null;
}
{
  [
    LOOKAHEAD(2)
    fieldToken=<TERM> <COLON> { field = fieldToken.image; }
  ]

I believe that 'field = fieldToken.image' needs to be processed by the
Analyzer to solve this problem.

Esmond Pitt



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 12 07:25:48 2004
Return-Path: 
 <lucene-user-return-7088-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 81402 invoked from network); 12 Feb 2004 07:25:48 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 12 Feb 2004 07:25:48 -0000
Received: (qmail 17420 invoked by uid 500); 12 Feb 2004 07:25:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 17381 invoked by uid 500); 12 Feb 2004 07:25:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 17326 invoked from network); 12 Feb 2004 07:25:17 -0000
Received: from unknown (HELO mail.tanto-xipolis.de) (213.61.178.42)
  by daedalus.apache.org with SMTP; 12 Feb 2004 07:25:17 -0000
Received: from tucholsky.office.tanto.de (morus.xipolis.net [10.0.1.4])
	by mail.tanto-xipolis.de (Postfix on SuSE Linux 7.3 (i386)) with ESMTP id
 1B5A719B74E
	for <lucene-user@jakarta.apache.org>; Thu, 12 Feb 2004 08:25:29 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id
 i1C7PSlT003436
	for <lucene-user@jakarta.apache.org>; Thu, 12 Feb 2004 08:25:28 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id i1C7PS6Y003432;
	Thu, 12 Feb 2004 08:25:28 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16427.10856.339820.815015@tanto-xipolis.de>
Date: Thu, 12 Feb 2004 08:25:28 +0100
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: What is the status of Query Parser AND / OR ?
In-Reply-To: <5.0.2.1.2.20040211225038.02dc4150@pop3.smart.net>
References: <5.0.2.1.2.20040211225038.02dc4150@pop3.smart.net>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Daniel B. Davis writes:
> There was a lot of correspondence during December about this.
> Is there any further resolution?
> 
There's a patch and I hope it will find it's way into the lucene 
sources.

see: http://issues.apache.org/bugzilla/show_bug.cgi?id=25820

Seems I missed the mail about Otis latest comment.
Sorry about that, I'll take a look at these issues ASAP.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 12 07:48:30 2004
Return-Path: 
 <lucene-user-return-7089-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 91947 invoked from network); 12 Feb 2004 07:48:30 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 12 Feb 2004 07:48:30 -0000
Received: (qmail 65612 invoked by uid 500); 12 Feb 2004 07:48:01 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 65576 invoked by uid 500); 12 Feb 2004 07:48:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 65554 invoked from network); 12 Feb 2004 07:48:01 -0000
Received: from unknown (HELO smtprelay01.ispgateway.de) (62.67.200.156)
  by daedalus.apache.org with SMTP; 12 Feb 2004 07:48:01 -0000
Received: (qmail 15858 invoked from network); 12 Feb 2004 07:48:12 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.248.62])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 12 Feb 2004 07:48:12 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id F085923C1
	for <lucene-user@jakarta.apache.org>; Thu, 12 Feb 2004 08:48:10 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Did you mean...
Date: Thu, 12 Feb 2004 08:48:10 +0100
User-Agent: KMail/1.6
References: <200402120006.16489.lucene@nitwit.de>
 <402AB798.7020803@jivesoftware.com>
In-Reply-To: <402AB798.7020803@jivesoftware.com>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200402120848.10798.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Thursday 12 February 2004 00:15, Matt Tucker wrote:
> We implemented that type of system using a spelling engine by Wintertree:
>
> http://www.wintertree-software.com
>
> There are some free Java spelling packages out there too that you could
> likely use.

But this does not ensure that the word really exists in the index. The word 
google does propose however to exist.

Regards
Timo

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 12 08:04:25 2004
Return-Path: 
 <lucene-user-return-7090-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 1068 invoked from network); 12 Feb 2004 08:04:25 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 12 Feb 2004 08:04:25 -0000
Received: (qmail 98510 invoked by uid 500); 12 Feb 2004 08:03:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 98467 invoked by uid 500); 12 Feb 2004 08:03:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 98421 invoked from network); 12 Feb 2004 08:03:54 -0000
Received: from unknown (HELO chuck.interface-business.de) (193.101.57.34)
  by daedalus.apache.org with SMTP; 12 Feb 2004 08:03:54 -0000
Received: from buddelflink (buddelflink.interface-business.de [193.101.57.21])
	by chuck.interface-business.de (8.12.9/8.12.9) with ESMTP id i1C843cb034802
	for <lucene-user@jakarta.apache.org>; Thu, 12 Feb 2004 09:04:03 +0100 (CET)
	(envelope-from kristian.hermsdorf@ifbus.de)
Date: Thu, 12 Feb 2004 09:04:03 +0100
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Leading Wild Card Search
References: 
 <326BDC0F160B8647ACB8396A3C56838707B2A558@h-file05.180096hotel.com>
 <402A89F2.8070609@tropo.com>
From: Kristian Hermsdorf <kristian.hermsdorf@ifbus.de>
Organization: Interface Business
Content-Type: text/plain; format=flowed; charset=iso-8859-15
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit
Message-ID: <opr28zc1jehawgj6@mail>
In-Reply-To: <402A89F2.8070609@tropo.com>
User-Agent: Opera7.23/Win32 M2 build 3227
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi

> I've written a PrefixQuery and it's not hard to do  -I can post it too.
> Problem is that it is not integrated into the query parser (.jj) so odds
> are noone will use it, and the general sentiment on this list (and lucene-dev)
> is that prefix queries are evil because it's an expensive operation as the query
> code has to traverse all terms to "expand" the query. I would prefer
> a more user oriented view i.e. just allow it as sometimes it's what you need and
> the only alternative I can think of, doing a fuzzy query, isn't quite right.

wow - great!
I'm looking for a sample code for quite a goode time. I'd like to test the performance on our data to see if it's really that slow.

It would be great if you could post a URL whrer to find your extension.

thank you

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 12 08:44:20 2004
Return-Path: 
 <lucene-user-return-7091-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 29477 invoked from network); 12 Feb 2004 08:44:20 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 12 Feb 2004 08:44:20 -0000
Received: (qmail 79309 invoked by uid 500); 12 Feb 2004 08:43:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 79178 invoked by uid 500); 12 Feb 2004 08:43:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 79158 invoked from network); 12 Feb 2004 08:43:49 -0000
Received: from unknown (HELO smtpmail.fao.org) (168.202.2.12)
  by daedalus.apache.org with SMTP; 12 Feb 2004 08:43:49 -0000
Received: from CONVERSION-DAEMON.smtpmail.fao.org by smtpmail.fao.org
 (PMDF V6.2-X17 #30673) id <0HSY00F01R375S@smtpmail.fao.org> for
 lucene-user@jakarta.apache.org; Thu, 12 Feb 2004 09:47:31 +0100 (MET)
Received: from afexch1.fao.org (afexch1.fao.org [168.202.2.84])
 by smtpmail.fao.org (PMDF V6.2-X17 #30673)
 with ESMTP id <0HSY00DO4R37BA@smtpmail.fao.org> for
 lucene-user@jakarta.apache.org; Thu, 12 Feb 2004 09:47:31 +0100 (MET)
Received: by afexch1.fao.org with Internet Mail Service (5.5.2657.72)
	id <1W93N10G>; Thu, 12 Feb 2004 09:44:01 +0100
Content-return: allowed
Date: Thu, 12 Feb 2004 09:43:59 +0100
From: "Viparthi, Kiran (AFIS)" <Kiran.Viparthi@fao.org>
Subject: RE: Did you mean...
To: 'Lucene Users List' <lucene-user@jakarta.apache.org>
Message-id: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4B7@afexch3.fao.org>
MIME-version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-type: text/plain
Content-transfer-encoding: 7BIT
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

We archived this by creating a separate index <words> extracting the
complete list of words.
You can also work on the frequency if you are extracting these from other
indexes but could be expensive.
Manipulating the search for doing a fuzzy search in the <words> index would
give you the better list of matching words for spellings.

Kiran.


-----Original Message-----
From: lucene@nitwit.de [mailto:lucene@nitwit.de] 
Sent: 12 February 2004 08:48
To: Lucene Users List
Subject: Re: Did you mean...


On Thursday 12 February 2004 00:15, Matt Tucker wrote:
> We implemented that type of system using a spelling engine by 
> Wintertree:
>
> http://www.wintertree-software.com
>
> There are some free Java spelling packages out there too that you 
> could likely use.

But this does not ensure that the word really exists in the index. The word 
google does propose however to exist.

Regards
Timo

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 12 08:50:51 2004
Return-Path: 
 <lucene-user-return-7092-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 33699 invoked from network); 12 Feb 2004 08:50:51 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 12 Feb 2004 08:50:51 -0000
Received: (qmail 92661 invoked by uid 500); 12 Feb 2004 08:50:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 92588 invoked by uid 500); 12 Feb 2004 08:50:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 92568 invoked from network); 12 Feb 2004 08:50:19 -0000
Received: from unknown (HELO mail-core.space2u.com) (62.20.1.181)
  by daedalus.apache.org with SMTP; 12 Feb 2004 08:50:19 -0000
Received: from localhost (www-core.space2u.com [62.20.1.180])
	by mail-core.space2u.com (8.12.11/8.12.10) with ESMTP id i1C8oUSg018662
	for <lucene-user@jakarta.apache.org>; Thu, 12 Feb 2004 09:50:30 +0100
Date: Thu, 12 Feb 2004 09:50:30 +0100
Message-Id: <200402120850.i1C8oUSg018662@mail-core.space2u.com>
MIME-Version: 1.0
From: ronnie@nobull.se
To: Lucene Users List <lucene-user@jakarta.apache.org>
Cc: 
Subject: Re: Did you mean...
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hi Timo!

There is no built-in way in Lucene to achieve this. I have done a simple implementation with a patched FuzzyQuery for each term. A new method (bestOrderRewrite) returns a ordered list of all fuzzy terms that indeed exist in index. There is no guarantee that the suggested term is spelled correct though...  Basically this works best when search is done on one term only.
Search code is something like this:

// on no_hits
cquery = cquery.rewrite(reader);
if (cquery instanceof TermQuery) {
    // if search contained only one term this is a TermQuery instance
    FuzzyQuery fquery = new FuzzyQuery(new Term("contents", cquery.toString("contents")));
    TermQuery[] terms = fquery.bestOrderRewrite(reader);
    if (terms.length > 0) {
        StringBuffer alts = new StringBuffer();
        alts.append("Did you mean ").append(terms[0].getTerm().text());
    }
} else if (cquery instanceof BooleanQuery) {
    // split queries
    // <snip>
    BooleanClause[] clauses = ((BooleanQuery)cquery).getClauses();
    // get suggestion for each term
    if (clauses[i].required) {
       FuzzyQuery fquery = new FuzzyQuery(new Term("contents", clauses[i].query.toString("contents")));
       TermQuery[] terms = fquery.bestOrderRewrite(reader);
        // ...
    }
    // </snip>
} // and so on...


Regards,
Ronnie

>On Thursday 12 February 2004 00:15, Matt Tucker wrote:
>> We implemented that type of system using a spelling engine by Wintertree:
>>
>> http://www.wintertree-software.com
>>
>> There are some free Java spelling packages out there too that you could
>> likely use.
>
>But this does not ensure that the word really exists in the index. The word 
>google does propose however to exist.
>
>Regards
>Timo
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 12 10:18:19 2004
Return-Path: 
 <lucene-user-return-7093-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9544 invoked from network); 12 Feb 2004 10:18:19 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 12 Feb 2004 10:18:19 -0000
Received: (qmail 94181 invoked by uid 500); 12 Feb 2004 10:17:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94152 invoked by uid 500); 12 Feb 2004 10:17:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94134 invoked from network); 12 Feb 2004 10:17:46 -0000
Received: from unknown (HELO smtprelay01.ispgateway.de) (62.67.200.156)
  by daedalus.apache.org with SMTP; 12 Feb 2004 10:17:46 -0000
Received: (qmail 30849 invoked from network); 12 Feb 2004 10:17:58 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.248.62])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 12 Feb 2004 10:17:58 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP
	id 8F0131BB1; Thu, 12 Feb 2004 11:17:58 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Did you mean...
Date: Thu, 12 Feb 2004 11:17:58 +0100
User-Agent: KMail/1.6
References: <200402120850.i1C8oUSg018662@mail-core.space2u.com>
In-Reply-To: <200402120850.i1C8oUSg018662@mail-core.space2u.com>
Cc: ronnie@nobull.se
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200402121117.58202.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Ronnie!

On Thursday 12 February 2004 09:50, ronnie@nobull.se wrote:
> There is no built-in way in Lucene to achieve this. I have done a simple
> implementation with a patched FuzzyQuery for each term. A new method
> (bestOrderRewrite) returns a ordered list of all fuzzy terms that indeed
> exist in index. There is no guarantee that the suggested term is spelled

Could you please post your FuzzyQuery (did you pach the class or extend it?) 
or send via email?

Thanks a lot
Timo

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 12 10:43:34 2004
Return-Path: 
 <lucene-user-return-7094-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 22984 invoked from network); 12 Feb 2004 10:43:34 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 12 Feb 2004 10:43:34 -0000
Received: (qmail 54780 invoked by uid 500); 12 Feb 2004 10:43:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 54756 invoked by uid 500); 12 Feb 2004 10:43:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 54725 invoked from network); 12 Feb 2004 10:42:59 -0000
Received: from unknown (HELO web12707.mail.yahoo.com) (216.136.173.244)
  by daedalus.apache.org with SMTP; 12 Feb 2004 10:42:59 -0000
Message-ID: <20040212104313.51470.qmail@web12707.mail.yahoo.com>
Received: from [194.152.226.232] by web12707.mail.yahoo.com via HTTP;
 Thu, 12 Feb 2004 02:43:13 PST
Date: Thu, 12 Feb 2004 02:43:13 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: code for "more like this" query "expansion" - was - Re:
 setMaxClauseCount ??
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <402ADC1D.2000501@tropo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Lots of params in that mlt method, but it seems flexible.
I'll try it.

Small optimization suggestion: use int[] with a single element for that
words Map, instead of creating lots of Integer()s.  Actually, maybe
JVMs are smart and don't allocate new objects for the same int wrapped
in Integer.... I don't know for sure.

Otis


--- David Spencer <dave-lucene-user@tropo.com> wrote:
> Doug Cutting wrote:
> 
> > Karl Koch wrote:
> >
> >> Do you know good papers about strategies of how
> >> to select keywords effectivly beyond the scope of stopword lists
> and 
> >> stemming?
> >>
> >> Using term frequencies of the document is not really possible
> since 
> >> lucene
> >> is not providing access to a document vector, isn't it?
> >
> >
> > Lucene does let you access the document frequency of terms, with 
> > IndexReader.docFreq().  Term frequencies can be computed by 
> > re-tokenizing the text, which, for a single document, is usually
> fast 
> > enough.  But looking up the docFreq() of every term in the document
> is 
> > probably too slow.
> >
> > You can use some heuristics to prune the set of terms, to avoid 
> > calling docFreq() too much, or at all.  Since you're trying to 
> > maximize a tf*idf score, you're probably most interested in terms
> with 
> > a high tf. Choosing a tf threshold even as low as two or three will
> 
> > radically reduce the number of terms under consideration.  Another 
> > heuristic is that terms with a high idf (i.e., a low df) tend to be
> 
> > longer.  So you could threshold the terms by the number of
> characters, 
> > not selecting anything less than, e.g., six or seven characters. 
> With 
> > these sorts of heuristics you can usually find small set of, e.g.,
> ten 
> > or fewer terms that do a pretty good job of characterizing a
> document.
> >
> > It all depends on what you're trying to do.  If you're trying to
> eek 
> > out that last percent of precision and recall regardless of 
> > computational difficulty so that you can win a TREC competition,
> then 
> > the techniques I mention above are useless.  But if you're trying
> to 
> > provide a "more like this" button on a search results page that
> does a 
> > decent job and has good performance, such techniques might be
> useful.
> >
> > An efficient, effective "more-like-this" query generator would be a
> 
> > great contribution, if anyone's interested.  I'd imagine that it
> would 
> > take a Reader or a String (the document's text), an Analyzer, and 
> > return a set of representative terms using heuristics like those 
> > above.  The frequency and length thresholds could be parameters,
> etc.
> 
> 
> Well I've done a prelim impl of the above. Maybe someone could
> proofread 
> my code.
> The code is hot off the presses and seems to work...
> 
> Questions are:
> [a] is the code right
> [b] are any more (less) params needed to properly "genericize" the 
> algorithm? e.g. max "words" to return?
> [c] I can tweak the code to be a little more usable..does it make
> sense 
> to return, say, a Query?
> [d] then the eternal question - I think these things are interesting
> but 
> my theory is that Queries (is-a Query impls) which are not
> implemented 
> into the QueryParser will never really be used....
> 
> Anyway:
> 
> There are two parts - the main() quick test I did which is not set up
> to 
> run on another system
> right now but shows how the mlt rountine (mlt->MoreLikeThis) is
> called:
> 
> 
> 
>     public static void main( String[] a)
>         throws Throwable
>     {
>         Hashtable stopTable = StopFilter.makeStopTable( 
> StopAnalyzer.ENGLISH_STOP_WORDS);
>         String fn = "c:/Program Files/Apache 
> Group/Apache/htdocs/manual/vhosts/index.html.en";
>         PrintStream o = System.out;
>         final IndexReader r = IndexReader.open( "localhost_index");
> 
>         String body = new com.tropo.html.HTMLTextMuncher( new 
> FileInputStream( fn)).getText();
>         PriorityQueue q = mlt(  new StringReader( body), 
> getDefAnalyzer(), r, "contents", 2, stopTable, 0, 0);
> 
>         o.println( "res..." + q.size());
>         o.println();
> 
>         Object cur;
>         while ( (cur = q.pop()) != null)
>         {
>             Object[] ar = (Object[]) cur;
>             o.println( ar[ 0] + " = " + ar[ 1]);
>         }
> 
> 
>     }
> 
> 
> 
> 
> And the impl which will compile with appropriate imports.
> 
> import java.io.*;
> import java.util.*;
> import org.apache.lucene.analysis.*;
> import org.apache.lucene.document.*;
> import org.apache.lucene.search.*;
> import org.apache.lucene.index.*;
> import org.apache.lucene.store.*;
> import org.apache.lucene.util.*;
> 
> 
>     /**
>      * Find words for a more-like-this query former.
>      *
>      * @param r the reader that has the content of the document
>      * @param a the analyzer to parse the reader with
>      * @param field the field of interest in the document
>      * @param minFreq filter out terms that occur less than this in
> the 
> document
>      * @param stop a table of stopwords to ignore
>      * @param minLen ignore words less than this length or pass in 0
> to 
> not use this
>      * @param maxLen ignore words greater than this length or pass in
> 0 
> to not use this
>      * @return a priority queue ordered by docs with the largest
> score 
> (tf*idf)
>      */
>     public static PriorityQueue mlt( Reader r,
>                                      Analyzer a,
>                                      IndexReader ir,
>                                      String field,
>                                      int minFreq,
>                                      Hashtable stop,
>                                      int minLen,
>                                      int maxLen)
>         throws IOException
>     {
>         Similarity sim = new DefaultSimilarity(); // for idf
>         TokenStream ts = a.tokenStream( field, r);
>         org.apache.lucene.analysis.Token toke;
>         Map words = new HashMap();
>         while ( (toke = ts.next()) != null)
>         {
>             String word = toke.termText().toLowerCase();
>             if ( stop.contains( word)) continue;
>             int len = word.length();
>             if ( minLen > 0 && len < minLen) continue;
>             if ( maxLen > 0 && len < maxLen) continue;
>             if ( words.containsKey( word))
>             {
>                 Integer x = (Integer) words.get( word);
>                 words.put( word, new Integer( x.intValue()+1));
>             }
>             else
>                 words.put( word, new Integer( 1));
>         }
>         Iterator it = words.keySet().iterator();
> 
>         int numDocs = ir.numDocs();
>         FreqQ res = new FreqQ( words.size());
>        
>         while ( it.hasNext())
>         {
>             String word = (String) it.next();
>             int tf = ((Integer) words.get( word)).intValue();
>             if (tf < minFreq) continue;
>             Term t = new Term( field, word);
>             int docFreq = ir.docFreq( t);
>             float idf = sim.idf( docFreq, numDocs);
>             float score = tf * idf;
>             res.insert( new Object[] { word, new Float( score),
>                                        new Float( idf),
>                                        new Integer( docFreq)});
>         }
>         return res;
>     }
> 
>     /**
>      *
>      */
>     static class FreqQ
>         extends PriorityQueue
>     {
>         FreqQ( int s)
>         {
>             initialize( s);
>         }
> 
>         protected boolean lessThan(Object a, Object b)
>         {
>             Object[] aa =(Object[]) a;
>             Object[] bb =(Object[]) b;
>             Float fa = (Float) aa[ 1];
>             Float fb = (Float) bb[ 1];
>             return fa.floatValue() > fb.floatValue();
>         }
>     }
> 
> 
> >
> > Doug
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 12 15:00:10 2004
Return-Path: 
 <lucene-user-return-7096-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 91498 invoked from network); 12 Feb 2004 15:00:10 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 12 Feb 2004 15:00:10 -0000
Received: (qmail 12549 invoked by uid 500); 12 Feb 2004 14:59:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12497 invoked by uid 500); 12 Feb 2004 14:59:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 12440 invoked from network); 12 Feb 2004 14:59:52 -0000
Received: from unknown (HELO mail.ntranz.com) (65.19.137.179)
  by daedalus.apache.org with SMTP; 12 Feb 2004 14:59:52 -0000
Received: from [65.19.137.179] by tunes0320w
  (ArGoSoft Mail Server Pro for WinNT/2000/XP, Version 1.8 (1.8.4.0));
 Thu, 12 Feb 2004 06:52:57 -0800
From: "hema@searchendjobs.com" <hema@searchendjobs.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
X-ArGoMail-Auto-Response: Yes
Subject: thanks for your mail
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Message-ID: <x25o7mcnfnu3hgl.120220040652@mail.ntranz.com>
Date: Thu, 12 Feb 2004 06:52:57 -0800
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Received your mail we will get back to you shortly


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 12 15:00:05 2004
Return-Path: 
 <lucene-user-return-7095-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 91444 invoked from network); 12 Feb 2004 15:00:05 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 12 Feb 2004 15:00:05 -0000
Received: (qmail 11231 invoked by uid 500); 12 Feb 2004 14:59:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 11176 invoked by uid 500); 12 Feb 2004 14:59:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 11049 invoked from network); 12 Feb 2004 14:59:40 -0000
Received: from unknown (HELO invrec.i.frys.com) (63.204.205.204)
  by daedalus.apache.org with SMTP; 12 Feb 2004 14:59:40 -0000
Received: from tempnt (ays-1.i.frys.com [10.100.0.60])
	by invrec.i.frys.com (8.11.6/8.11.6) with SMTP id i1CExfk27792
	for <lucene-user@jakarta.apache.org>; Thu, 12 Feb 2004 06:59:41 -0800
Message-ID: <017c01c3f178$dbc6e340$3c00640a@tempnt>
Reply-To: "Abhay Saswade" <ays@i.frys.com>
From: "Abhay Saswade" <ays@i.frys.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <200402120006.16489.lucene@nitwit.de>
 <402AB798.7020803@jivesoftware.com>
Subject: Re: Did you mean...
Date: Thu, 12 Feb 2004 06:59:47 -0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

We are using Jazzy - Java Spell Check API (sourceforge.net) for the same and
not very happy with it. I don't see much development activity recently going
on it. Look at it's buglist prior to consider using ...



Thanks Matt for the link.



Abhay



----- Original Message ----- 
From: "Matt Tucker" <matt@jivesoftware.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, February 11, 2004 3:15 PM
Subject: Re: Did you mean...


> Timo,
>
> We implemented that type of system using a spelling engine by Wintertree:
>
> http://www.wintertree-software.com
>
> There are some free Java spelling packages out there too that you could
> likely use.
>
> Regards,
> Matt
>
> lucene@nitwit.de wrote:
>
> > Hi!
> >
> > Can I do things like Google's "Did you mean...?" correction for mistyped
words
> > with Lucene?
> >
> > Warm Regards,
> > Timo
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 12 15:42:51 2004
Return-Path: 
 <lucene-user-return-7097-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 18219 invoked from network); 12 Feb 2004 15:42:51 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 12 Feb 2004 15:42:51 -0000
Received: (qmail 32639 invoked by uid 500); 12 Feb 2004 15:42:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 32609 invoked by uid 500); 12 Feb 2004 15:42:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 32577 invoked from network); 12 Feb 2004 15:42:32 -0000
Received: from unknown (HELO invrec.i.frys.com) (63.204.205.204)
  by daedalus.apache.org with SMTP; 12 Feb 2004 15:42:32 -0000
Received: from tempnt (ays-1.i.frys.com [10.100.0.60])
	by invrec.i.frys.com (8.11.6/8.11.6) with SMTP id i1CFgYk28234
	for <lucene-user@jakarta.apache.org>; Thu, 12 Feb 2004 07:42:34 -0800
Message-ID: <020801c3f17e$d95e38f0$3c00640a@tempnt>
Reply-To: "Abhay Saswade" <ays@i.frys.com>
From: "Abhay Saswade" <ays@i.frys.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <200402120006.16489.lucene@nitwit.de>
 <402AB798.7020803@jivesoftware.com> <200402120848.10798.lucene@nitwit.de>
Subject: Re: Did you mean...
Date: Thu, 12 Feb 2004 07:42:40 -0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

How about creating spellcheck dictionary with all words in lucene index?
That way you ensure that the word really exists in the index.

----- Original Message ----- 
From: <lucene@nitwit.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, February 11, 2004 11:48 PM
Subject: Re: Did you mean...


> On Thursday 12 February 2004 00:15, Matt Tucker wrote:
> > We implemented that type of system using a spelling engine by
Wintertree:
> >
> > http://www.wintertree-software.com
> >
> > There are some free Java spelling packages out there too that you could
> > likely use.
>
> But this does not ensure that the word really exists in the index. The
word
> google does propose however to exist.
>
> Regards
> Timo
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 12 16:12:25 2004
Return-Path: 
 <lucene-user-return-7098-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 39018 invoked from network); 12 Feb 2004 16:12:25 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 12 Feb 2004 16:12:25 -0000
Received: (qmail 40128 invoked by uid 500); 12 Feb 2004 16:12:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 40098 invoked by uid 500); 12 Feb 2004 16:12:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 39935 invoked from network); 12 Feb 2004 16:12:06 -0000
Received: from unknown (HELO smtpout.mac.com) (17.250.248.88)
  by daedalus.apache.org with SMTP; 12 Feb 2004 16:12:06 -0000
Received: from mac.com (smtpin08-en2 [10.13.10.153])
	by smtpout.mac.com (Xserve/MantshX 2.0) with ESMTP id i1CGC7a1014396
	for <lucene-user@jakarta.apache.org>; Thu, 12 Feb 2004 08:12:07 -0800 (PST)
Received: from [10.0.1.3] (adsl-62-167-62-13.adslplus.ch [62.167.62.13])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin08/MantshX 3.0) with ESMTP id i1CGC5Pq027213
	for <lucene-user@jakarta.apache.org>; Thu, 12 Feb 2004 08:12:06 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <020801c3f17e$d95e38f0$3c00640a@tempnt>
References: <200402120006.16489.lucene@nitwit.de>
 <402AB798.7020803@jivesoftware.com> <200402120848.10798.lucene@nitwit.de>
 <020801c3f17e$d95e38f0$3c00640a@tempnt>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <4124796B-5D76-11D8-A04E-000393760B7E@mac.com>
Content-Transfer-Encoding: 7bit
From: petite_abeille <petite_abeille@mac.com>
Subject: Re: Did you mean...
Date: Thu, 12 Feb 2004 17:12:28 +0100
To: Lucene Users List <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Feb 12, 2004, at 16:42, Abhay Saswade wrote:

> How about creating spellcheck dictionary with all words in lucene 
> index?
> That way you ensure that the word really exists in the index.

You can indeed use the terms identified by Lucene as the dictionary 
"words" ands apply traditional spell checking tricks like phonetic 
encodings, Levinstein distance and so on.

This approach works reasonably well in practice.

Cheers,

PA.



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 12 16:54:25 2004
Return-Path: 
 <lucene-user-return-7099-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 65033 invoked from network); 12 Feb 2004 16:54:25 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 12 Feb 2004 16:54:25 -0000
Received: (qmail 90090 invoked by uid 500); 12 Feb 2004 16:53:47 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 90051 invoked by uid 500); 12 Feb 2004 16:53:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 90012 invoked from network); 12 Feb 2004 16:53:46 -0000
Received: from unknown (HELO smtprelay01.ispgateway.de) (62.67.200.156)
  by daedalus.apache.org with SMTP; 12 Feb 2004 16:53:46 -0000
Received: (qmail 18888 invoked from network); 12 Feb 2004 16:53:47 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.218.128])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 12 Feb 2004 16:53:47 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 49FCE20DB
	for <lucene-user@jakarta.apache.org>; Thu, 12 Feb 2004 17:53:47 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Did you mean...
Date: Thu, 12 Feb 2004 17:53:46 +0100
User-Agent: KMail/1.6
References: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4B7@afexch3.fao.org>
In-Reply-To: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4B7@afexch3.fao.org>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200402121753.46953.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Thursday 12 February 2004 09:43, Viparthi, Kiran (AFIS) wrote:
> We archived this by creating a separate index <words> extracting the
> complete list of words.

How were you extracting the words?

Timo

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 12 17:04:07 2004
Return-Path: 
 <lucene-user-return-7100-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 70280 invoked from network); 12 Feb 2004 17:04:07 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 12 Feb 2004 17:04:07 -0000
Received: (qmail 22971 invoked by uid 500); 12 Feb 2004 17:03:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 22929 invoked by uid 500); 12 Feb 2004 17:03:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 22868 invoked from network); 12 Feb 2004 17:03:41 -0000
Received: from unknown (HELO smtprelay01.ispgateway.de) (62.67.200.156)
  by daedalus.apache.org with SMTP; 12 Feb 2004 17:03:41 -0000
Received: (qmail 26579 invoked from network); 12 Feb 2004 17:03:43 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.218.128])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 12 Feb 2004 17:03:43 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 0DC4F23B4
	for <lucene-user@jakarta.apache.org>; Thu, 12 Feb 2004 18:03:48 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Did you mean...
Date: Thu, 12 Feb 2004 18:03:47 +0100
User-Agent: KMail/1.6
References: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4B7@afexch3.fao.org>
 <200402121753.46953.lucene@nitwit.de>
In-Reply-To: <200402121753.46953.lucene@nitwit.de>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200402121803.47617.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Thursday 12 February 2004 17:53, lucene@nitwit.de wrote:
> How were you extracting the words?

Oops, sorry that this stupid question :) Got it. 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 12 17:07:50 2004
Return-Path: 
 <lucene-user-return-7101-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 72126 invoked from network); 12 Feb 2004 17:07:50 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 12 Feb 2004 17:07:50 -0000
Received: (qmail 33880 invoked by uid 500); 12 Feb 2004 17:07:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 33837 invoked by uid 500); 12 Feb 2004 17:07:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 33764 invoked from network); 12 Feb 2004 17:07:22 -0000
Received: from unknown (HELO smtpmail.fao.org) (168.202.2.12)
  by daedalus.apache.org with SMTP; 12 Feb 2004 17:07:22 -0000
Received: from CONVERSION-DAEMON.smtpmail.fao.org by smtpmail.fao.org
 (PMDF V6.2-X17 #30673) id <0HSZ00701EE5C8@smtpmail.fao.org> for
 lucene-user@jakarta.apache.org; Thu, 12 Feb 2004 18:10:54 +0100 (MET)
Received: from afexch1.fao.org (afexch1.fao.org [168.202.2.84])
 by smtpmail.fao.org (PMDF V6.2-X17 #30673)
 with ESMTP id <0HSZ00711EE5BD@smtpmail.fao.org> for
 lucene-user@jakarta.apache.org; Thu, 12 Feb 2004 18:10:53 +0100 (MET)
Received: by afexch1.fao.org with Internet Mail Service (5.5.2657.72)
	id <1W93N8G8>; Thu, 12 Feb 2004 18:07:24 +0100
Content-return: allowed
Date: Thu, 12 Feb 2004 18:07:24 +0100
From: "Viparthi, Kiran (AFIS)" <Kiran.Viparthi@fao.org>
Subject: RE: Did you mean...
To: 'Lucene Users List' <lucene-user@jakarta.apache.org>
Message-id: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4B8@afexch3.fao.org>
MIME-version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-type: text/plain
Content-transfer-encoding: 7BIT
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Timo,

As we just deal with a small and limited KAON Ontology.
I should say we use a crude way using StringTokenizer searching for " "
And maintaining a unique list.

But I assume that there could be other better ways if you are getting them
from another index.

Kiran.

-----Original Message-----
From: lucene@nitwit.de [mailto:lucene@nitwit.de] 
Sent: 12 February 2004 17:54
To: Lucene Users List
Subject: Re: Did you mean...


On Thursday 12 February 2004 09:43, Viparthi, Kiran (AFIS) wrote:
> We archived this by creating a separate index <words> extracting the 
> complete list of words.

How were you extracting the words?

Timo

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 12 17:08:45 2004
Return-Path: 
 <lucene-user-return-7102-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 72600 invoked from network); 12 Feb 2004 17:08:45 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 12 Feb 2004 17:08:45 -0000
Received: (qmail 37260 invoked by uid 500); 12 Feb 2004 17:08:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 37232 invoked by uid 500); 12 Feb 2004 17:08:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 37215 invoked from network); 12 Feb 2004 17:08:31 -0000
Received: from unknown (HELO smtpmail.fao.org) (168.202.2.12)
  by daedalus.apache.org with SMTP; 12 Feb 2004 17:08:31 -0000
Received: from CONVERSION-DAEMON.smtpmail.fao.org by smtpmail.fao.org
 (PMDF V6.2-X17 #30673) id <0HSZ00701EG4PH@smtpmail.fao.org> for
 lucene-user@jakarta.apache.org; Thu, 12 Feb 2004 18:12:04 +0100 (MET)
Received: from afexch1.fao.org (afexch1.fao.org [168.202.2.84])
 by smtpmail.fao.org (PMDF V6.2-X17 #30673)
 with ESMTP id <0HSZ00739EG4BD@smtpmail.fao.org> for
 lucene-user@jakarta.apache.org; Thu, 12 Feb 2004 18:12:04 +0100 (MET)
Received: by afexch1.fao.org with Internet Mail Service (5.5.2657.72)
	id <1W93N82S>; Thu, 12 Feb 2004 18:08:34 +0100
Content-return: allowed
Date: Thu, 12 Feb 2004 18:08:34 +0100
From: "Viparthi, Kiran (AFIS)" <Kiran.Viparthi@fao.org>
Subject: RE: Did you mean...
To: 'Lucene Users List' <lucene-user@jakarta.apache.org>
Message-id: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4B9@afexch3.fao.org>
MIME-version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-type: text/plain
Content-transfer-encoding: 7BIT
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

:) But. It was a bit late ..

-----Original Message-----
From: lucene@nitwit.de [mailto:lucene@nitwit.de] 
Sent: 12 February 2004 18:04
To: Lucene Users List
Subject: Re: Did you mean...


On Thursday 12 February 2004 17:53, lucene@nitwit.de wrote:
> How were you extracting the words?

Oops, sorry that this stupid question :) Got it. 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 12 17:18:09 2004
Return-Path: 
 <lucene-user-return-7103-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 77964 invoked from network); 12 Feb 2004 17:18:09 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 12 Feb 2004 17:18:09 -0000
Received: (qmail 61894 invoked by uid 500); 12 Feb 2004 17:17:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 61871 invoked by uid 500); 12 Feb 2004 17:17:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 61849 invoked from network); 12 Feb 2004 17:17:56 -0000
Received: from unknown (HELO smtprelay02.ispgateway.de) (62.67.200.157)
  by daedalus.apache.org with SMTP; 12 Feb 2004 17:17:56 -0000
Received: (qmail 26106 invoked from network); 12 Feb 2004 17:17:58 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.218.128])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 12 Feb 2004 17:17:58 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id BAF8B20DB
	for <lucene-user@jakarta.apache.org>; Thu, 12 Feb 2004 18:18:03 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Did you mean...
Date: Thu, 12 Feb 2004 18:18:02 +0100
User-Agent: KMail/1.6
References: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4B7@afexch3.fao.org>
 <200402121753.46953.lucene@nitwit.de> <200402121803.47617.lucene@nitwit.de>
In-Reply-To: <200402121803.47617.lucene@nitwit.de>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200402121818.02544.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Thursday 12 February 2004 18:03, lucene@nitwit.de wrote:
> On Thursday 12 February 2004 17:53, lucene@nitwit.de wrote:
> > How were you extracting the words?
>
> Oops, sorry that this stupid question :) Got it.

Hm, seems the question wasn't so stupid anyway:

IndexReader reader = IndexReader.open(ram);
TermEnum te = reader.terms();
while(te.next())
{
...

But this includes obviously parts of words, too :-\

Timo



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 12 17:35:59 2004
Return-Path: 
 <lucene-user-return-7104-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 87099 invoked from network); 12 Feb 2004 17:35:59 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 12 Feb 2004 17:35:59 -0000
Received: (qmail 13659 invoked by uid 500); 12 Feb 2004 17:35:47 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 13487 invoked by uid 500); 12 Feb 2004 17:35:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 13472 invoked from network); 12 Feb 2004 17:35:45 -0000
Received: from unknown (HELO smtpmail.fao.org) (168.202.2.12)
  by daedalus.apache.org with SMTP; 12 Feb 2004 17:35:45 -0000
Received: from CONVERSION-DAEMON.smtpmail.fao.org by smtpmail.fao.org
 (PMDF V6.2-X17 #30673) id <0HSZ00A01FPIH8@smtpmail.fao.org> for
 lucene-user@jakarta.apache.org; Thu, 12 Feb 2004 18:39:18 +0100 (MET)
Received: from afexch1.fao.org (afexch1.fao.org [168.202.2.84])
 by smtpmail.fao.org (PMDF V6.2-X17 #30673)
 with ESMTP id <0HSZ00A0YFPIGL@smtpmail.fao.org> for
 lucene-user@jakarta.apache.org; Thu, 12 Feb 2004 18:39:18 +0100 (MET)
Received: by afexch1.fao.org with Internet Mail Service (5.5.2657.72)
	id <1W93N9DK>; Thu, 12 Feb 2004 18:35:49 +0100
Content-return: allowed
Date: Thu, 12 Feb 2004 18:35:48 +0100
From: "Viparthi, Kiran (AFIS)" <Kiran.Viparthi@fao.org>
Subject: RE: Did you mean...
To: 'Lucene Users List' <lucene-user@jakarta.apache.org>
Message-id: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4BA@afexch3.fao.org>
MIME-version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-type: text/plain
Content-transfer-encoding: 7BIT
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Thursday 12 February 2004 18:03, lucene@nitwit.de wrote:
> On Thursday 12 February 2004 17:53, lucene@nitwit.de wrote:
> > How were you extracting the words?
>
> Oops, sorry that this stupid question :) Got it.

Hm, seems the question wasn't so stupid anyway:

IndexReader reader = IndexReader.open(ram);
TermEnum te = reader.terms();
while(te.next())
{
...

/**

As mentioned the only way I can see is to get the output of the analyzer
directly as a TokenStream 
iterate through it and insert it into a Map.
Increment you counter for the word for every occurrences found.

**/

Kiran Viparthi
But this includes obviously parts of words, too :-\

Timo



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 12 20:04:59 2004
Return-Path: 
 <lucene-user-return-7105-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 60184 invoked from network); 12 Feb 2004 20:04:59 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 12 Feb 2004 20:04:59 -0000
Received: (qmail 81931 invoked by uid 500); 12 Feb 2004 20:04:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81905 invoked by uid 500); 12 Feb 2004 20:04:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81862 invoked from network); 12 Feb 2004 20:04:39 -0000
Received: from unknown (HELO mta.micromuse.com) (194.131.185.92)
  by daedalus.apache.org with SMTP; 12 Feb 2004 20:04:39 -0000
Received: from tropo.com ([10.0.0.157])
	(authenticated (0 bits))
	by mta.micromuse.com (Switch-2.2.8/Switch-2.2.8) with ESMTP id i1CK4eH09125
	(using TLSv1/SSLv3 with cipher RC4-MD5 (128 bits) verified NO)
	for <lucene-user@jakarta.apache.org>; Thu, 12 Feb 2004 20:04:42 GMT
Message-ID: <402BDC58.2010502@tropo.com>
Date: Thu, 12 Feb 2004 12:04:40 -0800
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;
 rv:1.6a) Gecko/20031030
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: MoreLikeThis Query generator - Re: code for "more like this" query
 "expansion" - was - Re: setMaxClauseCount ??
References: <20040212104313.51470.qmail@web12707.mail.yahoo.com>
In-Reply-To: <20040212104313.51470.qmail@web12707.mail.yahoo.com>
Content-Type: multipart/mixed;
 boundary="------------090304010203010203030509"
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------090304010203010203030509
Content-Type: multipart/alternative;
 boundary="------------040404060901050704010601"


--------------040404060901050704010601
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Otis Gospodnetic wrote:

>Lots of params in that mlt method, but it seems flexible.
>  
>
Code rewritten, automagically chooses lots of defaults, lets you override
the defs thru the static vars at the bottom or the non-static vars also 
at the bottom.

Quickest way to use, choosing all defaults is:

MoreLikeThis mlt = new MoreLikeThis( r); // pass in IndexReader
Query q = mlt.like( x); // x is URL/InputStream/File "source doc"
// then pass q to IndexSearcher


To see what parameters it's using display the ret value from 
mlt.describeParams().

The main driver takes args of "-i INDEX" and then "-f FILE" or "-url 
URL" and shows
the params and up to 25 "similar" docs. HTML docs won't work right as 
I'm just
blindly using StandardAnalyzer on the stream. Trying to keep everything 
simple
so it fits in one file....


>I'll try it.
>
>Small optimization suggestion: use int[] with a single element for that
>words Map, instead of creating lots of Integer()s.  
>
Done sort of - put in my own mutable int to avoid object creation.

>Actually, maybe
>JVMs are smart and don't allocate new objects for the same int wrapped
>  
>
Dubious that they do..

>in Integer.... I don't know for sure.
>
>Otis
>
>
>--- David Spencer <dave-lucene-user@tropo.com> wrote:
>  
>
>>Doug Cutting wrote:
>>
>>    
>>
>>>Karl Koch wrote:
>>>
>>>      
>>>
>>>>Do you know good papers about strategies of how
>>>>to select keywords effectivly beyond the scope of stopword lists
>>>>        
>>>>
>>and 
>>    
>>
>>>>stemming?
>>>>
>>>>Using term frequencies of the document is not really possible
>>>>        
>>>>
>>since 
>>    
>>
>>>>lucene
>>>>is not providing access to a document vector, isn't it?
>>>>        
>>>>
>>>Lucene does let you access the document frequency of terms, with 
>>>IndexReader.docFreq().  Term frequencies can be computed by 
>>>re-tokenizing the text, which, for a single document, is usually
>>>      
>>>
>>fast 
>>    
>>
>>>enough.  But looking up the docFreq() of every term in the document
>>>      
>>>
>>is 
>>    
>>
>>>probably too slow.
>>>
>>>You can use some heuristics to prune the set of terms, to avoid 
>>>calling docFreq() too much, or at all.  Since you're trying to 
>>>maximize a tf*idf score, you're probably most interested in terms
>>>      
>>>
>>with 
>>    
>>
>>>a high tf. Choosing a tf threshold even as low as two or three will
>>>      
>>>
>>>radically reduce the number of terms under consideration.  Another 
>>>heuristic is that terms with a high idf (i.e., a low df) tend to be
>>>      
>>>
>>>longer.  So you could threshold the terms by the number of
>>>      
>>>
>>characters, 
>>    
>>
>>>not selecting anything less than, e.g., six or seven characters. 
>>>      
>>>
>>With 
>>    
>>
>>>these sorts of heuristics you can usually find small set of, e.g.,
>>>      
>>>
>>ten 
>>    
>>
>>>or fewer terms that do a pretty good job of characterizing a
>>>      
>>>
>>document.
>>    
>>
>>>It all depends on what you're trying to do.  If you're trying to
>>>      
>>>
>>eek 
>>    
>>
>>>out that last percent of precision and recall regardless of 
>>>computational difficulty so that you can win a TREC competition,
>>>      
>>>
>>then 
>>    
>>
>>>the techniques I mention above are useless.  But if you're trying
>>>      
>>>
>>to 
>>    
>>
>>>provide a "more like this" button on a search results page that
>>>      
>>>
>>does a 
>>    
>>
>>>decent job and has good performance, such techniques might be
>>>      
>>>
>>useful.
>>    
>>
>>>An efficient, effective "more-like-this" query generator would be a
>>>      
>>>
>>>great contribution, if anyone's interested.  I'd imagine that it
>>>      
>>>
>>would 
>>    
>>
>>>take a Reader or a String (the document's text), an Analyzer, and 
>>>return a set of representative terms using heuristics like those 
>>>above.  The frequency and length thresholds could be parameters,
>>>      
>>>
>>etc.
>>
>>
>>Well I've done a prelim impl of the above. Maybe someone could
>>proofread 
>>my code.
>>The code is hot off the presses and seems to work...
>>
>>Questions are:
>>[a] is the code right
>>[b] are any more (less) params needed to properly "genericize" the 
>>algorithm? e.g. max "words" to return?
>>[c] I can tweak the code to be a little more usable..does it make
>>sense 
>>to return, say, a Query?
>>[d] then the eternal question - I think these things are interesting
>>but 
>>my theory is that Queries (is-a Query impls) which are not
>>implemented 
>>into the QueryParser will never really be used....
>>
>>Anyway:
>>
>>There are two parts - the main() quick test I did which is not set up
>>to 
>>run on another system
>>right now but shows how the mlt rountine (mlt->MoreLikeThis) is
>>called:
>>
>>
>>
>>    public static void main( String[] a)
>>        throws Throwable
>>    {
>>        Hashtable stopTable = StopFilter.makeStopTable( 
>>StopAnalyzer.ENGLISH_STOP_WORDS);
>>        String fn = "c:/Program Files/Apache 
>>Group/Apache/htdocs/manual/vhosts/index.html.en";
>>        PrintStream o = System.out;
>>        final IndexReader r = IndexReader.open( "localhost_index");
>>
>>        String body = new com.tropo.html.HTMLTextMuncher( new 
>>FileInputStream( fn)).getText();
>>        PriorityQueue q = mlt(  new StringReader( body), 
>>getDefAnalyzer(), r, "contents", 2, stopTable, 0, 0);
>>
>>        o.println( "res..." + q.size());
>>        o.println();
>>
>>        Object cur;
>>        while ( (cur = q.pop()) != null)
>>        {
>>            Object[] ar = (Object[]) cur;
>>            o.println( ar[ 0] + " = " + ar[ 1]);
>>        }
>>
>>
>>    }
>>
>>
>>
>>
>>And the impl which will compile with appropriate imports.
>>
>>import java.io.*;
>>import java.util.*;
>>import org.apache.lucene.analysis.*;
>>import org.apache.lucene.document.*;
>>import org.apache.lucene.search.*;
>>import org.apache.lucene.index.*;
>>import org.apache.lucene.store.*;
>>import org.apache.lucene.util.*;
>>
>>
>>    /**
>>     * Find words for a more-like-this query former.
>>     *
>>     * @param r the reader that has the content of the document
>>     * @param a the analyzer to parse the reader with
>>     * @param field the field of interest in the document
>>     * @param minFreq filter out terms that occur less than this in
>>the 
>>document
>>     * @param stop a table of stopwords to ignore
>>     * @param minLen ignore words less than this length or pass in 0
>>to 
>>not use this
>>     * @param maxLen ignore words greater than this length or pass in
>>0 
>>to not use this
>>     * @return a priority queue ordered by docs with the largest
>>score 
>>(tf*idf)
>>     */
>>    public static PriorityQueue mlt( Reader r,
>>                                     Analyzer a,
>>                                     IndexReader ir,
>>                                     String field,
>>                                     int minFreq,
>>                                     Hashtable stop,
>>                                     int minLen,
>>                                     int maxLen)
>>        throws IOException
>>    {
>>        Similarity sim = new DefaultSimilarity(); // for idf
>>        TokenStream ts = a.tokenStream( field, r);
>>        org.apache.lucene.analysis.Token toke;
>>        Map words = new HashMap();
>>        while ( (toke = ts.next()) != null)
>>        {
>>            String word = toke.termText().toLowerCase();
>>            if ( stop.contains( word)) continue;
>>            int len = word.length();
>>            if ( minLen > 0 && len < minLen) continue;
>>            if ( maxLen > 0 && len < maxLen) continue;
>>            if ( words.containsKey( word))
>>            {
>>                Integer x = (Integer) words.get( word);
>>                words.put( word, new Integer( x.intValue()+1));
>>            }
>>            else
>>                words.put( word, new Integer( 1));
>>        }
>>        Iterator it = words.keySet().iterator();
>>
>>        int numDocs = ir.numDocs();
>>        FreqQ res = new FreqQ( words.size());
>>       
>>        while ( it.hasNext())
>>        {
>>            String word = (String) it.next();
>>            int tf = ((Integer) words.get( word)).intValue();
>>            if (tf < minFreq) continue;
>>            Term t = new Term( field, word);
>>            int docFreq = ir.docFreq( t);
>>            float idf = sim.idf( docFreq, numDocs);
>>            float score = tf * idf;
>>            res.insert( new Object[] { word, new Float( score),
>>                                       new Float( idf),
>>                                       new Integer( docFreq)});
>>        }
>>        return res;
>>    }
>>
>>    /**
>>     *
>>     */
>>    static class FreqQ
>>        extends PriorityQueue
>>    {
>>        FreqQ( int s)
>>        {
>>            initialize( s);
>>        }
>>
>>        protected boolean lessThan(Object a, Object b)
>>        {
>>            Object[] aa =(Object[]) a;
>>            Object[] bb =(Object[]) b;
>>            Float fa = (Float) aa[ 1];
>>            Float fb = (Float) bb[ 1];
>>            return fa.floatValue() > fb.floatValue();
>>        }
>>    }
>>
>>
>>    
>>
>>>Doug
>>>
>>>
>>>
>>>      
>>>
>>---------------------------------------------------------------------
>>    
>>
>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>For additional commands, e-mail:
>>>      
>>>
>>lucene-user-help@jakarta.apache.org
>>    
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>    
>>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>


--------------040404060901050704010601
Content-Type: text/html; charset=us-ascii
Content-Transfer-Encoding: 7bit

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
  <title></title>
</head>
<body bgcolor="#ffffff" text="#000000">
Otis Gospodnetic wrote:<br>
<blockquote cite="mid20040212104313.51470.qmail@web12707.mail.yahoo.com"
 type="cite">
  <pre wrap="">Lots of params in that mlt method, but it seems flexible.
  </pre>
</blockquote>
Code rewritten, automagically chooses lots of defaults, lets you
override<br>
the defs thru the static vars at the bottom or the non-static vars also
at the bottom.<br>
<br>
Quickest way to use, choosing all defaults is:<br>
<br>
MoreLikeThis mlt = new MoreLikeThis( r); // pass in IndexReader<br>
Query q = mlt.like( x); // x is URL/InputStream/File "source doc" <br>
// then pass q to IndexSearcher<br>
<br>
<br>
To see what parameters it's using display the ret value from
mlt.describeParams().<br>
<br>
The main driver takes args of "-i INDEX" and then "-f FILE" or "-url
URL" and shows<br>
the params and up to 25 "similar" docs. HTML docs won't work right as
I'm just<br>
blindly using StandardAnalyzer on the stream. Trying to keep everything
simple<br>
so it fits in one file....<br>
<br>
<br>
<blockquote cite="mid20040212104313.51470.qmail@web12707.mail.yahoo.com"
 type="cite">
  <pre wrap="">I'll try it.

Small optimization suggestion: use int[] with a single element for that
words Map, instead of creating lots of Integer()s.  </pre>
</blockquote>
Done sort of - put in my own mutable int to avoid object creation.<br>
<blockquote cite="mid20040212104313.51470.qmail@web12707.mail.yahoo.com"
 type="cite">
  <pre wrap="">Actually, maybe
JVMs are smart and don't allocate new objects for the same int wrapped
  </pre>
</blockquote>
Dubious that they do..<br>
<br>
<blockquote cite="mid20040212104313.51470.qmail@web12707.mail.yahoo.com"
 type="cite">
  <pre wrap="">in Integer.... I don't know for sure.

Otis


--- David Spencer <a class="moz-txt-link-rfc2396E" href="mailto:dave-lucene-user@tropo.com">&lt;dave-lucene-user@tropo.com&gt;</a> wrote:
  </pre>
  <blockquote type="cite">
    <pre wrap="">Doug Cutting wrote:

    </pre>
    <blockquote type="cite">
      <pre wrap="">Karl Koch wrote:

      </pre>
      <blockquote type="cite">
        <pre wrap="">Do you know good papers about strategies of how
to select keywords effectivly beyond the scope of stopword lists
        </pre>
      </blockquote>
    </blockquote>
    <pre wrap="">and 
    </pre>
    <blockquote type="cite">
      <blockquote type="cite">
        <pre wrap="">stemming?

Using term frequencies of the document is not really possible
        </pre>
      </blockquote>
    </blockquote>
    <pre wrap="">since 
    </pre>
    <blockquote type="cite">
      <blockquote type="cite">
        <pre wrap="">lucene
is not providing access to a document vector, isn't it?
        </pre>
      </blockquote>
      <pre wrap="">
Lucene does let you access the document frequency of terms, with 
IndexReader.docFreq().  Term frequencies can be computed by 
re-tokenizing the text, which, for a single document, is usually
      </pre>
    </blockquote>
    <pre wrap="">fast 
    </pre>
    <blockquote type="cite">
      <pre wrap="">enough.  But looking up the docFreq() of every term in the document
      </pre>
    </blockquote>
    <pre wrap="">is 
    </pre>
    <blockquote type="cite">
      <pre wrap="">probably too slow.

You can use some heuristics to prune the set of terms, to avoid 
calling docFreq() too much, or at all.  Since you're trying to 
maximize a tf*idf score, you're probably most interested in terms
      </pre>
    </blockquote>
    <pre wrap="">with 
    </pre>
    <blockquote type="cite">
      <pre wrap="">a high tf. Choosing a tf threshold even as low as two or three will
      </pre>
    </blockquote>
    <blockquote type="cite">
      <pre wrap="">radically reduce the number of terms under consideration.  Another 
heuristic is that terms with a high idf (i.e., a low df) tend to be
      </pre>
    </blockquote>
    <blockquote type="cite">
      <pre wrap="">longer.  So you could threshold the terms by the number of
      </pre>
    </blockquote>
    <pre wrap="">characters, 
    </pre>
    <blockquote type="cite">
      <pre wrap="">not selecting anything less than, e.g., six or seven characters. 
      </pre>
    </blockquote>
    <pre wrap="">With 
    </pre>
    <blockquote type="cite">
      <pre wrap="">these sorts of heuristics you can usually find small set of, e.g.,
      </pre>
    </blockquote>
    <pre wrap="">ten 
    </pre>
    <blockquote type="cite">
      <pre wrap="">or fewer terms that do a pretty good job of characterizing a
      </pre>
    </blockquote>
    <pre wrap="">document.
    </pre>
    <blockquote type="cite">
      <pre wrap="">It all depends on what you're trying to do.  If you're trying to
      </pre>
    </blockquote>
    <pre wrap="">eek 
    </pre>
    <blockquote type="cite">
      <pre wrap="">out that last percent of precision and recall regardless of 
computational difficulty so that you can win a TREC competition,
      </pre>
    </blockquote>
    <pre wrap="">then 
    </pre>
    <blockquote type="cite">
      <pre wrap="">the techniques I mention above are useless.  But if you're trying
      </pre>
    </blockquote>
    <pre wrap="">to 
    </pre>
    <blockquote type="cite">
      <pre wrap="">provide a "more like this" button on a search results page that
      </pre>
    </blockquote>
    <pre wrap="">does a 
    </pre>
    <blockquote type="cite">
      <pre wrap="">decent job and has good performance, such techniques might be
      </pre>
    </blockquote>
    <pre wrap="">useful.
    </pre>
    <blockquote type="cite">
      <pre wrap="">An efficient, effective "more-like-this" query generator would be a
      </pre>
    </blockquote>
    <blockquote type="cite">
      <pre wrap="">great contribution, if anyone's interested.  I'd imagine that it
      </pre>
    </blockquote>
    <pre wrap="">would 
    </pre>
    <blockquote type="cite">
      <pre wrap="">take a Reader or a String (the document's text), an Analyzer, and 
return a set of representative terms using heuristics like those 
above.  The frequency and length thresholds could be parameters,
      </pre>
    </blockquote>
    <pre wrap="">etc.


Well I've done a prelim impl of the above. Maybe someone could
proofread 
my code.
The code is hot off the presses and seems to work...

Questions are:
[a] is the code right
[b] are any more (less) params needed to properly "genericize" the 
algorithm? e.g. max "words" to return?
[c] I can tweak the code to be a little more usable..does it make
sense 
to return, say, a Query?
[d] then the eternal question - I think these things are interesting
but 
my theory is that Queries (is-a Query impls) which are not
implemented 
into the QueryParser will never really be used....

Anyway:

There are two parts - the main() quick test I did which is not set up
to 
run on another system
right now but shows how the mlt rountine (mlt-&gt;MoreLikeThis) is
called:



    public static void main( String[] a)
        throws Throwable
    {
        Hashtable stopTable = StopFilter.makeStopTable( 
StopAnalyzer.ENGLISH_STOP_WORDS);
        String fn = "c:/Program Files/Apache 
Group/Apache/htdocs/manual/vhosts/index.html.en";
        PrintStream o = System.out;
        final IndexReader r = IndexReader.open( "localhost_index");

        String body = new com.tropo.html.HTMLTextMuncher( new 
FileInputStream( fn)).getText();
        PriorityQueue q = mlt(  new StringReader( body), 
getDefAnalyzer(), r, "contents", 2, stopTable, 0, 0);

        o.println( "res..." + q.size());
        o.println();

        Object cur;
        while ( (cur = q.pop()) != null)
        {
            Object[] ar = (Object[]) cur;
            o.println( ar[ 0] + " = " + ar[ 1]);
        }


    }




And the impl which will compile with appropriate imports.

import java.io.*;
import java.util.*;
import org.apache.lucene.analysis.*;
import org.apache.lucene.document.*;
import org.apache.lucene.search.*;
import org.apache.lucene.index.*;
import org.apache.lucene.store.*;
import org.apache.lucene.util.*;


    /**
     * Find words for a more-like-this query former.
     *
     * @param r the reader that has the content of the document
     * @param a the analyzer to parse the reader with
     * @param field the field of interest in the document
     * @param minFreq filter out terms that occur less than this in
the 
document
     * @param stop a table of stopwords to ignore
     * @param minLen ignore words less than this length or pass in 0
to 
not use this
     * @param maxLen ignore words greater than this length or pass in
0 
to not use this
     * @return a priority queue ordered by docs with the largest
score 
(tf*idf)
     */
    public static PriorityQueue mlt( Reader r,
                                     Analyzer a,
                                     IndexReader ir,
                                     String field,
                                     int minFreq,
                                     Hashtable stop,
                                     int minLen,
                                     int maxLen)
        throws IOException
    {
        Similarity sim = new DefaultSimilarity(); // for idf
        TokenStream ts = a.tokenStream( field, r);
        org.apache.lucene.analysis.Token toke;
        Map words = new HashMap();
        while ( (toke = ts.next()) != null)
        {
            String word = toke.termText().toLowerCase();
            if ( stop.contains( word)) continue;
            int len = word.length();
            if ( minLen &gt; 0 &amp;&amp; len &lt; minLen) continue;
            if ( maxLen &gt; 0 &amp;&amp; len &lt; maxLen) continue;
            if ( words.containsKey( word))
            {
                Integer x = (Integer) words.get( word);
                words.put( word, new Integer( x.intValue()+1));
            }
            else
                words.put( word, new Integer( 1));
        }
        Iterator it = words.keySet().iterator();

        int numDocs = ir.numDocs();
        FreqQ res = new FreqQ( words.size());
       
        while ( it.hasNext())
        {
            String word = (String) it.next();
            int tf = ((Integer) words.get( word)).intValue();
            if (tf &lt; minFreq) continue;
            Term t = new Term( field, word);
            int docFreq = ir.docFreq( t);
            float idf = sim.idf( docFreq, numDocs);
            float score = tf * idf;
            res.insert( new Object[] { word, new Float( score),
                                       new Float( idf),
                                       new Integer( docFreq)});
        }
        return res;
    }

    /**
     *
     */
    static class FreqQ
        extends PriorityQueue
    {
        FreqQ( int s)
        {
            initialize( s);
        }

        protected boolean lessThan(Object a, Object b)
        {
            Object[] aa =(Object[]) a;
            Object[] bb =(Object[]) b;
            Float fa = (Float) aa[ 1];
            Float fb = (Float) bb[ 1];
            return fa.floatValue() &gt; fb.floatValue();
        }
    }


    </pre>
    <blockquote type="cite">
      <pre wrap="">Doug



      </pre>
    </blockquote>
    <pre wrap="">---------------------------------------------------------------------
    </pre>
    <blockquote type="cite">
      <pre wrap="">To unsubscribe, e-mail: <a class="moz-txt-link-abbreviated" href="mailto:lucene-user-unsubscribe@jakarta.apache.org">lucene-user-unsubscribe@jakarta.apache.org</a>
For additional commands, e-mail:
      </pre>
    </blockquote>
    <pre wrap=""><a class="moz-txt-link-abbreviated" href="mailto:lucene-user-help@jakarta.apache.org">lucene-user-help@jakarta.apache.org</a>
    </pre>
    <pre wrap="">
---------------------------------------------------------------------
To unsubscribe, e-mail: <a class="moz-txt-link-abbreviated" href="mailto:lucene-user-unsubscribe@jakarta.apache.org">lucene-user-unsubscribe@jakarta.apache.org</a>
For additional commands, e-mail: <a class="moz-txt-link-abbreviated" href="mailto:lucene-user-help@jakarta.apache.org">lucene-user-help@jakarta.apache.org</a>

    </pre>
  </blockquote>
  <pre wrap=""><!---->

---------------------------------------------------------------------
To unsubscribe, e-mail: <a class="moz-txt-link-abbreviated" href="mailto:lucene-user-unsubscribe@jakarta.apache.org">lucene-user-unsubscribe@jakarta.apache.org</a>
For additional commands, e-mail: <a class="moz-txt-link-abbreviated" href="mailto:lucene-user-help@jakarta.apache.org">lucene-user-help@jakarta.apache.org</a>

  </pre>
</blockquote>
<br>
</body>
</html>

--------------040404060901050704010601--

--------------090304010203010203030509
Content-Type: text/plain;
 name="MoreLikeThis.java"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="MoreLikeThis.java"

package com.tropo.lucene;

import java.io.*;
import java.util.*;
import java.net.*;

import org.apache.lucene.analysis.*;
import org.apache.lucene.analysis.standard.*;
import org.apache.lucene.document.*;
import org.apache.lucene.search.*;
import org.apache.lucene.queryParser.*;
import org.apache.lucene.index.*;
import org.apache.lucene.store.*;
import org.apache.lucene.util.*;

//import com.tropo.html.*;
//import com.tropo.lang.*;

/**
 * Generate "more like this" similarity queries.
 * Based on this mail:
 * <p>
 * <pre>
Lucene does let you access the document frequency of terms, with IndexReader.docFreq().  Term frequencies can be computed by re-tokenizing the text, which, for a single document, is usually fast enough.  But looking up the docFreq() of every term in the document is probably too slow.

You can use some heuristics to prune the set of terms, to avoid calling docFreq() too much, or at all.  Since you're trying to maximize a tf*idf score, you're probably most interested in terms with a high tf. Choosing a tf threshold even as low as two or three will radically reduce the number of terms under consideration.  Another heuristic is that terms with a high idf (i.e., a low df) tend to be longer.  So you could threshold the terms by the number of characters, not selecting anything less than, e.g., six or seven characters.  With these sorts of heuristics you can usually find small set of, e.g., ten or fewer terms that do a pretty good job of characterizing a document.

It all depends on what you're trying to do.  If you're trying to eek out that last percent of precision and recall regardless of computational difficulty so that you can win a TREC competition, then the techniques I mention above are useless.  But if you're trying to provide a "more like this" button on a search results page that does a decent job and has good performance, such techniques might be useful.

An efficient, effective "more-like-this" query generator would be a great contribution, if anyone's interested.  I'd imagine that it would take a Reader or a String (the document's text), an Analyzer, and return a set of representative terms using heuristics like those above.  The frequency and length thresholds could be parameters, etc.

Doug
</pre>
 */
public final class MoreLikeThis 
{
	/**
	 *
	 */
	public MoreLikeThis( IndexReader ir)
	{
		this.ir = ir;
	}

	/**
	 * Return a query that will return docs like the passed file.
	 */
	public Query like( File f)
		throws IOException
	{
		return like( new FileReader( f));
	}
	
	/**
	 * Return a query that will return docs like the passed URL.
	 */
	public Query like( URL u)
		throws IOException
	{
		return like( new InputStreamReader( u.openConnection().getInputStream()));
	}
	
	/**
	 * Return a query that will return docs like the passed stream.
	 */
	public Query like( IndexReader ir, java.io.InputStream is)
		throws IOException
	{
		return like( new InputStreamReader( is));
	}		

	/**
	 * Return a query that will return docs like the passed Reader.
	 */
	public Query like( Reader r)
		throws IOException
	{
		PriorityQueue q = mlt( r);

		BooleanQuery query = new BooleanQuery();
		Object cur;
		int qterms = 0;
		float bestScore = 0;
		while ( ( (cur = q.pop()) != null))
		{
			Object[] ar = (Object[]) cur;
			if ( qterms == 0)
			{
				bestScore = (float)((Float)ar[1]).floatValue();
			}
			float myScore = (float)((Float)ar[1]).floatValue(); 

			TermQuery tq = new TermQuery( new Term( fieldName, (String) ar[ 0]));
			if ( boost)
			{
				tq.setBoost( myScore/bestScore);
			}
			try
			{
				query.add( tq , false, false);
			}
			catch( BooleanQuery.TooManyClauses ignore)
			{
				break;
			}
			qterms++;
			if ( maxQueryTerms > 0 &&
				 qterms >= maxQueryTerms)
				break;
		}
		return query;
	}

	/**
	 * Find words for a more-like-this query former.
	 *
	 * @param r the reader that has the content of the document
	 * @param a the analyzer to parse the reader with
	 * @param field the field of interest in the document
	 * @param minFreq filter out terms that occur less than this in the document
	 * @param stop a table of stopwords to ignore
	 * @param minWordLen ignore words less than this length or pass in 0 to not use this
	 * @param maxWordLen ignore words greater than this length or pass in 0 to not use this
	 * @return a priority queue ordered by docs with the largest score (tf*idf)
	 */
	public PriorityQueue mlt( Reader r)
		throws IOException
	{

		TokenStream ts = an.tokenStream( fieldName, r);
		org.apache.lucene.analysis.Token toke;
		Map words = new HashMap();
		while ( (toke = ts.next()) != null) // for every token
		{
			String word = toke.termText();
			
			// filter out stop words
			if ( stopTable != null && stopTable.contains( word)) continue;
			
			int len = word.length();
			// filter out works too small or large
			if ( minWordLen > 0 && len < minWordLen) continue;
			if ( maxWordLen > 0 && len < maxWordLen) continue;

			// increment frequency
			Int cnt = (Int) words.get( word);
			if ( cnt == null)
				words.put( word, new Int());
			else
				cnt.x++;
		}

		// have collected all words in doc and their freqs


		int numDocs = ir.numDocs();
		FreqQ res = new FreqQ( words.size()); // will order words by score
		
		Iterator it = words.keySet().iterator();		
		while ( it.hasNext()) // for every word
		{
			String word = (String) it.next();
			
			int tf = ((Int) words.get( word)).x; // term freq in the source doc
			if (minTermFreq > 0 && tf < minTermFreq) continue; // filter out words that don't occur enough times in the source
			
			Term t = new Term( fieldName, word);
			int docFreq = ir.docFreq( t);

			if ( minDocFreq > 0 && docFreq < minDocFreq) continue; // filter out words that don't occur in enough docs
			
			if ( docFreq == 0) continue; // index update problem?
			
			float idf = sim.idf( docFreq, numDocs);
			float score = tf * idf;

			// only really need 1st 2 entries, other ones are for troubleshooting
			res.insert( new Object[] { word, // the word
									   new Float( score), // overall score
									   new Float( idf), // idf
									   new Integer( docFreq), // freq in all docs
									   new Integer( tf)
										   }
						);
		}
		return res;
	}

	/**
	 * Describe the parameters that control how the "more like this" query is formed.
	 */ 
	public String describeParams()
	{
		StringBuffer sb = new StringBuffer();
		sb.append( "\t" + "maxQueryTerms  : " + maxQueryTerms + "\n");
		sb.append( "\t" + "minWordLen     : " + minWordLen + "\n");
		sb.append( "\t" + "maxWordLen     : " + maxWordLen + "\n");
		sb.append( "\t" + "fieldName      : \"" + fieldName + "\"\n");
		sb.append( "\t" + "boost          : " + boost + "\n");
		sb.append( "\t" + "minTermFreq    : " + minTermFreq + "\n");
		sb.append( "\t" + "minDocFreq     : " + minDocFreq + "\n");
		sb.append( "\t" + "stopWords      : " + (stopTable == null ? "none" : (""+stopTable.size())) + "\n");
		return sb.toString();
	}





	/**
	 * Test driver.
	 * Pass in "-i INDEX" and then either "-fn FILE" or "-url URL".
	 */
	public static void main( String[] a)
		throws Throwable
	{
		String indexName = "localhost_index";
		String fn = "c:/Program Files/Apache Group/Apache/htdocs/manual/vhosts/index.html.en";
		URL url = null;
		for ( int i = 0; i < a.length; i++)
		{
			if ( a[ i].equals( "-i"))
				indexName = a[ ++i];
			else if ( a[ i].equals( "-f"))
				fn = a[ ++i];
			else if ( a[ i].equals( "-url"))
				url = new URL( a[ ++i]);
		}

		PrintStream o = System.out;
		IndexReader r = IndexReader.open( indexName);
		o.println( "Open index " +indexName + " which has " + r.numDocs() + " docs");
		
		MoreLikeThis mlt = new MoreLikeThis( r);

		o.println( "Query generation parameters:");
		o.println( mlt.describeParams());
		o.println(); 

		Query query = null;
		if ( url != null)
		{
			o.println( "Parsing URL: " +url); 
			query = mlt.like( url);
		}
		else if ( fn != null)
		{
			o.println( "Parsing file: " +fn);
			query = mlt.like( new File( fn));
		}

		o.println( "q: " + query);
		o.println();		
		IndexSearcher searcher = new IndexSearcher( indexName);

		Hits hits = searcher.search(query);
		int len = hits.length();
		o.println( "found: " + len + " documents matching");
		o.println();
		for (int i = 0; i < Math.min( 25, len); i++)
		{
			Document d = hits.doc( i);
			o.println( "score  : " + hits.score( i));
			o.println( "url    : " + d.get( "url"));
			o.println( "\ttitle  : " + d.get( "title"));
			o.println( "\tsummary: " + d.get( "summary"));
			o.println();
		}
	}

	/**
	 *
	 */
	private static class FreqQ
		extends PriorityQueue
	{
		FreqQ( int s)
		{
			initialize( s);
		}

		protected boolean lessThan(Object a, Object b)
		{
			Object[] aa =(Object[]) a;
			Object[] bb =(Object[]) b;
			Float fa = (Float) aa[ 1];
			Float fb = (Float) bb[ 1];
			return fa.floatValue() > fb.floatValue();
		}
	}

	/**
	 * Use for frequencies and to avoid renewing Integers.
	 */
	private static class Int
	{
		int x;
		Int()
		{
			x = 1;
		}
	}

	/**
	 * Default list of stopwords to ignore.
	 */
	public static Hashtable defStopTable = StopFilter.makeStopTable( StopAnalyzer.ENGLISH_STOP_WORDS);
	
	/**
	 * Default analyzer to parse source doc with.
	 */	
	public static Analyzer defAnalyzer = new StandardAnalyzer();

	/**
	 * Ignore terms with less than this frequency in the source doc.
	 */	
	public static int defMinTermFreq = 2;
	
	/**
	 *
	 * Ignore words which do not occur in at least this many docs.	 
	 */	
	public static int defMinDocFreq = 5;	

	/**
	 * Boost terms in query based on "score"?
	 */
	public static boolean defBoost = false;

	/**
	 * Default field name.
	 */
	public static String defFieldName = "contents";

	/**
	 * Ignore words less than this length or if 0 then this has no effect.
	 */
	public static int defMinWordLen = 0;
	/**
	 *
	 * Ignore words greater than this length or if 0 then this has no effect.	 
	 */	
	public static int defMaxWordLen = 0;
	
	/**
	 * Return a Query with no more than this many terms.
	 * @see BooleanQuery#getMaxClauseCount
	 * @see BooleanQuery#setMaxClauseCount	 
	 */	
	public static int defMaxQueryTerms = 25;	
	
	/**
	 *
	 */		
	

	/**
	 * List of stop words what will be ignored.
	 * Use StopFilter.makeStopTable( ...) to set this.
	 */
	public Hashtable stopTable = defStopTable;
	
	/**
	 * Analyzer that will be used to parse the doc.
	 */	
	public Analyzer an = defAnalyzer;
	
	/**
	 * Ignore words less freqent that this.
	 */	
	public int minTermFreq = defMinTermFreq;
	/**
	 * Ignore words which do not occur in at least this many docs.
	 */	
	public int minDocFreq = defMinDocFreq;	
	
	/**
	 * Should we apply a boost to the Query based on the scores?
	 */	
	public boolean boost = defBoost;

	/**
	 * Field name we'll analyze.
	 */
	public String fieldName = defFieldName;

	/**
	 * Ignore words if less than this len.
	 */
	public int minWordLen = defMinWordLen;
	/**
	 * Ignore words if greater than this len.	   
	 *
	 */	
	public int maxWordLen = defMaxWordLen;
	
	/**
	 * Don't return a query longer than this.
	 */	
	public int maxQueryTerms = defMaxQueryTerms;

	/**
	 * For idf() calculations.
	 */
	public Similarity sim = new DefaultSimilarity(); 

	private final IndexReader ir;
	/**
	 *
	 */	
}


--------------090304010203010203030509
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
--------------090304010203010203030509--

From MAILER-DAEMON Thu Feb 12 21:46:15 2004
Return-Path: 
 <lucene-user-return-7106-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 24337 invoked from network); 12 Feb 2004 21:46:15 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 12 Feb 2004 21:46:15 -0000
Received: (qmail 22450 invoked by uid 500); 12 Feb 2004 21:45:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 22427 invoked by uid 500); 12 Feb 2004 21:45:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 22405 invoked from network); 12 Feb 2004 21:45:55 -0000
Received: from unknown (HELO mta.micromuse.com) (194.131.185.92)
  by daedalus.apache.org with SMTP; 12 Feb 2004 21:45:55 -0000
Received: from tropo.com ([10.0.0.157])
	(authenticated (0 bits))
	by mta.micromuse.com (Switch-2.2.8/Switch-2.2.8) with ESMTP id i1CLjrH19025
	(using TLSv1/SSLv3 with cipher RC4-MD5 (128 bits) verified NO)
	for <lucene-user@jakarta.apache.org>; Thu, 12 Feb 2004 21:46:00 GMT
Message-ID: <402BF411.7030205@tropo.com>
Date: Thu, 12 Feb 2004 13:45:53 -0800
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;
 rv:1.6a) Gecko/20031030
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: SubstringQuery -- Re: Leading Wild Card Search
References: 
 <326BDC0F160B8647ACB8396A3C56838707B2A558@h-file05.180096hotel.com>
 <402A89F2.8070609@tropo.com> <opr28zc1jehawgj6@mail>
In-Reply-To: <opr28zc1jehawgj6@mail>
Content-Type: multipart/mixed;
 boundary="------------070505040303020504050902"
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------070505040303020504050902
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit

Kristian Hermsdorf wrote:

> Hi
>
>> I've written a PrefixQuery and it's not hard to do  -I can post it too.
>> Problem is that it is not integrated into the query parser (.jj) so odds
>> are noone will use it, and the general sentiment on this list (and 
>> lucene-dev)
>> is that prefix queries are evil because it's an expensive operation 
>> as the query
>> code has to traverse all terms to "expand" the query. I would prefer
>> a more user oriented view i.e. just allow it as sometimes it's what 
>> you need and
>> the only alternative I can think of, doing a fuzzy query, isn't quite 
>> right.
>
>
> wow - great!
> I'm looking for a sample code for quite a goode time. I'd like to test 
> the performance on our data to see if it's really that slow.

2 files attached, SubstringQuery (which you'll use) and 
SubstringTermEnum ( used by the former to be
consistent w/ other Query code).

I find this kind of query useful to have and think that the query parser 
should allow it in spite of the perception
of this being slow, however I think the debate is the "user centric 
view" (say mine, allow substring queries)
vs the "protect the engines performance" view which says not to allow 
expensive queries.

>
> It would be great if you could post a URL whrer to find your extension.
>
> thank you
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


--------------070505040303020504050902
Content-Type: text/plain;
 name="SubstringTermEnum.java"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="SubstringTermEnum.java"

package com.tropo.lucene;




/* ====================================================================
 * The Apache Software License, Version 1.1
 *
 * Copyright (c) 2001 The Apache Software Foundation.  All rights
 * reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in
 *    the documentation and/or other materials provided with the
 *    distribution.
 *
 * 3. The end-user documentation included with the redistribution,
 *    if any, must include the following acknowledgment:
 *       "This product includes software developed by the
 *        Apache Software Foundation (http://www.apache.org/)."
 *    Alternately, this acknowledgment may appear in the software itself,
 *    if and wherever such third-party acknowledgments normally appear.
 *
 * 4. The names "Apache" and "Apache Software Foundation" and
 *    "Apache Lucene" must not be used to endorse or promote products
 *    derived from this software without prior written permission. For
 *    written permission, please contact apache@apache.org.
 *
 * 5. Products derived from this software may not be called "Apache",
 *    "Apache Lucene", nor may "Apache" appear in their name, without
 *    prior written permission of the Apache Software Foundation.
 *
 * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
 * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
 * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
 * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
 * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
 * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
 * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 * ====================================================================
 *
 * This software consists of voluntary contributions made by many
 * individuals on behalf of the Apache Software Foundation.  For more
 * information on the Apache Software Foundation, please see
 * <http://www.apache.org/>.
 */
import org.apache.lucene.search.*;
import java.io.IOException;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.Term;

/** Subclass of FilteredTermEnum for enumerating all terms that are similiar to the specified filter term.

  <p>Term enumerations are always ordered by Term.compareTo().  Each term in
  the enumeration is greater than all that precede it.  */
public final class SubstringTermEnum extends FilteredTermEnum {
    int del_len;
    boolean endEnum = false;

    Term searchTerm = null;
    String field = "";
    String text = "";
    int textlen;
    
    public SubstringTermEnum(IndexReader reader, Term term) throws IOException {
        super(reader, term);
        searchTerm = term;
        field = searchTerm.field();
        text = searchTerm.text();
        textlen = text.length();
        setEnum(reader.terms(new Term(searchTerm.field(), "")));
    }
    
    /**
     The termCompare method in SubstringTermEnum uses the difference in lengths to
     calculate the distance between the given term and the comparing term assuming that
	 the term passed to the ctr is a substring of the current term.
     */
    protected final boolean termCompare(Term term) {
        if (field == term.field()) {
            String target = term.text();
			boolean res = target.indexOf( text) >= 0;
			del_len = Math.abs( text.length() - target.length());
			return res;
        }
        endEnum = true;
        return false;
    }
    
    protected final float difference() {
		// if lengths differ by more than 10 then clamp the difference at 0.05
		// if it's an exact match then we return 1.0 here
        return (float) Math.max( ((10 - del_len)/10.0f), 0.05);
    }
    
    public final boolean endEnum() {
        return endEnum;
    }
    
	public void close() throws IOException {
		super.close();
		searchTerm = null;
		field = null;
		text = null;
	}
}

--------------070505040303020504050902
Content-Type: text/plain;
 name="SubstringQuery.java"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="SubstringQuery.java"

package com.tropo.lucene;

/* ====================================================================
 * The Apache Software License, Version 1.1
 *
 * Copyright (c) 2001 The Apache Software Foundation.  All rights
 * reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in
 *    the documentation and/or other materials provided with the
 *    distribution.
 *
 * 3. The end-user documentation included with the redistribution,
 *    if any, must include the following acknowledgment:
 *       "This product includes software developed by the
 *        Apache Software Foundation (http://www.apache.org/)."
 *    Alternately, this acknowledgment may appear in the software itself,
 *    if and wherever such third-party acknowledgments normally appear.
 *
 * 4. The names "Apache" and "Apache Software Foundation" and
 *    "Apache Lucene" must not be used to endorse or promote products
 *    derived from this software without prior written permission. For
 *    written permission, please contact apache@apache.org.
 *
 * 5. Products derived from this software may not be called "Apache",
 *    "Apache Lucene", nor may "Apache" appear in their name, without
 *    prior written permission of the Apache Software Foundation.
 *
 * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
 * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
 * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
 * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
 * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
 * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
 * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 * ====================================================================
 *
 * This software consists of voluntary contributions made by many
 * individuals on behalf of the Apache Software Foundation.  For more
 * information on the Apache Software Foundation, please see
 * <http://www.apache.org/>.
 */

import java.io.IOException;
import org.apache.lucene.search.*;
import org.apache.lucene.index.*;
import org.apache.lucene.analysis.*;
import org.apache.lucene.document.*;


/** A Query that matches documents containing terms with a specified substring. */
public final class SubstringQuery extends MultiTermQuery {
  public SubstringQuery(Term term) {
    super(term);
  }
    
  protected FilteredTermEnum getEnum(IndexReader reader) throws IOException {
    return new SubstringTermEnum(reader, getTerm());
  }
    
  public String toString(String field) {
    return '*' + super.toString(field) + '*';
  }


	/**
	 *
	 */
	/*
	public static void main( String[] args)
		throws Throwable
	{
		String name = "index";
		String srch = "valid";
		
		for ( int i = 0; i< args.length; i++)
		{
			if ( args[i].equals( "-i"))
				name = args[ ++i];
			else if ( args[i].equals( "-w"))
				srch = args[ ++i]; 
		}
		java.io.PrintStream o = System.out;
		o.println( "Opening "+ name);
		if ( true )
		{
			final IndexReader r = IndexReader.open( Rammer.convertMaybe( name));
			//final TermEnum te = r.terms();
			FilteredTermEnum te = new SubstringTermEnum( r, new Term( "contents", srch));

			while ( te.next())
			{
				Term term = te.term();
				o.println( "" + term);
			}
			o.println( "te: " +te);

			Query q = new SubstringQuery( new Term( "contents", srch));
			o.println( "q=" + q.toString( "contents"));						
			o.println( "q=" + q);
			o.println( "q=" + q.rewrite( r)); 
		}
		else
		{
		
			final IndexSearcher searcher = new IndexSearcher( name);
			final Analyzer analyzer = IndexBase.getAnalyzer();
			final Query q = new SubstringQuery( new Term( DFields.CONTENTS, srch));
			o.println( "q=" +q);
			Hits hits = searcher.search( q);
			int len = hits.length();
			o.println( "len: " +len);
			for ( int i = 0; i < len; i++)
			{
				Document d = hits.doc( i);
			}
		}
	}
	*/
}


--------------070505040303020504050902
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
--------------070505040303020504050902--

From MAILER-DAEMON Thu Feb 12 22:36:26 2004
Return-Path: 
 <lucene-user-return-7107-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 47763 invoked from network); 12 Feb 2004 22:36:26 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 12 Feb 2004 22:36:26 -0000
Received: (qmail 30820 invoked by uid 500); 12 Feb 2004 22:36:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 30793 invoked by uid 500); 12 Feb 2004 22:36:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 30771 invoked from network); 12 Feb 2004 22:36:05 -0000
Received: from unknown (HELO spf13.us4.outblaze.com) (205.158.62.67)
  by daedalus.apache.org with SMTP; 12 Feb 2004 22:36:05 -0000
Received: from spf0.us4.outblaze.com (spf0.us4.outblaze.com [205.158.62.68])
	by spf13.us4.outblaze.com (Postfix) with QMQP id 76DD51802445
	for <lucene-user@jakarta.apache.org>; Thu, 12 Feb 2004 22:36:05 +0000 (GMT)
Received: (qmail 81569 invoked from network); 12 Feb 2004 22:21:55 -0000
Received: from unknown (HELO ws1-12.us4.outblaze.com) (205.158.62.81)
  by mailin.us4.outblaze.com with SMTP; 12 Feb 2004 22:21:55 -0000
Received: by ws1-12.us4.outblaze.com (Postfix, from userid 1001)
	id EC94E2E7CB0; Thu, 12 Feb 2004 22:21:54 +0000 (GMT)
Content-Type: text/plain; charset="iso-8859-1"
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
MIME-Version: 1.0
X-Mailer: MIME-tools 5.41 (Entity 5.404)
Received: from [81.103.186.241] by ws1-12.us4.outblaze.com with http for
    mrtom@dr.com; Thu, 12 Feb 2004 17:21:54 -0500
From: "tom wa" <mrtom@dr.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Date: Thu, 12 Feb 2004 17:21:54 -0500
Subject: Re: Date Range support
X-Originating-Ip: 81.103.186.241
X-Originating-Server: ws1-12.us4.outblaze.com
Message-Id: <20040212222154.EC94E2E7CB0@ws1-12.us4.outblaze.com>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

From: Erik Hatcher
> On Jan 29, 2004, at 5:08 AM, tom wa wrote:
> > I'm trying to create an index which can also be searched with date 
> > ranges. My first attempt using the Lucene date format ran in to 
> > trouble after my index grew and I couldn't search over more than a few 
> > days.
> >  the suggestion 
> > seemed to be to use strings of the format yyyyMMdd. Using that format 
> > worked great until I remembered that my search needs
> >  to be able to support different timezones. Adding the hour to my 
> > field causes the same problem above and my queries stop working when 
> > using a range of about 2 months.
> 
> When you say you couldn't search and that it stopped working, do you 
> mean it was just unacceptably slow?
>

(Sorry it's taken me a while to reply)

It wasn't slow, my timeout is far greater than the time it takes to come back with no hits.

A small example of a query would be (date: [200306081900 TO 200306201200]) AND (text: sometext) and this will return zero hits. The index contains about 1000 items for each 24hr period and the total number of documents was about 150k. I had the same results when using Lucene's built in date format too. If you think it should be able to cope with what I am trying to do then I'll take another look.

Thanks again.

Tom.


-- 
___________________________________________________________
Sign-up for Ads Free at Mail.com
http://promo.mail.com/adsfreejump.htm


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 13 00:02:37 2004
Return-Path: 
 <lucene-user-return-7109-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 92157 invoked from network); 13 Feb 2004 00:02:37 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 13 Feb 2004 00:02:37 -0000
Received: (qmail 33493 invoked by uid 500); 13 Feb 2004 00:02:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 33455 invoked by uid 500); 13 Feb 2004 00:02:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 33405 invoked from network); 13 Feb 2004 00:02:12 -0000
Received: from unknown (HELO mail.ntranz.com) (65.19.137.179)
  by daedalus.apache.org with SMTP; 13 Feb 2004 00:02:12 -0000
Received: from [65.19.137.179] by tunes0320w
  (ArGoSoft Mail Server Pro for WinNT/2000/XP, Version 1.8 (1.8.4.0));
 Thu, 12 Feb 2004 15:55:23 -0800
From: "hema@searchendjobs.com" <hema@searchendjobs.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
X-ArGoMail-Auto-Response: Yes
Subject: thanks for your mail
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Message-ID: <titkhozdabwdo76.120220041555@mail.ntranz.com>
Date: Thu, 12 Feb 2004 15:55:23 -0800
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Received your mail we will get back to you shortly


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 13 00:02:29 2004
Return-Path: 
 <lucene-user-return-7108-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 92065 invoked from network); 13 Feb 2004 00:02:29 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 13 Feb 2004 00:02:29 -0000
Received: (qmail 32874 invoked by uid 500); 13 Feb 2004 00:02:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 32851 invoked by uid 500); 13 Feb 2004 00:02:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 32835 invoked from network); 13 Feb 2004 00:02:07 -0000
Received: from unknown (HELO tmgate1.thomsonmedia.com) (12.111.30.74)
  by daedalus.apache.org with SMTP; 13 Feb 2004 00:02:07 -0000
Received: from tm1ssex02.tm.thomsonmedia.com (12-111-30-89.thomsonmedia.com
 [12.111.30.89])
	by tmgate1.thomsonmedia.com (Switch-3.1.4/Switch-3.1.0) with ESMTP id
 i1D02DQI016057
	for <lucene-user@jakarta.apache.org>; Thu, 12 Feb 2004 19:02:14 -0500 (EST)
Received: by tm1ssex02.tm.thomsonmedia.com with Internet Mail Service
 (5.5.2657.72)
	id <1KF4BK50>; Thu, 12 Feb 2004 19:02:13 -0500
Message-ID: 
 <606DAA4C8E184B46839705D0BEBCC853A206FE@tmpenex01.tm.thomsonmedia.com>
From: "Surowiec, William" <William.Surowiec@thomsonmedia.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Date Range support
Date: Thu, 12 Feb 2004 19:02:12 -0500
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C3F1C4.A1BDC708"
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C3F1C4.A1BDC708
Content-Type: text/plain;
	charset="iso-8859-1"

Tom

(sorry in advance for the long post)

I used to use date fields the way I believe you are. When we upgraded to a
newer version of Lucene (1.3rc2 I believe), code that used to work ran
slowly, ate memory, etc. We moved to using DateFilter and a boolean query
and things went back to running well. 

Try to print out the parsed query, that was most informative (each date, and
we had different times for a given date, was another expression - ouch.)

I tried to find a small extract of what we do - it does not exist, so here
is a chopped up version (hopefully the baby did not go out with the bath
water):

	public Hits getHits(StringBuffer qs, StringBuffer error) throws
Exception {
		org.apache.lucene.search.Query q = null;

		qs.delete(0, qs.length());
		qs.append(prepareQuery());

		if ("(*)".equals(qs.toString().trim())) {
			error.append("cannot search with just an *");
		} else
			try {

				DateFilter filter = null;

				if ((startDate.length() > 6) &&
(endDate.length() > 6)) {
					filter =
						new DateFilter(
							"issuedate",
	
parseAlternateDateFormats(startDate),
					parseAlternateDateFormats(endDate));
				} else if (startDate.length() > 6) {
					filter =
DateFilter.After("issuedate", 
 
parseAlternateDateFormats(startDate));
				} else if (endDate.length() > 6) {
					filter =
DateFilter.Before("issuedate", 
                                       parseAlternateDateFormats(endDate));
				}

				try {
					if
("xxxxx".equalsIgnoreCase(publication))
						q =
	
QueryFactory.makeQueryxxx(
								publication,
	
qs.toString(),
								deal,
								seller,
								manager,
								(String)
siteSpecific.get("country"),
								(String)
siteSpecific.get("collateraltype"),
								(String)
siteSpecific.get("assetclass"));
					else if
("yyy".equalsIgnoreCase(publication))
						q =
	
QueryFactory.makeQueryyyy(
								publication,
	
qs.toString(),
								section,
								category,
								magazine,
								pub);
					else
						q =
QueryFactory.makeQuery(publication, qs.toString());
				} catch (TmQueryQuote e1) {
					error.delete(0, error.length());
					error.append(e1.getMessage());
					return null;
				}

				if (q != null) {
					if (filter == null)
						hits =
SearcherTM.find(publication, q);
					else
						hits =
SearcherTM.find(publication, q, filter);

				} else
					error.append(" query is null ");
			} catch (Exception e) {
				ByteArrayOutputStream bos = new
ByteArrayOutputStream();
				e.printStackTrace(new PrintStream(bos));
				error.append(bos.toString());
				throw new RuntimeException(
					"exception handler " +
error.toString());
			} finally {
				q = null;
			}

		return hits;
	}

where the QueryFactory winds up calling a static method like:

	static public Query makeQueryzzz(String publication, String a,
String ct) {
		verifyQuoteCount(a);
		String defaultField =
AnalyzerFactory.getDefaultField(publication);
		Analyzer analyzer =
AnalyzerFactory.getAnalyzer(publication);
		BooleanQuery bq = new BooleanQuery();
		try {
			if (!"".equals(a)) {
				Query q1 = QueryParser.parse(a,
defaultField, analyzer);
				bq.add(q1, true, false);
			}
			if (ct.length() > 0)
				bq.add(
					QueryParser.parse(ct,
"level1section", analyzer),
					true,
					false);
			return bq;
		} catch (org.apache.lucene.queryParser.ParseException e) {
			ByteArrayOutputStream bos = new
ByteArrayOutputStream();
			e.printStackTrace(new PrintStream(bos));
			throw new RuntimeException(
				"QueryFactory.makeQuery (" + a + ") " +
bos.toString());
		} catch (IllegalArgumentException e) {
			ByteArrayOutputStream bos = new
ByteArrayOutputStream();
			e.printStackTrace(new PrintStream(bos));
			throw new RuntimeException(
				"QueryFactory.makeQuery (" + a + ") " +
bos.toString());
		}
	}

"This communication is intended solely for the addressee and is
confidential and not for third party unauthorized distribution."


------_=_NextPart_001_01C3F1C4.A1BDC708--

From MAILER-DAEMON Fri Feb 13 00:42:16 2004
Return-Path: 
 <lucene-user-return-7110-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 10323 invoked from network); 13 Feb 2004 00:42:16 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 13 Feb 2004 00:42:16 -0000
Received: (qmail 99654 invoked by uid 500); 13 Feb 2004 00:41:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 99497 invoked by uid 500); 13 Feb 2004 00:41:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 99480 invoked from network); 13 Feb 2004 00:41:55 -0000
Received: from unknown (HELO babyruth.hotpop.com) (38.113.3.61)
  by daedalus.apache.org with SMTP; 13 Feb 2004 00:41:55 -0000
Received: from hotpop.com (kubrick.hotpop.com [38.113.3.103])
	by babyruth.hotpop.com (Postfix) with SMTP id 53D3910893A
	for <lucene-user@jakarta.apache.org>; Fri, 13 Feb 2004 00:40:00 +0000 (UTC)
Received: from cocof07rbdxa0p (danton-1-81-57-18-97.fbx.proxad.net
 [81.57.18.97])
	by smtp-1.hotpop.com (Postfix) with SMTP id 5112C1A0158
	for <lucene-user@jakarta.apache.org>; Fri, 13 Feb 2004 00:18:55 +0000 (UTC)
Message-ID: <001501c3f1ca$2e361550$61123951@cocof07rbdxa0p>
From: "Nicolas Maisonneuve" <n.maisonneuve@hotpop.com>
To: <lucene-user@jakarta.apache.org>
Subject: a search  like Google
Date: Fri, 13 Feb 2004 01:41:47 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0012_01C3F1D2.8B60A9E0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-HotPOP: -----------------------------------------------
                   Sent By HotPOP.com FREE Email
             Get your FREE POP email at www.HotPOP.com
          -----------------------------------------------
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0012_01C3F1D2.8B60A9E0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

hy,=20
i have a index with the fields :
title=20
author
content=20

i would make the same search type than Google  ( a form with a =
textfiel). When the user search "i love lucene" (it's not a phrase query =
 but just the text in the textfield ), i would like search  in all the =
index fields but with a specific weight boost for each field. In this =
example title weight=3D2, author=3D1 content=3D1

the results would be (i suppose  the default operator is "and") :  =
(title:i^2 author:i content:i) +(title:love^2 author:love content:love) =
+(title:lucene^2 author:lucene content:lucene)

but must i modify the QueryParser  or is there a different way for do =
this ?
( because i modified the QueryParser and it's work but if there is a =
cleaner way to do this , i take it ! )

nicolas maisonneuve




------=_NextPart_000_0012_01C3F1D2.8B60A9E0--




From MAILER-DAEMON Fri Feb 13 01:30:47 2004
Return-Path: 
 <lucene-user-return-7111-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 34563 invoked from network); 13 Feb 2004 01:30:47 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 13 Feb 2004 01:30:47 -0000
Received: (qmail 72606 invoked by uid 500); 13 Feb 2004 01:30:25 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 72459 invoked by uid 500); 13 Feb 2004 01:30:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 72442 invoked from network); 13 Feb 2004 01:30:24 -0000
Received: from unknown (HELO server1.hostmon.com) (66.139.76.19)
  by daedalus.apache.org with SMTP; 13 Feb 2004 01:30:24 -0000
Received: (qmail 8772 invoked by uid 532); 13 Feb 2004 01:27:57 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with
 qmail-scanner-1.16
 (spamassassin: 2.61.  Clear:.
 Processed in 0.225484 secs); 13 Feb 2004 01:27:57 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 13 Feb 2004 01:27:57 -0000
Message-ID: <402C28B8.2090000@tropo.com>
Date: Thu, 12 Feb 2004 17:30:32 -0800
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;
 rv:1.5) Gecko/20031007
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: a search  like Google
References: <001501c3f1ca$2e361550$61123951@cocof07rbdxa0p>
In-Reply-To: <001501c3f1ca$2e361550$61123951@cocof07rbdxa0p>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I have code that does just this.
The calls to "DFields.*" should be replaced with the approp String e.g. 
"title", "url" etc.
A bit of boosting is done too under the heuristic that a title match is 
better
than a body match.

Only hassle is this is not integrated into the query parser but it's easy
enough to call this directly. Oh, the argument "srch" is the users search
query ("i love lucene" as you have below) and the Analyzer is the one
you used to index your docs.


 public static Query formGoogleQueryFast( String srch, Analyzer a)
    {
        BooleanQuery bq = new BooleanQuery();
   
        TokenStream ts = a.tokenStream( "foo", new StringReader( srch));
        org.apache.lucene.analysis.Token toke;
        try
        {
            while ( (toke = ts.next()) != null)
            {
                String word = toke.termText().toLowerCase();
           
                TermQuery title    = new TermQuery( new Term( 
DFields.TITLE,    word));
                TermQuery url      = new TermQuery( new Term( 
DFields.URL,      word));
                TermQuery contents = new TermQuery( new Term( 
DFields.CONTENTS, word));
           
                title.setBoost( TITLE_BOOST);
                url.setBoost(   URL_BOOST);

                BooleanQuery tmp = new BooleanQuery();
           
                tmp.add( title,    false, false);
                tmp.add( url,      false, false);
                tmp.add( contents, false, false);

                // bug: if a word like "by" is passed in, and it's on 
the stop list,
                // then it might expand to words (byzzzz) what are not 
in a doc that
                // seems to have "by" in it...
                bq.add( tmp,       true,  false); // must match one

            
            }
        }
        catch( IOException ioe)
        {
            // can't happen as we're using a string reader
        }
        return bq;
    }

public static final float TITLE_BOOST = 5.0f;
    public static final float URL_BOOST = 2.0f;   



Nicolas Maisonneuve wrote:

>hy, 
>i have a index with the fields :
>title 
>author
>content 
>
>i would make the same search type than Google  ( a form with a textfiel). When the user search "i love lucene" (it's not a phrase query  but just the text in the textfield ), i would like search  in all the index fields but with a specific weight boost for each field. In this example title weight=2, author=1 content=1
>
>the results would be (i suppose  the default operator is "and") :  (title:i^2 author:i content:i) +(title:love^2 author:love content:love) +(title:lucene^2 author:lucene content:lucene)
>
>but must i modify the QueryParser  or is there a different way for do this ?
>( because i modified the QueryParser and it's work but if there is a cleaner way to do this , i take it ! )
>
>nicolas maisonneuve
>
>
>
>
>  
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 13 06:43:25 2004
Return-Path: 
 <lucene-user-return-7112-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 89744 invoked from network); 13 Feb 2004 06:43:25 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 13 Feb 2004 06:43:25 -0000
Received: (qmail 83519 invoked by uid 500); 13 Feb 2004 06:42:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 83486 invoked by uid 500); 13 Feb 2004 06:42:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 83470 invoked from network); 13 Feb 2004 06:42:57 -0000
Received: from unknown (HELO mail.tanto-xipolis.de) (213.61.178.42)
  by daedalus.apache.org with SMTP; 13 Feb 2004 06:42:57 -0000
Received: from tucholsky.office.tanto.de (morus.xipolis.net [10.0.1.4])
	by mail.tanto-xipolis.de (Postfix on SuSE Linux 7.3 (i386)) with ESMTP id
 97A4819B75F
	for <lucene-user@jakarta.apache.org>; Fri, 13 Feb 2004 07:43:08 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id
 i1D6h8lT010314
	for <lucene-user@jakarta.apache.org>; Fri, 13 Feb 2004 07:43:08 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id i1D6h7nj010310;
	Fri, 13 Feb 2004 07:43:07 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16428.29179.799832.912969@tanto-xipolis.de>
Date: Fri, 13 Feb 2004 07:43:07 +0100
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: a search  like Google
In-Reply-To: <001501c3f1ca$2e361550$61123951@cocof07rbdxa0p>
References: <001501c3f1ca$2e361550$61123951@cocof07rbdxa0p>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Nicolas Maisonneuve writes:
> hy, 
> i have a index with the fields :
> title 
> author
> content 
> 
> i would make the same search type than Google  ( a form with a textfiel). When the user search "i love lucene" (it's not a phrase query  but just the text in the textfield ), i would like search  in all the index fields but with a specific weight boost for each field. In this example title weight=2, author=1 content=1
> 
> the results would be (i suppose  the default operator is "and") :  (title:i^2 author:i content:i) +(title:love^2 author:love content:love) +(title:lucene^2 author:lucene content:lucene)
> 
> but must i modify the QueryParser  or is there a different way for do this ?
> ( because i modified the QueryParser and it's work but if there is a cleaner way to do this , i take it ! )
> 
If you want to use query parser you can parse the query with different
default fields, set boost factors on the resulting queries and join them
with a boolean query.
This will give you
(+title:i +title:love +title:lucene)^2 (+author:i +author:love +author:lucene) (+content:i +content:love +content:lucene)

I don't if there are subtle differences between your query and this one, but
it should be basically the same.

Apart from the boost factors, that's AFAIK what multi field query parser
does. Maybe it would be usefull to extend multi field query parser to 
handle different boosts factors.

If you just want to allow search terms and none of the other constructs 
query parser handles, I would use David Spencer suggestion though.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 13 07:00:57 2004
Return-Path: 
 <lucene-user-return-7113-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 99373 invoked from network); 13 Feb 2004 07:00:57 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 13 Feb 2004 07:00:57 -0000
Received: (qmail 12130 invoked by uid 500); 13 Feb 2004 07:00:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12100 invoked by uid 500); 13 Feb 2004 07:00:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 12078 invoked from network); 13 Feb 2004 07:00:28 -0000
Received: from unknown (HELO mail.tanto-xipolis.de) (213.61.178.42)
  by daedalus.apache.org with SMTP; 13 Feb 2004 07:00:28 -0000
Received: from tucholsky.office.tanto.de (morus.xipolis.net [10.0.1.4])
	by mail.tanto-xipolis.de (Postfix on SuSE Linux 7.3 (i386)) with ESMTP id
 057BB19B75F
	for <lucene-user@jakarta.apache.org>; Fri, 13 Feb 2004 08:00:40 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id
 i1D70dlT010392
	for <lucene-user@jakarta.apache.org>; Fri, 13 Feb 2004 08:00:39 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id i1D70dgY010388;
	Fri, 13 Feb 2004 08:00:39 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16428.30231.822419.420627@tanto-xipolis.de>
Date: Fri, 13 Feb 2004 08:00:39 +0100
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Date Range support
In-Reply-To: <20040212222154.EC94E2E7CB0@ws1-12.us4.outblaze.com>
References: <20040212222154.EC94E2E7CB0@ws1-12.us4.outblaze.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

tom wa writes:
> From: Erik Hatcher
> > On Jan 29, 2004, at 5:08 AM, tom wa wrote:
> > > I'm trying to create an index which can also be searched with date 
> > > ranges. My first attempt using the Lucene date format ran in to 
> > > trouble after my index grew and I couldn't search over more than a few 
> > > days.
> > >  the suggestion 
> > > seemed to be to use strings of the format yyyyMMdd. Using that format 
> > > worked great until I remembered that my search needs
> > >  to be able to support different timezones. Adding the hour to my 
> > > field causes the same problem above and my queries stop working when 
> > > using a range of about 2 months.
> > 
> > When you say you couldn't search and that it stopped working, do you 
> > mean it was just unacceptably slow?
> >
> 
> (Sorry it's taken me a while to reply)
> 
> It wasn't slow, my timeout is far greater than the time it takes to come back with no hits.
> 
> A small example of a query would be (date: [200306081900 TO 200306201200]) AND (text: sometext) and this will return zero hits. The index contains about 1000 items for each 24hr period and the total number of documents was about 150k. I had the same results when using Lucene's built in date format too. If you think it should be able to cope with what I am trying to do then I'll take another look.
> 
An alternative to using date ranges or date filters is to use an aproach
similar to the recently introduced sort on a integer field (cvs only, so far).

That is, 
- create an array of the dates of all documents
- extend the low level search, in a way that it uses this array and a
  upper and lower limit to do an additional selection (that's similar 
  to what the filter does)

The advantage over a filter is, that you can use the same array for arbitrary
date ranges while a filter is specific to a date range.

OTOH the array needs to be newly created whenever the index changes. The 
cost depends on the number of different dates and the array size of course.
I did some tests and found, that it takes less than .1 seconds on a
P4 2400 Mhz to create such an array for ~ 100000 documents, ~ 10000 different
dates.
So it depends a bit on how often your index changes, if that's a good way.

Another disadvantage is, that you will have to dig a little bit deeper into 
lucenes search classes.
And memory usage might get a problem, once you exceed a few million documents.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 13 10:42:07 2004
Return-Path: 
 <lucene-user-return-7114-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 23101 invoked from network); 13 Feb 2004 10:42:07 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 13 Feb 2004 10:42:07 -0000
Received: (qmail 26429 invoked by uid 500); 13 Feb 2004 10:41:35 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26406 invoked by uid 500); 13 Feb 2004 10:41:34 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26374 invoked from network); 13 Feb 2004 10:41:34 -0000
Received: from unknown (HELO smtprelay01.ispgateway.de) (62.67.200.156)
  by daedalus.apache.org with SMTP; 13 Feb 2004 10:41:34 -0000
Received: (qmail 929 invoked from network); 13 Feb 2004 10:34:54 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.228.167])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 13 Feb 2004 10:34:54 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 1878623EB
	for <lucene-user@jakarta.apache.org>; Fri, 13 Feb 2004 11:34:55 +0100 (CET)
From: lucene@nitwit.de
To: lucene-user@jakarta.apache.org
Subject: Limiting hit count
Date: Fri, 13 Feb 2004 11:34:54 +0100
User-Agent: KMail/1.6
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Message-Id: <200402131134.54675.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi!

Can I limit the hits of a search (assuming that it is faster, of course :)?

Timo

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 13 10:42:17 2004
Return-Path: 
 <lucene-user-return-7115-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 23270 invoked from network); 13 Feb 2004 10:42:17 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 13 Feb 2004 10:42:17 -0000
Received: (qmail 27400 invoked by uid 500); 13 Feb 2004 10:41:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 27372 invoked by uid 500); 13 Feb 2004 10:41:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 27357 invoked from network); 13 Feb 2004 10:41:44 -0000
Received: from unknown (HELO mail.ntranz.com) (65.19.137.179)
  by daedalus.apache.org with SMTP; 13 Feb 2004 10:41:44 -0000
Received: from [65.19.137.179] by tunes0320w
  (ArGoSoft Mail Server Pro for WinNT/2000/XP, Version 1.8 (1.8.4.0));
 Fri, 13 Feb 2004 02:35:01 -0800
From: "hema@searchendjobs.com" <hema@searchendjobs.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
X-ArGoMail-Auto-Response: Yes
Subject: thanks for your mail
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Message-ID: <xfsbkgtanzvkcdu.130220040235@mail.ntranz.com>
Date: Fri, 13 Feb 2004 02:35:01 -0800
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Received your mail we will get back to you shortly


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 13 11:20:36 2004
Return-Path: 
 <lucene-user-return-7116-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 41895 invoked from network); 13 Feb 2004 11:20:36 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 13 Feb 2004 11:20:36 -0000
Received: (qmail 1430 invoked by uid 500); 13 Feb 2004 11:20:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 1394 invoked by uid 500); 13 Feb 2004 11:20:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 1373 invoked from network); 13 Feb 2004 11:20:02 -0000
Received: from unknown (HELO smtp2.clb.oleane.net) (213.56.31.18)
  by daedalus.apache.org with SMTP; 13 Feb 2004 11:20:02 -0000
Received: from teck ([217.167.130.37]) (authenticated)
	by smtp2.clb.oleane.net with ESMTP id i1DBKFZ6025517
	for <lucene-user@jakarta.apache.org>; Fri, 13 Feb 2004 12:20:16 +0100
Message-ID: <001c01c3f223$1db93500$690010ac@teck>
From: "Julien Nioche" <Julien.Nioche@lingway.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <200402131134.54675.lucene@nitwit.de>
Subject: Re: Limiting hit count
Date: Fri, 13 Feb 2004 12:18:32 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2720.3000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

If you mean limiting the number of documents retrieved, for instance you're
interested in the first 10 results, Lucene already does it for you. The Hit
object actually contains only the n best documents (don't remember the exact
value).
If you want to limit the set of Documents you're querying, you should
consider using Filter objects and send it to the searcher along with your
Query.


----- Original Message -----
From: <lucene@nitwit.de>
To: <lucene-user@jakarta.apache.org>
Sent: Friday, February 13, 2004 11:34 AM
Subject: Limiting hit count


> Hi!
>
> Can I limit the hits of a search (assuming that it is faster, of course
:)?
>
> Timo
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 13 12:05:11 2004
Return-Path: 
 <lucene-user-return-7117-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 66202 invoked from network); 13 Feb 2004 12:05:11 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 13 Feb 2004 12:05:11 -0000
Received: (qmail 121 invoked by uid 500); 13 Feb 2004 12:05:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 99804 invoked by uid 500); 13 Feb 2004 12:05:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 99775 invoked from network); 13 Feb 2004 12:05:03 -0000
Received: from unknown (HELO smtprelay02.ispgateway.de) (62.67.200.157)
  by daedalus.apache.org with SMTP; 13 Feb 2004 12:05:03 -0000
Received: (qmail 31188 invoked from network); 13 Feb 2004 12:02:13 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.228.167])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 13 Feb 2004 12:02:13 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 0B5A4207C
	for <lucene-user@jakarta.apache.org>; Fri, 13 Feb 2004 13:02:15 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Limiting hit count
Date: Fri, 13 Feb 2004 13:02:14 +0100
User-Agent: KMail/1.6
References: <200402131134.54675.lucene@nitwit.de>
 <001c01c3f223$1db93500$690010ac@teck>
In-Reply-To: <001c01c3f223$1db93500$690010ac@teck>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Message-Id: <200402131302.14480.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Friday 13 February 2004 12:18, Julien Nioche wrote:
> If you want to limit the set of Documents you're querying, you should
> consider using Filter objects and send it to the searcher along with your
> Query.

Hm, hard to find information about Filters...I actually only want the first 
hit:
			
public BitSet bits(IndexReader reader) throws IOException
{
	BitSet bs = new BitSet(1); 
	bs.set(1);
	return bs;
}

...doesn't work (i.e. returns nothing rather than all hits).

Timo

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 13 12:53:00 2004
Return-Path: 
 <lucene-user-return-7118-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 93569 invoked from network); 13 Feb 2004 12:53:00 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 13 Feb 2004 12:53:00 -0000
Received: (qmail 3633 invoked by uid 500); 13 Feb 2004 12:52:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 3580 invoked by uid 500); 13 Feb 2004 12:52:31 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 3523 invoked from network); 13 Feb 2004 12:52:31 -0000
Received: from unknown (HELO mail.tanto-xipolis.de) (213.61.178.42)
  by daedalus.apache.org with SMTP; 13 Feb 2004 12:52:31 -0000
Received: from tucholsky.office.tanto.de (morus.xipolis.net [10.0.1.4])
	by mail.tanto-xipolis.de (Postfix on SuSE Linux 7.3 (i386)) with ESMTP id
 8261619B722
	for <lucene-user@jakarta.apache.org>; Fri, 13 Feb 2004 13:52:31 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id
 i1DCqVlT013833
	for <lucene-user@jakarta.apache.org>; Fri, 13 Feb 2004 13:52:31 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id i1DCqV6H013829;
	Fri, 13 Feb 2004 13:52:31 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16428.51343.340649.771392@tanto-xipolis.de>
Date: Fri, 13 Feb 2004 13:52:31 +0100
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Limiting hit count
In-Reply-To: <200402131302.14480.lucene@nitwit.de>
References: <200402131134.54675.lucene@nitwit.de>
	<001c01c3f223$1db93500$690010ac@teck>
	<200402131302.14480.lucene@nitwit.de>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

lucene@nitwit.de writes:
> On Friday 13 February 2004 12:18, Julien Nioche wrote:
> > If you want to limit the set of Documents you're querying, you should
> > consider using Filter objects and send it to the searcher along with your
> > Query.
> 
> Hm, hard to find information about Filters...I actually only want the first 
> hit:
> 			
> public BitSet bits(IndexReader reader) throws IOException
> {
> 	BitSet bs = new BitSet(1); 
> 	bs.set(1);
> 	return bs;
> }
> 
> ...doesn't work (i.e. returns nothing rather than all hits).
> 
Well that means that you only want document with document id 1 given that
it matches the query.

A filter provides means to restrict *query* to certain documents, not
results. And it won't have influcene on the performance (except for the
time it takes to create the filter and that it slows down things a little 
bit).

As far as results are concerned Lucenes hits object will only hold a 
limited number of result (IIRC 200) and repeat the query if you
access more (look at the search implementation for details) as Julien
already stated.

What's the reason for your question?
Usually lucene executes queries very fast. I typically have a few ms.
So there's few reason to speed this up.
Accessing results is much slower, especially if there are a lot of results
and you access them all.
E.g. query: 1 ms, reading three fields for 50 results: 22 ms.
The index is smaller than the machines memory (~ 3/4 GB Index size, 1 GB RAM).

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 13 14:03:33 2004
Return-Path: 
 <lucene-user-return-7119-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58267 invoked from network); 13 Feb 2004 14:03:33 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 13 Feb 2004 14:03:33 -0000
Received: (qmail 90077 invoked by uid 500); 13 Feb 2004 14:02:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 90043 invoked by uid 500); 13 Feb 2004 14:02:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 90009 invoked from network); 13 Feb 2004 14:02:49 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.71)
  by daedalus.apache.org with SMTP; 13 Feb 2004 14:02:49 -0000
Received: (cpmta 12324 invoked from network); 13 Feb 2004 06:02:49 -0800
Received: from 128.143.26.2 (HELO ?128.143.26.2?)
  by smtp.hatcher.net (209.228.32.71) with SMTP; 13 Feb 2004 06:02:49 -0800
X-Sent: 13 Feb 2004 14:02:49 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <200402131302.14480.lucene@nitwit.de>
References: <200402131134.54675.lucene@nitwit.de>
 <001c01c3f223$1db93500$690010ac@teck> <200402131302.14480.lucene@nitwit.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <4D8D1092-5E2D-11D8-978C-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Limiting hit count
Date: Fri, 13 Feb 2004 09:02:47 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Feb 13, 2004, at 7:02 AM, lucene@nitwit.de wrote:
> On Friday 13 February 2004 12:18, Julien Nioche wrote:
>> If you want to limit the set of Documents you're querying, you should
>> consider using Filter objects and send it to the searcher along with 
>> your
>> Query.
>
> Hm, hard to find information about Filters...I actually only want the 
> first
> hit:

Use a HitCollector and grab the first one that comes in, then bail out. 
  That should do the trick for getting the first hit only.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 13 14:12:23 2004
Return-Path: 
 <lucene-user-return-7120-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 65048 invoked from network); 13 Feb 2004 14:12:23 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 13 Feb 2004 14:12:23 -0000
Received: (qmail 22429 invoked by uid 500); 13 Feb 2004 14:12:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 22409 invoked by uid 500); 13 Feb 2004 14:12:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 22392 invoked from network); 13 Feb 2004 14:12:10 -0000
Received: from unknown (HELO smtprelay02.ispgateway.de) (62.67.200.157)
  by daedalus.apache.org with SMTP; 13 Feb 2004 14:12:10 -0000
Received: (qmail 7166 invoked from network); 13 Feb 2004 14:12:09 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.228.167])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 13 Feb 2004 14:12:09 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 01EC4207C
	for <lucene-user@jakarta.apache.org>; Fri, 13 Feb 2004 15:12:11 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Limiting hit count
Date: Fri, 13 Feb 2004 15:12:11 +0100
User-Agent: KMail/1.6
References: <200402131134.54675.lucene@nitwit.de>
 <200402131302.14480.lucene@nitwit.de>
 <4D8D1092-5E2D-11D8-978C-000393A564E6@ehatchersolutions.com>
In-Reply-To: <4D8D1092-5E2D-11D8-978C-000393A564E6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200402131512.11272.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Friday 13 February 2004 15:02, Erik Hatcher wrote:
> Use a HitCollector and grab the first one that comes in, then bail out.
>   That should do the trick for getting the first hit only.

According to the API docs I ought to use HitCollector only if I need all 
hits :-) And there's certainly a reason for it - I don't think that this will 
speed up the search ;)

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 13 15:10:29 2004
Return-Path: 
 <lucene-user-return-7121-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 19774 invoked from network); 13 Feb 2004 15:10:29 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 13 Feb 2004 15:10:29 -0000
Received: (qmail 63405 invoked by uid 500); 13 Feb 2004 15:10:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 63370 invoked by uid 500); 13 Feb 2004 15:10:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 63356 invoked from network); 13 Feb 2004 15:10:18 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.71)
  by daedalus.apache.org with SMTP; 13 Feb 2004 15:10:18 -0000
Received: (cpmta 4294 invoked from network); 13 Feb 2004 07:10:19 -0800
Received: from 128.143.26.2 (HELO ?128.143.26.2?)
  by smtp.hatcher.net (209.228.32.71) with SMTP; 13 Feb 2004 07:10:19 -0800
X-Sent: 13 Feb 2004 15:10:19 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <200402131512.11272.lucene@nitwit.de>
References: <200402131134.54675.lucene@nitwit.de>
 <200402131302.14480.lucene@nitwit.de>
 <4D8D1092-5E2D-11D8-978C-000393A564E6@ehatchersolutions.com>
 <200402131512.11272.lucene@nitwit.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <BB460AD4-5E36-11D8-BD97-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Limiting hit count
Date: Fri, 13 Feb 2004 10:10:17 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 13, 2004, at 9:12 AM, lucene@nitwit.de wrote:
> On Friday 13 February 2004 15:02, Erik Hatcher wrote:
>> Use a HitCollector and grab the first one that comes in, then bail 
>> out.
>>   That should do the trick for getting the first hit only.
>
> According to the API docs I ought to use HitCollector only if I need 
> all
> hits :-) And there's certainly a reason for it - I don't think that 
> this will
> speed up the search ;)

Did you measure it?

Are your searches slow?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 13 16:10:52 2004
Return-Path: 
 <lucene-user-return-7122-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 66134 invoked from network); 13 Feb 2004 16:10:52 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 13 Feb 2004 16:10:52 -0000
Received: (qmail 97733 invoked by uid 500); 13 Feb 2004 16:10:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 97707 invoked by uid 500); 13 Feb 2004 16:10:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 97688 invoked from network); 13 Feb 2004 16:10:40 -0000
Received: from unknown (HELO smtprelay02.ispgateway.de) (62.67.200.157)
  by daedalus.apache.org with SMTP; 13 Feb 2004 16:10:40 -0000
Received: (qmail 7322 invoked from network); 13 Feb 2004 16:10:41 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.247.228])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 13 Feb 2004 16:10:41 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 3C6ED2406
	for <lucene-user@jakarta.apache.org>; Fri, 13 Feb 2004 17:10:40 +0100 (CET)
From: lucene@nitwit.de
To: lucene-user@jakarta.apache.org
Subject: Incrementally updating and monitoring the index
Date: Fri, 13 Feb 2004 17:10:39 +0100
User-Agent: KMail/1.6
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Message-Id: <200402131710.39861.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi!

Can Lucene incrementally update its index (i.e. balancing will a list of docs 
and removing those that are no more found)?

I'd like to monitor the index for certain queries/terms, i.e. I want to be 
notified if there are (new) hits for a list of terms each time after I add a 
document to the index - continously. 

Is this possibe? The index will contain several hundrets of thousands of 
documents and will be frequently accessed concurrently.

TIA
Timo

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 13 17:42:10 2004
Return-Path: 
 <lucene-user-return-7123-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 15114 invoked from network); 13 Feb 2004 17:42:10 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 13 Feb 2004 17:42:10 -0000
Received: (qmail 71744 invoked by uid 500); 13 Feb 2004 17:41:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 71709 invoked by uid 500); 13 Feb 2004 17:41:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 71694 invoked from network); 13 Feb 2004 17:41:56 -0000
Received: from unknown (HELO h-file05.180096hotel.com) (12.14.172.51)
  by daedalus.apache.org with SMTP; 13 Feb 2004 17:41:56 -0000
X-MimeOLE: Produced By Microsoft Exchange V6.0.6375.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C3F258.AE5ED373"
Subject: DBDirectory/SQLDirectory
Date: Fri, 13 Feb 2004 11:41:59 -0600
Message-ID: 
 <326BDC0F160B8647ACB8396A3C56838707D5259E@h-file05.180096hotel.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: DBDirectory/SQLDirectory
Thread-Index: AcPyWK4z+cLccZc/SSOw9qo+E/600w==
From: "Vipul Sagare" <vsagare@hotels.com>
To: <lucene-user@jakarta.apache.org>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C3F258.AE5ED373
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

I am looking into storing indices into DB.  I saw some discussion with
DBDirectory and SQLDirectory on the mailing list.  I also came across
somebody having a code in a thread titled DBDirectory.

Any pointers on this one would be great.   There were some remarks about
performance as well.  Any data on those will be helpful.   We are using
SQLServer.

=20

Thank you and thanks for your earlier help on wild card search.

=20

Vipul


------_=_NextPart_001_01C3F258.AE5ED373--

From MAILER-DAEMON Fri Feb 13 18:10:12 2004
Return-Path: 
 <lucene-user-return-7124-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25655 invoked from network); 13 Feb 2004 18:10:12 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 13 Feb 2004 18:10:12 -0000
Received: (qmail 32033 invoked by uid 500); 13 Feb 2004 18:09:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 31921 invoked by uid 500); 13 Feb 2004 18:09:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 31906 invoked from network); 13 Feb 2004 18:09:58 -0000
Received: from unknown (HELO savinien.cirano.qc.ca) (207.162.57.133)
  by daedalus.apache.org with SMTP; 13 Feb 2004 18:09:58 -0000
Received: from savinien.cirano.qc.ca (localhost.localdomain [127.0.0.1])
	by savinien.cirano.qc.ca (8.12.8/8.12.8) with ESMTP id i1DIA1sn005808
	for <lucene-user@jakarta.apache.org>; Fri, 13 Feb 2004 13:10:01 -0500
Received: from localhost (vauchers@localhost)
	by savinien.cirano.qc.ca (8.12.8/8.12.8/Submit) with ESMTP id i1DIA1qQ005804
	for <lucene-user@jakarta.apache.org>; Fri, 13 Feb 2004 13:10:01 -0500
X-Authentication-Warning: savinien.cirano.qc.ca: vauchers owned process doing
 -bs
Date: Fri, 13 Feb 2004 13:10:01 -0500 (EST)
From: Stephane James Vaucher <vauchers@cirano.qc.ca>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Incrementally updating and monitoring the index
In-Reply-To: <200402131710.39861.lucene@nitwit.de>
Message-ID: <Pine.LNX.4.44.0402131258560.5764-100000@savinien.cirano.qc.ca>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Fri, 13 Feb 2004 lucene@nitwit.de wrote:

> Hi!
> 
> Can Lucene incrementally update its index (i.e. balancing will a list of docs 
> and removing those that are no more found)?

Incremental updates (additions and deletions) are possible, but I'm not 
sure if I understand your question. Lucene holds its own instances of 
documents structured in text fields (not going into details here). There 
lucene documents are created and updated programatically, not 
automatically because lucene does not keep tabs on external documents.

> I'd like to monitor the index for certain queries/terms, i.e. I want to be 
> notified if there are (new) hits for a list of terms each time after I add a 
> document to the index - continously.
> 
> Is this possibe? The index will contain several hundrets of thousands of 
> documents and will be frequently accessed concurrently.

Very possible, before adding a document, you can check (with the judicious 
use of an id) if it has already been added. If it hasn't, do your 
notification, but this requires programming.

For concurrent write access, there is a lock, do you might want to use a 
singleton responsible for adding documents.

> 
> TIA
> Timo
> 

HTH,
sv


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 13 18:32:20 2004
Return-Path: 
 <lucene-user-return-7125-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 33795 invoked from network); 13 Feb 2004 18:32:20 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 13 Feb 2004 18:32:20 -0000
Received: (qmail 80355 invoked by uid 500); 13 Feb 2004 18:32:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 80265 invoked by uid 500); 13 Feb 2004 18:32:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 80252 invoked from network); 13 Feb 2004 18:32:06 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.65)
  by daedalus.apache.org with SMTP; 13 Feb 2004 18:32:06 -0000
Received: (cpmta 1379 invoked from network); 13 Feb 2004 10:32:09 -0800
Received: from 128.143.26.2 (HELO ?128.143.26.2?)
  by smtp.hatcher.net (209.228.32.65) with SMTP; 13 Feb 2004 10:32:09 -0800
X-Sent: 13 Feb 2004 18:32:09 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: 
 <326BDC0F160B8647ACB8396A3C56838707D5259E@h-file05.180096hotel.com>
References: 
 <326BDC0F160B8647ACB8396A3C56838707D5259E@h-file05.180096hotel.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <EE21E85E-5E52-11D8-8815-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: DBDirectory/SQLDirectory
Date: Fri, 13 Feb 2004 13:32:08 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

DBDirectory is in the sandbox - it is for Berkeley DB.

	Erik


On Feb 13, 2004, at 12:41 PM, Vipul Sagare wrote:

> I am looking into storing indices into DB.  I saw some discussion with
> DBDirectory and SQLDirectory on the mailing list.  I also came across
> somebody having a code in a thread titled DBDirectory.
>
> Any pointers on this one would be great.   There were some remarks 
> about
> performance as well.  Any data on those will be helpful.   We are using
> SQLServer.
>
>
>
> Thank you and thanks for your earlier help on wild card search.
>
>
>
> Vipul
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 13 18:33:21 2004
Return-Path: 
 <lucene-user-return-7126-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 34372 invoked from network); 13 Feb 2004 18:33:21 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 13 Feb 2004 18:33:21 -0000
Received: (qmail 84066 invoked by uid 500); 13 Feb 2004 18:32:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 83989 invoked by uid 500); 13 Feb 2004 18:32:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 83905 invoked from network); 13 Feb 2004 18:32:42 -0000
Received: from unknown (HELO server007.webpack.hosteurope.de) (80.237.130.15)
  by daedalus.apache.org with SMTP; 13 Feb 2004 18:32:42 -0000
Received: from 80.129.82.222 (p508152DE.dip0.t-ipconnect.de [80.129.82.222])
	(authenticated bits=0)
	by server007.webpack.hosteurope.de (8.12.8/8.12.8) with ESMTP id
 i1DIWiqI013169
	for <lucene-user@jakarta.apache.org>; Fri, 13 Feb 2004 19:32:44 +0100
Date: Fri, 13 Feb 2004 19:34:43 +0100
From: Ramy Hardan <java@hardan.de>
X-Mailer: The Bat! (v2.00.6)
Reply-To: Ramy Hardan <java@hardan.de>
X-Priority: 3 (Normal)
Message-ID: <12728216593.20040213193443@hardan.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Limiting hit count
In-Reply-To: <200402131512.11272.lucene@nitwit.de>
References: <200402131134.54675.lucene@nitwit.de>
 <200402131302.14480.lucene@nitwit.de>
 <4D8D1092-5E2D-11D8-978C-000393A564E6@ehatchersolutions.com>
 <200402131512.11272.lucene@nitwit.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

> ...I actually only want the first hit
If you say you want the first hit, do you mean any hit or the one
that's usually first in Hits? The latter is the one with the highest
score, so interrupting the search won't help you, since you don't know
when the highest score is reached before examining all documents.

> On Friday 13 February 2004 15:02, Erik Hatcher wrote:
>> Use a HitCollector and grab the first one that comes in, then bail out.
>>   That should do the trick for getting the first hit only.

> According to the API docs I ought to use HitCollector only if I need all
> hits :-) And there's certainly a reason for it - I don't think that this will
> speed up the search ;)
I agree that bailing out of the HitCollector is a bad idea, because
the only way to achieve this is to throw an exception. Probably Lucene
finishes searching, creates the Hits object and cooks a meal long
before the VM is able to build the stack trace and execute your catch
clause ;)

Ramy



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 13 19:23:42 2004
Return-Path: 
 <lucene-user-return-7128-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 57869 invoked from network); 13 Feb 2004 19:23:42 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 13 Feb 2004 19:23:42 -0000
Received: (qmail 7113 invoked by uid 500); 13 Feb 2004 19:23:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 7070 invoked by uid 500); 13 Feb 2004 19:23:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 7026 invoked from network); 13 Feb 2004 19:23:25 -0000
Received: from unknown (HELO mail.ntranz.com) (65.19.137.179)
  by daedalus.apache.org with SMTP; 13 Feb 2004 19:23:25 -0000
Received: from [65.19.137.179] by tunes0320w
  (ArGoSoft Mail Server Pro for WinNT/2000/XP, Version 1.8 (1.8.4.0));
 Fri, 13 Feb 2004 11:16:32 -0800
From: "hema@searchendjobs.com" <hema@searchendjobs.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
X-ArGoMail-Auto-Response: Yes
Subject: thanks for your mail
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Message-ID: <wcv25hski6usxcy.130220041116@mail.ntranz.com>
Date: Fri, 13 Feb 2004 11:16:32 -0800
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Received your mail we will get back to you shortly


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 13 19:23:36 2004
Return-Path: 
 <lucene-user-return-7127-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 57816 invoked from network); 13 Feb 2004 19:23:36 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 13 Feb 2004 19:23:36 -0000
Received: (qmail 6611 invoked by uid 500); 13 Feb 2004 19:23:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 6492 invoked by uid 500); 13 Feb 2004 19:23:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 6474 invoked from network); 13 Feb 2004 19:23:21 -0000
Received: from unknown (HELO mailout10.sul.t-online.com) (194.25.134.21)
  by daedalus.apache.org with SMTP; 13 Feb 2004 19:23:21 -0000
Received: from fwd04.aul.t-online.de
	by mailout10.sul.t-online.com with smtp
	id 1AriuK-00025w-01; Fri, 13 Feb 2004 20:23:24 +0100
Received: from pd9ebecf5.dip.t-dialin.net
 (XHqdwZZCgeqhXpZ0rcDlISuJoNnY13y6KI7+0NjIU-Spa5vYxxz3Z3@[217.235.236.245]) by
 fmrl04.sul.t-online.com
	with esmtp id 1Aritl-0OongW0; Fri, 13 Feb 2004 20:22:49 +0100
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: a search  like Google
Date: Fri, 13 Feb 2004 20:22:38 +0100
User-Agent: KMail/1.5.94
References: <001501c3f1ca$2e361550$61123951@cocof07rbdxa0p>
 <16428.29179.799832.912969@tanto-xipolis.de>
In-Reply-To: <16428.29179.799832.912969@tanto-xipolis.de>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Message-Id: <200402132022.38688@danielnaber.de>
X-Seen: false
X-ID: XHqdwZZCgeqhXpZ0rcDlISuJoNnY13y6KI7+0NjIU-Spa5vYxxz3Z3@t-dialin.net
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Friday 13 February 2004 07:43, Morus Walter wrote:

> If you want to use query parser you can parse the query with different
> default fields, set boost factors on the resulting queries and join them
> with a boolean query.
> This will give you
> (+title:i +title:love +title:lucene)^2 (+author:i +author:love
> +author:lucene) (+content:i +content:love +content:lucene)

This will not match documents that contain only "I love" in the title and 
"lucene" in the body. Doesn't seem like a problem for this example, as it 
looks like a phrase query, but I don't think that this is Google's 
behavior. I worked around that by prepending the title to the body field. 
Let me know if someone has a better solution.

The "correct" query would have to look something like this (leavon out the 
boosting):

+(title:i body:i) +(title:love body:love) +(title:lucene body:lucene)

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 13 20:14:43 2004
Return-Path: 
 <lucene-user-return-7129-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 84573 invoked from network); 13 Feb 2004 20:14:43 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 13 Feb 2004 20:14:43 -0000
Received: (qmail 22194 invoked by uid 500); 13 Feb 2004 20:14:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 22166 invoked by uid 500); 13 Feb 2004 20:14:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 22153 invoked from network); 13 Feb 2004 20:14:26 -0000
Received: from unknown (HELO quimbly.gallery) (216.242.178.112)
  by daedalus.apache.org with SMTP; 13 Feb 2004 20:14:26 -0000
Received: from anthonyeden.com (unknown [10.1.192.34])
	by quimbly.gallery (Postfix) with ESMTP id 350E417C8F
	for <lucene-user@jakarta.apache.org>; Fri, 13 Feb 2004 15:52:37 -0500 (EST)
Message-ID: <402D30A0.8050508@anthonyeden.com>
Date: Fri, 13 Feb 2004 15:16:32 -0500
From: Anthony Eden <me@anthonyeden.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;
 rv:1.5) Gecko/20031007
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: DBDirectory/SQLDirectory
References: 
 <326BDC0F160B8647ACB8396A3C56838707D5259E@h-file05.180096hotel.com>
 <EE21E85E-5E52-11D8-8815-000393A564E6@ehatchersolutions.com>
In-Reply-To: <EE21E85E-5E52-11D8-8815-000393A564E6@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I've written one which is available at 
http://www.anthonyeden.com/download/ in case you want to put them 
side-by-side.  I have done no major performance testing on it though so 
I have no idea how it will perform with large amounts of data.

Sincerely,
Anthony Eden

Erik Hatcher wrote:

> DBDirectory is in the sandbox - it is for Berkeley DB.
>
>     Erik
>
>
> On Feb 13, 2004, at 12:41 PM, Vipul Sagare wrote:
>
>> I am looking into storing indices into DB.  I saw some discussion with
>> DBDirectory and SQLDirectory on the mailing list.  I also came across
>> somebody having a code in a thread titled DBDirectory.
>>
>> Any pointers on this one would be great.   There were some remarks about
>> performance as well.  Any data on those will be helpful.   We are using
>> SQLServer.
>>
>>
>>
>> Thank you and thanks for your earlier help on wild card search.
>>
>>
>>
>> Vipul
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb 15 14:22:17 2004
Return-Path: 
 <lucene-user-return-7131-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21282 invoked from network); 15 Feb 2004 14:22:17 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 15 Feb 2004 14:22:17 -0000
Received: (qmail 58580 invoked by uid 500); 15 Feb 2004 14:22:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58554 invoked by uid 500); 15 Feb 2004 14:22:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58541 invoked from network); 15 Feb 2004 14:22:08 -0000
Received: from unknown (HELO mail.ntranz.com) (65.19.137.179)
  by daedalus.apache.org with SMTP; 15 Feb 2004 14:22:08 -0000
Received: from [65.19.137.179] by tunes0320w
  (ArGoSoft Mail Server Pro for WinNT/2000/XP, Version 1.8 (1.8.4.0));
 Sun, 15 Feb 2004 06:15:09 -0800
From: "hema@searchendjobs.com" <hema@searchendjobs.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
X-ArGoMail-Auto-Response: Yes
Subject: thanks for your mail
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Message-ID: <n0xztorpggg5na6.150220040615@mail.ntranz.com>
Date: Sun, 15 Feb 2004 06:15:09 -0800
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Received your mail we will get back to you shortly


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb 15 14:22:12 2004
Return-Path: 
 <lucene-user-return-7130-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21201 invoked from network); 15 Feb 2004 14:22:12 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 15 Feb 2004 14:22:12 -0000
Received: (qmail 57819 invoked by uid 500); 15 Feb 2004 14:21:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 57742 invoked by uid 500); 15 Feb 2004 14:21:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 57719 invoked from network); 15 Feb 2004 14:21:57 -0000
Received: from unknown (HELO snickers.hotpop.com) (38.113.3.51)
  by daedalus.apache.org with SMTP; 15 Feb 2004 14:21:57 -0000
Received: from hotpop.com (kubrick.hotpop.com [38.113.3.103])
	by snickers.hotpop.com (Postfix) with SMTP id 0D64571362
	for <lucene-user@jakarta.apache.org>; Sun, 15 Feb 2004 13:58:07 +0000 (UTC)
Received: from cocof07rbdxa0p (danton-1-81-57-18-97.fbx.proxad.net
 [81.57.18.97])
	by smtp-2.hotpop.com (Postfix) with SMTP id 858E110E4B0
	for <lucene-user@jakarta.apache.org>; Sun, 15 Feb 2004 14:19:09 +0000 (UTC)
Message-ID: <008301c3f3cf$118c19c0$61123951@cocof07rbdxa0p>
From: "Nicolas Maisonneuve" <n.maisonneuve@hotpop.com>
To: <lucene-user@jakarta.apache.org>
Subject: Re: a search  like Google
Date: Sun, 15 Feb 2004 15:21:35 +0100
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_0075_01C3F3D7.6646A590"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-HotPOP: -----------------------------------------------
                   Sent By HotPOP.com FREE Email
             Get your FREE POP email at www.HotPOP.com
          -----------------------------------------------
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0075_01C3F3D7.6646A590
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_0076_01C3F3D7.6646A590"


------=_NextPart_001_0076_01C3F3D7.6646A590
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

hy,=20

>This will give you (+title:i +title:love +title:lucene)^2 (+author:i =
+author:love +author:lucene) \
>(+content:i +content:love +content:lucene)
this is not the same thing than=20
(title:i^2 author:i content:i) +(title:love^2 author:love content:love) =
+(title:lucene^2 author:lucene content:lucene)
because in the first we must have all the terms in a field  and in the =
second just one term is necessary

the david Spencer is good but we can use the lucene syntax query  like =
phrase query, prefix, boolean, etc..
so to use all the lucene syntax , we have to hack the parser=20

see my fulltextparser code ..




i made a parser
------=_NextPart_001_0076_01C3F3D7.6646A590
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Diso-8859-1">
<META content=3D"MSHTML 6.00.2800.1400" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV><FONT face=3DArial size=3D2>hy, </FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV>&gt;This will give you (+title:i +title:love +title:lucene)^2 =
(+author:i=20
+author:love +author:lucene) \<BR>&gt;(+content:i +content:love=20
+content:lucene)</DIV>
<DIV>this is not the same thing than </DIV>
<DIV>(title:i^2 author:i content:i) +(title:love^2 author:love =
content:love)=20
+(title:lucene^2 author:lucene content:lucene)</DIV>
<DIV>because in the first we must have all the terms in a field&nbsp; =
and in the=20
second just one term is necessary</DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>the david Spencer is good but we can =
use the lucene=20
syntax query&nbsp; like phrase query, prefix, boolean, =
etc..</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>so to use all the lucene syntax , we =
have to hack=20
the parser </FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>see my fulltextparser code=20
..</FONT><BR><BR><BR></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>i made a =
parser</FONT></DIV></BODY></HTML>

------=_NextPart_001_0076_01C3F3D7.6646A590--

------=_NextPart_000_0075_01C3F3D7.6646A590
Content-Type: text/x-java;
	name="fulltextParser.java"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="fulltextParser.java"

package org.apache.lucene.queryParser;



/**
 * <p>Title: </p>
 * <p>Description: </p>
 * <p>Copyright: Copyright (c) 2003</p>
 * <p>Company: </p>
 * @author Maisonneuve Nicolas
 * @version 1.0
 */
import java.io.IOException;
import java.io.StringReader;
import java.util.Vector;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.index.Term;
import org.apache.lucene.queryParser.CharStream;
import org.apache.lucene.queryParser.FastCharStream;
import org.apache.lucene.queryParser.ParseException;
import org.apache.lucene.queryParser.QueryParserConstants;
import org.apache.lucene.queryParser.QueryParserTokenManager;
import org.apache.lucene.queryParser.Token;
import org.apache.lucene.queryParser.TokenMgrError;
import org.apache.lucene.search.BooleanClause;
import org.apache.lucene.search.BooleanQuery;
import org.apache.lucene.search.FuzzyQuery;
import org.apache.lucene.search.PhraseQuery;
import org.apache.lucene.search.PrefixQuery;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.TermQuery;
import org.apache.lucene.search.WildcardQuery;


public class fulltextParser
implements QueryParserConstants {

    private static final int CONJ_NONE=3D0;

    private static final int CONJ_AND=3D1;

    private static final int CONJ_OR=3D2;

    private static final int MOD_NONE=3D0;

    private static final int MOD_NOT=3D10;

    private static final int MOD_REQ=3D11;

    public static final int DEFAULT_OPERATOR_OR=3D0;

    public static final int DEFAULT_OPERATOR_AND=3D1;



    /** The actual operator that parser uses to combine query terms */
    private int operator=3DDEFAULT_OPERATOR_AND;



    /**
     * Whether terms of wildcard and prefix queries are to be =
automatically
     * lower-cased or not.  Default is <code>true</code>.
     */
    boolean lowercaseWildcardTerms=3Dtrue;

    Analyzer analyzer;

    String field;

    String[] fields;

    Float[] boosts;

    int phraseSlop=3D0;



    /** Parses a query string, returning a {@link =
org.apache.lucene.search.Query}.
     *  @param query	the query string to be parsed.
     *  @param fields	the default field for query terms.
     *  @param analyzer   used to find terms in the query text.
     *  @throws ParseException if the parsing fails
     */
    static public Query parse (String query, String fields[], Analyzer =
analyzer) throws ParseException {
        try {
            fulltextParser parser=3Dnew fulltextParser(fields, =
analyzer);
            return parser.parse(query);
        }
        catch(TokenMgrError tme) {
            throw new ParseException(tme.getMessage());
        }
    }

   /** Parses a query string, returning a {@link =
org.apache.lucene.search.Query}.
     *  @param query	the query string to be parsed.
     *  @param fields	the default field for query terms.
	 *  @param boost	the boost of each field in the fields parameter
     *  @param analyzer   used to find terms in the query text.
     *  @throws ParseException if the parsing fails
     */
    static public Query parse (String query, String fields[], Float =
boost[], Analyzer analyzer) throws ParseException {
        try {
            fulltextParser parser=3Dnew fulltextParser(fields, boost, =
analyzer);
            return parser.parse(query);
        }
        catch(TokenMgrError tme) {
            throw new ParseException(tme.getMessage());
        }
    }



    /** Constructs a query parser.
     *  @param field	the default field for query terms.
     *  @param analyzer   used to find terms in the query text.
     */
    public fulltextParser (String[] fields, Analyzer a) {
        this(fields, null, a);
    }


    public fulltextParser (String[] fields, Float boosts[], Analyzer a) =
{
        this(new FastCharStream(new StringReader("")));
        analyzer=3Da;
        this.fields=3Dfields;
        this.boosts=3Dboosts;
        field=3Dfields[0];
    }



    /** Parses a query string, returning a
     * <a href=3D"lucene.search.Query.html">Query</a>.
     *  @param query	the query string to be parsed.
     *  @throws ParseException if the parsing fails
     *  @throws TokenMgrError if ther parsing fails
     */
    public Query parse (String query) throws ParseException, =
TokenMgrError {
        ReInit(new FastCharStream(new StringReader(query)));
        return Query(field);
    }



    /**
     * Sets the default slop for phrases.  If zero, then exact phrase =
matches
     * are required.  Default value is zero.
     */
    public void setPhraseSlop (int phraseSlop) {
        this.phraseSlop=3DphraseSlop;
    }



    /**
     * Gets the default slop for phrases.
     */
    public int getPhraseSlop () {
        return phraseSlop;
    }



    /**
     * Sets the boolean operator of the QueryParser.
     * In classic mode (<code>DEFAULT_OPERATOR_OR</mode>) terms without =
any modifiers
     * are considered optional: for example <code>capital of =
Hungary</code> is equal to
     * <code>capital OR of OR Hungary</code>.<br/>
     * In <code>DEFAULT_OPERATOR_AND</code> terms are considered to be =
in conjuction: the
     * above mentioned query is parsed as <code>capital AND of AND =
Hungary</code>
     */
    public void setOperator (int operator) {
        this.operator=3Doperator;
    }


    public int getOperator () {
        return operator;
    }


    public void setLowercaseWildcardTerms (boolean =
lowercaseWildcardTerms) {
        this.lowercaseWildcardTerms=3DlowercaseWildcardTerms;
    }


    public boolean getLowercaseWildcardTerms () {
        return lowercaseWildcardTerms;
    }


    protected void addClause (Vector clauses, int conj, int mods, Query =
q) {
        boolean required, prohibited;
        // If this term is introduced by AND, make the preceding term =
required,
        // unless it's already prohibited
        if(conj=3D=3DCONJ_AND) {
            BooleanClause c=3D(BooleanClause) =
clauses.elementAt(clauses.size()-1);
            if(!c.prohibited) {
                c.required=3Dtrue;
            }
        }
        if(operator=3D=3DDEFAULT_OPERATOR_AND&&conj=3D=3DCONJ_OR) {
            // If this term is introduced by OR, make the preceding term =
optional,
            // unless it's prohibited (that means we leave -a OR b but =
+a OR b-->a OR b)
            // notice if the input is a OR b, first term is parsed as =
required; without
            // this modification a OR b would parsed as +a OR b
            BooleanClause c=3D(BooleanClause) =
clauses.elementAt(clauses.size()-1);
            if(!c.prohibited) {
                c.required=3Dfalse;
            }
        }
        // We might have been passed a null query; the term might have =
been
        // filtered away by the analyzer.
        if(q=3D=3Dnull) {
            return;
        }
        if(operator=3D=3DDEFAULT_OPERATOR_OR) {
            // We set REQUIRED if we're introduced by AND or +; =
PROHIBITED if
            // introduced by NOT or -; make sure not to set both.
            prohibited=3D(mods=3D=3DMOD_NOT);
            required=3D(mods=3D=3DMOD_REQ);
            if(conj=3D=3DCONJ_AND&&!prohibited) {
                required=3Dtrue;
            }
        }
        else {
            // We set PROHIBITED if we're introduced by NOT or -; We set =
REQUIRED
            // if not PROHIBITED and not introduced by OR
            prohibited=3D(mods=3D=3DMOD_NOT);
            required=3D(!prohibited&&conj!=3DCONJ_OR);
        }
        clauses.addElement(new BooleanClause(q, required, prohibited));
    }


    protected Query getFieldQuery (String[] fields, Analyzer analyzer, =
String queryText) {
        // Use the analyzer to get all the tokens, and then build a =
TermQuery,
        // PhraseQuery, or nothing based on the term count
        BooleanQuery bQuery=3Dnew BooleanQuery();
        TokenStream source=3Danalyzer.tokenStream("", new =
StringReader(queryText));
        Vector v=3Dnew Vector();
        org.apache.lucene.analysis.Token t;
        while(true) {
            try {
                t=3Dsource.next();
            }
            catch(IOException e) {
                t=3Dnull;
            }
            if(t=3D=3Dnull) {
                break;
            }
            v.addElement(t.termText());
        }
        if(v.size()=3D=3D0) {
            ;
        }
        else if(v.size()=3D=3D1) {
            for(int i=3D0; i<fields.length; i++) {
                Term term=3Dnew Term(fields[i], (String) =
v.elementAt(0));
                Query q=3Dnew TermQuery(term);
                if(boosts!=3Dnull) {
                    q.setBoost(boosts[i].floatValue());
                }
                bQuery.add(q, false, false);
            }
        }
        else {
            for(int i=3D0; i<fields.length; i++) {
                PhraseQuery q=3Dnew PhraseQuery();
                q.setSlop(phraseSlop);
                for(int j=3D0; j<v.size(); j++) {
                    q.add(new Term(fields[i], (String) v.elementAt(j)));
                }
                if(boosts!=3Dnull) {
                    q.setBoost(boosts[i].floatValue());
                }
                bQuery.add(q, false, false);
            }
        }
        return bQuery;
    }



    /**
     * Factory method for generating query, given a set of clauses.
     * By default creates a boolean query composed of clauses passed in.
     *
     * Can be overridden by extending classes, to modify query being
     * returned.
     *
     * @param clauses Vector that contains {@link BooleanClause} =
instances
     *    to join.
     *
     * @return Resulting {@link Query} object.
     */
    protected Query getBooleanQuery (Vector clauses) {
        BooleanQuery query=3Dnew BooleanQuery();
        for(int i=3D0; i<clauses.size(); i++) {
            query.add((BooleanClause) clauses.elementAt(i));
        }
        return query;
    }



    /**
     * Factory method for generating a query. Called when parser
     * parses an input term token that contains one or more wildcard
     * characters (? and *), but is not a prefix term token (one
     * that has just a single * character at the end)
     *<p>
     * Depending on settings, prefix term may be lower-cased
     * automatically. It will not go through the default Analyzer,
     * however, since normal Analyzers are unlikely to work properly
     * with wildcard templates.
     *<p>
     * Can be overridden by extending classes, to provide custom =
handling for
     * wildcard queries, which may be necessary due to missing analyzer =
calls.
     *
     * @param field Name of the field query will use.
     * @param termStr Term token that contains one or more wild card
     *   characters (? or *), but is not simple prefix term
     *
     * @return Resulting {@link Query} built for the term
     */

    protected Query getWildcardQuery (String fields[], String termStr) {
        if(lowercaseWildcardTerms) {
            termStr=3DtermStr.toLowerCase();
        }
        BooleanQuery bQuery=3Dnew BooleanQuery();
        for(int i=3D0; i<fields.length; i++) {
            Term t=3Dnew Term(fields[i], termStr);
            Query q=3Dnew WildcardQuery(t);
            if(boosts!=3Dnull) {
                q.setBoost(boosts[i].floatValue());
            }
            bQuery.add(q, false, false);
        }
        return bQuery;
    }



    /**
     * Factory method for generating a query (similar to
     * ({@link #getWildcardQuery}). Called when parser parses an input =
term
     * token that uses prefix notation; that is, contains a single '*' =
wildcard
     * character as its last character. Since this is a special case
     * of generic wildcard term, and such a query can be optimized =
easily,
     * this usually results in a different query object.
     *<p>
     * Depending on settings, a prefix term may be lower-cased
     * automatically. It will not go through the default Analyzer,
     * however, since normal Analyzers are unlikely to work properly
     * with wildcard templates.
     *<p>
     * Can be overridden by extending classes, to provide custom =
handling for
     * wild card queries, which may be necessary due to missing analyzer =
calls.
     *
     * @param field Name of the field query will use.
     * @param termStr Term token to use for building term for the query
     *    (<b>without</b> trailing '*' character!)
     *
     * @return Resulting {@link Query} built for the term
     */

    protected Query getPrefixQuery (String fields[], String termStr) {
        if(lowercaseWildcardTerms) {
            termStr=3DtermStr.toLowerCase();
        }
        BooleanQuery bQuery=3Dnew BooleanQuery();
        for(int i=3D0; i<fields.length; i++) {
            Term t=3Dnew Term(field, termStr);
            Query q=3Dnew PrefixQuery(t);
            if(boosts!=3Dnull) {
                q.setBoost(boosts[i].floatValue());
            }
            bQuery.add(q, false, false);
        }
        return bQuery;
    }



    /**
     * Factory method for generating a query (similar to
     * ({@link #getWildcardQuery}). Called when parser parses
     * an input term token that has the fuzzy suffix (~) appended.
     *
     * @param field Name of the field query will use.
     * @param termStr Term token to use for building term for the query
     *
     * @return Resulting {@link Query} built for the term
     */

    protected Query getFuzzyQuery (String fields[], String termStr) {
        BooleanQuery bQuery=3Dnew BooleanQuery();
        for(int i=3D0; i<fields.length; i++) {
            Term t=3Dnew Term(fields[i], termStr);
            Query q=3Dnew FuzzyQuery(t);
            if(boosts!=3Dnull) {
                q.setBoost(boosts[i].floatValue());
            }
            bQuery.add(q, false, false);
        }
        return bQuery;
    }


    public static void main (String[] args) throws Exception {
        fulltextParser qp=3Dnew fulltextParser(new String[] {
        "field1", "field2"}
        , new Float[] {
        new Float(1f), new Float(2f)}
        , new org.apache.lucene.analysis.SimpleAnalyzer());
        Query q=3Dqp.parse("\"why under\"");
        System.out.println(q.toString());
        /*    qp.ReInit(new FastCharStream(new StringReader("coucou nico =
+salut")));
            System.out.println(qp.Clause("field").toString());
            System.out.println(qp.Clause("field2").toString());
         */
    }



// *   Query  ::=3D ( Clause )*
// *   Clause ::=3D ["+", "-"] [<TERM> ":"] ( <TERM> | "(" Query ")" )
    final public int Conjunction () throws ParseException {
        int ret=3DCONJ_NONE;
        switch((jj_ntk=3D=3D-1)?jj_ntk():jj_ntk) {
            case AND:
            case OR:
                switch((jj_ntk=3D=3D-1)?jj_ntk():jj_ntk) {
                    case AND:
                        jj_consume_token(AND);
                        ret=3DCONJ_AND;
                        break;
                    case OR:
                        jj_consume_token(OR);
                        ret=3DCONJ_OR;
                        break;
                    default:
                        jj_la1[0]=3Djj_gen;
                        jj_consume_token(-1);
                        throw new ParseException();
                }
                break;
            default:
                jj_la1[1]=3Djj_gen; ;
        }
        {
            if(true) {
                return ret;
            }
        }
        throw new Error("Missing return statement in function");
    }


    final public int Modifiers () throws ParseException {
        int ret=3DMOD_NONE;
        switch((jj_ntk=3D=3D-1)?jj_ntk():jj_ntk) {
            case NOT:
            case PLUS:
            case MINUS:
                switch((jj_ntk=3D=3D-1)?jj_ntk():jj_ntk) {
                    case PLUS:
                        jj_consume_token(PLUS);
                        ret=3DMOD_REQ;
                        break;
                    case MINUS:
                        jj_consume_token(MINUS);
                        ret=3DMOD_NOT;
                        break;
                    case NOT:
                        jj_consume_token(NOT);
                        ret=3DMOD_NOT;
                        break;
                    default:
                        jj_la1[2]=3Djj_gen;
                        jj_consume_token(-1);
                        throw new ParseException();
                }
                break;
            default:
                jj_la1[3]=3Djj_gen; ;
        }
        {
            if(true) {
                return ret;
            }
        }
        throw new Error("Missing return statement in function");
    }


    final public Query Query (String field) throws ParseException {
        Vector clauses=3Dnew Vector();
        Query q, firstQuery=3Dnull;
        int conj, mods;
        mods=3DModifiers();
        q=3DClause(field);
        addClause(clauses, CONJ_NONE, mods, q);
        if(mods=3D=3DMOD_NONE) {
            firstQuery=3Dq;
        }
        label_1:while(true) {
            switch((jj_ntk=3D=3D-1)?jj_ntk():jj_ntk) {
                case AND:
                case OR:
                case NOT:
                case PLUS:
                case MINUS:
                case LPAREN:
                case QUOTED:
                case TERM:
                case PREFIXTERM:
                case WILDTERM:
                case RANGEIN_START:
                case RANGEEX_START:
                case NUMBER:
                    ;
                    break;
                default:
                    jj_la1[4]=3Djj_gen;
                    break label_1;
            }
            conj=3DConjunction();
            mods=3DModifiers();
            q=3DClause(field);
            addClause(clauses, conj, mods, q);
        }
        if(clauses.size()=3D=3D1&&firstQuery!=3Dnull) {
            if(true) {
                return firstQuery;
            }
        }
        else {
            {
                if(true) {
                    return getBooleanQuery(clauses);
                }
            }
        }
        throw new Error("Missing return statement in function");
    }


    final public Query Clause (String field) throws ParseException {
        Query q;
        Token fieldToken=3Dnull, boost=3Dnull;
        if(jj_2_1(2)) {
            fieldToken=3Djj_consume_token(TERM);
            jj_consume_token(COLON);
            field=3DfieldToken.image;
        }
        else {
            ;
        }
        switch((jj_ntk=3D=3D-1)?jj_ntk():jj_ntk) {
            case QUOTED:
            case TERM:
            case PREFIXTERM:
            case WILDTERM:
            case RANGEIN_START:
            case RANGEEX_START:
            case NUMBER:
                q=3DTerm(field);
                break;
            case LPAREN:
                jj_consume_token(LPAREN);
                q=3DQuery(field);
                jj_consume_token(RPAREN);
                switch((jj_ntk=3D=3D-1)?jj_ntk():jj_ntk) {
                    case CARAT:
                        jj_consume_token(CARAT);
                        boost=3Djj_consume_token(NUMBER);
                        break;
                    default:
                        jj_la1[5]=3Djj_gen; ;
                }
                break;
            default:
                jj_la1[6]=3Djj_gen;
                jj_consume_token(-1);
                throw new ParseException();
        }
        if(boost!=3Dnull) {
            float f=3D(float) 1.0;
            try {
                f=3DFloat.valueOf(boost.image).floatValue();
                q.setBoost(f);
            }
            catch(Exception ignored) {}
        }
        {
            if(true) {
                return q;
            }
        }
        throw new Error("Missing return statement in function");
    }


    final public Query Term (String field) throws ParseException {
        Token term, boost=3Dnull, slop=3Dnull, goop1, goop2;
        boolean prefix=3Dfalse;
        boolean wildcard=3Dfalse;
        boolean fuzzy=3Dfalse;
        boolean rangein=3Dfalse;
        Query q;
        switch((jj_ntk=3D=3D-1)?jj_ntk():jj_ntk) {
            case TERM:
            case PREFIXTERM:
            case WILDTERM:
            case NUMBER:
                switch((jj_ntk=3D=3D-1)?jj_ntk():jj_ntk) {
                    case TERM:
                        term=3Djj_consume_token(TERM);
                        break;
                    case PREFIXTERM:
                        term=3Djj_consume_token(PREFIXTERM);
                        prefix=3Dtrue;
                        break;
                    case WILDTERM:
                        term=3Djj_consume_token(WILDTERM);
                        wildcard=3Dtrue;
                        break;
                    case NUMBER:
                        term=3Djj_consume_token(NUMBER);
                        break;
                    default:
                        jj_la1[7]=3Djj_gen;
                        jj_consume_token(-1);
                        throw new ParseException();
                }
                switch((jj_ntk=3D=3D-1)?jj_ntk():jj_ntk) {
                    case FUZZY:
                        jj_consume_token(FUZZY);
                        fuzzy=3Dtrue;
                        break;
                    default:
                        jj_la1[8]=3Djj_gen; ;
                }
                switch((jj_ntk=3D=3D-1)?jj_ntk():jj_ntk) {
                    case CARAT:
                        jj_consume_token(CARAT);
                        boost=3Djj_consume_token(NUMBER);
                        switch((jj_ntk=3D=3D-1)?jj_ntk():jj_ntk) {
                            case FUZZY:
                                jj_consume_token(FUZZY);
                                fuzzy=3Dtrue;
                                break;
                            default:
                                jj_la1[9]=3Djj_gen; ;
                        }
                        break;
                    default:
                        jj_la1[10]=3Djj_gen; ;
                }
                if(wildcard) {
                    q=3DgetWildcardQuery(fields, term.image);
                }
                else if(prefix) {
                    q=3DgetPrefixQuery(fields, term.image.substring(0, =
term.image.length()-1));
                }
                else if(fuzzy) {
                    q=3DgetFuzzyQuery(fields, term.image);
                }
                else {
                    q=3DgetFieldQuery(fields, analyzer, term.image);
                }
                break;
            case QUOTED:
                term=3Djj_consume_token(QUOTED);
                switch((jj_ntk=3D=3D-1)?jj_ntk():jj_ntk) {
                    case SLOP:
                        slop=3Djj_consume_token(SLOP);
                        break;
                    default:
                        jj_la1[19]=3Djj_gen; ;
                }
                switch((jj_ntk=3D=3D-1)?jj_ntk():jj_ntk) {
                    case CARAT:
                        jj_consume_token(CARAT);
                        boost=3Djj_consume_token(NUMBER);
                        break;
                    default:
                        jj_la1[20]=3Djj_gen; ;
                }
                q=3DgetFieldQuery(fields, analyzer, =
term.image.substring(1, term.image.length()-1));
                if(slop!=3Dnull&&q instanceof PhraseQuery) {
                    try {
                        int =
s=3DFloat.valueOf(slop.image.substring(1)).intValue();
                        ((PhraseQuery) q).setSlop(s);
                    }
                    catch(Exception ignored) {}
                }
                break;
            default:
                jj_la1[21]=3Djj_gen;
                jj_consume_token(-1);
                throw new ParseException();
        }
        if(boost!=3Dnull) {
            float f=3D(float) 1.0;
            try {
                f=3DFloat.valueOf(boost.image).floatValue();
            }
            catch(Exception ignored) {
                /* Should this be handled somehow? (defaults to "no =
boost", if
                 * boost number is invalid)
                 */
            }
            // avoid boosting null queries, such as those caused by stop =
words
            if(q!=3Dnull) {
                q.setBoost(f);
            }
        }
        {
            if(true) {
                return q;
            }
        }
        throw new Error("Missing return statement in function");
    }


    final private boolean jj_2_1 (int xla) {
        jj_la=3Dxla;
        jj_lastpos=3Djj_scanpos=3Dtoken;
        try {
            return!jj_3_1();
        }
        catch(LookaheadSuccess ls) {
            return true;
        }
        finally {
            jj_save(0, xla);
        }
    }


    final private boolean jj_3_1 () {
        if(jj_scan_token(TERM)) {
            return true;
        }
        if(jj_scan_token(COLON)) {
            return true;
        }
        return false;
    }


    public QueryParserTokenManager token_source;

    public Token token, jj_nt;

    private int jj_ntk;

    private Token jj_scanpos, jj_lastpos;

    private int jj_la;

    public boolean lookingAhead=3Dfalse;

    private boolean jj_semLA;

    private int jj_gen;

    final private int[] jj_la1=3Dnew int[22];

    static private int[] jj_la1_0;

    static private int[] jj_la1_1;

    static {
        jj_la1_0();
        jj_la1_1();
    }


    private static void jj_la1_0 () {
        jj_la1_0=3Dnew int[] {
        0x180, 0x180, 0xe00, 0xe00, 0x1f31f80, 0x8000, 0x1f31000, =
0x1320000, 0x40000, 0x40000, 0x8000, 0x18000000
        , 0x2000000, 0x18000000, 0x8000, 0x80000000, 0x20000000, =
0x80000000, 0x8000, 0x80000, 0x8000, 0x1f30000, };
    }


    private static void jj_la1_1 () {
        jj_la1_1=3Dnew int[] {
        0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, =
0x0, 0x0, 0x1, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, };
    }


    final private JJCalls[] jj_2_rtns=3Dnew JJCalls[1];

    private boolean jj_rescan=3Dfalse;

    private int jj_gc=3D0;

    public fulltextParser (CharStream stream) {
        token_source=3Dnew QueryParserTokenManager(stream);
        token=3Dnew Token();
        jj_ntk=3D-1;
        jj_gen=3D0;
        for(int i=3D0; i<22; i++) {
            jj_la1[i]=3D-1;
        }
        for(int i=3D0; i<jj_2_rtns.length; i++) {
            jj_2_rtns[i]=3Dnew JJCalls();
        }
    }


    public void ReInit (CharStream stream) {
        token_source.ReInit(stream);
        token=3Dnew Token();
        jj_ntk=3D-1;
        jj_gen=3D0;
        for(int i=3D0; i<22; i++) {
            jj_la1[i]=3D-1;
        }
        for(int i=3D0; i<jj_2_rtns.length; i++) {
            jj_2_rtns[i]=3Dnew JJCalls();
        }
    }


    public fulltextParser (QueryParserTokenManager tm) {
        token_source=3Dtm;
        token=3Dnew Token();
        jj_ntk=3D-1;
        jj_gen=3D0;
        for(int i=3D0; i<22; i++) {
            jj_la1[i]=3D-1;
        }
        for(int i=3D0; i<jj_2_rtns.length; i++) {
            jj_2_rtns[i]=3Dnew JJCalls();
        }
    }


    public void ReInit (QueryParserTokenManager tm) {
        token_source=3Dtm;
        token=3Dnew Token();
        jj_ntk=3D-1;
        jj_gen=3D0;
        for(int i=3D0; i<22; i++) {
            jj_la1[i]=3D-1;
        }
        for(int i=3D0; i<jj_2_rtns.length; i++) {
            jj_2_rtns[i]=3Dnew JJCalls();
        }
    }


    final private Token jj_consume_token (int kind) throws =
ParseException {
        Token oldToken;
        if((oldToken=3Dtoken).next!=3Dnull) {
            token=3Dtoken.next;
        }
        else {
            token=3Dtoken.next=3Dtoken_source.getNextToken();
        }
        jj_ntk=3D-1;
        if(token.kind=3D=3Dkind) {
            jj_gen++;
            if(++jj_gc>100) {
                jj_gc=3D0;
                for(int i=3D0; i<jj_2_rtns.length; i++) {
                    JJCalls c=3Djj_2_rtns[i];
                    while(c!=3Dnull) {
                        if(c.gen<jj_gen) {
                            c.first=3Dnull;
                        }
                        c=3Dc.next;
                    }
                }
            }
            return token;
        }
        token=3DoldToken;
        jj_kind=3Dkind;
        throw generateParseException();
    }


    static private final class LookaheadSuccess
    extends java.lang.Error {}


    final private LookaheadSuccess jj_ls=3Dnew LookaheadSuccess();

    final private boolean jj_scan_token (int kind) {
        if(jj_scanpos=3D=3Djj_lastpos) {
            jj_la--;
            if(jj_scanpos.next=3D=3Dnull) {
                =
jj_lastpos=3Djj_scanpos=3Djj_scanpos.next=3Dtoken_source.getNextToken();
            }
            else {
                jj_lastpos=3Djj_scanpos=3Djj_scanpos.next;
            }
        }
        else {
            jj_scanpos=3Djj_scanpos.next;
        }
        if(jj_rescan) {
            int i=3D0;
            Token tok=3Dtoken;
            while(tok!=3Dnull&&tok!=3Djj_scanpos) {
                i++;
                tok=3Dtok.next;
            }
            if(tok!=3Dnull) {
                jj_add_error_token(kind, i);
            }
        }
        if(jj_scanpos.kind!=3Dkind) {
            return true;
        }
        if(jj_la=3D=3D0&&jj_scanpos=3D=3Djj_lastpos) {
            throw jj_ls;
        }
        return false;
    }


    final public Token getNextToken () {
        if(token.next!=3Dnull) {
            token=3Dtoken.next;
        }
        else {
            token=3Dtoken.next=3Dtoken_source.getNextToken();
        }
        jj_ntk=3D-1;
        jj_gen++;
        return token;
    }


    final public Token getToken (int index) {
        Token t=3DlookingAhead?jj_scanpos:token;
        for(int i=3D0; i<index; i++) {
            if(t.next!=3Dnull) {
                t=3Dt.next;
            }
            else {
                t=3Dt.next=3Dtoken_source.getNextToken();
            }
        }
        return t;
    }


    final private int jj_ntk () {
        if((jj_nt=3Dtoken.next)=3D=3Dnull) {
            =
return(jj_ntk=3D(token.next=3Dtoken_source.getNextToken()).kind);
        }
        else {
            return(jj_ntk=3Djj_nt.kind);
        }
    }


    private java.util.Vector jj_expentries=3Dnew java.util.Vector();

    private int[] jj_expentry;

    private int jj_kind=3D-1;

    private int[] jj_lasttokens=3Dnew int[100];

    private int jj_endpos;

    private void jj_add_error_token (int kind, int pos) {
        if(pos>=3D100) {
            return;
        }
        if(pos=3D=3Djj_endpos+1) {
            jj_lasttokens[jj_endpos++]=3Dkind;
        }
        else if(jj_endpos!=3D0) {
            jj_expentry=3Dnew int[jj_endpos];
            for(int i=3D0; i<jj_endpos; i++) {
                jj_expentry[i]=3Djj_lasttokens[i];
            }
            boolean exists=3Dfalse;
            for(java.util.Enumeration e=3Djj_expentries.elements(); =
e.hasMoreElements(); ) {
                int[] oldentry=3D(int[]) (e.nextElement());
                if(oldentry.length=3D=3Djj_expentry.length) {
                    exists=3Dtrue;
                    for(int i=3D0; i<jj_expentry.length; i++) {
                        if(oldentry[i]!=3Djj_expentry[i]) {
                            exists=3Dfalse;
                            break;
                        }
                    }
                    if(exists) {
                        break;
                    }
                }
            }
            if(!exists) {
                jj_expentries.addElement(jj_expentry);
            }
            if(pos!=3D0) {
                jj_lasttokens[(jj_endpos=3Dpos)-1]=3Dkind;
            }
        }
    }


    public ParseException generateParseException () {
        jj_expentries.removeAllElements();
        boolean[] la1tokens=3Dnew boolean[33];
        for(int i=3D0; i<33; i++) {
            la1tokens[i]=3Dfalse;
        }
        if(jj_kind>=3D0) {
            la1tokens[jj_kind]=3Dtrue;
            jj_kind=3D-1;
        }
        for(int i=3D0; i<22; i++) {
            if(jj_la1[i]=3D=3Djj_gen) {
                for(int j=3D0; j<32; j++) {
                    if((jj_la1_0[i]&(1<<j))!=3D0) {
                        la1tokens[j]=3Dtrue;
                    }
                    if((jj_la1_1[i]&(1<<j))!=3D0) {
                        la1tokens[32+j]=3Dtrue;
                    }
                }
            }
        }
        for(int i=3D0; i<33; i++) {
            if(la1tokens[i]) {
                jj_expentry=3Dnew int[1];
                jj_expentry[0]=3Di;
                jj_expentries.addElement(jj_expentry);
            }
        }
        jj_endpos=3D0;
        jj_rescan_token();
        jj_add_error_token(0, 0);
        int[][] exptokseq=3Dnew int[jj_expentries.size()][];
        for(int i=3D0; i<jj_expentries.size(); i++) {
            exptokseq[i]=3D(int[]) jj_expentries.elementAt(i);
        }
        return new ParseException(token, exptokseq, tokenImage);
    }


    final public void enable_tracing () {
    }


    final public void disable_tracing () {
    }


    final private void jj_rescan_token () {
        jj_rescan=3Dtrue;
        for(int i=3D0; i<1; i++) {
            JJCalls p=3Djj_2_rtns[i];
            do {
                if(p.gen>jj_gen) {
                    jj_la=3Dp.arg;
                    jj_lastpos=3Djj_scanpos=3Dp.first;
                    switch(i) {
                        case 0:
                            jj_3_1();
                            break;
                    }
                }
                p=3Dp.next;
            }
            while(p!=3Dnull);
        }
        jj_rescan=3Dfalse;
    }


    final private void jj_save (int index, int xla) {
        JJCalls p=3Djj_2_rtns[index];
        while(p.gen>jj_gen) {
            if(p.next=3D=3Dnull) {
                p=3Dp.next=3Dnew JJCalls();
                break;
            }
            p=3Dp.next;
        }
        p.gen=3Djj_gen+xla-jj_la;
        p.first=3Dtoken;
        p.arg=3Dxla;
    }


    static final class JJCalls {
        int gen;

        Token first;

        int arg;

        JJCalls next;
    }

}


------=_NextPart_000_0075_01C3F3D7.6646A590
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
------=_NextPart_000_0075_01C3F3D7.6646A590--




From MAILER-DAEMON Sun Feb 15 20:44:01 2004
Return-Path: 
 <lucene-user-return-7132-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 47813 invoked from network); 15 Feb 2004 20:44:01 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 15 Feb 2004 20:44:01 -0000
Received: (qmail 12275 invoked by uid 500); 15 Feb 2004 20:43:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12252 invoked by uid 500); 15 Feb 2004 20:43:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 12239 invoked from network); 15 Feb 2004 20:43:44 -0000
Received: from unknown (HELO smtp03.mrf.mail.rcn.net) (207.172.4.62)
  by daedalus.apache.org with SMTP; 15 Feb 2004 20:43:44 -0000
Received: from 208-59-172-198.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com
 ([208.59.172.198] helo=aleph1.smart.net)
	by smtp03.mrf.mail.rcn.net with esmtp (Exim 3.35 #4)
	id 1AsT7F-0007cm-00
	for lucene-user@jakarta.apache.org; Sun, 15 Feb 2004 15:43:49 -0500
Message-Id: <5.0.2.1.2.20040215154529.02d82df0@pop3.smart.net>
X-Sender: dbd@pop3.smart.net (Unverified)
X-Mailer: QUALCOMM Windows Eudora Version 5.0.2
Date: Sun, 15 Feb 2004 15:49:17 -0500
To: lucene-user@jakarta.apache.org
From: "Daniel B. Davis" <dbd@smart.net>
Subject: 'Sponsored' links
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I am a newbie to Lucene, and this is my first serious posting
to Lucene-user.

This is to solicit comment upon the problem of supplying
a "sponsored links" capability within Lucene. This capability
would not affect at all which documents are returned by a query,
but would cause any 'sponsored' documents present among the
results to be displayed before other documents in the list
returned.

I have looked over the correspondence in Lucene-user, but
not found anything addressing this topic; if I have missed it,
please tell me where and when, and ignore the rest of this.

It seems to me that there are three ways to achieve the
capability:

1. Preset boost values for 'sponsored' documents, with an
    implied burden of reindexing when sponsors are modified.

2. Post-qualify documents present in the hit list for their
    sponsorship status, building a new hit list.

3. Modify the query to search using both the full query as
    an unsponsored boolean clause with the default boost value,
    and for each sponsor, to repeat the full query ANDed with
    that sponsor with the appropriate boost value.

Are there other strategies not considered?

Assuming a small list of sponsors (10 or fewer), and low
volatility amongst the sponsors (1 change / month or less)
which method is best?

I have been pursuing method #1, almost to the exclusion of
the others, but have encountered an unknown difficulty in the
implementation (separate posting).  In particular, while it is clear
that #3 is doable, I know nothing about the searching burden
added by multiplying the user's query by one plus the count of
sponsors.

Regarding #3, if my understanding is right, then:
    Sponsors name: s1, s2, s3 ...
             words or phrases: s1w1, s1w2, ... , s2w1, s2w2, ... , s3w1 ...
             boost values: s1v, s2v, s3v

    then given query q as user input, form:
             q
             or (q and (s1w1 | s1w2 | s1w3 | ...)^s1v)
             or (q and (s2w1 | s2w2 ...)^s2v)
             or (q and (s3w1 ...)^s3v)
Is this correct?

Does the strategy of search identify any kind of intermediate
sublist to speed up searching? (But then it would start to
resemble #2.)

Rolling ones own for #2 would run query q, and get the
HitCollector. Separately running queries for each of:
             s1w1 | s1w2 | s1w3 | ...,
             s2w1 | s2w2 ...
             s3w1 ...
and merge each hit collector with the one from query q.
(Just AND the bitsets???) Lastly adjust scores and form
a new composite HitCollecter.  By this time I have told
everyone much more than I know.

Stray thought:-- can HitCollectors be cached at application init?

There are many other questions regarding details of implementation,
but their proper place is another communication.

Just by preparing this document for dissemination has helped
greatly.  All and any comments are much appreciated.

Thank you all.



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb 15 20:50:11 2004
Return-Path: 
 <lucene-user-return-7133-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 51862 invoked from network); 15 Feb 2004 20:50:11 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 15 Feb 2004 20:50:11 -0000
Received: (qmail 20165 invoked by uid 500); 15 Feb 2004 20:49:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 19894 invoked by uid 500); 15 Feb 2004 20:49:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 19876 invoked from network); 15 Feb 2004 20:49:54 -0000
Received: from unknown (HELO smtp03.mrf.mail.rcn.net) (207.172.4.62)
  by daedalus.apache.org with SMTP; 15 Feb 2004 20:49:54 -0000
Received: from 208-59-172-198.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com
 ([208.59.172.198] helo=aleph1.smart.net)
	by smtp03.mrf.mail.rcn.net with esmtp (Exim 3.35 #4)
	id 1AsTDD-0000qE-00
	for lucene-user@jakarta.apache.org; Sun, 15 Feb 2004 15:50:00 -0500
Message-Id: <5.0.2.1.2.20040215155126.02d84c90@pop3.smart.net>
X-Sender: dbd@pop3.smart.net
X-Mailer: QUALCOMM Windows Eudora Version 5.0.2
Date: Sun, 15 Feb 2004 15:55:36 -0500
To: lucene-user@jakarta.apache.org
From: "Daniel B. Davis" <dbd@smart.net>
Subject: Intermediate indexing before final
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


I am a newbie to Lucene, and have been learning by experiment
and from the demos.   A problem has arisen in indexing
a document after creation, and before indexing in the
permanent index. It is being indexed to this small lookaside
index in order to determine whether it is
"sponsored" [i.e. contains any word that causes it to
be included in one of the 'sponsored' document levels.]
(A separate letter deals with the larger issues of
sponsorship.)  If it is sponsored, then a setBoost for
the document will be issued, with a level-dependent
value.

The code in question arises from within IndexHTML
near:
	doc = new HTMLDocument(file);
	writer.addDocument(doc);

In the case at issue, this code has been changed to:
	doc = new HTMLDocument(file);
         int boost = sponsoredValue(doc);
         doc.setBoost(boost);
	writer.addDocument(doc);

The sponsoredValue method never returns.

The exception occurs after a longish delay in
eclipse, about 2-3 seconds.  The document used is:
           http://www.w3.org/TR/xquery
stored as a local file. The same document indexes
correctly when the call to sponsoredValue and setBoost
are removed.

HTMLDocument was modified in minor ways.  HTMLParser
is destined for modification, but is still vanilla.

Note that altering RAMDirectory to FSDirectory makes
no difference and does not change the behavior.

I greatly Appreciate any help, thank you all.

  -------------------------------------------------

the Document doc:
       url: Keyword, string
       file: Unindexed, string
       modified: Keyword, string
       uid: as in HTMLdemo, string
       contents: Text, reader
       title: Text, string
       metadata: Text, string

the code:

   private static RAMDirectory ramDir = null;
   private static IndexWriter ramWriter = null;
   private static IndexReader ramReader = null;
   private static IndexSearcher ramSearcher = null;

   public int sponsoredValue(Document doc) {
       .
       .
       .
       ramDir = new RAMDirectory();
       ramWriter = new IndexWriter(ramDir, new StandardAnalyzer(), true);
+-->  ramWriter.addDocument(doc);
|     ramWriter.close();
|     ramWriter = null;
|     ramReader = IndexReader.open(ramDir);
|     ramSearcher = new IndexSearcher(ramReader);
|     .
|     .
|     .
|     }
|
the Exception:

java.io.IOException: Pipe closed
	at java.io.PipedInputStream.receive(Unknown Source)
	at java.io.PipedInputStream.receive(Unknown Source)
	at java.io.PipedOutputStream.write(Unknown Source)
	at sun.nio.cs.StreamEncoder$CharsetSE.writeBytes(Unknown Source)
	at sun.nio.cs.StreamEncoder$CharsetSE.implWrite(Unknown Source)
	at sun.nio.cs.StreamEncoder.write(Unknown Source)
	at sun.nio.cs.StreamEncoder.write(Unknown Source)
	at java.io.OutputStreamWriter.write(Unknown Source)
	at java.io.Writer.write(Unknown Source)
	at org.apache.lucene.demo.html.HTMLParser.addText(HTMLParser.java:141)
	at org.apache.lucene.demo.html.HTMLParser.HTMLDocument(HTMLParser.java:200)
	at org.apache.lucene.demo.html.ParserThread.run(ParserThread.java:69)







---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb 15 21:02:32 2004
Return-Path: 
 <lucene-user-return-7134-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 56936 invoked from network); 15 Feb 2004 21:02:32 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 15 Feb 2004 21:02:32 -0000
Received: (qmail 43076 invoked by uid 500); 15 Feb 2004 21:02:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 43049 invoked by uid 500); 15 Feb 2004 21:02:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 43032 invoked from network); 15 Feb 2004 21:02:14 -0000
Received: from unknown (HELO gwia201.syr.edu) (128.230.248.25)
  by daedalus.apache.org with SMTP; 15 Feb 2004 21:02:14 -0000
Received: from MTA2-MTA by gwia201.syr.edu
	with Novell_GroupWise; Sun, 15 Feb 2004 16:02:19 -0500
Message-Id: <s02f980b.040@gwia201.syr.edu>
X-Mailer: Novell GroupWise Internet Agent 6.0.4
Date: Sun, 15 Feb 2004 16:01:55 -0500
From: "Grant Ingersoll" <gsingers@syr.edu>
To: <lucene-user@jakarta.apache.org>
Subject: Re: 'Sponsored' links
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Does the sponsored information have to be in the index?  Couldn't you =
lookup the sponsor info in a database (or something else) after getting =
back your
initial results and then re-sort the hit list, moving up the sponsored =
elements while maintaining the rest of the results as is?  If your list of =
sponsors are truly that small, you could just put 'em in a file and load =
the list into memory.

Seems then you don't have to re-index when your sponsorships change and =
you really have no dependencies on Lucene with
trying to get boost values right, etc.

I guess this resembles #2.


>>> dbd@smart.net 02/15/04 03:49PM >>>
I am a newbie to Lucene, and this is my first serious posting
to Lucene-user.

This is to solicit comment upon the problem of supplying
a "sponsored links" capability within Lucene. This capability
would not affect at all which documents are returned by a query,
but would cause any 'sponsored' documents present among the
results to be displayed before other documents in the list
returned.

I have looked over the correspondence in Lucene-user, but
not found anything addressing this topic; if I have missed it,
please tell me where and when, and ignore the rest of this.

It seems to me that there are three ways to achieve the
capability:

1. Preset boost values for 'sponsored' documents, with an
    implied burden of reindexing when sponsors are modified.

2. Post-qualify documents present in the hit list for their
    sponsorship status, building a new hit list.

3. Modify the query to search using both the full query as
    an unsponsored boolean clause with the default boost value,
    and for each sponsor, to repeat the full query ANDed with
    that sponsor with the appropriate boost value.

Are there other strategies not considered?

Assuming a small list of sponsors (10 or fewer), and low
volatility amongst the sponsors (1 change / month or less)
which method is best?

I have been pursuing method #1, almost to the exclusion of
the others, but have encountered an unknown difficulty in the
implementation (separate posting).  In particular, while it is clear
that #3 is doable, I know nothing about the searching burden
added by multiplying the user's query by one plus the count of
sponsors.

Regarding #3, if my understanding is right, then:
    Sponsors name: s1, s2, s3 ...
             words or phrases: s1w1, s1w2, ... , s2w1, s2w2, ... , s3w1 =
....
             boost values: s1v, s2v, s3v

    then given query q as user input, form:
             q
             or (q and (s1w1 | s1w2 | s1w3 | ...)^s1v)
             or (q and (s2w1 | s2w2 ...)^s2v)
             or (q and (s3w1 ...)^s3v)
Is this correct?

Does the strategy of search identify any kind of intermediate
sublist to speed up searching? (But then it would start to
resemble #2.)

Rolling ones own for #2 would run query q, and get the
HitCollector. Separately running queries for each of:
             s1w1 | s1w2 | s1w3 | ...,
             s2w1 | s2w2 ...
             s3w1 ...
and merge each hit collector with the one from query q.
(Just AND the bitsets???) Lastly adjust scores and form
a new composite HitCollecter.  By this time I have told
everyone much more than I know.

Stray thought:-- can HitCollectors be cached at application init?

There are many other questions regarding details of implementation,
but their proper place is another communication.

Just by preparing this document for dissemination has helped
greatly.  All and any comments are much appreciated.

Thank you all.



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org=20
For additional commands, e-mail: lucene-user-help@jakarta.apache.org=20



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 02:54:26 2004
Return-Path: 
 <lucene-user-return-7136-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9415 invoked from network); 16 Feb 2004 02:54:26 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 02:54:26 -0000
Received: (qmail 33826 invoked by uid 500); 16 Feb 2004 02:54:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 33790 invoked by uid 500); 16 Feb 2004 02:54:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 33675 invoked from network); 16 Feb 2004 02:54:02 -0000
Received: from unknown (HELO mail.ntranz.com) (65.19.137.179)
  by daedalus.apache.org with SMTP; 16 Feb 2004 02:54:02 -0000
Received: from [65.19.137.179] by tunes0320w
  (ArGoSoft Mail Server Pro for WinNT/2000/XP, Version 1.8 (1.8.4.0));
 Sun, 15 Feb 2004 18:47:10 -0800
From: "hema@searchendjobs.com" <hema@searchendjobs.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
X-ArGoMail-Auto-Response: Yes
Subject: thanks for your mail
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Message-ID: <cby60y44ij5j6pl.150220041847@mail.ntranz.com>
Date: Sun, 15 Feb 2004 18:47:10 -0800
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Received your mail we will get back to you shortly


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 02:54:20 2004
Return-Path: 
 <lucene-user-return-7135-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9348 invoked from network); 16 Feb 2004 02:54:20 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 02:54:20 -0000
Received: (qmail 33233 invoked by uid 500); 16 Feb 2004 02:53:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 33067 invoked by uid 500); 16 Feb 2004 02:53:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 33054 invoked from network); 16 Feb 2004 02:53:57 -0000
Received: from unknown (HELO web41711.mail.yahoo.com) (66.218.93.128)
  by daedalus.apache.org with SMTP; 16 Feb 2004 02:53:57 -0000
Message-ID: <20040216025406.40576.qmail@web41711.mail.yahoo.com>
Received: from [208.187.128.43] by web41711.mail.yahoo.com via HTTP;
 Sun, 15 Feb 2004 18:54:06 PST
Date: Sun, 15 Feb 2004 18:54:06 -0800 (PST)
From: mr scrub <ted94107@yahoo.com>
Subject: can't create webapp demo index
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I'm having trouble creating the index for the webapp
demo. I had no trouble creating the index for the
non-webapp demo, but I get an NullPointerException
when I try it for the webapp.

I'm on Windows2000 and here's my input and the error
message that I got:

C:\tomcat\webapps\examples>java
org.apache.lucene.demo.IndexHTML -create -index
C:\tomcat\webapps\index
 caught a class java.lang.NullPointerException
 with message: null

TIA,
Ted




__________________________________
Do you Yahoo!?
Yahoo! Finance: Get your refund fast by filing online.
http://taxes.yahoo.com/filing.html

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 03:25:44 2004
Return-Path: 
 <lucene-user-return-7137-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 17751 invoked from network); 16 Feb 2004 03:25:44 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 03:25:44 -0000
Received: (qmail 56882 invoked by uid 500); 16 Feb 2004 03:24:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 56861 invoked by uid 500); 16 Feb 2004 03:24:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 56839 invoked from network); 16 Feb 2004 03:24:54 -0000
Received: from unknown (HELO a.mail.sonic.net) (64.142.16.245)
  by daedalus.apache.org with SMTP; 16 Feb 2004 03:24:54 -0000
Received: from sonic.net (adsl-64-142-49-100.sonic.net [64.142.49.100])
	(authenticated bits=0)
	by a.mail.sonic.net (8.12.10/8.12.7) with ESMTP id i1G3P1bq026713
	(version=TLSv1/SSLv3 cipher=RC4-MD5 bits=128 verify=NO);
	Sun, 15 Feb 2004 19:25:02 -0800
Message-ID: <4030380D.4090100@sonic.net>
Date: Sun, 15 Feb 2004 19:25:01 -0800
From: Tim Walters <twalters@sonic.net>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;
 rv:1.5) Gecko/20031007
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Field Reindex Question
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I'm thinking of using Lucene in an application that might change the 
field data without modifying the document. It would be nice to only have 
to rewrite the field index information, which is much smaller than the 
information for the document. Would anyone know if this is possible?

Thanks in Advance,
Tim



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 03:58:08 2004
Return-Path: 
 <lucene-user-return-7138-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 27571 invoked from network); 16 Feb 2004 03:58:08 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 03:58:08 -0000
Received: (qmail 87216 invoked by uid 500); 16 Feb 2004 03:57:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 87157 invoked by uid 500); 16 Feb 2004 03:57:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 87144 invoked from network); 16 Feb 2004 03:57:43 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.65)
  by daedalus.apache.org with SMTP; 16 Feb 2004 03:57:43 -0000
Received: (cpmta 9516 invoked from network); 15 Feb 2004 19:57:52 -0800
Received: from 24.51.109.181 (HELO ?192.168.1.102?)
  by smtp.hatcher.net (209.228.32.65) with SMTP; 15 Feb 2004 19:57:52 -0800
X-Sent: 16 Feb 2004 03:57:52 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <4030380D.4090100@sonic.net>
References: <4030380D.4090100@sonic.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <4A434B66-6034-11D8-99EF-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Field Reindex Question
Date: Sun, 15 Feb 2004 22:57:50 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You must remove and re-add the entire document to perform an "update".  
Such is the (current) nature of Lucene.

	Erik


On Feb 15, 2004, at 10:25 PM, Tim Walters wrote:

> Hi,
>
> I'm thinking of using Lucene in an application that might change the 
> field data without modifying the document. It would be nice to only 
> have to rewrite the field index information, which is much smaller 
> than the information for the document. Would anyone know if this is 
> possible?
>
> Thanks in Advance,
> Tim
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 10:29:47 2004
Return-Path: 
 <lucene-user-return-7139-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 94397 invoked from network); 16 Feb 2004 10:29:47 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 10:29:47 -0000
Received: (qmail 19876 invoked by uid 500); 16 Feb 2004 10:29:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 19767 invoked by uid 500); 16 Feb 2004 10:29:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 19750 invoked from network); 16 Feb 2004 10:29:15 -0000
Received: from unknown (HELO smtprelay01.ispgateway.de) (62.67.200.156)
  by daedalus.apache.org with SMTP; 16 Feb 2004 10:29:15 -0000
Received: (qmail 29146 invoked from network); 16 Feb 2004 10:29:26 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.246.75])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 16 Feb 2004 10:29:26 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id A86841FA4
	for <lucene-user@jakarta.apache.org>; Mon, 16 Feb 2004 11:29:25 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Incrementally updating and monitoring the index
Date: Mon, 16 Feb 2004 11:29:25 +0100
User-Agent: KMail/1.6
References: <Pine.LNX.4.44.0402131258560.5764-100000@savinien.cirano.qc.ca>
In-Reply-To: <Pine.LNX.4.44.0402131258560.5764-100000@savinien.cirano.qc.ca>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200402161129.25077.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Friday 13 February 2004 19:10, Stephane James Vaucher wrote:
> Very possible, before adding a document, you can check (with the judicious
> use of an id) if it has already been added. If it hasn't, do your
> notification, but this requires programming.

So you mean adding the new documents to a temporary index first, running all 
queries against it and then write the temp index to the final index?

RAMDirectory ram = new RAMDirectory();
for (docs...)
	ram.addDocument(doc);

IndexSearcher searcher = new IndexSearcher(ram),
for (queries...)
	if (searcher.search(query) != null)
		notify();

finalIndex.addIndexes(ram);
finalIndex.optimize();

?

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 10:37:58 2004
Return-Path: 
 <lucene-user-return-7140-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 97626 invoked from network); 16 Feb 2004 10:37:58 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 10:37:58 -0000
Received: (qmail 33276 invoked by uid 500); 16 Feb 2004 10:37:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 33238 invoked by uid 500); 16 Feb 2004 10:37:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 33219 invoked from network); 16 Feb 2004 10:37:25 -0000
Received: from unknown (HELO smtprelay01.ispgateway.de) (62.67.200.156)
  by daedalus.apache.org with SMTP; 16 Feb 2004 10:37:25 -0000
Received: (qmail 31821 invoked from network); 16 Feb 2004 10:37:38 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.246.75])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 16 Feb 2004 10:37:38 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 399B81FA4
	for <lucene-user@jakarta.apache.org>; Mon, 16 Feb 2004 11:37:37 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Did you mean...
Date: Mon, 16 Feb 2004 11:37:36 +0100
User-Agent: KMail/1.6
References: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4BA@afexch3.fao.org>
In-Reply-To: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4BA@afexch3.fao.org>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200402161137.36837.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Thursday 12 February 2004 18:35, Viparthi, Kiran (AFIS) wrote:
> As mentioned the only way I can see is to get the output of the analyzer
> directly as a TokenStream
> iterate through it and insert it into a Map.

Could you provide or point me to some example code on how to get and use 
TokenStream. The API docs are somewhat unclear to me...

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 11:03:15 2004
Return-Path: 
 <lucene-user-return-7142-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 7305 invoked from network); 16 Feb 2004 11:03:15 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 11:03:15 -0000
Received: (qmail 69251 invoked by uid 500); 16 Feb 2004 11:02:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69196 invoked by uid 500); 16 Feb 2004 11:02:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 69150 invoked from network); 16 Feb 2004 11:02:40 -0000
Received: from unknown (HELO mail.ntranz.com) (65.19.137.179)
  by daedalus.apache.org with SMTP; 16 Feb 2004 11:02:40 -0000
Received: from [65.19.137.179] by tunes0320w
  (ArGoSoft Mail Server Pro for WinNT/2000/XP, Version 1.8 (1.8.4.0));
 Mon, 16 Feb 2004 02:55:52 -0800
From: "hema@searchendjobs.com" <hema@searchendjobs.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
X-ArGoMail-Auto-Response: Yes
Subject: thanks for your mail
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Message-ID: <r7bziwfi2w14r43.160220040255@mail.ntranz.com>
Date: Mon, 16 Feb 2004 02:55:52 -0800
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Received your mail we will get back to you shortly


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 11:03:07 2004
Return-Path: 
 <lucene-user-return-7141-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 7224 invoked from network); 16 Feb 2004 11:03:07 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 11:03:07 -0000
Received: (qmail 68476 invoked by uid 500); 16 Feb 2004 11:02:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 68451 invoked by uid 500); 16 Feb 2004 11:02:34 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 68437 invoked from network); 16 Feb 2004 11:02:34 -0000
Received: from unknown (HELO smtpmail.fao.org) (168.202.2.12)
  by daedalus.apache.org with SMTP; 16 Feb 2004 11:02:34 -0000
Received: from CONVERSION-DAEMON.smtpmail.fao.org by smtpmail.fao.org
 (PMDF V6.2-X17 #30673) id <0HT600I01C6IPF@smtpmail.fao.org> for
 lucene-user@jakarta.apache.org; Mon, 16 Feb 2004 12:06:18 +0100 (MET)
Received: from afexch1.fao.org (afexch1.fao.org [168.202.2.84])
 by smtpmail.fao.org (PMDF V6.2-X17 #30673)
 with ESMTP id <0HT600I0TC6IIY@smtpmail.fao.org> for
 lucene-user@jakarta.apache.org; Mon, 16 Feb 2004 12:06:18 +0100 (MET)
Received: by afexch1.fao.org with Internet Mail Service (5.5.2657.72)
	id <1W93QQ9Y>; Mon, 16 Feb 2004 12:02:46 +0100
Content-return: allowed
Date: Mon, 16 Feb 2004 12:02:38 +0100
From: "Viparthi, Kiran (AFIS)" <Kiran.Viparthi@fao.org>
Subject: RE: Did you mean...
To: 'Lucene Users List' <lucene-user@jakarta.apache.org>
Message-id: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4C3@afexch3.fao.org>
MIME-version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-type: text/plain
Content-transfer-encoding: 7BIT
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Timo,

I was mentioning to your previous code that you can collect all the text
from term.

IndexReader reader = IndexReader.open(ram);
TermEnum te = reader.terms();
StringBuffer sb = new StringBuffer();
while(te.next())
{
Term t = te.term();
 sb.append(t.text());
}

And you can get the tokens using StringTokenizer on the sb.toString() and
put them into Map by calculating the occurrences.
As mentioned I didn't use any information from index so I didn't uses any
TokenStream but let me check it out.

Kiran

-----Original Message-----
From: lucene@nitwit.de [mailto:lucene@nitwit.de] 
Sent: 16 February 2004 11:38
To: Lucene Users List
Subject: Re: Did you mean...


On Thursday 12 February 2004 18:35, Viparthi, Kiran (AFIS) wrote:
> As mentioned the only way I can see is to get the output of the 
> analyzer directly as a TokenStream iterate through it and insert it 
> into a Map.

Could you provide or point me to some example code on how to get and use 
TokenStream. The API docs are somewhat unclear to me...

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 11:13:02 2004
Return-Path: 
 <lucene-user-return-7143-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 11691 invoked from network); 16 Feb 2004 11:13:02 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 11:13:02 -0000
Received: (qmail 82895 invoked by uid 500); 16 Feb 2004 11:12:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 82866 invoked by uid 500); 16 Feb 2004 11:12:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 82841 invoked from network); 16 Feb 2004 11:12:29 -0000
Received: from unknown (HELO smtprelay02.ispgateway.de) (62.67.200.157)
  by daedalus.apache.org with SMTP; 16 Feb 2004 11:12:29 -0000
Received: (qmail 11616 invoked from network); 16 Feb 2004 11:12:42 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.246.75])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 16 Feb 2004 11:12:42 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id CE2961FA4
	for <lucene-user@jakarta.apache.org>; Mon, 16 Feb 2004 12:12:42 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Did you mean...
Date: Mon, 16 Feb 2004 12:12:42 +0100
User-Agent: KMail/1.6
References: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4C3@afexch3.fao.org>
In-Reply-To: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4C3@afexch3.fao.org>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200402161212.42308.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Monday 16 February 2004 12:02, Viparthi, Kiran (AFIS) wrote:
> As mentioned I didn't use any information from index so I didn't uses any
> TokenStream but let me check it out.

deprecated:

String description = doc.getField("contents").stringValue();
final java.io.Reader r = new StringReader(description);
final TokenStream in = analyzer.tokenStream(r);
for (Token token; (token = in.next()) != null; )
{
	System.out.println(token.termText());
}

But the result is the same, the words are actually truncated (instead of 
"has", "had", "have", etc. only "ha") :-(

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 11:41:13 2004
Return-Path: 
 <lucene-user-return-7144-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 30290 invoked from network); 16 Feb 2004 11:41:13 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 11:41:13 -0000
Received: (qmail 23382 invoked by uid 500); 16 Feb 2004 11:41:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 23357 invoked by uid 500); 16 Feb 2004 11:41:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 23191 invoked from network); 16 Feb 2004 11:41:01 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.71)
  by daedalus.apache.org with SMTP; 16 Feb 2004 11:41:01 -0000
Received: (cpmta 3138 invoked from network); 16 Feb 2004 03:41:00 -0800
Received: from 24.51.109.181 (HELO ?192.168.1.102?)
  by smtp.hatcher.net (209.228.32.71) with SMTP; 16 Feb 2004 03:41:00 -0800
X-Sent: 16 Feb 2004 11:41:00 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <200402161212.42308.lucene@nitwit.de>
References: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4C3@afexch3.fao.org>
 <200402161212.42308.lucene@nitwit.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <FDDF0447-6074-11D8-97DF-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Did you mean...
Date: Mon, 16 Feb 2004 06:40:59 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 16, 2004, at 6:12 AM, lucene@nitwit.de wrote:
> On Monday 16 February 2004 12:02, Viparthi, Kiran (AFIS) wrote:
>> As mentioned I didn't use any information from index so I didn't uses 
>> any
>> TokenStream but let me check it out.
>
> deprecated:
>
> String description = doc.getField("contents").stringValue();

What is the value of description here?

> final java.io.Reader r = new StringReader(description);
> final TokenStream in = analyzer.tokenStream(r);

And what analyzer are you using here?

> for (Token token; (token = in.next()) != null; )
> {
> 	System.out.println(token.termText());
> }
>
> But the result is the same, the words are actually truncated (instead 
> of
> "has", "had", "have", etc. only "ha") :-(
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 11:48:08 2004
Return-Path: 
 <lucene-user-return-7145-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 37207 invoked from network); 16 Feb 2004 11:48:08 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 11:48:08 -0000
Received: (qmail 28774 invoked by uid 500); 16 Feb 2004 11:48:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 28747 invoked by uid 500); 16 Feb 2004 11:48:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 28733 invoked from network); 16 Feb 2004 11:48:01 -0000
Received: from unknown (HELO anchor-post-37.mail.demon.net) (194.217.242.86)
  by daedalus.apache.org with SMTP; 16 Feb 2004 11:48:01 -0000
Received: from selvaraj.demon.co.uk ([62.49.59.195] helo=searchblox.com)
	by anchor-post-37.mail.demon.net with esmtp (Exim 3.35 #1)
	id 1AshEH-000PNC-0b
	for lucene-user@jakarta.apache.org; Mon, 16 Feb 2004 11:48:01 +0000
Message-ID: <4030ADEA.3070407@searchblox.com>
Date: Mon, 16 Feb 2004 11:47:54 +0000
From: Robert Selvaraj <rselvaraj@searchblox.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;
 rv:1.4) Gecko/20030624 Netscape/7.1 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: SearchBlox J2EE Search Component Version 1.2 released
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


SearchBlox is a J2EE Search Component that delivers out-of-the-box 
search functionality for quick integration with your websites, 
applications, intranets and portals. SearchBlox uses the Lucene Search 
API and incorporates integrated HTTP and File System crawlers, support 
for various document formats, support for indexing and searching content 
in 17 languages and customizable search results, all controlled from a 
browser-based Admin Console.


Main features in this release:
==============================
- Support for PowerPoint documents
- Support for Polish and Russian language content
- Enhanced HTML document parsing.
- The FREE and BASIC Editions of SearchBlox now support all document 
formats including Word, PDF, Excel and PowerPoint

SearchBlox is available as a Web Archive (WAR) and is deployable on any 
Servlet 2.3/JSP 1.2 compliant server. Features in the product include:

Content Features
================
- Crawlers: can index both HTTP and File-system based content
- Languages: supports English, Spanish, French, German, Italian, Danish, 
Dutch, Finnish, Norwegian, Polish, Portuguese, Russian, Swedish, 
Japanese, Korean, Chinese(Simplified), Chinese(Traditional)
- Stopwords: separate stopword list for each supported language
- File Types: supports HTML, Word, Excel, PDF, Text, RTF, PowerPoint
- MetaTags: supports standard meta tag fields (title, description, keyword)


Administrator Features
======================
- Web-based Admin Console: easy to use and intuitive console to manage 
all aspects of the Search application
- Collections: create up to 5 document collections with customized settings
- Look & Feel: search results customizable using XSLT stylesheets. Can 
also be delivered as XML
- Reporting: real-time reporting with weekly, daily and hourly result 
sets, top queries and zero match queries
- Schedulers: flexible scheduling of indexing and index-refresh operations


End User Features
=================
- Advanced Search: supports Boolean AND, OR, and NOT searches, Fuzzy and 
fielded query searches
- Sort: search results can be sorted by date, relevance or alphabetically.
- Hit Highlighting: query terms are highlighted on content title and 
description
- Collections: users can limit search to specific collections


SearchBlox Getting-Started Guides are available for the following servers:

JBoss -http://www.searchblox.com/gettingstarted_jboss.html
Jetty - http://www.searchblox.com/gettingstarted_jetty.html
JRun - http://www.searchblox.com/gettingstarted_jrun.html
Pramati - http://www.searchblox.com/gettingstarted_pramati.html
Resin - http://www.searchblox.com/gettingstarted_resin.html
Sun - http://www.searchblox.com/gettingstarted_sun.html
Tomcat - http://www.searchblox.com/gettingstarted_tomcat.html
Weblogic - http://www.searchblox.com/gettingstarted_weblogic.html
Websphere - http://www.searchblox.com/gettingstarted_websphere.html

The SearchBlox FREE Edition is available free of charge and can index up 
to 1000 documents.

The software can be downloaded from http://www.searchblox.com





---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 12:34:18 2004
Return-Path: 
 <lucene-user-return-7146-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 72723 invoked from network); 16 Feb 2004 12:34:18 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 12:34:18 -0000
Received: (qmail 8428 invoked by uid 500); 16 Feb 2004 12:34:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 8220 invoked by uid 500); 16 Feb 2004 12:34:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 8203 invoked from network); 16 Feb 2004 12:34:10 -0000
Received: from unknown (HELO expasy-ng.isb-sib.ch) (192.33.215.142)
  by daedalus.apache.org with SMTP; 16 Feb 2004 12:34:10 -0000
Received: from caliente (router.isb-sib.ch [192.33.215.254])
	(authenticated bits=0)
	by expasy-ng.isb-sib.ch (8.12.10/8.12.8) with ESMTP id i1GCY7Yn003569
	for <lucene-user@jakarta.apache.org>; Mon, 16 Feb 2004 13:34:07 +0100
Message-ID: <001201c3f489$2b955650$c300000a@caliente>
From: "Eric Jain" <Eric.Jain@isb-sib.ch>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <4030ADEA.3070407@searchblox.com>
Subject: Re: SearchBlox J2EE Search Component Version 1.2 released
Date: Mon, 16 Feb 2004 13:34:07 +0100
Organization: Swiss Institute of Bioinformatics
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-sib-MailScanner-Information: Please contact the ISP for more information
X-sib-MailScanner: Found to be clean
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> - Support for PowerPoint documents

May I ask how you extract text from PowerPoint documents? Any open
source tool, or your own code?


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 12:39:07 2004
Return-Path: 
 <lucene-user-return-7147-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74741 invoked from network); 16 Feb 2004 12:39:07 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 12:39:07 -0000
Received: (qmail 15151 invoked by uid 500); 16 Feb 2004 12:38:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 15039 invoked by uid 500); 16 Feb 2004 12:38:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 14968 invoked from network); 16 Feb 2004 12:38:05 -0000
Received: from unknown (HELO anchor-post-37.mail.demon.net) (194.217.242.86)
  by daedalus.apache.org with SMTP; 16 Feb 2004 12:38:05 -0000
Received: from selvaraj.demon.co.uk ([62.49.59.195] helo=searchblox.com)
	by anchor-post-37.mail.demon.net with esmtp (Exim 3.35 #1)
	id 1Asi0i-000BDY-0b
	for lucene-user@jakarta.apache.org; Mon, 16 Feb 2004 12:38:04 +0000
Message-ID: <4030B9AA.7060402@searchblox.com>
Date: Mon, 16 Feb 2004 12:38:02 +0000
From: Robert Selvaraj <rselvaraj@searchblox.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;
 rv:1.4) Gecko/20030624 Netscape/7.1 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: SearchBlox J2EE Search Component Version 1.2 released
References: <4030ADEA.3070407@searchblox.com>
 <001201c3f489$2b955650$c300000a@caliente>
In-Reply-To: <001201c3f489$2b955650$c300000a@caliente>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

This is our own code.

Eric Jain wrote:

>>- Support for PowerPoint documents
> 
> 
> May I ask how you extract text from PowerPoint documents? Any open
> source tool, or your own code?
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 12:59:49 2004
Return-Path: 
 <lucene-user-return-7148-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 87629 invoked from network); 16 Feb 2004 12:59:49 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 12:59:49 -0000
Received: (qmail 57359 invoked by uid 500); 16 Feb 2004 12:59:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 57297 invoked by uid 500); 16 Feb 2004 12:59:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 57279 invoked from network); 16 Feb 2004 12:59:41 -0000
Received: from unknown (HELO smtprelay02.ispgateway.de) (62.67.200.157)
  by daedalus.apache.org with SMTP; 16 Feb 2004 12:59:41 -0000
Received: (qmail 9053 invoked from network); 16 Feb 2004 12:59:40 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.246.75])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 16 Feb 2004 12:59:40 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 7C49020BE
	for <lucene-user@jakarta.apache.org>; Mon, 16 Feb 2004 13:59:42 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Did you mean...
Date: Mon, 16 Feb 2004 13:59:41 +0100
User-Agent: KMail/1.6
References: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4C3@afexch3.fao.org>
 <200402161212.42308.lucene@nitwit.de>
 <FDDF0447-6074-11D8-97DF-000393A564E6@ehatchersolutions.com>
In-Reply-To: <FDDF0447-6074-11D8-97DF-000393A564E6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200402161359.41984.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Monday 16 February 2004 12:40, Erik Hatcher wrote:
> On Feb 16, 2004, at 6:12 AM, lucene@nitwit.de wrote:
> > String description = doc.getField("contents").stringValue();
>
> What is the value of description here?

? The value of the field "contents" :-) Long, plain text..

> > final java.io.Reader r = new StringReader(description);
> > final TokenStream in = analyzer.tokenStream(r);
>
> And what analyzer are you using here?

GermanAnalyzer (yes, "has", "had", etc. below is fictional but most people 
here probably don't speak german...e.g. "automobile" may become "automob" or 
something like this).

> > But the result is the same, the words are actually truncated (instead
> > of
> > "has", "had", "have", etc. only "ha") :-(

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 14:16:31 2004
Return-Path: 
 <lucene-user-return-7149-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 35685 invoked from network); 16 Feb 2004 14:16:31 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 14:16:31 -0000
Received: (qmail 92079 invoked by uid 500); 16 Feb 2004 14:16:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 92037 invoked by uid 500); 16 Feb 2004 14:16:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 91984 invoked from network); 16 Feb 2004 14:16:19 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.72)
  by daedalus.apache.org with SMTP; 16 Feb 2004 14:16:19 -0000
Received: (cpmta 2999 invoked from network); 16 Feb 2004 06:16:17 -0800
Received: from 128.143.26.2 (HELO ?128.143.26.2?)
  by smtp.hatcher.net (209.228.32.72) with SMTP; 16 Feb 2004 06:16:17 -0800
X-Sent: 16 Feb 2004 14:16:17 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <200402161359.41984.lucene@nitwit.de>
References: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4C3@afexch3.fao.org>
 <200402161212.42308.lucene@nitwit.de>
 <FDDF0447-6074-11D8-97DF-000393A564E6@ehatchersolutions.com>
 <200402161359.41984.lucene@nitwit.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <AF6AEC56-608A-11D8-9FD1-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Did you mean...
Date: Mon, 16 Feb 2004 09:16:17 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 16, 2004, at 7:59 AM, lucene@nitwit.de wrote:
> On Monday 16 February 2004 12:40, Erik Hatcher wrote:
>> On Feb 16, 2004, at 6:12 AM, lucene@nitwit.de wrote:
>>> String description = doc.getField("contents").stringValue();
>>
>> What is the value of description here?
>
> ? The value of the field "contents" :-) Long, plain text..

I'm asking for specifics because you listed a specific truncation 
problem.

>>> final java.io.Reader r = new StringReader(description);
>>> final TokenStream in = analyzer.tokenStream(r);
>>
>> And what analyzer are you using here?
>
> GermanAnalyzer (yes, "has", "had", etc. below is fictional but most 
> people
> here probably don't speak german...e.g. "automobile" may become 
> "automob" or
> something like this).

And thus the nature of the problem.  Try using the WhitespaceAnalyzer 
instead to see what you get.

	Erik

>
>>> But the result is the same, the words are actually truncated (instead
>>> of
>>> "has", "had", "have", etc. only "ha") :-(
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 14:27:14 2004
Return-Path: 
 <lucene-user-return-7150-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 47345 invoked from network); 16 Feb 2004 14:27:14 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 14:27:14 -0000
Received: (qmail 12126 invoked by uid 500); 16 Feb 2004 14:27:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12102 invoked by uid 500); 16 Feb 2004 14:27:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 12088 invoked from network); 16 Feb 2004 14:27:05 -0000
Received: from unknown (HELO smtprelay01.ispgateway.de) (62.67.200.156)
  by daedalus.apache.org with SMTP; 16 Feb 2004 14:27:05 -0000
Received: (qmail 7289 invoked from network); 16 Feb 2004 14:27:05 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.241.202])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 16 Feb 2004 14:27:05 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id E640F248C
	for <lucene-user@jakarta.apache.org>; Mon, 16 Feb 2004 15:27:03 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Did you mean...
Date: Mon, 16 Feb 2004 15:27:03 +0100
User-Agent: KMail/1.6
References: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4C3@afexch3.fao.org>
 <200402161359.41984.lucene@nitwit.de>
 <AF6AEC56-608A-11D8-9FD1-000393A564E6@ehatchersolutions.com>
In-Reply-To: <AF6AEC56-608A-11D8-9FD1-000393A564E6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200402161527.03592.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Monday 16 February 2004 15:16, Erik Hatcher wrote:
> And thus the nature of the problem.  Try using the WhitespaceAnalyzer
> instead to see what you get.

Much better! :-) But sometimes it still returns multiple words as a single 
term...:-\

And it does not care for punctuation, but that's probably something I'll have 
to do on my own...

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 14:35:38 2004
Return-Path: 
 <lucene-user-return-7151-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 52434 invoked from network); 16 Feb 2004 14:35:38 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 14:35:38 -0000
Received: (qmail 30465 invoked by uid 500); 16 Feb 2004 14:35:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 30257 invoked by uid 500); 16 Feb 2004 14:35:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 30237 invoked from network); 16 Feb 2004 14:35:28 -0000
Received: from unknown (HELO smtprelay01.ispgateway.de) (62.67.200.156)
  by daedalus.apache.org with SMTP; 16 Feb 2004 14:35:28 -0000
Received: (qmail 9797 invoked from network); 16 Feb 2004 14:35:29 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.241.202])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 16 Feb 2004 14:35:29 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id F1A6520BE
	for <lucene-user@jakarta.apache.org>; Mon, 16 Feb 2004 15:35:27 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Did you mean...
Date: Mon, 16 Feb 2004 15:35:27 +0100
User-Agent: KMail/1.6
References: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4C3@afexch3.fao.org>
 <AF6AEC56-608A-11D8-9FD1-000393A564E6@ehatchersolutions.com>
 <200402161527.03592.lucene@nitwit.de>
In-Reply-To: <200402161527.03592.lucene@nitwit.de>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200402161535.27636.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Monday 16 February 2004 15:27, lucene@nitwit.de wrote:
> But sometimes it still returns multiple words as a single term...:-\

Sorry, silly mistake of mine.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 14:50:48 2004
Return-Path: 
 <lucene-user-return-7152-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61132 invoked from network); 16 Feb 2004 14:50:48 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 14:50:48 -0000
Received: (qmail 75436 invoked by uid 500); 16 Feb 2004 14:50:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 75237 invoked by uid 500); 16 Feb 2004 14:50:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 75223 invoked from network); 16 Feb 2004 14:50:38 -0000
Received: from unknown (HELO smtprelay02.ispgateway.de) (62.67.200.157)
  by daedalus.apache.org with SMTP; 16 Feb 2004 14:50:38 -0000
Received: (qmail 11402 invoked from network); 16 Feb 2004 14:50:39 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.241.202])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 16 Feb 2004 14:50:39 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 3A4E020BE
	for <lucene-user@jakarta.apache.org>; Mon, 16 Feb 2004 15:50:38 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Did you mean...
Date: Mon, 16 Feb 2004 15:50:37 +0100
User-Agent: KMail/1.6
References: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4C3@afexch3.fao.org>
 <200402161212.42308.lucene@nitwit.de>
In-Reply-To: <200402161212.42308.lucene@nitwit.de>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200402161550.37846.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Monday 16 February 2004 12:12, lucene@nitwit.de wrote:
> deprecated:
>
> String description = doc.getField("contents").stringValue();
> final java.io.Reader r = new StringReader(description);
> final TokenStream in = analyzer.tokenStream(r);
> for (Token token; (token = in.next()) != null; )
> {
> 	System.out.println(token.termText());
> }

Can somebody explain tokenStream() to me?

This is not deprecated:

TokenStream in = new WhitespaceAnalyzer().tokenStream("contents", new 
StringReader(doc.getField("contents").stringValue()));

But what is the first argument (field) for tokenStream() good for? Actually I 
can type whatever I want...? Don't understand the short description in the 
API docs...

Timo

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 15:34:45 2004
Return-Path: 
 <lucene-user-return-7153-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 84166 invoked from network); 16 Feb 2004 15:34:45 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 15:34:45 -0000
Received: (qmail 68152 invoked by uid 500); 16 Feb 2004 15:34:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 68127 invoked by uid 500); 16 Feb 2004 15:34:34 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 68113 invoked from network); 16 Feb 2004 15:34:34 -0000
Received: from unknown (HELO smtprelay02.ispgateway.de) (62.67.200.157)
  by daedalus.apache.org with SMTP; 16 Feb 2004 15:34:34 -0000
Received: (qmail 22713 invoked from network); 16 Feb 2004 15:34:33 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.241.202])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 16 Feb 2004 15:34:33 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 4C5BF246B
	for <lucene-user@jakarta.apache.org>; Mon, 16 Feb 2004 16:34:26 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Did you mean...
Date: Mon, 16 Feb 2004 16:34:25 +0100
User-Agent: KMail/1.6
References: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4C3@afexch3.fao.org>
 <200402161359.41984.lucene@nitwit.de>
 <AF6AEC56-608A-11D8-9FD1-000393A564E6@ehatchersolutions.com>
In-Reply-To: <AF6AEC56-608A-11D8-9FD1-000393A564E6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200402161634.25472.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Monday 16 February 2004 15:16, Erik Hatcher wrote:
> And thus the nature of the problem.  Try using the WhitespaceAnalyzer
> instead to see what you get.

Can I chain multiple analyzer in order to filter common stop words?

Timo

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 18:20:35 2004
Return-Path: 
 <lucene-user-return-7154-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 86039 invoked from network); 16 Feb 2004 18:20:35 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 18:20:35 -0000
Received: (qmail 50816 invoked by uid 500); 16 Feb 2004 18:20:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 50775 invoked by uid 500); 16 Feb 2004 18:20:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 50711 invoked from network); 16 Feb 2004 18:20:17 -0000
Received: from unknown (HELO smtprelay01.ispgateway.de) (62.67.200.156)
  by daedalus.apache.org with SMTP; 16 Feb 2004 18:20:17 -0000
Received: (qmail 1489 invoked from network); 16 Feb 2004 18:20:20 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.241.202])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 16 Feb 2004 18:20:20 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 046FE24A1
	for <lucene-user@jakarta.apache.org>; Mon, 16 Feb 2004 19:20:20 +0100 (CET)
From: lucene@nitwit.de
To: lucene-user@jakarta.apache.org
Subject: Word not in index
Date: Mon, 16 Feb 2004 19:20:20 +0100
User-Agent: KMail/1.6
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Message-Id: <200402161920.20422.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi!

I do build a list of all unique words in all my docs from 
WhitespaceAnalyzer.tokenStream(). I also do index all my docs using a 
GermanAnalyzer in another index. There are plenty of word in the word list 
that don't return any hits when searching the doc index built using the 
GermanAnalyzer - and these are no stop words.

Why is this?

Thanks a lot!
Timo

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 18:35:59 2004
Return-Path: 
 <lucene-user-return-7155-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 91561 invoked from network); 16 Feb 2004 18:35:59 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 18:35:59 -0000
Received: (qmail 71148 invoked by uid 500); 16 Feb 2004 18:35:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 70965 invoked by uid 500); 16 Feb 2004 18:35:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 70951 invoked from network); 16 Feb 2004 18:35:45 -0000
Received: from unknown (HELO smtprelay02.ispgateway.de) (62.67.200.157)
  by daedalus.apache.org with SMTP; 16 Feb 2004 18:35:45 -0000
Received: (qmail 31707 invoked from network); 16 Feb 2004 18:35:48 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.241.202])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 16 Feb 2004 18:35:48 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 62DD824A1
	for <lucene-user@jakarta.apache.org>; Mon, 16 Feb 2004 19:35:47 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Word not in index
Date: Mon, 16 Feb 2004 19:35:46 +0100
User-Agent: KMail/1.6
References: <200402161920.20422.lucene@nitwit.de>
In-Reply-To: <200402161920.20422.lucene@nitwit.de>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Message-Id: <200402161935.46752.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Monday 16 February 2004 19:20, lucene@nitwit.de wrote:
> Why is this?

Another curiosity is that apparently the case does matter: 
"albert" (Einstein :) does return hits, but "Albert" does not - despite the 
docs contain "Albert" and not "albert".

Can somebody explain?

Thanks!
Timo

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 18:45:40 2004
Return-Path: 
 <lucene-user-return-7156-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 96283 invoked from network); 16 Feb 2004 18:45:40 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 18:45:40 -0000
Received: (qmail 93035 invoked by uid 500); 16 Feb 2004 18:45:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 93009 invoked by uid 500); 16 Feb 2004 18:45:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 92944 invoked from network); 16 Feb 2004 18:45:13 -0000
Received: from unknown (HELO mail-in-02.arcor-online.net) (151.189.21.42)
  by daedalus.apache.org with SMTP; 16 Feb 2004 18:45:13 -0000
Received: from arcor.de (dialin-145-254-203-130.arcor-ip.net
 [145.254.203.130])
	by mail-in-02.arcor-online.net (Postfix) with ESMTP id DDD5388C0AF
	for <lucene-user@jakarta.apache.org>; Mon, 16 Feb 2004 19:45:14 +0100 (CET)
Message-ID: <40310FCE.2070404@arcor.de>
Date: Mon, 16 Feb 2004 19:45:34 +0100
From: Markus Spath <mspath@arcor.de>
User-Agent: Mozilla/5.0 (Windows; U; Win98; en-US; rv:1.5) Gecko/20030925
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Word not in index
References: <200402161920.20422.lucene@nitwit.de>
In-Reply-To: <200402161920.20422.lucene@nitwit.de>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

lucene@nitwit.de wrote:
> Hi!
> 
> I do build a list of all unique words in all my docs from 
> WhitespaceAnalyzer.tokenStream(). I also do index all my docs using a 
> GermanAnalyzer in another index. There are plenty of word in the word list 
> that don't return any hits when searching the doc index built using the 
> GermanAnalyzer - and these are no stop words.
> 
> Why is this?
> 

Analyzers preprocess the text to be indexed; different Analyzers will generate 
different text-tokens that are indexed. only you can know which Analyzer fits 
your needs, but you need to apply this one consistently for indexing, searching 
and generating lists of unique words, if you want to get expectable results.

markus


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 18:57:25 2004
Return-Path: 
 <lucene-user-return-7157-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2247 invoked from network); 16 Feb 2004 18:57:25 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 18:57:25 -0000
Received: (qmail 19948 invoked by uid 500); 16 Feb 2004 18:57:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 19913 invoked by uid 500); 16 Feb 2004 18:57:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 19894 invoked from network); 16 Feb 2004 18:57:08 -0000
Received: from unknown (HELO web12707.mail.yahoo.com) (216.136.173.244)
  by daedalus.apache.org with SMTP; 16 Feb 2004 18:57:08 -0000
Message-ID: <20040216185712.53618.qmail@web12707.mail.yahoo.com>
Received: from [195.29.133.189] by web12707.mail.yahoo.com via HTTP;
 Mon, 16 Feb 2004 10:57:12 PST
Date: Mon, 16 Feb 2004 10:57:12 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Word not in index
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <200402161935.46752.lucene@nitwit.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Searches ARE case sensitive, it is just that some Analyzers lowercase
all tokens.  If you are using WhitespaceAnalyzer, then tokens will not
be lowercased, so a search for albert and Albert may yield different
results.

Otis

--- lucene@nitwit.de wrote:
> On Monday 16 February 2004 19:20, lucene@nitwit.de wrote:
> > Why is this?
> 
> Another curiosity is that apparently the case does matter: 
> "albert" (Einstein :) does return hits, but "Albert" does not -
> despite the 
> docs contain "Albert" and not "albert".
> 
> Can somebody explain?
> 
> Thanks!
> Timo
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 19:32:39 2004
Return-Path: 
 <lucene-user-return-7159-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 20473 invoked from network); 16 Feb 2004 19:32:39 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 19:32:39 -0000
Received: (qmail 72125 invoked by uid 500); 16 Feb 2004 19:32:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 72100 invoked by uid 500); 16 Feb 2004 19:32:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 72078 invoked from network); 16 Feb 2004 19:32:24 -0000
Received: from unknown (HELO mail.ntranz.com) (65.19.137.179)
  by daedalus.apache.org with SMTP; 16 Feb 2004 19:32:24 -0000
Received: from [65.19.137.179] by tunes0320w
  (ArGoSoft Mail Server Pro for WinNT/2000/XP, Version 1.8 (1.8.4.0));
 Mon, 16 Feb 2004 11:25:27 -0800
From: "hema@searchendjobs.com" <hema@searchendjobs.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
X-ArGoMail-Auto-Response: Yes
Subject: thanks for your mail
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Message-ID: <8g734tlj4rwqc8g.160220041125@mail.ntranz.com>
Date: Mon, 16 Feb 2004 11:25:27 -0800
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Received your mail we will get back to you shortly


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 19:32:33 2004
Return-Path: 
 <lucene-user-return-7158-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 20407 invoked from network); 16 Feb 2004 19:32:33 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 19:32:33 -0000
Received: (qmail 71330 invoked by uid 500); 16 Feb 2004 19:32:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 71296 invoked by uid 500); 16 Feb 2004 19:32:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 71282 invoked from network); 16 Feb 2004 19:32:18 -0000
Received: from unknown (HELO smtprelay01.ispgateway.de) (62.67.200.156)
  by daedalus.apache.org with SMTP; 16 Feb 2004 19:32:18 -0000
Received: (qmail 14634 invoked from network); 16 Feb 2004 19:32:21 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.241.202])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 16 Feb 2004 19:32:21 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 06D2E2498
	for <lucene-user@jakarta.apache.org>; Mon, 16 Feb 2004 20:32:23 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Word not in index
Date: Mon, 16 Feb 2004 20:32:22 +0100
User-Agent: KMail/1.6
References: <20040216185712.53618.qmail@web12707.mail.yahoo.com>
In-Reply-To: <20040216185712.53618.qmail@web12707.mail.yahoo.com>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200402162032.22418.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Monday 16 February 2004 19:57, Otis Gospodnetic wrote:
> Searches ARE case sensitive, it is just that some Analyzers lowercase
> all tokens.  If you are using WhitespaceAnalyzer, then tokens will not

GermanAnalyzer apparently is one of them. Too bad :-( Is there a 
case-sensitive alternative out there?

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 19:36:26 2004
Return-Path: 
 <lucene-user-return-7160-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 23120 invoked from network); 16 Feb 2004 19:36:26 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 19:36:26 -0000
Received: (qmail 82854 invoked by uid 500); 16 Feb 2004 19:36:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 82817 invoked by uid 500); 16 Feb 2004 19:36:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 82783 invoked from network); 16 Feb 2004 19:36:10 -0000
Received: from unknown (HELO smtprelay01.ispgateway.de) (62.67.200.156)
  by daedalus.apache.org with SMTP; 16 Feb 2004 19:36:10 -0000
Received: (qmail 15188 invoked from network); 16 Feb 2004 19:36:13 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.241.202])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 16 Feb 2004 19:36:13 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id B7BC724A1
	for <lucene-user@jakarta.apache.org>; Mon, 16 Feb 2004 20:36:15 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Word not in index
Date: Mon, 16 Feb 2004 20:36:15 +0100
User-Agent: KMail/1.6
References: <200402161920.20422.lucene@nitwit.de> <40310FCE.2070404@arcor.de>
In-Reply-To: <40310FCE.2070404@arcor.de>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200402162036.15340.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Monday 16 February 2004 19:45, Markus Spath wrote:
> Analyzers preprocess the text to be indexed; different Analyzers will
> generate different text-tokens that are indexed. only you can know which
> Analyzer fits your needs, but you need to apply this one consistently for
> indexing, searching and generating lists of unique words, if you want to
> get expectable results.

Well, not sure whether I understood.

GermanAnalyzer - just as any other analyzer - does index all word except stop 
words, right? What's actually the sense of a search engine if I cannot search 
for words in the text? :-)

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 19:54:39 2004
Return-Path: 
 <lucene-user-return-7161-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 33966 invoked from network); 16 Feb 2004 19:54:39 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 19:54:39 -0000
Received: (qmail 28537 invoked by uid 500); 16 Feb 2004 19:54:25 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 28289 invoked by uid 500); 16 Feb 2004 19:54:23 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 28276 invoked from network); 16 Feb 2004 19:54:23 -0000
Received: from unknown (HELO web12705.mail.yahoo.com) (216.136.173.242)
  by daedalus.apache.org with SMTP; 16 Feb 2004 19:54:23 -0000
Message-ID: <20040216195428.92548.qmail@web12705.mail.yahoo.com>
Received: from [195.29.133.189] by web12705.mail.yahoo.com via HTTP;
 Mon, 16 Feb 2004 11:54:28 PST
Date: Mon, 16 Feb 2004 11:54:28 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Word not in index
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <200402162032.22418.lucene@nitwit.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Custom? :)

Otis

--- lucene@nitwit.de wrote:
> On Monday 16 February 2004 19:57, Otis Gospodnetic wrote:
> > Searches ARE case sensitive, it is just that some Analyzers
> lowercase
> > all tokens.  If you are using WhitespaceAnalyzer, then tokens will
> not
> 
> GermanAnalyzer apparently is one of them. Too bad :-( Is there a 
> case-sensitive alternative out there?
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 19:56:44 2004
Return-Path: 
 <lucene-user-return-7162-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 34728 invoked from network); 16 Feb 2004 19:56:44 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 19:56:44 -0000
Received: (qmail 30971 invoked by uid 500); 16 Feb 2004 19:56:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 30930 invoked by uid 500); 16 Feb 2004 19:56:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 30871 invoked from network); 16 Feb 2004 19:56:28 -0000
Received: from unknown (HELO web12702.mail.yahoo.com) (216.136.173.239)
  by daedalus.apache.org with SMTP; 16 Feb 2004 19:56:28 -0000
Message-ID: <20040216195633.57013.qmail@web12702.mail.yahoo.com>
Received: from [195.29.133.189] by web12702.mail.yahoo.com via HTTP;
 Mon, 16 Feb 2004 11:56:33 PST
Date: Mon, 16 Feb 2004 11:56:33 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Word not in index
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <200402162036.15340.lucene@nitwit.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Timo, by the nature of your questions it seems like you didn't see the
Articles section of Lucene's site.  There are links to several articles
there.  A few of them explain indexing (intro + more advanced), at
least one explains QueryParser and maybe Analyzer, and a few explain
vanilla searching.

Otis

--- lucene@nitwit.de wrote:
> On Monday 16 February 2004 19:45, Markus Spath wrote:
> > Analyzers preprocess the text to be indexed; different Analyzers
> will
> > generate different text-tokens that are indexed. only you can know
> which
> > Analyzer fits your needs, but you need to apply this one
> consistently for
> > indexing, searching and generating lists of unique words, if you
> want to
> > get expectable results.
> 
> Well, not sure whether I understood.
> 
> GermanAnalyzer - just as any other analyzer - does index all word
> except stop 
> words, right? What's actually the sense of a search engine if I
> cannot search 
> for words in the text? :-)
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 19:57:32 2004
Return-Path: 
 <lucene-user-return-7163-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 35070 invoked from network); 16 Feb 2004 19:57:32 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 19:57:32 -0000
Received: (qmail 32262 invoked by uid 500); 16 Feb 2004 19:57:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 32155 invoked by uid 500); 16 Feb 2004 19:57:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 32021 invoked from network); 16 Feb 2004 19:57:07 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.84)
  by daedalus.apache.org with SMTP; 16 Feb 2004 19:57:07 -0000
Received: (cpmta 2199 invoked from network); 16 Feb 2004 11:57:11 -0800
Received: from 128.143.26.2 (HELO ?128.143.26.2?)
  by smtp.hatcher.net (209.228.32.84) with SMTP; 16 Feb 2004 11:57:11 -0800
X-Sent: 16 Feb 2004 19:57:11 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <200402161550.37846.lucene@nitwit.de>
References: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4C3@afexch3.fao.org>
 <200402161212.42308.lucene@nitwit.de> <200402161550.37846.lucene@nitwit.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <46133235-60BA-11D8-90EC-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Did you mean...
Date: Mon, 16 Feb 2004 14:56:56 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 16, 2004, at 9:50 AM, lucene@nitwit.de wrote:
> Can somebody explain tokenStream() to me?

You are now venturing under the covers of Lucene's API.  This is where 
I give the sage advice to get the Lucene source code and surf around it 
a bit.  (It helps to have a nice IDE where you can click around classes 
and see the object hierarchy easily)

TokenStream is used by the Analyzer to split text into terms.

> TokenStream in = new WhitespaceAnalyzer().tokenStream("contents", new
> StringReader(doc.getField("contents").stringValue()));
>
> But what is the first argument (field) for tokenStream() good for? 
> Actually I
> can type whatever I want...? Don't understand the short description in 
> the
> API docs...

The field is the field name.  No built-in analyzers use it, but custom 
analyzers could key off of it to do field-specific analysis.  Look at 
the PerFieldAnalyzerWrapper to make per-field analysis easier than 
writing a custom one that keys off the field name.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 19:58:59 2004
Return-Path: 
 <lucene-user-return-7164-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 36090 invoked from network); 16 Feb 2004 19:58:59 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 19:58:59 -0000
Received: (qmail 38233 invoked by uid 500); 16 Feb 2004 19:58:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 38188 invoked by uid 500); 16 Feb 2004 19:58:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 38167 invoked from network); 16 Feb 2004 19:58:43 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.83)
  by daedalus.apache.org with SMTP; 16 Feb 2004 19:58:43 -0000
Received: (cpmta 8076 invoked from network); 16 Feb 2004 11:58:48 -0800
Received: from 128.143.26.2 (HELO ?128.143.26.2?)
  by smtp.hatcher.net (209.228.32.83) with SMTP; 16 Feb 2004 11:58:48 -0800
X-Sent: 16 Feb 2004 19:58:48 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <200402161634.25472.lucene@nitwit.de>
References: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4C3@afexch3.fao.org>
 <200402161359.41984.lucene@nitwit.de>
 <AF6AEC56-608A-11D8-9FD1-000393A564E6@ehatchersolutions.com>
 <200402161634.25472.lucene@nitwit.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <87D78C38-60BA-11D8-90EC-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Did you mean...
Date: Mon, 16 Feb 2004 14:58:46 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 16, 2004, at 10:34 AM, lucene@nitwit.de wrote:
> On Monday 16 February 2004 15:16, Erik Hatcher wrote:
>> And thus the nature of the problem.  Try using the WhitespaceAnalyzer
>> instead to see what you get.
>
> Can I chain multiple analyzer in order to filter common stop words?

You cannot chain Analyzers per se, but you can easily write a custom 
analyzer that does chaining of all of the various operations like stop 
word removal, lower-casing, stemming, filtering, etc.  Have a peek at 
the source code of your favorite analyzers to get an idea of how these 
are built - and you will see how simply they are put together.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 20:01:23 2004
Return-Path: 
 <lucene-user-return-7165-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 37708 invoked from network); 16 Feb 2004 20:01:23 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 20:01:23 -0000
Received: (qmail 42691 invoked by uid 500); 16 Feb 2004 20:01:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 42511 invoked by uid 500); 16 Feb 2004 20:01:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 42498 invoked from network); 16 Feb 2004 20:01:08 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.83)
  by daedalus.apache.org with SMTP; 16 Feb 2004 20:01:08 -0000
Received: (cpmta 10339 invoked from network); 16 Feb 2004 12:01:12 -0800
Received: from 128.143.26.2 (HELO ?128.143.26.2?)
  by smtp.hatcher.net (209.228.32.83) with SMTP; 16 Feb 2004 12:01:12 -0800
X-Sent: 16 Feb 2004 20:01:12 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <200402161935.46752.lucene@nitwit.de>
References: <200402161920.20422.lucene@nitwit.de>
 <200402161935.46752.lucene@nitwit.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <DC31EFFF-60BA-11D8-90EC-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Word not in index
Date: Mon, 16 Feb 2004 15:01:08 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Timo,

You are asking a lot of good questions, but also questions for which 
answers already exist.  Just dig a little deeper and you will see.  
Have a look at my java.net article (titled "Lucene Intro") and you will 
find utility code that hilights how analyzers work.  Tinker with that a 
bit, then come back and ask further questions :))

	Erik


On Feb 16, 2004, at 1:35 PM, lucene@nitwit.de wrote:

> On Monday 16 February 2004 19:20, lucene@nitwit.de wrote:
>> Why is this?
>
> Another curiosity is that apparently the case does matter:
> "albert" (Einstein :) does return hits, but "Albert" does not - 
> despite the
> docs contain "Albert" and not "albert".
>
> Can somebody explain?
>
> Thanks!
> Timo
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 20:06:45 2004
Return-Path: 
 <lucene-user-return-7166-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 40539 invoked from network); 16 Feb 2004 20:06:45 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 20:06:45 -0000
Received: (qmail 55798 invoked by uid 500); 16 Feb 2004 20:06:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 55770 invoked by uid 500); 16 Feb 2004 20:06:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 55752 invoked from network); 16 Feb 2004 20:06:28 -0000
Received: from unknown (HELO hi-net.cz) (62.77.118.60)
  by daedalus.apache.org with SMTP; 16 Feb 2004 20:06:28 -0000
Received: (qmail 21383 invoked from network); 16 Feb 2004 20:06:32 -0000
Received: from unknown (HELO fw.egothor.org) (62.77.93.14)
  by mail.hi-net.cz with SMTP; 16 Feb 2004 20:06:32 -0000
Received: from seznam.cz (0-3.shark [192.168.0.3])
	by fw.egothor.org (8.12.9/8.12.9) with ESMTP id i1GK6WlL011619
	for <lucene-user@jakarta.apache.org>; Mon, 16 Feb 2004 21:06:33 +0100 (CET)
Message-ID: <403122C8.9070802@seznam.cz>
Date: Mon, 16 Feb 2004 21:06:32 +0100
From: Leo Galambos <Leo.G@seznam.cz>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040211
X-Accept-Language: cs, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: thanks for your mail
References: <8g734tlj4rwqc8g.160220041125@mail.ntranz.com>
In-Reply-To: <8g734tlj4rwqc8g.160220041125@mail.ntranz.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Could an admin filter out hema's e-mails, please?

THX
Leo

hema@searchendjobs.com wrote:

>Received your mail we will get back to you shortly
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 20:35:29 2004
Return-Path: 
 <lucene-user-return-7167-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 62119 invoked from network); 16 Feb 2004 20:35:29 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 20:35:29 -0000
Received: (qmail 96893 invoked by uid 500); 16 Feb 2004 20:35:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 96792 invoked by uid 500); 16 Feb 2004 20:35:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 96778 invoked from network); 16 Feb 2004 20:35:13 -0000
Received: from unknown (HELO smtprelay01.ispgateway.de) (62.67.200.156)
  by daedalus.apache.org with SMTP; 16 Feb 2004 20:35:13 -0000
Received: (qmail 23556 invoked from network); 16 Feb 2004 20:35:17 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.241.202])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 16 Feb 2004 20:35:17 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id B9C9C24A1
	for <lucene-user@jakarta.apache.org>; Mon, 16 Feb 2004 21:35:20 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Word not in index
Date: Mon, 16 Feb 2004 21:35:20 +0100
User-Agent: KMail/1.6
References: <20040216195633.57013.qmail@web12702.mail.yahoo.com>
In-Reply-To: <20040216195633.57013.qmail@web12702.mail.yahoo.com>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200402162135.20479.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Monday 16 February 2004 20:56, Otis Gospodnetic wrote:
> Timo, by the nature of your questions it seems like you didn't see the
> Articles section of Lucene's site.  There are links to several articles
>
> --- lucene@nitwit.de wrote:
> > Well, not sure whether I understood.

Well, was actually a case problem, too... :)

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 22:00:44 2004
Return-Path: 
 <lucene-user-return-7168-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 10633 invoked from network); 16 Feb 2004 22:00:44 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 22:00:44 -0000
Received: (qmail 52702 invoked by uid 500); 16 Feb 2004 22:00:25 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52657 invoked by uid 500); 16 Feb 2004 22:00:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 52581 invoked from network); 16 Feb 2004 22:00:24 -0000
Received: from unknown (HELO smtp03.mrf.mail.rcn.net) (207.172.4.62)
  by daedalus.apache.org with SMTP; 16 Feb 2004 22:00:24 -0000
Received: from 208-59-172-198.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com
 ([208.59.172.198] helo=aleph1.smart.net)
	by smtp03.mrf.mail.rcn.net with esmtp (Exim 3.35 #4)
	id 1Asqn0-0007UN-00
	for lucene-user@jakarta.apache.org; Mon, 16 Feb 2004 17:00:30 -0500
Message-Id: <5.0.2.1.2.20040216165247.02e6ed20@pop3.smart.net>
X-Sender: dbd@pop3.smart.net
X-Mailer: QUALCOMM Windows Eudora Version 5.0.2
Date: Mon, 16 Feb 2004 17:06:06 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: "Daniel B. Davis" <dbd@smart.net>
Subject: Re: 'Sponsored' links
In-Reply-To: <s02f980b.040@gwia201.syr.edu>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The index contains documents, an unknown number of which are 
sponsored.  The number of sponsors are small, not necessarily the documents 
count.  In all of #1, #2, and #3, the sponsorship information must be 
accessed to determine sponsorship, and that information is indeed outside 
of the primary document index; Lucene is used as a convenient way to store 
Sponsor's name, boost value, and words or phrases which determine 
sponsorship, but a database could easily be used instead.  I used Lucene 
instead both because I wanted to get deeper into using Lucene, and because 
storing the data with Lucene holds it closer to its eventual use.

At 04:01 PM 2/15/2004 -0500, you wrote:

>Does the sponsored information have to be in the index?  Couldn't you 
>lookup the sponsor info in a database (or something else) after getting 
>back your
>initial results and then re-sort the hit list, moving up the sponsored 
>elements while maintaining the rest of the results as is?  If your list of 
>sponsors are truly that small, you could just put 'em in a file and load 
>the list into memory.
>
>Seems then you don't have to re-index when your sponsorships change and 
>you really have no dependencies on Lucene with
>trying to get boost values right, etc.
>
>I guess this resembles #2.
>
>
> >>> dbd@smart.net 02/15/04 03:49PM >>>
>I am a newbie to Lucene, and this is my first serious posting
>to Lucene-user.
>
>This is to solicit comment upon the problem of supplying
>a "sponsored links" capability within Lucene. This capability
>would not affect at all which documents are returned by a query,
>but would cause any 'sponsored' documents present among the
>results to be displayed before other documents in the list
>returned.
>
>I have looked over the correspondence in Lucene-user, but
>not found anything addressing this topic; if I have missed it,
>please tell me where and when, and ignore the rest of this.
>
>It seems to me that there are three ways to achieve the
>capability:
>
>1. Preset boost values for 'sponsored' documents, with an
>     implied burden of reindexing when sponsors are modified.
>
>2. Post-qualify documents present in the hit list for their
>     sponsorship status, building a new hit list.
>
>3. Modify the query to search using both the full query as
>     an unsponsored boolean clause with the default boost value,
>     and for each sponsor, to repeat the full query ANDed with
>     that sponsor with the appropriate boost value.
>
>Are there other strategies not considered?
>
>Assuming a small list of sponsors (10 or fewer), and low
>volatility amongst the sponsors (1 change / month or less)
>which method is best?
>
>I have been pursuing method #1, almost to the exclusion of
>the others, but have encountered an unknown difficulty in the
>implementation (separate posting).  In particular, while it is clear
>that #3 is doable, I know nothing about the searching burden
>added by multiplying the user's query by one plus the count of
>sponsors.
>
>Regarding #3, if my understanding is right, then:
>     Sponsors name: s1, s2, s3 ...
>              words or phrases: s1w1, s1w2, ... , s2w1, s2w2, ... , s3w1 ....
>              boost values: s1v, s2v, s3v
>
>     then given query q as user input, form:
>              q
>              or (q and (s1w1 | s1w2 | s1w3 | ...)^s1v)
>              or (q and (s2w1 | s2w2 ...)^s2v)
>              or (q and (s3w1 ...)^s3v)
>Is this correct?
>
>Does the strategy of search identify any kind of intermediate
>sublist to speed up searching? (But then it would start to
>resemble #2.)
>
>Rolling ones own for #2 would run query q, and get the
>HitCollector. Separately running queries for each of:
>              s1w1 | s1w2 | s1w3 | ...,
>              s2w1 | s2w2 ...
>              s3w1 ...
>and merge each hit collector with the one from query q.
>(Just AND the bitsets???) Lastly adjust scores and form
>a new composite HitCollecter.  By this time I have told
>everyone much more than I know.
>
>Stray thought:-- can HitCollectors be cached at application init?
>
>There are many other questions regarding details of implementation,
>but their proper place is another communication.
>
>Just by preparing this document for dissemination has helped
>greatly.  All and any comments are much appreciated.
>
>Thank you all.
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 16 22:27:57 2004
Return-Path: 
 <lucene-user-return-7169-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 24990 invoked from network); 16 Feb 2004 22:27:57 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 16 Feb 2004 22:27:57 -0000
Received: (qmail 4681 invoked by uid 500); 16 Feb 2004 22:27:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 4656 invoked by uid 500); 16 Feb 2004 22:27:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 4643 invoked from network); 16 Feb 2004 22:27:39 -0000
Received: from unknown (HELO rwcrmhc13.comcast.net) (204.127.198.39)
  by daedalus.apache.org with SMTP; 16 Feb 2004 22:27:39 -0000
Received: from apache.org (c-24-5-145-151.client.comcast.net[24.5.145.151])
          by comcast.net (rwcrmhc13) with ESMTP
          id <2004021622274601500ggo85e>; Mon, 16 Feb 2004 22:27:46 +0000
Message-ID: <403143E1.7000607@apache.org>
Date: Mon, 16 Feb 2004 14:27:45 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040116
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: 'Sponsored' links
References: <5.0.2.1.2.20040215154529.02d82df0@pop3.smart.net>
In-Reply-To: <5.0.2.1.2.20040215154529.02d82df0@pop3.smart.net>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Daniel B. Davis wrote:
> Are there other strategies not considered?

Why not store sponsored documents in a separate index, separately 
searched, whose results are placed above those from the non-sponsored 
documents?

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 17 11:48:21 2004
Return-Path: 
 <lucene-user-return-7171-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 71845 invoked from network); 17 Feb 2004 11:48:21 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 17 Feb 2004 11:48:21 -0000
Received: (qmail 336 invoked by uid 500); 17 Feb 2004 11:48:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 295 invoked by uid 500); 17 Feb 2004 11:48:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 248 invoked from network); 17 Feb 2004 11:48:12 -0000
Received: from unknown (HELO mail.ntranz.com) (65.19.137.179)
  by daedalus.apache.org with SMTP; 17 Feb 2004 11:48:12 -0000
Received: from [65.19.137.179] by tunes0320w
  (ArGoSoft Mail Server Pro for WinNT/2000/XP, Version 1.8 (1.8.4.0));
 Tue, 17 Feb 2004 03:41:11 -0800
From: "hema@searchendjobs.com" <hema@searchendjobs.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
X-ArGoMail-Auto-Response: Yes
Subject: thanks for your mail
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Message-ID: <5get8dzytdaadna.170220040341@mail.ntranz.com>
Date: Tue, 17 Feb 2004 03:41:11 -0800
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Received your mail we will get back to you shortly


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 17 11:48:15 2004
Return-Path: 
 <lucene-user-return-7170-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 71746 invoked from network); 17 Feb 2004 11:48:15 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 17 Feb 2004 11:48:15 -0000
Received: (qmail 99047 invoked by uid 500); 17 Feb 2004 11:48:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 99014 invoked by uid 500); 17 Feb 2004 11:48:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 98867 invoked from network); 17 Feb 2004 11:48:01 -0000
Received: from unknown (HELO smtprelay01.ispgateway.de) (62.67.200.156)
  by daedalus.apache.org with SMTP; 17 Feb 2004 11:48:01 -0000
Received: (qmail 12572 invoked from network); 17 Feb 2004 11:47:58 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.226.69])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 17 Feb 2004 11:47:58 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id F38D022D6
	for <lucene-user@jakarta.apache.org>; Tue, 17 Feb 2004 12:47:58 +0100 (CET)
From: lucene@nitwit.de
To: lucene-user@jakarta.apache.org
Subject: Multiple equal Fields?
Date: Tue, 17 Feb 2004 12:47:58 +0100
User-Agent: KMail/1.6
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Message-Id: <200402171247.58508.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi!
What happens if I do this:

doc.add(Field.Text("foo", "bar"));
doc.add(Field.Text("foo", "blah"));

Is there a field "foo" with value "blah" or are there two "foo"s (actually not 
possible) or is there one "foo" with the values "bar" and "blah"?

And what does happen in this case:

doc.add(Field.Text("foo", "bar"));
doc.add(Field.Text("foo", "bar"));
doc.add(Field.Text("foo", "bar"));

Does lucene store this only once?

Timo

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 17 11:54:04 2004
Return-Path: 
 <lucene-user-return-7172-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74220 invoked from network); 17 Feb 2004 11:54:04 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 17 Feb 2004 11:54:04 -0000
Received: (qmail 11348 invoked by uid 500); 17 Feb 2004 11:53:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 11298 invoked by uid 500); 17 Feb 2004 11:53:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 11216 invoked from network); 17 Feb 2004 11:53:55 -0000
Received: from unknown (HELO smtprelay01.ispgateway.de) (62.67.200.156)
  by daedalus.apache.org with SMTP; 17 Feb 2004 11:53:55 -0000
Received: (qmail 14032 invoked from network); 17 Feb 2004 11:53:54 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.226.69])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 17 Feb 2004 11:53:54 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id D718322D6
	for <lucene-user@jakarta.apache.org>; Tue, 17 Feb 2004 12:53:54 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Did you mean...
Date: Tue, 17 Feb 2004 12:53:54 +0100
User-Agent: KMail/1.6
References: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4C3@afexch3.fao.org>
 <200402161550.37846.lucene@nitwit.de>
 <46133235-60BA-11D8-90EC-000393A564E6@ehatchersolutions.com>
In-Reply-To: <46133235-60BA-11D8-90EC-000393A564E6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200402171253.54461.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Monday 16 February 2004 20:56, Erik Hatcher wrote:
> On Feb 16, 2004, at 9:50 AM, lucene@nitwit.de wrote:
> > TokenStream in = new WhitespaceAnalyzer().tokenStream("contents", new
> > StringReader(doc.getField("contents").stringValue()));
>
> The field is the field name.  No built-in analyzers use it, but custom
> analyzers could key off of it to do field-specific analysis.  Look at

If I want to tokenize all Fields I would have to get a tokenStream of each 
Field seperately and process them seperately? Or can I get one "master 
stream" that compounds all Fields?

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 17 13:53:19 2004
Return-Path: 
 <lucene-user-return-7173-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 37271 invoked from network); 17 Feb 2004 13:53:19 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 17 Feb 2004 13:53:19 -0000
Received: (qmail 49089 invoked by uid 500); 17 Feb 2004 13:53:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49067 invoked by uid 500); 17 Feb 2004 13:53:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49049 invoked from network); 17 Feb 2004 13:53:10 -0000
Received: from unknown (HELO server1.hostmon.com) (66.139.76.19)
  by daedalus.apache.org with SMTP; 17 Feb 2004 13:53:10 -0000
Received: (qmail 3313 invoked by uid 532); 17 Feb 2004 13:50:29 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with
 qmail-scanner-1.16
 (spamassassin: 2.61.  Clear:.
 Processed in 0.106795 secs); 17 Feb 2004 13:50:29 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 17 Feb 2004 13:50:29 -0000
Message-ID: <40321CC7.7090007@tropo.com>
Date: Tue, 17 Feb 2004 05:53:11 -0800
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;
 rv:1.5) Gecko/20031007
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: ppt text extraction - Re: SearchBlox J2EE Search Component Version
 1.2 released
References: <4030ADEA.3070407@searchblox.com>
 <001201c3f489$2b955650$c300000a@caliente>
In-Reply-To: <001201c3f489$2b955650$c300000a@caliente>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Eric Jain wrote:

>>- Support for PowerPoint documents
>>    
>>
>
>May I ask how you extract text from PowerPoint documents? Any open
>source tool, or your own code?
>  
>

FYI I recently discovered "ppthtml" in this package: 
http://chicago.sourceforge.net/xlhtml/

Also "antiword" seems to work well for word docs.

Also also also....I use a utility from xpdf 
(http://www.foolabs.com/xpdf/) for pdf text
extraction.

When you get down to it, I have found that "portable c" tools (above) 
work better
than the pure java ones avail.  To be fair however I have found that POI 
does work fine
for XLS docs.

 - Dave

>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 17 14:19:04 2004
Return-Path: 
 <lucene-user-return-7174-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54964 invoked from network); 17 Feb 2004 14:19:04 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 17 Feb 2004 14:19:04 -0000
Received: (qmail 692 invoked by uid 500); 17 Feb 2004 14:18:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 670 invoked by uid 500); 17 Feb 2004 14:18:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 656 invoked from network); 17 Feb 2004 14:18:55 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.65)
  by daedalus.apache.org with SMTP; 17 Feb 2004 14:18:55 -0000
Received: (cpmta 7382 invoked from network); 17 Feb 2004 06:18:56 -0800
Received: from 128.143.135.26 (HELO ?128.143.135.26?)
  by smtp.hatcher.net (209.228.32.65) with SMTP; 17 Feb 2004 06:18:56 -0800
X-Sent: 17 Feb 2004 14:18:56 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <200402171253.54461.lucene@nitwit.de>
References: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4C3@afexch3.fao.org>
 <200402161550.37846.lucene@nitwit.de>
 <46133235-60BA-11D8-90EC-000393A564E6@ehatchersolutions.com>
 <200402171253.54461.lucene@nitwit.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <36C661C6-6154-11D8-89F6-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Did you mean...
Date: Tue, 17 Feb 2004 09:18:53 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 17, 2004, at 6:53 AM, lucene@nitwit.de wrote:
> On Monday 16 February 2004 20:56, Erik Hatcher wrote:
>> On Feb 16, 2004, at 9:50 AM, lucene@nitwit.de wrote:
>>> TokenStream in = new WhitespaceAnalyzer().tokenStream("contents", new
>>> StringReader(doc.getField("contents").stringValue()));
>>
>> The field is the field name.  No built-in analyzers use it, but custom
>> analyzers could key off of it to do field-specific analysis.  Look at
>
> If I want to tokenize all Fields I would have to get a tokenStream of 
> each
> Field seperately and process them seperately? Or can I get one "master
> stream" that compounds all Fields?

You would do them separately.  I'm not clear on what you are trying to 
do.  The Analyzer does all this during indexing automatically for you, 
but it sounds like you are just trying to emulate what an Analyzer 
already does to extract words from text?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 17 14:58:42 2004
Return-Path: 
 <lucene-user-return-7175-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 84760 invoked from network); 17 Feb 2004 14:58:42 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 17 Feb 2004 14:58:42 -0000
Received: (qmail 13302 invoked by uid 500); 17 Feb 2004 14:58:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 13078 invoked by uid 500); 17 Feb 2004 14:58:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 13064 invoked from network); 17 Feb 2004 14:58:32 -0000
Received: from unknown (HELO smtprelay02.ispgateway.de) (62.67.200.157)
  by daedalus.apache.org with SMTP; 17 Feb 2004 14:58:32 -0000
Received: (qmail 15096 invoked from network); 17 Feb 2004 14:58:32 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.226.69])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 17 Feb 2004 14:58:32 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 5A9C122D6
	for <lucene-user@jakarta.apache.org>; Tue, 17 Feb 2004 15:58:36 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Did you mean...
Date: Tue, 17 Feb 2004 15:58:36 +0100
User-Agent: KMail/1.6
References: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4C3@afexch3.fao.org>
 <200402171253.54461.lucene@nitwit.de>
 <36C661C6-6154-11D8-89F6-000393A564E6@ehatchersolutions.com>
In-Reply-To: <36C661C6-6154-11D8-89F6-000393A564E6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200402171558.36191.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Tuesday 17 February 2004 15:18, Erik Hatcher wrote:
> You would do them separately.  I'm not clear on what you are trying to
> do.  The Analyzer does all this during indexing automatically for you,
> but it sounds like you are just trying to emulate what an Analyzer
> already does to extract words from text?

I am still doing this:

TokenStream in = analyzer.tokenStream("contents", new 
StringReader(reader.document(i).getField("contents").stringValue()));

And I want to extract all words from all Fields.

Timo

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 17 15:06:49 2004
Return-Path: 
 <lucene-user-return-7176-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 89099 invoked from network); 17 Feb 2004 15:06:49 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 17 Feb 2004 15:06:49 -0000
Received: (qmail 36983 invoked by uid 500); 17 Feb 2004 15:06:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 36960 invoked by uid 500); 17 Feb 2004 15:06:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 36916 invoked from network); 17 Feb 2004 15:06:38 -0000
Received: from unknown (HELO tdsupport.ksc.nasa.gov) (163.205.16.2)
  by daedalus.apache.org with SMTP; 17 Feb 2004 15:06:38 -0000
Received: from tdryan ([163.205.218.126])
	by tdsupport.ksc.nasa.gov (8.11.6/8.11.6) with SMTP id i1HEYBq22698
	for <lucene-user@jakarta.apache.org>; Tue, 17 Feb 2004 09:34:12 -0500
Message-ID: <005401c3f568$3cd74290$7edacda3@tdryan>
Reply-To: "Ryan Ackley" <sackley@apache.org>
From: "Ryan Ackley" <sackley@cfl.rr.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <4030ADEA.3070407@searchblox.com>
 <001201c3f489$2b955650$c300000a@caliente> <40321CC7.7090007@tropo.com>
Subject: Re: ppt text extraction - Re: SearchBlox J2EE Search Component
 Version 1.2 released
Date: Tue, 17 Feb 2004 10:10:53 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> When you get down to it, I have found that "portable c" tools (above)
> work better
> than the pure java ones avail.  To be fair however I have found that POI
> does work fine
> for XLS docs.

Gee thanks, your so generous with your praise.

I would recommend the OpenOffice SDK if you don't mind "portable c". It
supports all the possible MS Office formats going back to the dark ages. It
has a built-in Java programming interface, you don't have to compile it
yourself using cygwin, and it has a huge team of developers working 40+
hours a week to squash any bugs.

-Ryan


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 17 15:13:56 2004
Return-Path: 
 <lucene-user-return-7177-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 92246 invoked from network); 17 Feb 2004 15:13:56 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 17 Feb 2004 15:13:56 -0000
Received: (qmail 63926 invoked by uid 500); 17 Feb 2004 15:13:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 63900 invoked by uid 500); 17 Feb 2004 15:13:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 63882 invoked from network); 17 Feb 2004 15:13:44 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.77)
  by daedalus.apache.org with SMTP; 17 Feb 2004 15:13:44 -0000
Received: (cpmta 24448 invoked from network); 17 Feb 2004 07:13:46 -0800
Received: from 128.143.135.26 (HELO ?128.143.135.26?)
  by smtp.hatcher.net (209.228.32.77) with SMTP; 17 Feb 2004 07:13:46 -0800
X-Sent: 17 Feb 2004 15:13:46 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <200402171558.36191.lucene@nitwit.de>
References: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4C3@afexch3.fao.org>
 <200402171253.54461.lucene@nitwit.de>
 <36C661C6-6154-11D8-89F6-000393A564E6@ehatchersolutions.com>
 <200402171558.36191.lucene@nitwit.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <DF9B2A0B-615B-11D8-89F6-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Did you mean...
Date: Tue, 17 Feb 2004 10:13:42 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 17, 2004, at 9:58 AM, lucene@nitwit.de wrote:
> On Tuesday 17 February 2004 15:18, Erik Hatcher wrote:
>> You would do them separately.  I'm not clear on what you are trying to
>> do.  The Analyzer does all this during indexing automatically for you,
>> but it sounds like you are just trying to emulate what an Analyzer
>> already does to extract words from text?
>
> I am still doing this:
>
> TokenStream in = analyzer.tokenStream("contents", new
> StringReader(reader.document(i).getField("contents").stringValue()));
>
> And I want to extract all words from all Fields.


The "words" (or "terms") are already in the index ready to be read very 
rapidly and accurately.  IndexReader is what you want to investigate if 
your fields are indexed.

Look into IndexReader and pull the terms directly rather than 
re-"analyzing" the text.  Provided "contents" was an indexed field, you 
could do something like this (taken from a mini-project I'm tinkering 
with right now):

   public String[] wordsThatStartWith(char c) throws IOException {
     String letter = new String("" + c).toLowerCase();

     ArrayList words = new ArrayList();
     if (reader == null) {
       reader = IndexReader.open(indexPath);
     }

     TermEnum terms = reader.terms(new Term("word", letter));
     while ("word".equals(terms.term().field())) {

       String word = terms.term().text();
       if (word.startsWith(letter)) {
         words.add(word);
       } else {
         break;
       }

       if (!terms.next()) {
         break;
       }
     }

     Collections.sort(words);

     String[] sortedWords = (String[]) words.toArray(new String[0]);

     return sortedWords;
   }

You'll need to do some adapting of this code to your environment and 
field(s), as what is here is designed to pull all the "word"'s that 
start with a specified letter.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 17 16:39:21 2004
Return-Path: 
 <lucene-user-return-7178-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 42242 invoked from network); 17 Feb 2004 16:39:21 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 17 Feb 2004 16:39:21 -0000
Received: (qmail 40176 invoked by uid 500); 17 Feb 2004 16:39:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 40144 invoked by uid 500); 17 Feb 2004 16:39:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 40090 invoked from network); 17 Feb 2004 16:39:06 -0000
Received: from unknown (HELO smtprelay01.ispgateway.de) (62.67.200.156)
  by daedalus.apache.org with SMTP; 17 Feb 2004 16:39:06 -0000
Received: (qmail 14024 invoked from network); 17 Feb 2004 16:39:08 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.226.69])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 17 Feb 2004 16:39:08 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 3164622D6
	for <lucene-user@jakarta.apache.org>; Tue, 17 Feb 2004 17:39:12 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Did you mean...
Date: Tue, 17 Feb 2004 17:39:11 +0100
User-Agent: KMail/1.6
References: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4C3@afexch3.fao.org>
 <200402171558.36191.lucene@nitwit.de>
 <DF9B2A0B-615B-11D8-89F6-000393A564E6@ehatchersolutions.com>
In-Reply-To: <DF9B2A0B-615B-11D8-89F6-000393A564E6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200402171739.11571.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Tuesday 17 February 2004 16:13, Erik Hatcher wrote:
> The "words" (or "terms") are already in the index ready to be read very
> rapidly and accurately.  IndexReader is what you want to investigate if
> your fields are indexed.
>
> Look into IndexReader and pull the terms directly rather than
> re-"analyzing" the text.  Provided "contents" was an indexed field, you

Well, but my index was created using a GermanAnalyzer. I have to re-analyze it 
with WhitespaceAnalyzer if I don't want the words to be truncated...

What you do is what I did at the beginning of the thread :-)

Timo

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 17 17:05:35 2004
Return-Path: 
 <lucene-user-return-7179-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58285 invoked from network); 17 Feb 2004 17:05:35 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 17 Feb 2004 17:05:35 -0000
Received: (qmail 23122 invoked by uid 500); 17 Feb 2004 17:05:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 23088 invoked by uid 500); 17 Feb 2004 17:05:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 23033 invoked from network); 17 Feb 2004 17:05:09 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.72)
  by daedalus.apache.org with SMTP; 17 Feb 2004 17:05:09 -0000
Received: (cpmta 6740 invoked from network); 17 Feb 2004 09:05:12 -0800
Received: from 128.143.135.26 (HELO ?128.143.135.26?)
  by smtp.hatcher.net (209.228.32.72) with SMTP; 17 Feb 2004 09:05:12 -0800
X-Sent: 17 Feb 2004 17:05:12 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <200402171739.11571.lucene@nitwit.de>
References: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4C3@afexch3.fao.org>
 <200402171558.36191.lucene@nitwit.de>
 <DF9B2A0B-615B-11D8-89F6-000393A564E6@ehatchersolutions.com>
 <200402171739.11571.lucene@nitwit.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <6FF0E270-616B-11D8-89F6-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Did you mean...
Date: Tue, 17 Feb 2004 12:05:07 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 17, 2004, at 11:39 AM, lucene@nitwit.de wrote:
> On Tuesday 17 February 2004 16:13, Erik Hatcher wrote:
>> The "words" (or "terms") are already in the index ready to be read 
>> very
>> rapidly and accurately.  IndexReader is what you want to investigate 
>> if
>> your fields are indexed.
>>
>> Look into IndexReader and pull the terms directly rather than
>> re-"analyzing" the text.  Provided "contents" was an indexed field, 
>> you
>
> Well, but my index was created using a GermanAnalyzer. I have to 
> re-analyze it
> with WhitespaceAnalyzer if I don't want the words to be truncated...
>
> What you do is what I did at the beginning of the thread :-)

*arg* I feel like we are going in circles here.

Why use the GermanAnalyzer at all if it is not what you want?  Re-index!

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 17 17:11:09 2004
Return-Path: 
 <lucene-user-return-7180-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61570 invoked from network); 17 Feb 2004 17:11:09 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 17 Feb 2004 17:11:09 -0000
Received: (qmail 49499 invoked by uid 500); 17 Feb 2004 17:10:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49463 invoked by uid 500); 17 Feb 2004 17:10:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49388 invoked from network); 17 Feb 2004 17:10:49 -0000
Received: from unknown (HELO sccrmhc13.comcast.net) (204.127.202.64)
  by daedalus.apache.org with SMTP; 17 Feb 2004 17:10:49 -0000
Received: from apache.org (c-24-5-145-151.client.comcast.net[24.5.145.151])
          by comcast.net (sccrmhc13) with ESMTP
          id <20040217171052016003eqq3e>; Tue, 17 Feb 2004 17:10:52 +0000
Message-ID: <40324B19.6070100@apache.org>
Date: Tue, 17 Feb 2004 09:10:49 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040116
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Inconsistent treatment of field-names between index-time and
 query-time
References: <005901c3f11d$1bb04bb0$34fafc0a@iapetus>
In-Reply-To: <005901c3f11d$1bb04bb0$34fafc0a@iapetus>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Esmond Pitt wrote:
> I have a field Author: and I'm using the StandardAnalyzer. When documents
> with this field are added to the index, the field name 'Author' is
> case-folded by the analyzer to 'author', and this is how it appears in the
> index.

An analyzer does not process field names when indexing.  So, if 
something is lowercasing the field name when indexing, it is not the 
Analyzer, nor is it IndexWriter.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 17 17:47:23 2004
Return-Path: 
 <lucene-user-return-7181-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 82102 invoked from network); 17 Feb 2004 17:47:23 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 17 Feb 2004 17:47:23 -0000
Received: (qmail 53224 invoked by uid 500); 17 Feb 2004 17:47:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 53204 invoked by uid 500); 17 Feb 2004 17:47:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 53186 invoked from network); 17 Feb 2004 17:47:10 -0000
Received: from unknown (HELO smtprelay02.ispgateway.de) (62.67.200.157)
  by daedalus.apache.org with SMTP; 17 Feb 2004 17:47:10 -0000
Received: (qmail 1714 invoked from network); 17 Feb 2004 17:47:12 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.226.69])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 17 Feb 2004 17:47:12 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 67C3822D6
	for <lucene-user@jakarta.apache.org>; Tue, 17 Feb 2004 18:47:16 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Did you mean...
Date: Tue, 17 Feb 2004 18:47:15 +0100
User-Agent: KMail/1.6
References: <DD0BDCCADFDA4349AA5300F8B33F2B7FE6D4C3@afexch3.fao.org>
 <200402171739.11571.lucene@nitwit.de>
 <6FF0E270-616B-11D8-89F6-000393A564E6@ehatchersolutions.com>
In-Reply-To: <6FF0E270-616B-11D8-89F6-000393A564E6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200402171847.15788.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Tuesday 17 February 2004 18:05, Erik Hatcher wrote:
> *arg* I feel like we are going in circles here.

Me, too :-)

> Why use the GermanAnalyzer at all if it is not what you want?  Re-index!

I want to use the GermanAnalyzer. But not for the "did you mean" 
functionality...

That's what this thread is all about :)

Timo

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 17 18:16:33 2004
Return-Path: 
 <lucene-user-return-7182-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 93773 invoked from network); 17 Feb 2004 18:16:33 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 17 Feb 2004 18:16:33 -0000
Received: (qmail 6534 invoked by uid 500); 17 Feb 2004 18:16:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 6509 invoked by uid 500); 17 Feb 2004 18:16:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 6495 invoked from network); 17 Feb 2004 18:16:19 -0000
Received: from unknown (HELO sccrmhc12.comcast.net) (204.127.202.56)
  by daedalus.apache.org with SMTP; 17 Feb 2004 18:16:19 -0000
Received: from apache.org (c-24-5-145-151.client.comcast.net[24.5.145.151])
          by comcast.net (sccrmhc12) with ESMTP
          id <2004021718162201200j8t0me>; Tue, 17 Feb 2004 18:16:23 +0000
Message-ID: <40325A73.6060707@apache.org>
Date: Tue, 17 Feb 2004 10:16:19 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040116
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: SubstringQuery -- Re: Leading Wild Card Search
References: 
 <326BDC0F160B8647ACB8396A3C56838707B2A558@h-file05.180096hotel.com>
 <402A89F2.8070609@tropo.com> <opr28zc1jehawgj6@mail>
 <402BF411.7030205@tropo.com>
In-Reply-To: <402BF411.7030205@tropo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

David Spencer wrote:
> 2 files attached, SubstringQuery (which you'll use) and 
> SubstringTermEnum ( used by the former to be
> consistent w/ other Query code).
> 
> I find this kind of query useful to have and think that the query parser 
> should allow it in spite of the perception
> of this being slow, however I think the debate is the "user centric 
> view" (say mine, allow substring queries)
> vs the "protect the engines performance" view which says not to allow 
> expensive queries.

I think the argument is more complex.

One issue is cost of execution: very slow queries can be used to 
implement a denial-of-service attack.  Maybe that's an overstatement, 
but in a web server setting, once a few of slow searches are running, no 
others may complete.  When folks hit "Stop" in their browser the server 
does not stop processing the query.  If they hit "Reload" then another 
new search is started.  So these can be very problematic.  This is real. 
  Lots of folks have deployed Lucene with large indexes and then found 
that their server randomly crashes.  Closer scrutiny shows that they 
were permitting operators that are too slow for their combination of 
index size and query traffic.  The BooleanQuery.TooManyClauses exception 
was added to address this, but it can still be too late, if the problem 
is caused before the query is built, e.g., while enumerating all terms.

A releated issue is that users (and even most developers) don't 
understand the relative costs of different query operators.  Some things 
are fast, others are surprisingly slow.  That's not a great user 
experience, and triggers problems like those described above.  People 
think that the rare slow cases are network problems or something, and 
hit "Reload".

I have no problem with including slow operators with Lucene, but they 
should be well documented as such, at least for developers.  Perhaps we 
should make a pass through the existing Query classes, in particular 
those which expand into other queries, and add some performance notes, 
so that folks don't blindly start using things which may bite them.  By 
default I think it would be safest if the QueryParser only permitted 
operators which are efficient.  Folks can then, at their own risk, 
enable other operators.

In summary, removing operators can be user-centric, if it removes 
unpredictablity.  And the reason for protecting engine performance is 
not miserly, it's to guarantee availablility.  And finally, an issue 
dear to me, a predicatble search engine results in fewer spurious bug 
reports, saving developer time for real bugs.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 17 18:17:39 2004
Return-Path: 
 <lucene-user-return-7183-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 94057 invoked from network); 17 Feb 2004 18:17:39 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 17 Feb 2004 18:17:39 -0000
Received: (qmail 8332 invoked by uid 500); 17 Feb 2004 18:17:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 8065 invoked by uid 500); 17 Feb 2004 18:17:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 8044 invoked from network); 17 Feb 2004 18:17:25 -0000
Received: from unknown (HELO sccrmhc11.comcast.net) (204.127.202.55)
  by daedalus.apache.org with SMTP; 17 Feb 2004 18:17:25 -0000
Received: from apache.org (c-24-5-145-151.client.comcast.net[24.5.145.151])
          by comcast.net (sccrmhc11) with ESMTP
          id <2004021718172801100s2mmae>; Tue, 17 Feb 2004 18:17:29 +0000
Message-ID: <40325AB6.8020002@apache.org>
Date: Tue, 17 Feb 2004 10:17:26 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040116
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: MoreLikeThis Query generator - Re: code for "more like this"
 query "expansion" - was - Re: setMaxClauseCount ??
References: <20040212104313.51470.qmail@web12707.mail.yahoo.com>
 <402BDC58.2010502@tropo.com>
In-Reply-To: <402BDC58.2010502@tropo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

David Spencer wrote:
> Code rewritten, automagically chooses lots of defaults, lets you override
> the defs thru the static vars at the bottom or the non-static vars also 
> at the bottom.

Has anyone used this?  Was it useful?  Should we add it to the sandbox?

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 17 20:06:51 2004
Return-Path: 
 <lucene-user-return-7185-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 50459 invoked from network); 17 Feb 2004 20:06:51 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 17 Feb 2004 20:06:51 -0000
Received: (qmail 46242 invoked by uid 500); 17 Feb 2004 20:06:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 46204 invoked by uid 500); 17 Feb 2004 20:06:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 46156 invoked from network); 17 Feb 2004 20:06:33 -0000
Received: from unknown (HELO mail.ntranz.com) (65.19.137.179)
  by daedalus.apache.org with SMTP; 17 Feb 2004 20:06:33 -0000
Received: from [65.19.137.179] by tunes0320w
  (ArGoSoft Mail Server Pro for WinNT/2000/XP, Version 1.8 (1.8.4.0));
 Tue, 17 Feb 2004 11:59:35 -0800
From: "hema@searchendjobs.com" <hema@searchendjobs.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
X-ArGoMail-Auto-Response: Yes
Subject: thanks for your mail
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Message-ID: <f4w1tl2ovzcslkb.170220041159@mail.ntranz.com>
Date: Tue, 17 Feb 2004 11:59:35 -0800
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Received your mail we will get back to you shortly


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 17 20:06:45 2004
Return-Path: 
 <lucene-user-return-7184-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 50373 invoked from network); 17 Feb 2004 20:06:45 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 17 Feb 2004 20:06:45 -0000
Received: (qmail 45666 invoked by uid 500); 17 Feb 2004 20:06:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 45634 invoked by uid 500); 17 Feb 2004 20:06:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 45620 invoked from network); 17 Feb 2004 20:06:28 -0000
Received: from unknown (HELO mclean.mail.mindspring.net) (207.69.200.57)
  by daedalus.apache.org with SMTP; 17 Feb 2004 20:06:28 -0000
Received: from h-68-166-64-104.mclnva23.dynamic.covad.net ([68.166.64.104]
 helo=POWERPACK)
	by mclean.mail.mindspring.net with smtp (Exim 3.33 #1)
	id 1AtBUI-0007ab-00
	for lucene-user@jakarta.apache.org; Tue, 17 Feb 2004 15:06:34 -0500
Message-ID: <006c01c3f591$8d1e1d90$6501a8c0@POWERPACK>
From: "Terry Steichen" <terry@net-frame.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: 
 <326BDC0F160B8647ACB8396A3C56838707B2A558@h-file05.180096hotel.com>
 <402A89F2.8070609@tropo.com> <opr28zc1jehawgj6@mail>
 <402BF411.7030205@tropo.com> <40325A73.6060707@apache.org>
Subject: Re: SubstringQuery -- Re: Leading Wild Card Search
Date: Tue, 17 Feb 2004 15:06:33 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1106
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Doug,

What you say makes a good deal of sense to me.  Could you give us a relative
sense of the "slowness" of different operators?

Regards

Terry

----- Original Message -----
From: "Doug Cutting" <cutting@apache.org>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Tuesday, February 17, 2004 1:16 PM
Subject: Re: SubstringQuery -- Re: Leading Wild Card Search


> David Spencer wrote:
> > 2 files attached, SubstringQuery (which you'll use) and
> > SubstringTermEnum ( used by the former to be
> > consistent w/ other Query code).
> >
> > I find this kind of query useful to have and think that the query parser
> > should allow it in spite of the perception
> > of this being slow, however I think the debate is the "user centric
> > view" (say mine, allow substring queries)
> > vs the "protect the engines performance" view which says not to allow
> > expensive queries.
>
> I think the argument is more complex.
>
> One issue is cost of execution: very slow queries can be used to
> implement a denial-of-service attack.  Maybe that's an overstatement,
> but in a web server setting, once a few of slow searches are running, no
> others may complete.  When folks hit "Stop" in their browser the server
> does not stop processing the query.  If they hit "Reload" then another
> new search is started.  So these can be very problematic.  This is real.
>   Lots of folks have deployed Lucene with large indexes and then found
> that their server randomly crashes.  Closer scrutiny shows that they
> were permitting operators that are too slow for their combination of
> index size and query traffic.  The BooleanQuery.TooManyClauses exception
> was added to address this, but it can still be too late, if the problem
> is caused before the query is built, e.g., while enumerating all terms.
>
> A releated issue is that users (and even most developers) don't
> understand the relative costs of different query operators.  Some things
> are fast, others are surprisingly slow.  That's not a great user
> experience, and triggers problems like those described above.  People
> think that the rare slow cases are network problems or something, and
> hit "Reload".
>
> I have no problem with including slow operators with Lucene, but they
> should be well documented as such, at least for developers.  Perhaps we
> should make a pass through the existing Query classes, in particular
> those which expand into other queries, and add some performance notes,
> so that folks don't blindly start using things which may bite them.  By
> default I think it would be safest if the QueryParser only permitted
> operators which are efficient.  Folks can then, at their own risk,
> enable other operators.
>
> In summary, removing operators can be user-centric, if it removes
> unpredictablity.  And the reason for protecting engine performance is
> not miserly, it's to guarantee availablility.  And finally, an issue
> dear to me, a predicatble search engine results in fewer spurious bug
> reports, saving developer time for real bugs.
>
> Doug
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 17 22:16:43 2004
Return-Path: 
 <lucene-user-return-7186-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 23085 invoked from network); 17 Feb 2004 22:16:43 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 17 Feb 2004 22:16:43 -0000
Received: (qmail 58783 invoked by uid 500); 17 Feb 2004 22:16:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58620 invoked by uid 500); 17 Feb 2004 22:16:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58597 invoked from network); 17 Feb 2004 22:16:25 -0000
Received: from unknown (HELO web25207.mail.ukl.yahoo.com) (217.12.10.67)
  by daedalus.apache.org with SMTP; 17 Feb 2004 22:16:25 -0000
Message-ID: <20040217221630.90348.qmail@web25207.mail.ukl.yahoo.com>
Received: from [202.3.241.21] by web25207.mail.ukl.yahoo.com via HTTP;
 Tue, 17 Feb 2004 23:16:30 CET
Date: Tue, 17 Feb 2004 23:16:30 +0100 (CET)
From: =?iso-8859-1?q?Alex=20Botin?= <opt_utc@yahoo.fr>
Subject: Problem using highlighter package
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-911029158-1077056190=:88922"
Content-Transfer-Encoding: 8bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-911029158-1077056190=:88922
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi there !
 
I downloaded the highlighter package made available by Mark Hardwood on :
http://home.clara.net/markharwood/lucene/highlight.htm
 
I followed the instructions given on this site to use the package, but when I try to run my application, I get the following message :
" Method rewrite(org.apache.lucene.index.IndexReader)
not found in class org.apache.lucene.search.Query.query = query.rewrite(reader); "
 
Then, if I remove the instruction "query = query.rewrite(reader);", I get another NoSuchMethodError for org.apache.lucene.search.TermQuery.getTerm()
 
(A piece of my source code is at the end of this message)
 
Does anybody have a clue to solve my problem ?
And by the way, can somebody explain me what the query.rewrite() function is used for exactly ?

I thank you all in advance.
Alex.
 
 ...
 import org.apache.lucene.index.*;
 import org.apache.lucene.search.*;
 import org.apache.lucene.search.highlight.*;
 ...
 IndexReader reader = IndexReader.open(indexName);
 searcher = new IndexSearcher( reader );
 Analyzer analyzer = new FrenchAnalyzer();
 
 query = QueryParser.parse(queryString, "contents", analyzer);
 query = query.rewrite(reader);
 
 QueryHighlightExtractor highlighter = 
    new QueryHighlightExtractor(query, new FrenchAnalyzer(),
       "<font style=\"background:yellow;\">", "</font>");
 
 int highlightFragmentSizeInBytes = 80;
 int maxNumFragmentsRequired = 4;
 String fragmentSeparator="...";
 
 String highlightedSummary =
   highlighter.getBestFragments(summary, highlightFragmentSizeInBytes,
      maxNumFragmentsRequired, fragmentSeparator);
 
For information, I added
 C:\Projets\Lucene\lib\highlighter.jar
 C:\Projets\Lucene\lib\lucene-1.3-final.jar
 C:\Projets\Lucene\lib\lucene-demos-1.3-final.jar
to my classpath.


		
---------------------------------
Yahoo! Mail : votre e-mail personnel et gratuit qui vous suit partout !
Cr�ez votre Yahoo! Mail
--0-911029158-1077056190=:88922--

From MAILER-DAEMON Tue Feb 17 22:57:35 2004
Return-Path: 
 <lucene-user-return-7187-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 47339 invoked from network); 17 Feb 2004 22:57:35 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 17 Feb 2004 22:57:35 -0000
Received: (qmail 24232 invoked by uid 500); 17 Feb 2004 22:57:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 24061 invoked by uid 500); 17 Feb 2004 22:57:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 24043 invoked from network); 17 Feb 2004 22:57:15 -0000
Received: from unknown (HELO mail.fulfilnet.com.au) (203.111.107.196)
  by daedalus.apache.org with SMTP; 17 Feb 2004 22:57:15 -0000
From: "Anson Lau" <alau@fulfil-net.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: number of fields, size of fields
Date: Wed, 18 Feb 2004 09:58:15 +1100
Message-ID: <000301c3f5a9$86fad710$86d4a8c0@fulfilnet.com.au>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
In-Reply-To: <006c01c3f591$8d1e1d90$6501a8c0@POWERPACK>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi All,

I'm a beginner with Lucene.  I would like to know if there are general
guidelines on:

1. the number of field a document can have
2. size of unindexed fields
3. size of a stored text field

I just want to get a feel for what are the good practices.

Thanks,

Anson Lau


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 17 23:41:00 2004
Return-Path: 
 <lucene-user-return-7188-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67809 invoked from network); 17 Feb 2004 23:41:00 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 17 Feb 2004 23:41:00 -0000
Received: (qmail 86419 invoked by uid 500); 17 Feb 2004 23:40:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 86387 invoked by uid 500); 17 Feb 2004 23:40:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 86359 invoked from network); 17 Feb 2004 23:40:40 -0000
Received: from unknown (HELO server0027.freedom2surf.net) (194.106.33.36)
  by daedalus.apache.org with SMTP; 17 Feb 2004 23:40:40 -0000
Received: from dell ([194.106.34.5])
	by server0027.freedom2surf.net (8.12.6/8.12.6/Debian-7) with SMTP id
 i1HNeksT025610
	for <lucene-user@jakarta.apache.org>; Tue, 17 Feb 2004 23:40:47 GMT
Date: Tue, 17 Feb 2004 23:40:46 GMT
Message-Id: <200402172340.i1HNeksT025610@server0027.freedom2surf.net>
From: markharw00d@yahoo.co.uk
To: lucene-user@jakarta.apache.org
Subject: Re: MoreLikeThis Query generator - Re: code for "more like this"
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Here's the results of some tests using David's "more like.." class.

http://home.clara.net/markharwood/lucene/mlt.htm

Looks useful. I have a couple of suggestions in the review.

Cheers
Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 18 02:02:09 2004
Return-Path: 
 <lucene-user-return-7189-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 26014 invoked from network); 18 Feb 2004 02:02:09 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 18 Feb 2004 02:02:09 -0000
Received: (qmail 63655 invoked by uid 500); 18 Feb 2004 02:01:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 63255 invoked by uid 500); 18 Feb 2004 02:01:47 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 63241 invoked from network); 18 Feb 2004 02:01:47 -0000
Received: from unknown (HELO smtp03.mrf.mail.rcn.net) (207.172.4.62)
  by daedalus.apache.org with SMTP; 18 Feb 2004 02:01:47 -0000
Received: from 208-59-172-198.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com
 ([208.59.172.198] helo=aleph1.smart.net)
	by smtp03.mrf.mail.rcn.net with esmtp (Exim 3.35 #4)
	id 1AtH2B-0007D8-00
	for lucene-user@jakarta.apache.org; Tue, 17 Feb 2004 21:01:55 -0500
Message-Id: <5.0.2.1.2.20040217205808.02e674f0@pop3.smart.net>
X-Sender: dbd@pop3.smart.net
X-Mailer: QUALCOMM Windows Eudora Version 5.0.2
Date: Tue, 17 Feb 2004 21:07:33 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: "Daniel B. Davis" <dbd@smart.net>
Subject: Re: 'Sponsored' links
In-Reply-To: <403143E1.7000607@apache.org>
References: <5.0.2.1.2.20040215154529.02d82df0@pop3.smart.net>
 <5.0.2.1.2.20040215154529.02d82df0@pop3.smart.net>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

At 02:27 PM 2/16/2004 -0800, you wrote:

>Daniel B. Davis wrote:
>>Are there other strategies not considered?
>
>Why not store sponsored documents in a separate index, separately 
>searched, whose results are placed above those from the non-sponsored 
>documents?
>
>Doug

What would that do?  Each separate index would need to be searched for 
eligible documents.  The idea is to find all qualifying documents held at 
the site, then to prefer certain ones by displaying them before others.  I 
understand Lucene does this naturally using the score achieved by the 
search process. I understand that 'boost' affects that score, and thus, the 
display order. Is this incorrect or inaccurate?  What is gained by a 
separate index?  One separate index? A separate index for each 
sponsor?  What if the same document has multiple sponsors?  In #1 and #2 of 
the original discussion, the maximum sponsored value could be used to set 
the boost, but at different times.

>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 18 02:10:13 2004
Return-Path: 
 <lucene-user-return-7190-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 28412 invoked from network); 18 Feb 2004 02:10:13 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 18 Feb 2004 02:10:13 -0000
Received: (qmail 71930 invoked by uid 500); 18 Feb 2004 02:09:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 71902 invoked by uid 500); 18 Feb 2004 02:09:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 71888 invoked from network); 18 Feb 2004 02:09:50 -0000
Received: from unknown (HELO smtp03.mrf.mail.rcn.net) (207.172.4.62)
  by daedalus.apache.org with SMTP; 18 Feb 2004 02:09:50 -0000
Received: from 208-59-172-198.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com
 ([208.59.172.198] helo=aleph1.smart.net)
	by smtp03.mrf.mail.rcn.net with esmtp (Exim 3.35 #4)
	id 1AtH9z-0001A3-00
	for lucene-user@jakarta.apache.org; Tue, 17 Feb 2004 21:09:59 -0500
Message-Id: <5.0.2.1.2.20040217210844.02e48808@pop3.smart.net>
X-Sender: dbd@pop3.smart.net
X-Mailer: QUALCOMM Windows Eudora Version 5.0.2
Date: Tue, 17 Feb 2004 21:15:31 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: "Daniel B. Davis" <dbd@smart.net>
Subject: Re: Intermediate indexing before final
In-Reply-To: <5.0.2.1.2.20040215155126.02d84c90@pop3.smart.net>
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====================_1992995==_.ALT"
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--=====================_1992995==_.ALT
Content-Type: text/plain; charset="us-ascii"; format=flowed


At 03:55 PM 2/15/2004 -0500, you wrote:
>Daniel B. Davis

Found the problem and the solution raises questions.  The problem arose 
from the contents field, which was reader-valued.  The reader is a pipe, 
which became closed and thus the fault.

This raises questions about reader-valued fields:
    * Do they have a life-cycle?
    * Can reader-valued fields be used in situations different from where 
they were created?
    * What causes them to close?
    * Can they be used multiple times, like a String?
    * Can they be reset for re-use?


--=====================_1992995==_.ALT--



From MAILER-DAEMON Wed Feb 18 08:09:35 2004
Return-Path: 
 <lucene-user-return-7191-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 57744 invoked from network); 18 Feb 2004 08:09:35 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 18 Feb 2004 08:09:35 -0000
Received: (qmail 25163 invoked by uid 500); 18 Feb 2004 08:09:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 25137 invoked by uid 500); 18 Feb 2004 08:09:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 25102 invoked from network); 18 Feb 2004 08:09:06 -0000
Received: from unknown (HELO server0027.freedom2surf.net) (194.106.33.36)
  by daedalus.apache.org with SMTP; 18 Feb 2004 08:09:06 -0000
Received: from dell ([194.106.34.5])
	by server0027.freedom2surf.net (8.12.6/8.12.6/Debian-7) with SMTP id
 i1I89HsT007691
	for <lucene-user@jakarta.apache.org>; Wed, 18 Feb 2004 08:09:17 GMT
Date: Wed, 18 Feb 2004 08:09:17 GMT
Message-Id: <200402180809.i1I89HsT007691@server0027.freedom2surf.net>
From: markharw00d@yahoo.co.uk
To: lucene-user@jakarta.apache.org
Subject: Problem using highlighter package
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Alex.
Looks to me like you have a classpath problem - you're running with a version other than 1.3 final.
Earlier versions of Lucene didn't have the 2 methods in your error messages.
You'll need to check your classpath settings carefully.

>>I downloaded the highlighter package made available by Mark Hardwood
That's "Harwood" ;-)

>>And by the way, can somebody explain me what the query.rewrite() function is used for 
>>exactly ?
It takes a query like "foo bar*" and, using the actual terms found in an index turns the query into "foo bar barstool bark ...".
Doing this can be expensive (it can generate MANY search terms) so it doesn't make sense to do it once as part of searching and once again as part of highlighting.
Thats why its suggested you rewrite the query yourself once and pass the rewritten query to the searcher and the highlighter.
The searcher internally will attempt to rewrite the expanded query again but this will cost very little as there's no expensive term 
expansion to be done (bar* has already been resolved).
Hope this makes sense.


Cheers,
Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 18 08:30:52 2004
Return-Path: 
 <lucene-user-return-7192-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 76630 invoked from network); 18 Feb 2004 08:30:52 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 18 Feb 2004 08:30:52 -0000
Received: (qmail 47250 invoked by uid 500); 18 Feb 2004 08:30:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 47136 invoked by uid 500); 18 Feb 2004 08:30:23 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 47123 invoked from network); 18 Feb 2004 08:30:23 -0000
Received: from unknown (HELO server1.hostmon.com) (66.139.76.19)
  by daedalus.apache.org with SMTP; 18 Feb 2004 08:30:23 -0000
Received: (qmail 31286 invoked by uid 532); 18 Feb 2004 08:27:52 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with
 qmail-scanner-1.16
 (spamassassin: 2.61.  Clear:.
 Processed in 0.213254 secs); 18 Feb 2004 08:27:52 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 18 Feb 2004 08:27:52 -0000
Message-ID: <403322AB.2050105@tropo.com>
Date: Wed, 18 Feb 2004 00:30:35 -0800
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;
 rv:1.5) Gecko/20031007
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: MoreLikeThis Query generator - Re: code for "more like this"
 query "expansion" - was - Re: setMaxClauseCount ??
References: <20040212104313.51470.qmail@web12707.mail.yahoo.com>
 <402BDC58.2010502@tropo.com> <40325AB6.8020002@apache.org>
In-Reply-To: <40325AB6.8020002@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Doug Cutting wrote:

> David Spencer wrote:
>
>> Code rewritten, automagically chooses lots of defaults, lets you 
>> override
>> the defs thru the static vars at the bottom or the non-static vars 
>> also at the bottom.
>
>
> Has anyone used this?  Was it useful?

I've put it up on my "demo" site (rfc::search) in which I have a humble 
index of approx 3500 RFCs.

This is the site:

http://www.hostmon.com/rfc/index.jsp

A typical search takes you here:

http://www.hostmon.com/rfc/search.jsp?s=LDAP+Security&x=33&y=9



Then clicking on a match takes you to a link to view an RFC like this 
where things start to get interesting.

http://www.hostmon.com/rfc/get.jsp?id=1823&s=LDAP%20Security

There are 3 links of interest now at the top/middle of the page in the 
brownish background.

[a] "show similar" - forms a query from *all* words in the doc - no 
heuristics wrt idf(), etc.

[b] "more like this" - uses the MoreLikeThis code I wrote with the 
default settings.

[c] "interesting words" - uses code from MoreLikeThis to give a table of 
all interesting
words in the current "source" doc ordered by score.
Remember score is idf*tf as per Dougs mail (and as per my
hopefully correct understanding of these things). This page is of course 
more of a debugging
tool that something a normal user would see.  One possible area of 
improvement that jumped out at me after reviewing this table is using 
stemming, say, allowing more words in the generated query when 2 words 
have the same stem.

Note - [a] uses no code from [b] and [c]. It is just there for comparision.

> Should we add it to the sandbox?

I'd appreciate if someone could proofread MoreLikeThis.like(Reader) and 
mlt(Reader).

At a glance it seems to return reasonable results on my site.

-- Dave

>
> Doug
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 18 08:35:49 2004
Return-Path: 
 <lucene-user-return-7193-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 78736 invoked from network); 18 Feb 2004 08:35:49 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 18 Feb 2004 08:35:49 -0000
Received: (qmail 57876 invoked by uid 500); 18 Feb 2004 08:35:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 57851 invoked by uid 500); 18 Feb 2004 08:35:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 57828 invoked from network); 18 Feb 2004 08:35:19 -0000
Received: from unknown (HELO server1.hostmon.com) (66.139.76.19)
  by daedalus.apache.org with SMTP; 18 Feb 2004 08:35:19 -0000
Received: (qmail 31413 invoked by uid 532); 18 Feb 2004 08:32:48 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with
 qmail-scanner-1.16
 (spamassassin: 2.61.  Clear:.
 Processed in 0.160739 secs); 18 Feb 2004 08:32:48 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 18 Feb 2004 08:32:48 -0000
Message-ID: <403323D3.5070500@tropo.com>
Date: Wed, 18 Feb 2004 00:35:31 -0800
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;
 rv:1.5) Gecko/20031007
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: MoreLikeThis Query generator - Re: code for "more like this"
References: <200402172340.i1HNeksT025610@server0027.freedom2surf.net>
In-Reply-To: <200402172340.i1HNeksT025610@server0027.freedom2surf.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

markharw00d@yahoo.co.uk wrote:

>Here's the results of some tests using David's "more like.." class.
>
>http://home.clara.net/markharwood/lucene/mlt.htm
>
>Looks useful.
>
Thanks for testing.

> I have a couple of suggestions in the review.
>  
>
Your text copied here and my comments:

 > Overall, a pretty useful class. I'm not sure if the "stop words" 
stuff is useful in the class - most systems > have these defined in the 
analyzer.

Good point, I was following the orig mail suggesting this algorithm and 
didn't think it thru.
Should be able to set the table to null to disable this in my class.

 > Also I think the "defaults" for minTermFreq should be dynamic and 
adjust subject to the example text > length. If its short there is 
likely to be little in the way of word repetition.

Good point, adaptive "AI" would make sense here.

 > I would also suggest making the parameters have getters/setters 
rather than exposed public fields.

Yeah, for consistency this is probably true. I'm tired of typing in 
obvious 1 line getter/setters
that no real point ( though I have been doing this for years) so left 
'em out.

thx,
 Dave



>Cheers
>Mark
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 18 09:08:28 2004
Return-Path: 
 <lucene-user-return-7195-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 92424 invoked from network); 18 Feb 2004 09:08:28 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 18 Feb 2004 09:08:28 -0000
Received: (qmail 99336 invoked by uid 500); 18 Feb 2004 09:07:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 99296 invoked by uid 500); 18 Feb 2004 09:07:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 99273 invoked from network); 18 Feb 2004 09:07:57 -0000
Received: from unknown (HELO master.valinf.com) (62.253.200.1)
  by daedalus.apache.org with SMTP; 18 Feb 2004 09:07:57 -0000
Message-ID: <566BCFC0EFBAAC40AF3EF4CA8228AD530EBC11@master.valinf.com>
From: Paul Williams <paul@valinf.com>
To: 'Lucene Users List' <lucene-user@jakarta.apache.org>
Subject: RE: status of AND as default logical operator for QueryParser
Date: Wed, 18 Feb 2004 09:06:54 -0000
MIME-Version: 1.0
Content-Type: text/plain
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Mats,

I believe when you call parser.parse with the Analyzer again you reset the
state of default operator
The following code should do what you want.


     QueryParser parser = new QueryParser( FIELD, service.getAnalyzer());
     parser.setOperator(QueryParser.DEFAULT_OPERATOR_AND);
     Query query = parser.parse(queryString);

Regards,

Paul



-----Original Message-----
From: Mats Nyberg [mailto:mn@tim.se] 
Sent: 18 February 2004 11:06
To: Lucene Users List
Subject: status of AND as default logical operator for QueryParser


what is the status of the default operator feature of QueryParser?

i want to have a lucene enabled app using AND as it's default operator using
the code: 

  QueryParser parser = new QueryParser(FIELD, service.getAnalyzer());
  parser.setOperator(parser.DEFAULT_OPERATOR_AND);
  Query query = parser.parse(queryString, FIELD, service.getAnalyzer());

results are however not as expected but rather the QueryParser still uses
OR.

is this not the way i am supposed to use the feature? 
why is it not working?
-- 
Mats Nyberg 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
DISCLAIMER:
 The information in this message is confidential and may be legally
privileged. It is intended solely for the addressee.  Access to this message
by anyone else is unauthorised.  If you are not the intended recipient, any
disclosure, copying, or distribution of the message,  or any action or
omission taken by you in reliance on it, is prohibited and may be unlawful.
Please immediately contact the sender if you have received this message in
error.
 Thank you.
 Valid Information Systems Limited.   Address:  Morline House,  160 London
Road,  Barking, Essex, IG11 8BB. 
http://www.valinf.com Tel: +44 (0) 20 8215 1414 Fax: +44 (0) 20 8215 2040 
----------------------------------------- 
Be a part of Summit 2004 Hummingbird's Worldwide Conference & Technology
Showcase February 22-25, 2004 The Westin Diplomat Resort, Hollywood,
Florida, Visit our Web Site: http://www.hummingbird.com/summit for more
information.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 18 09:01:29 2004
Return-Path: 
 <lucene-user-return-7194-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 89376 invoked from network); 18 Feb 2004 09:01:29 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 18 Feb 2004 09:01:29 -0000
Received: (qmail 86958 invoked by uid 500); 18 Feb 2004 09:00:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 86809 invoked by uid 500); 18 Feb 2004 09:00:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 86792 invoked from network); 18 Feb 2004 09:00:57 -0000
Received: from unknown (HELO mma.tim.se) (80.72.0.5)
  by daedalus.apache.org with SMTP; 18 Feb 2004 09:00:57 -0000
Received: (qmail 20817 invoked from network); 18 Feb 2004 09:01:07 -0000
Received: from unknown (HELO ?80.72.5.56?) (80.72.5.56)
  by 80.72.11.38 with SMTP; 18 Feb 2004 09:01:07 -0000
Subject: status of AND as default logical operator for QueryParser
From: Mats Nyberg <mn@tim.se>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Content-Type: text/plain
Organization: 
Message-Id: <1077102333.15645.108.camel@gnuts.teknikimedia.se>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.2.4 
Date: 18 Feb 2004 10:05:33 -0100
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

what is the status of the default operator feature of QueryParser?

i want to have a lucene enabled app using AND as it's default operator
using the code: 

  QueryParser parser = new QueryParser(FIELD, service.getAnalyzer());
  parser.setOperator(parser.DEFAULT_OPERATOR_AND);
  Query query = parser.parse(queryString, FIELD, service.getAnalyzer());

results are however not as expected but rather the QueryParser still
uses OR.

is this not the way i am supposed to use the feature? 
why is it not working?
-- 
Mats Nyberg 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 18 09:41:43 2004
Return-Path: 
 <lucene-user-return-7196-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9079 invoked from network); 18 Feb 2004 09:41:43 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 18 Feb 2004 09:41:43 -0000
Received: (qmail 37872 invoked by uid 500); 18 Feb 2004 09:41:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 37630 invoked by uid 500); 18 Feb 2004 09:41:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 37579 invoked from network); 18 Feb 2004 09:41:12 -0000
Received: from unknown (HELO mma.tim.se) (80.72.0.5)
  by daedalus.apache.org with SMTP; 18 Feb 2004 09:41:12 -0000
Received: (qmail 21776 invoked from network); 18 Feb 2004 09:41:22 -0000
Received: from unknown (HELO ?80.72.5.56?) (80.72.5.56)
  by 80.72.11.38 with SMTP; 18 Feb 2004 09:41:22 -0000
Subject: RE: status of AND as default logical operator for QueryParser
From: Mats Nyberg <mn@tim.se>
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <566BCFC0EFBAAC40AF3EF4CA8228AD530EBC11@master.valinf.com>
References: <566BCFC0EFBAAC40AF3EF4CA8228AD530EBC11@master.valinf.com>
Content-Type: text/plain
Organization: 
Message-Id: <1077104748.15644.113.camel@gnuts.teknikimedia.se>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.2.4 
Date: 18 Feb 2004 10:45:48 -0100
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

thanks paul, worked like a charm.


On Wed, 2004-02-18 at 08:06, Paul Williams wrote:
> Mats,
> 
> I believe when you call parser.parse with the Analyzer again you reset the
> state of default operator
> The following code should do what you want.
> 
> 
>      QueryParser parser = new QueryParser( FIELD, service.getAnalyzer());
>      parser.setOperator(QueryParser.DEFAULT_OPERATOR_AND);
>      Query query = parser.parse(queryString);
> 
> Regards,
> 
> Paul
> 
> 
> 
> -----Original Message-----
> From: Mats Nyberg [mailto:mn@tim.se] 
> Sent: 18 February 2004 11:06
> To: Lucene Users List
> Subject: status of AND as default logical operator for QueryParser
> 
> 
> what is the status of the default operator feature of QueryParser?
> 
> i want to have a lucene enabled app using AND as it's default operator using
> the code: 
> 
>   QueryParser parser = new QueryParser(FIELD, service.getAnalyzer());
>   parser.setOperator(parser.DEFAULT_OPERATOR_AND);
>   Query query = parser.parse(queryString, FIELD, service.getAnalyzer());
> 
> results are however not as expected but rather the QueryParser still uses
> OR.
> 
> is this not the way i am supposed to use the feature? 
> why is it not working?


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 18 14:38:40 2004
Return-Path: 
 <lucene-user-return-7197-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 77371 invoked from network); 18 Feb 2004 14:38:40 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 18 Feb 2004 14:38:40 -0000
Received: (qmail 82402 invoked by uid 500); 18 Feb 2004 14:38:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 82318 invoked by uid 500); 18 Feb 2004 14:38:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 82305 invoked from network); 18 Feb 2004 14:38:30 -0000
Received: from unknown (HELO jive.servlets.net) (209.162.192.250)
  by daedalus.apache.org with SMTP; 18 Feb 2004 14:38:30 -0000
Received: from jivesoftware.com
 (CPE00045ade8fc4-CM024370005574.cpe.net.cable.rogers.com [65.50.38.86])
	(authenticated bits=0)
	by jive.servlets.net (8.12.8/8.12.8) with ESMTP id i1IEcTBv004188
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=OK)
	for <lucene-user@jakarta.apache.org>; Wed, 18 Feb 2004 06:38:31 -0800
Message-ID: <403378EA.6000101@jivesoftware.com>
Date: Wed, 18 Feb 2004 09:38:34 -0500
From: Bruce Ritchie <bruce@jivesoftware.com>
Organization: Jive Software
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;
 rv:1.6) Gecko/20040113
X-Accept-Language: en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: MoreLikeThis Query generator - Re: code for "more like this"
 query "expansion" - was - Re: setMaxClauseCount ??
References: <20040212104313.51470.qmail@web12707.mail.yahoo.com>
 <402BDC58.2010502@tropo.com> <40325AB6.8020002@apache.org>
 <403322AB.2050105@tropo.com>
In-Reply-To: <403322AB.2050105@tropo.com>
Content-Type: multipart/signed; protocol="application/x-pkcs7-signature";
 micalg=sha1; boundary="------------ms090801090109090701070502"
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------ms090801090109090701070502
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

David Spencer wrote:

> [c] "interesting words" - uses code from MoreLikeThis to give a table of 
> all interesting
> words in the current "source" doc ordered by score.
> Remember score is idf*tf as per Dougs mail (and as per my
> hopefully correct understanding of these things). This page is of course 
> more of a debugging
> tool that something a normal user would see.  One possible area of 
> improvement that jumped out at me after reviewing this table is using 
> stemming, say, allowing more words in the generated query when 2 words 
> have the same stem.

Actually, the analyzer should do that, shouldn't it? For example, I have stemming analyzers for a 
variety of languages that both stem and remove stop words - it seems silly to me to duplicate that 
functionality when it's so easily provided by the analyzer. Given that, I would suggest removing the 
stop word functionality from this class as it is not needed and only confuses things.


Regards,

Bruce Ritchie
http://www.jivesoftware.com/

--------------ms090801090109090701070502
Content-Type: application/x-pkcs7-signature; name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="smime.p7s"
Content-Description: S/MIME Cryptographic Signature

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIII/TCC
AtkwggJCoAMCAQICAwrLgDANBgkqhkiG9w0BAQQFADBiMQswCQYDVQQGEwJaQTElMCMGA1UE
ChMcVGhhd3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNv
bmFsIEZyZWVtYWlsIElzc3VpbmcgQ0EwHhcNMDMwOTIzMTkzNjM3WhcNMDQwOTIyMTkzNjM3
WjBIMR8wHQYDVQQDExZUaGF3dGUgRnJlZW1haWwgTWVtYmVyMSUwIwYJKoZIhvcNAQkBFhZi
cnVjZUBqaXZlc29mdHdhcmUuY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA
ozJPHo8aUH2MrrLnFrmybY38uC8nlm26vBAPgGhSMthJlA0ShY9zAs4qGPyX1fIcANCKw0yP
QDESRRySYPcRYMBnwaeqtIwldTb1GTA6DAvZ/jpkM16DbAId17O86+4NeV7WoR+IguiyEUJq
IqecxdGiJsLi8xNM0rPan91sWTA+30kPvW12IU6MIa4XInPUazLqzZmA3CHoQJ2qorYCUx1c
P3VW2fbWMjpfis67MalWcFuBtThFuq5qsZMBEkFekoKPu2cpmjlKddrGj9+54U1CWBVQMl+9
HSB1/qhl1La8BYRhaZ5UG3c0za9yultXL9k1GxfZYVqDy2iMI5+ejQIDAQABozMwMTAhBgNV
HREEGjAYgRZicnVjZUBqaXZlc29mdHdhcmUuY29tMAwGA1UdEwEB/wQCMAAwDQYJKoZIhvcN
AQEEBQADgYEAEwi3SlYetSCzK5DLkClPMgTOM+P0qrIAFt+ar8uMZwr3xqFOxZlt6/qMHoXA
aOEWhZkHJ2dq8ebxjSdGXQF6/jKB42CEmYXmP6umb/2DBE6bVTy9aksnMnKeSyuqP1HWwlCf
5+Vk811biLueAupunISEh7P0bQXUgVtVVbOtAfIwggLZMIICQqADAgECAgMKy4AwDQYJKoZI
hvcNAQEEBQAwYjELMAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQ
dHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENB
MB4XDTAzMDkyMzE5MzYzN1oXDTA0MDkyMjE5MzYzN1owSDEfMB0GA1UEAxMWVGhhd3RlIEZy
ZWVtYWlsIE1lbWJlcjElMCMGCSqGSIb3DQEJARYWYnJ1Y2VAaml2ZXNvZnR3YXJlLmNvbTCC
ASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKMyTx6PGlB9jK6y5xa5sm2N/LgvJ5Zt
urwQD4BoUjLYSZQNEoWPcwLOKhj8l9XyHADQisNMj0AxEkUckmD3EWDAZ8GnqrSMJXU29Rkw
OgwL2f46ZDNeg2wCHdezvOvuDXle1qEfiILoshFCaiKnnMXRoibC4vMTTNKz2p/dbFkwPt9J
D71tdiFOjCGuFyJz1Gsy6s2ZgNwh6ECdqqK2AlMdXD91Vtn21jI6X4rOuzGpVnBbgbU4Rbqu
arGTARJBXpKCj7tnKZo5SnXaxo/fueFNQlgVUDJfvR0gdf6oZdS2vAWEYWmeVBt3NM2vcrpb
Vy/ZNRsX2WFag8tojCOfno0CAwEAAaMzMDEwIQYDVR0RBBowGIEWYnJ1Y2VAaml2ZXNvZnR3
YXJlLmNvbTAMBgNVHRMBAf8EAjAAMA0GCSqGSIb3DQEBBAUAA4GBABMIt0pWHrUgsyuQy5Ap
TzIEzjPj9KqyABbfmq/LjGcK98ahTsWZbev6jB6FwGjhFoWZBydnavHm8Y0nRl0Bev4ygeNg
hJmF5j+rpm/9gwROm1U8vWpLJzJynksrqj9R1sJQn+flZPNdW4i7ngLqbpyEhIez9G0F1IFb
VVWzrQHyMIIDPzCCAqigAwIBAgIBDTANBgkqhkiG9w0BAQUFADCB0TELMAkGA1UEBhMCWkEx
FTATBgNVBAgTDFdlc3Rlcm4gQ2FwZTESMBAGA1UEBxMJQ2FwZSBUb3duMRowGAYDVQQKExFU
aGF3dGUgQ29uc3VsdGluZzEoMCYGA1UECxMfQ2VydGlmaWNhdGlvbiBTZXJ2aWNlcyBEaXZp
c2lvbjEkMCIGA1UEAxMbVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWlsIENBMSswKQYJKoZIhvcN
AQkBFhxwZXJzb25hbC1mcmVlbWFpbEB0aGF3dGUuY29tMB4XDTAzMDcxNzAwMDAwMFoXDTEz
MDcxNjIzNTk1OVowYjELMAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5n
IChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5n
IENBMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDEpjxVc1X7TrnKmVoeaMB1BHCd3+n/
ox7svc31W/Iadr1/DDph8r9RzgHU5VAKMNcCY1osiRVwjt3J8CuFWqo/cVbLrzwLB+fxH5E2
JCoTzyvV84J3PQO+K/67GD4Hv0CAAmTXp6a7n2XRxSpUhQ9IBH+nttE8YQRAHmQZcmC3+wID
AQABo4GUMIGRMBIGA1UdEwEB/wQIMAYBAf8CAQAwQwYDVR0fBDwwOjA4oDagNIYyaHR0cDov
L2NybC50aGF3dGUuY29tL1RoYXd0ZVBlcnNvbmFsRnJlZW1haWxDQS5jcmwwCwYDVR0PBAQD
AgEGMCkGA1UdEQQiMCCkHjAcMRowGAYDVQQDExFQcml2YXRlTGFiZWwyLTEzODANBgkqhkiG
9w0BAQUFAAOBgQBIjNFQg+oLLswNo2asZw9/r6y+whehQ5aUnX9MIbj4Nh+qLZ82L8D0HFAg
k3A8/a3hYWLD2ToZfoSxmRsAxRoLgnSeJVCUYsfbJ3FXJY3dqZw5jowgT2Vfldr394fWxghO
rvbqNOUQGls1TXfjViF4gtwhGTXeJLHTHUb/XV9lTzGCAzswggM3AgEBMGkwYjELMAkGA1UE
BhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMT
I1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBAgMKy4AwCQYFKw4DAhoFAKCC
AacwGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAcBgkqhkiG9w0BCQUxDxcNMDQwMjE4MTQz
ODM0WjAjBgkqhkiG9w0BCQQxFgQUvqDUa8RvOHwg9MHt6S3u53FYXeIwUgYJKoZIhvcNAQkP
MUUwQzAKBggqhkiG9w0DBzAOBggqhkiG9w0DAgICAIAwDQYIKoZIhvcNAwICAUAwBwYFKw4D
AgcwDQYIKoZIhvcNAwICASgweAYJKwYBBAGCNxAEMWswaTBiMQswCQYDVQQGEwJaQTElMCMG
A1UEChMcVGhhd3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBl
cnNvbmFsIEZyZWVtYWlsIElzc3VpbmcgQ0ECAwrLgDB6BgsqhkiG9w0BCRACCzFroGkwYjEL
MAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAq
BgNVBAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBAgMKy4AwDQYJKoZI
hvcNAQEBBQAEggEAfqYOgSM53egYlZ/rrGTo8j+obQoi7UsTmPne+K/s566Mb8O7nzdv86kp
9nF8wRMQkEZZ6+sCK+n/QFBjamxiUsOvGV47w/9K8As6IG8pyzF5Y1l6VzzZizCcVZ/TMu71
J8EZM2nSxMDaUtDm+q8fSFmFRASVeaZ9wYv5tDx8iWTgbwfjBTtg+1TGpm9OsedsE4DrKyvA
U0ZvYpGeliiFtvKcS/5VxvlPBvWMGxHpbRqb8UESir59G+v6Drw6Z2/sdD4JVirX7gQjavUt
hvufpiB6jZgSGb/hx0lnu0jseiePlw1EaB+8Ovk9jHoLFKGfJP5ksVTV5419iT53quN3IQAA
AAAAAA==
--------------ms090801090109090701070502--

From MAILER-DAEMON Wed Feb 18 15:18:05 2004
Return-Path: 
 <lucene-user-return-7198-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 3292 invoked from network); 18 Feb 2004 15:18:05 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 18 Feb 2004 15:18:05 -0000
Received: (qmail 84515 invoked by uid 500); 18 Feb 2004 15:17:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 84432 invoked by uid 500); 18 Feb 2004 15:17:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 84284 invoked from network); 18 Feb 2004 15:17:42 -0000
Received: from unknown (HELO jive.servlets.net) (209.162.192.250)
  by daedalus.apache.org with SMTP; 18 Feb 2004 15:17:42 -0000
Received: from jivesoftware.com
 (CPE00045ade8fc4-CM024370005574.cpe.net.cable.rogers.com [65.50.38.86])
	(authenticated bits=0)
	by jive.servlets.net (8.12.8/8.12.8) with ESMTP id i1IFHeBv005688
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=OK)
	for <lucene-user@jakarta.apache.org>; Wed, 18 Feb 2004 07:17:43 -0800
Message-ID: <4033821A.50003@jivesoftware.com>
Date: Wed, 18 Feb 2004 10:17:46 -0500
From: Bruce Ritchie <bruce@jivesoftware.com>
Organization: Jive Software
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;
 rv:1.6) Gecko/20040113
X-Accept-Language: en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: MoreLikeThis Query generator - Re: code for "more like this"
 query "expansion" - was - Re: setMaxClauseCount ??
References: <20040212104313.51470.qmail@web12707.mail.yahoo.com>
 <402BDC58.2010502@tropo.com> <40325AB6.8020002@apache.org>
 <403322AB.2050105@tropo.com>
In-Reply-To: <403322AB.2050105@tropo.com>
Content-Type: multipart/signed; protocol="application/x-pkcs7-signature";
 micalg=sha1; boundary="------------ms030406080405080801090703"
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------ms030406080405080801090703
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

David Spencer wrote:

> I'd appreciate if someone could proofread MoreLikeThis.like(Reader) and 
> mlt(Reader).
> 
> At a glance it seems to return reasonable results on my site.

One thing that I would find extremely useful is updating the code to handle multiple fields since 
many (most?) indexes do not use just 1 field. I'm in the process of doing just that as well as 
making some other changes to the code and will contribute it back if someone doesn't beat me to it 
first.


Regards,

Bruce Ritchie
http://www.jivesoftware.com/

--------------ms030406080405080801090703
Content-Type: application/x-pkcs7-signature; name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="smime.p7s"
Content-Description: S/MIME Cryptographic Signature

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIII/TCC
AtkwggJCoAMCAQICAwrLgDANBgkqhkiG9w0BAQQFADBiMQswCQYDVQQGEwJaQTElMCMGA1UE
ChMcVGhhd3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNv
bmFsIEZyZWVtYWlsIElzc3VpbmcgQ0EwHhcNMDMwOTIzMTkzNjM3WhcNMDQwOTIyMTkzNjM3
WjBIMR8wHQYDVQQDExZUaGF3dGUgRnJlZW1haWwgTWVtYmVyMSUwIwYJKoZIhvcNAQkBFhZi
cnVjZUBqaXZlc29mdHdhcmUuY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA
ozJPHo8aUH2MrrLnFrmybY38uC8nlm26vBAPgGhSMthJlA0ShY9zAs4qGPyX1fIcANCKw0yP
QDESRRySYPcRYMBnwaeqtIwldTb1GTA6DAvZ/jpkM16DbAId17O86+4NeV7WoR+IguiyEUJq
IqecxdGiJsLi8xNM0rPan91sWTA+30kPvW12IU6MIa4XInPUazLqzZmA3CHoQJ2qorYCUx1c
P3VW2fbWMjpfis67MalWcFuBtThFuq5qsZMBEkFekoKPu2cpmjlKddrGj9+54U1CWBVQMl+9
HSB1/qhl1La8BYRhaZ5UG3c0za9yultXL9k1GxfZYVqDy2iMI5+ejQIDAQABozMwMTAhBgNV
HREEGjAYgRZicnVjZUBqaXZlc29mdHdhcmUuY29tMAwGA1UdEwEB/wQCMAAwDQYJKoZIhvcN
AQEEBQADgYEAEwi3SlYetSCzK5DLkClPMgTOM+P0qrIAFt+ar8uMZwr3xqFOxZlt6/qMHoXA
aOEWhZkHJ2dq8ebxjSdGXQF6/jKB42CEmYXmP6umb/2DBE6bVTy9aksnMnKeSyuqP1HWwlCf
5+Vk811biLueAupunISEh7P0bQXUgVtVVbOtAfIwggLZMIICQqADAgECAgMKy4AwDQYJKoZI
hvcNAQEEBQAwYjELMAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQ
dHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENB
MB4XDTAzMDkyMzE5MzYzN1oXDTA0MDkyMjE5MzYzN1owSDEfMB0GA1UEAxMWVGhhd3RlIEZy
ZWVtYWlsIE1lbWJlcjElMCMGCSqGSIb3DQEJARYWYnJ1Y2VAaml2ZXNvZnR3YXJlLmNvbTCC
ASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKMyTx6PGlB9jK6y5xa5sm2N/LgvJ5Zt
urwQD4BoUjLYSZQNEoWPcwLOKhj8l9XyHADQisNMj0AxEkUckmD3EWDAZ8GnqrSMJXU29Rkw
OgwL2f46ZDNeg2wCHdezvOvuDXle1qEfiILoshFCaiKnnMXRoibC4vMTTNKz2p/dbFkwPt9J
D71tdiFOjCGuFyJz1Gsy6s2ZgNwh6ECdqqK2AlMdXD91Vtn21jI6X4rOuzGpVnBbgbU4Rbqu
arGTARJBXpKCj7tnKZo5SnXaxo/fueFNQlgVUDJfvR0gdf6oZdS2vAWEYWmeVBt3NM2vcrpb
Vy/ZNRsX2WFag8tojCOfno0CAwEAAaMzMDEwIQYDVR0RBBowGIEWYnJ1Y2VAaml2ZXNvZnR3
YXJlLmNvbTAMBgNVHRMBAf8EAjAAMA0GCSqGSIb3DQEBBAUAA4GBABMIt0pWHrUgsyuQy5Ap
TzIEzjPj9KqyABbfmq/LjGcK98ahTsWZbev6jB6FwGjhFoWZBydnavHm8Y0nRl0Bev4ygeNg
hJmF5j+rpm/9gwROm1U8vWpLJzJynksrqj9R1sJQn+flZPNdW4i7ngLqbpyEhIez9G0F1IFb
VVWzrQHyMIIDPzCCAqigAwIBAgIBDTANBgkqhkiG9w0BAQUFADCB0TELMAkGA1UEBhMCWkEx
FTATBgNVBAgTDFdlc3Rlcm4gQ2FwZTESMBAGA1UEBxMJQ2FwZSBUb3duMRowGAYDVQQKExFU
aGF3dGUgQ29uc3VsdGluZzEoMCYGA1UECxMfQ2VydGlmaWNhdGlvbiBTZXJ2aWNlcyBEaXZp
c2lvbjEkMCIGA1UEAxMbVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWlsIENBMSswKQYJKoZIhvcN
AQkBFhxwZXJzb25hbC1mcmVlbWFpbEB0aGF3dGUuY29tMB4XDTAzMDcxNzAwMDAwMFoXDTEz
MDcxNjIzNTk1OVowYjELMAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5n
IChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5n
IENBMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDEpjxVc1X7TrnKmVoeaMB1BHCd3+n/
ox7svc31W/Iadr1/DDph8r9RzgHU5VAKMNcCY1osiRVwjt3J8CuFWqo/cVbLrzwLB+fxH5E2
JCoTzyvV84J3PQO+K/67GD4Hv0CAAmTXp6a7n2XRxSpUhQ9IBH+nttE8YQRAHmQZcmC3+wID
AQABo4GUMIGRMBIGA1UdEwEB/wQIMAYBAf8CAQAwQwYDVR0fBDwwOjA4oDagNIYyaHR0cDov
L2NybC50aGF3dGUuY29tL1RoYXd0ZVBlcnNvbmFsRnJlZW1haWxDQS5jcmwwCwYDVR0PBAQD
AgEGMCkGA1UdEQQiMCCkHjAcMRowGAYDVQQDExFQcml2YXRlTGFiZWwyLTEzODANBgkqhkiG
9w0BAQUFAAOBgQBIjNFQg+oLLswNo2asZw9/r6y+whehQ5aUnX9MIbj4Nh+qLZ82L8D0HFAg
k3A8/a3hYWLD2ToZfoSxmRsAxRoLgnSeJVCUYsfbJ3FXJY3dqZw5jowgT2Vfldr394fWxghO
rvbqNOUQGls1TXfjViF4gtwhGTXeJLHTHUb/XV9lTzGCAzswggM3AgEBMGkwYjELMAkGA1UE
BhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMT
I1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBAgMKy4AwCQYFKw4DAhoFAKCC
AacwGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAcBgkqhkiG9w0BCQUxDxcNMDQwMjE4MTUx
NzQ2WjAjBgkqhkiG9w0BCQQxFgQUteEhKtL+ofiaEZpclOIWWQGfNSowUgYJKoZIhvcNAQkP
MUUwQzAKBggqhkiG9w0DBzAOBggqhkiG9w0DAgICAIAwDQYIKoZIhvcNAwICAUAwBwYFKw4D
AgcwDQYIKoZIhvcNAwICASgweAYJKwYBBAGCNxAEMWswaTBiMQswCQYDVQQGEwJaQTElMCMG
A1UEChMcVGhhd3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBl
cnNvbmFsIEZyZWVtYWlsIElzc3VpbmcgQ0ECAwrLgDB6BgsqhkiG9w0BCRACCzFroGkwYjEL
MAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAq
BgNVBAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBAgMKy4AwDQYJKoZI
hvcNAQEBBQAEggEARzpuxTzy9/Y+EUUZy1VlZ9Cdl5rmVykPKgE/ATHQntkKdabbqU7XG7gx
kVkvuGo9065NbTLNsWu0ARZhvPwmHnNkPLKhaDV9+Rx1cHQfW5ZUryhafMDhZ/cj7dCvLKPa
ARoF9tz0yPOqfHSFR4aOpj0hb5nG59m6lFEbXEIVAmYarA8D1MtMEayrHgjZB90fpXPH9uSd
OyquovBE9rMcYFF6936OWcEkfPOtkg2IwMu6VJpJg/6v7Ggtp6l1jN0EXbGdO6E75a9MmSZg
9JwsaazYO8pd72b121uI6ORK0rkSvaLbJx/EX/E4Z13nBjQtN0L9ktX+Z3dRMtpZqPJtugAA
AAAAAA==
--------------ms030406080405080801090703--

From MAILER-DAEMON Wed Feb 18 18:54:34 2004
Return-Path: 
 <lucene-user-return-7199-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 56297 invoked from network); 18 Feb 2004 18:54:34 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 18 Feb 2004 18:54:34 -0000
Received: (qmail 3402 invoked by uid 500); 18 Feb 2004 18:54:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 3385 invoked by uid 500); 18 Feb 2004 18:54:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 3366 invoked from network); 18 Feb 2004 18:54:19 -0000
Received: from unknown (HELO mta.micromuse.com) (194.131.185.92)
  by daedalus.apache.org with SMTP; 18 Feb 2004 18:54:19 -0000
Received: from tropo.com ([10.0.0.157])
	(authenticated (0 bits))
	by mta.micromuse.com (Switch-2.2.8/Switch-2.2.8) with ESMTP id i1IIsLH24553
	(using TLSv1/SSLv3 with cipher RC4-MD5 (128 bits) verified NO)
	for <lucene-user@jakarta.apache.org>; Wed, 18 Feb 2004 18:54:22 GMT
Message-ID: <4033B4DC.6030102@tropo.com>
Date: Wed, 18 Feb 2004 10:54:20 -0800
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;
 rv:1.6a) Gecko/20031030
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: SubstringQuery -- Re: Leading Wild Card Search
References: 
 <326BDC0F160B8647ACB8396A3C56838707B2A558@h-file05.180096hotel.com>
 <402A89F2.8070609@tropo.com> <opr28zc1jehawgj6@mail>
 <402BF411.7030205@tropo.com> <40325A73.6060707@apache.org>
In-Reply-To: <40325A73.6060707@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Doug Cutting wrote:

> David Spencer wrote:
>
>> 2 files attached, SubstringQuery (which you'll use) and 
>> SubstringTermEnum ( used by the former to be
>> consistent w/ other Query code).
>>
>> I find this kind of query useful to have and think that the query 
>> parser should allow it in spite of the perception
>> of this being slow, however I think the debate is the "user centric 
>> view" (say mine, allow substring queries)
>> vs the "protect the engines performance" view which says not to allow 
>> expensive queries.
>
>
> I think the argument is more complex.

Thanks for elaboration, a few notes below.

>
> One issue is cost of execution: very slow queries can be used to 
> implement a denial-of-service attack.  Maybe that's an overstatement, 
> but in a web server setting, once a few of slow searches are running, 
> no others may complete.  When folks hit "Stop" in their browser the 
> server does not stop processing the query.  If they hit "Reload" then 
> another new search is started.  So these can be very problematic.

I guess this is defendable right? The search engine could allow  only 
one query at a time per session.

> This is real.  Lots of folks have deployed Lucene with large indexes 
> and then found that their server randomly crashes.  Closer scrutiny 
> shows that they were permitting operators that are too slow for their 
> combination of index size and query traffic.  The 
> BooleanQuery.TooManyClauses exception was added to address this, but 
> it can still be too late, if the problem is caused before the query is 
> built, e.g., while enumerating all terms.

Yeah, this is tricky, as really the TooManyClauses is not necessarily 
the cure, and every query can't defend itself against expense as these 
heuristics (e.g. max # of clauses) are not always right (depends on 
speed of system/disk, size of index, etc).
It's too bad the Java VM doesn't have any kind of execution time quotas 
for threads or something like that as that seems like in the ideal world 
to get to the root of the issue. Going back in time I believe the 
Telescript VM
from General Magic...

>
> A releated issue is that users (and even most developers) don't 
> understand the relative costs of different query operators.

Sure.
I'm coming at this from the point of view of the smaller personal/small 
enterprise search server, where
you "know" you need a certain kind of possibly expensive query and don't 
want your hands tied.

> Some things are fast, others are surprisingly slow.  That's not a 
> great user experience, and triggers problems like those described above.

Reminds me of a human factors paper I saw in some ACM pub years ago (um, 
prob the 80's). Said more or less what you're saying, that humans prefer 
a constant response time even if a varying response time has a lower 
average. Example is, say, for a compiler, if it always takes 10sec to 
compile a file they users are happy, but
if it takes 1sec 99% of the time and a minute the other 1% then users 
are less happy. What was most interesting
about the paper was they suggested something like this:

goal = 10; // 10 sec
t1 = time(); // time in seconds
search(); // execute search, don't display results
dt = time() - t1; // elapsed
if ( elapsed < goal)
   sleep( goal- elapsed); // the shocker
display_results()

i.e. artifically delay(!) if less than some threshold, thus making the 
user happier (!) to get a more constant response time.



> People think that the rare slow cases are network problems or 
> something, and hit "Reload".
>
> I have no problem with including slow operators with Lucene, but they 
> should be well documented as such, at least for developers.  Perhaps 
> we should make a pass through the existing Query classes, in 
> particular those which expand into other queries, and add some 
> performance notes, so that folks don't blindly start using things 
> which may bite them.  By default I think it would be safest if the 
> QueryParser only permitted operators which are efficient.  Folks can 
> then, at their own risk, enable other operators.
>
> In summary, removing operators can be user-centric, if it removes 
> unpredictablity.  And the reason for protecting engine performance is 
> not miserly, it's to guarantee availablility.  And finally, an issue 
> dear to me, a predicatble search engine results in fewer spurious bug 
> reports, saving developer time for real bugs.

Great, thx..
 -Dave

>
> Doug
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 18 19:02:09 2004
Return-Path: 
 <lucene-user-return-7200-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 60828 invoked from network); 18 Feb 2004 19:02:09 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 18 Feb 2004 19:02:09 -0000
Received: (qmail 17145 invoked by uid 500); 18 Feb 2004 19:01:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16982 invoked by uid 500); 18 Feb 2004 19:01:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16969 invoked from network); 18 Feb 2004 19:01:48 -0000
Received: from unknown (HELO mta.micromuse.com) (194.131.185.92)
  by daedalus.apache.org with SMTP; 18 Feb 2004 19:01:48 -0000
Received: from tropo.com ([10.0.0.157])
	(authenticated (0 bits))
	by mta.micromuse.com (Switch-2.2.8/Switch-2.2.8) with ESMTP id i1IJ1lH25490
	(using TLSv1/SSLv3 with cipher RC4-MD5 (128 bits) verified NO)
	for <lucene-user@jakarta.apache.org>; Wed, 18 Feb 2004 19:01:52 GMT
Message-ID: <4033B69B.9010506@tropo.com>
Date: Wed, 18 Feb 2004 11:01:47 -0800
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;
 rv:1.6a) Gecko/20031030
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: MoreLikeThis Query generator - Re: code for "more like this"
 query "expansion" - was - Re: setMaxClauseCount ??
References: <20040212104313.51470.qmail@web12707.mail.yahoo.com>
 <402BDC58.2010502@tropo.com> <40325AB6.8020002@apache.org>
 <403322AB.2050105@tropo.com> <403378EA.6000101@jivesoftware.com>
In-Reply-To: <403378EA.6000101@jivesoftware.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Bruce Ritchie wrote:

> David Spencer wrote:
>
>> [c] "interesting words" - uses code from MoreLikeThis to give a table 
>> of all interesting
>> words in the current "source" doc ordered by score.
>> Remember score is idf*tf as per Dougs mail (and as per my
>> hopefully correct understanding of these things). This page is of 
>> course more of a debugging
>> tool that something a normal user would see.  One possible area of 
>> improvement that jumped out at me after reviewing this table is using 
>> stemming, say, allowing more words in the generated query when 2 
>> words have the same stem.
>
>
> Actually, the analyzer should do that, shouldn't it? For example, I 
> have stemming analyzers for a variety of languages that both stem and 
> remove stop words - it seems silly to me to duplicate that 
> functionality when it's so easily provided by the analyzer. Given 
> that, I would suggest removing the stop word functionality from this class

Actually I realized this is a trickly and possibly counterintuitive issue.

In theory one might want the MoreLikeThis logic to use a *larger* stop 
word list than the Analyzer uses, even in the case where the Analyzer 
does not use any stop word list.

Reasoning is:
-- maybe you don't want Analyzer to have any stop words (so user can 
find the classic "to be or not to be" phrase) and the search index 
compression won't (in theory?) be affected by frequent stop words anyway
-- the stop words used by MoreLikeThis are a heuristic with 2 points 
behind them - the obvious (stop words
are not interesting in similarity) and the fact that they're there to 
minimize the expensive IndexReader.docFreq() calls, thus more stop words 
are fine to reduce docFreq() calls and let the query generator run faster

As an aside I sometimes use a list of ~500 English stop words from 
"SMART" (sorry, can't easily find the ref, though this might be close: 
http://citeseer.nj.nec.com/context/45797/0 ). I can contribute these if 
wanted.

> as it is not needed and only confuses things.
>
>
> Regards,
>
> Bruce Ritchie
> http://www.jivesoftware.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 18 22:04:32 2004
Return-Path: 
 <lucene-user-return-7201-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 1077 invoked from network); 18 Feb 2004 22:04:32 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 18 Feb 2004 22:04:32 -0000
Received: (qmail 48568 invoked by uid 500); 18 Feb 2004 22:04:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 48546 invoked by uid 500); 18 Feb 2004 22:04:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 48522 invoked from network); 18 Feb 2004 22:04:12 -0000
Received: from unknown (HELO web25206.mail.ukl.yahoo.com) (217.12.10.66)
  by daedalus.apache.org with SMTP; 18 Feb 2004 22:04:12 -0000
Message-ID: <20040218220418.58387.qmail@web25206.mail.ukl.yahoo.com>
Received: from [202.3.241.21] by web25206.mail.ukl.yahoo.com via HTTP;
 Wed, 18 Feb 2004 23:04:18 CET
Date: Wed, 18 Feb 2004 23:04:18 +0100 (CET)
From: =?iso-8859-1?q?Alex=20Botin?= <opt_utc@yahoo.fr>
Subject: Re: Problem using highlighter package
To: lucene-user@jakarta.apache.org
In-Reply-To: <200402180809.i1I89HsT007691@server0027.freedom2surf.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Mark !

Thank you for your answer !
The explanation about query.write() was perfect !

> Looks to me like you have a classpath problem -
> you're running with a version other than 1.3 final.
Although my classpath was set correctly with the
latest version of lucene, I had lucene-1.2.jar stored
in C:\j2sdk1.4.0_02\jre\lib\ext. There was the problem
!

Now I can run my application using your library, but
so far it has given me strange results (using a
FrenchAnalyzer) : it highlights letters that are not
part of the query and adds some other characters in
the highlightedString... I'll have a look at the
source code to try and understand why.

Last but not least : I'm sorry for my spelling mistake
! :o)

Thanks again,

Alex.



	

	
		
Yahoo! Mail : votre e-mail personnel et gratuit qui vous suit partout ! 
Cr�ez votre Yahoo! Mail sur http://fr.benefits.yahoo.com/

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 19 15:39:05 2004
Return-Path: 
 <lucene-user-return-7202-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 31780 invoked from network); 19 Feb 2004 15:39:05 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 19 Feb 2004 15:39:05 -0000
Received: (qmail 82939 invoked by uid 500); 19 Feb 2004 15:38:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 82882 invoked by uid 500); 19 Feb 2004 15:38:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 82832 invoked from network); 19 Feb 2004 15:38:17 -0000
Received: from unknown (HELO web40311.mail.yahoo.com) (66.218.78.90)
  by daedalus.apache.org with SMTP; 19 Feb 2004 15:38:17 -0000
Message-ID: <20040219153819.40856.qmail@web40311.mail.yahoo.com>
Received: from [192.35.232.241] by web40311.mail.yahoo.com via HTTP;
 Thu, 19 Feb 2004 07:38:19 PST
Date: Thu, 19 Feb 2004 07:38:19 -0800 (PST)
From: Will Liu <tliuwill@yahoo.com>
Subject: IndexWriter and IndexReader
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1214770898-1077205099=:40526"
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-1214770898-1077205099=:40526
Content-Type: text/plain; charset=us-ascii

Hi, I was wondering if I could get some help with using IndexWriter and IndexReader.  I'm pretty new to Lucene, and I've already written an application that indexes a directory of files... but now I'm trying to make the index be able to be maintained through incremental changes.
 
the case i'm trying to solve right now is when there already is a doc in the index with the same UID and the contents are different... I need to remove the old doc, and add the new doc.  
 
However, when I try to do this with IndexReader, I get this "lock obtained timed out" IOexception. I'm not exactly sure where this is coming from... can anyone help?


---------------------------------
Do you Yahoo!?
Yahoo! Mail SpamGuard - Read only the mail you want.
--0-1214770898-1077205099=:40526--

From MAILER-DAEMON Thu Feb 19 15:50:56 2004
Return-Path: 
 <lucene-user-return-7203-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 43215 invoked from network); 19 Feb 2004 15:50:56 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 19 Feb 2004 15:50:56 -0000
Received: (qmail 19215 invoked by uid 500); 19 Feb 2004 15:50:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 19149 invoked by uid 500); 19 Feb 2004 15:50:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 19136 invoked from network); 19 Feb 2004 15:50:45 -0000
Received: from unknown (HELO web12705.mail.yahoo.com) (216.136.173.242)
  by daedalus.apache.org with SMTP; 19 Feb 2004 15:50:45 -0000
Message-ID: <20040219155046.65388.qmail@web12705.mail.yahoo.com>
Received: from [194.152.226.191] by web12705.mail.yahoo.com via HTTP;
 Thu, 19 Feb 2004 07:50:46 PST
Date: Thu, 19 Feb 2004 07:50:46 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: IndexWriter and IndexReader
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20040219153819.40856.qmail@web40311.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Make sure you do it like this:

Open Directory with IndexReader
Delete with IndexReader
Close IndexReader

Open new IndexWriter
Add Document
Close IndexWriter

Otis

--- Will Liu <tliuwill@yahoo.com> wrote:
> Hi, I was wondering if I could get some help with using IndexWriter
> and IndexReader.  I'm pretty new to Lucene, and I've already written
> an application that indexes a directory of files... but now I'm
> trying to make the index be able to be maintained through incremental
> changes.
>  
> the case i'm trying to solve right now is when there already is a doc
> in the index with the same UID and the contents are different... I
> need to remove the old doc, and add the new doc.  
>  
> However, when I try to do this with IndexReader, I get this "lock
> obtained timed out" IOexception. I'm not exactly sure where this is
> coming from... can anyone help?
> 
> 
> ---------------------------------
> Do you Yahoo!?
> Yahoo! Mail SpamGuard - Read only the mail you want.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 19 16:40:42 2004
Return-Path: 
 <lucene-user-return-7204-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 75858 invoked from network); 19 Feb 2004 16:40:42 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 19 Feb 2004 16:40:42 -0000
Received: (qmail 12969 invoked by uid 500); 19 Feb 2004 16:40:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12938 invoked by uid 500); 19 Feb 2004 16:40:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 12752 invoked from network); 19 Feb 2004 16:40:07 -0000
Received: from unknown (HELO mwinf0401.wanadoo.fr) (193.252.22.27)
  by daedalus.apache.org with SMTP; 19 Feb 2004 16:40:07 -0000
Received: from diderot (ABordeaux-202-2-1-206.w80-11.abo.wanadoo.fr
 [80.11.9.206])
	by mwinf0401.wanadoo.fr (SMTP Server) with ESMTP id 96BC8580034A
	for <lucene-user@jakarta.apache.org>; Thu, 19 Feb 2004 17:40:08 +0100 (CET)
From: "Rasik Pandey" <rasik.pandey@ajlsm.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: MultiReader
Date: Thu, 19 Feb 2004 17:40:08 +0100
Message-ID: <000d01c3f707$094367b0$ac7ba8c0@diderot>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
Importance: Normal
In-Reply-To: <20040219155046.65388.qmail@web12705.mail.yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

Does anyone know of an implementation of a MultiReader (IndexReader over =
multiple indices) in the same spirit as the MultiSearcher?


Regards,
RBP


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 19 18:30:29 2004
Return-Path: 
 <lucene-user-return-7205-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 45988 invoked from network); 19 Feb 2004 18:30:29 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 19 Feb 2004 18:30:29 -0000
Received: (qmail 71993 invoked by uid 500); 19 Feb 2004 18:30:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 71968 invoked by uid 500); 19 Feb 2004 18:30:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 71955 invoked from network); 19 Feb 2004 18:30:14 -0000
Received: from unknown (HELO sccrmhc12.comcast.net) (204.127.202.56)
  by daedalus.apache.org with SMTP; 19 Feb 2004 18:30:14 -0000
Received: from apache.org (c-24-5-145-151.client.comcast.net[24.5.145.151])
          by comcast.net (sccrmhc12) with ESMTP
          id <2004021918301801200fsndje>; Thu, 19 Feb 2004 18:30:18 +0000
Message-ID: <403500B9.6010808@apache.org>
Date: Thu, 19 Feb 2004 10:30:17 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040116
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: MultiReader
References: <000d01c3f707$094367b0$ac7ba8c0@diderot>
In-Reply-To: <000d01c3f707$094367b0$ac7ba8c0@diderot>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Rasik Pandey wrote:
> Does anyone know of an implementation of a MultiReader (IndexReader over multiple indices) in the same spirit as the MultiSearcher?

I just committed one!  This was really already there, in SegmentsReader, 
but it was not public and needed a few minor changes.  Enjoy.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 20 00:44:22 2004
Return-Path: 
 <lucene-user-return-7206-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 38783 invoked from network); 20 Feb 2004 00:44:22 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 20 Feb 2004 00:44:22 -0000
Received: (qmail 64212 invoked by uid 500); 20 Feb 2004 00:44:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 64185 invoked by uid 500); 20 Feb 2004 00:44:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 64170 invoked from network); 20 Feb 2004 00:44:01 -0000
Received: from unknown (HELO mail.office.vtourist.com) (69.104.69.114)
  by daedalus.apache.org with SMTP; 20 Feb 2004 00:44:01 -0000
Received: from supun.office (adsl-69-104-69-113.dsl.irvnca.pacbell.net
 [69.104.69.113])
	(authenticated bits=0)
	by mail.office.vtourist.com (8.12.8/8.12.8) with ESMTP id i1K0fND6018704
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <lucene-user@jakarta.apache.org>; Thu, 19 Feb 2004 16:41:23 -0800
Subject: advice on a query
From: Supun Edirisinghe <supun@office.vtourist.com>
Reply-To: supun@office.vtourist.com
To: lucene-user@jakarta.apache.org
Content-Type: text/plain
Organization: VirtualTourist.com, Inc.
Message-Id: <1077237855.20627.43.camel@supun.office>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.2.2 (1.2.2-5) 
Date: 19 Feb 2004 16:44:15 -0800
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I'm still new to Lucene and I'm slowly learning it.

I'm trying to think of how to build a query for this situation:
I have an index of Foods.
I have a field called Name that is Indexed and Untokenized
it holds values like "chicken soup" "roast duck" "chicken pot pie"

users are going to search with strings like
"how to make chicken soup" or "cooking chicken" or "chicken soup
history" or "bbq chicken wings"
basically a term held in the index's Name field can appear anywhere in
the search's input string.

if a user inputs "how to make chicken soup" or "chicken soup history" I
want to only display documents with Name containing "chicken soup" (not
"bbq chicken wings" or "chicken")

The problem I'm confused about is that the Name term can appear anywhere
in the string and can be any number of words long. 

is there a better way to do this other than creating  a PhraseQuery with
every possible combination of consecutive words and checking against the
Name field with them? 

thanks


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 20 03:20:49 2004
Return-Path: 
 <lucene-user-return-7207-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2905 invoked from network); 20 Feb 2004 03:20:49 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 20 Feb 2004 03:20:49 -0000
Received: (qmail 5507 invoked by uid 500); 20 Feb 2004 03:20:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 5287 invoked by uid 500); 20 Feb 2004 03:20:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 5274 invoked from network); 20 Feb 2004 03:20:26 -0000
Received: from unknown (HELO dev.sofari.com) (12.43.53.196)
  by daedalus.apache.org with SMTP; 20 Feb 2004 03:20:26 -0000
Received: from newsmonster.org (dsl093-132-237.sfo4.dsl.speakeasy.net
 [66.93.132.237])
	(authenticated bits=0)
	by dev.sofari.com (8.12.10/8.12.10) with ESMTP id i1K3Kb2b031230
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <lucene-user@jakarta.apache.org>; Thu, 19 Feb 2004 19:20:38 -0800
Message-ID: <40357D02.3010204@newsmonster.org>
Date: Thu, 19 Feb 2004 19:20:34 -0800
From: "Kevin A. Burton" <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040113
X-Accept-Language: en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Vector -> LinkedList for performance reasons...
References: <400E5566.60505@newsmonster.org>
 <007801c3e00b$44e5d180$1100a8c0@ARIEL> <400E9CE8.6090809@apache.org>
In-Reply-To: <400E9CE8.6090809@apache.org>
X-Enigmail-Version: 0.83.1.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Content-Type: multipart/signed; micalg=pgp-sha1;
 protocol="application/pgp-signature";
 boundary="------------enig8C1B9EA4FBE3799E97823413"
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------enig8C1B9EA4FBE3799E97823413
Content-Type: multipart/mixed;
 boundary="------------000608070507010503020907"

This is a multi-part message in MIME format.
--------------000608070507010503020907
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Doug Cutting wrote:

>
> My hunch is that the speedup will not be significant.  Synchronization 
> costs in modern JVMs are very small when there is no contention.  But 
> only measurement can say for sure.

The major problem is not just the synchronization but also the Vector 
array copy when when the internal object array is exhausted.  Looking at 
the code I expect that this happens often.

As soon as we release I plan on taking some time and playing with this...

....

Kevin

-- 

Please reply using PGP:

    http://peerfear.org/pubkey.asc    

    NewsMonster - http://www.newsmonster.org/
    
Kevin A. Burton, Location - San Francisco, CA, Cell - 415.595.9965
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
  IRC - freenode.net #infoanarchy | #p2p-hackers | #newsmonster


--------------000608070507010503020907
Content-Type: text/x-vcard; charset=utf8;
 name="burton.vcf"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
 filename="burton.vcf"

begin:vcard
fn:Kevin Burton
n:Burton;Kevin
email;internet:burton@newsmonster.org
x-mozilla-html:TRUE
version:2.1
end:vcard


--------------000608070507010503020907--

--------------enig8C1B9EA4FBE3799E97823413
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.1 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFANX0C6E2NBJnxRBIRAgAlAJ4/pGW9cqdB8+uiEb44cmoN1OX64wCcDfpB
I5F9DSmMnptZlKCxWXWQkjk=
=Elpj
-----END PGP SIGNATURE-----

--------------enig8C1B9EA4FBE3799E97823413--

From MAILER-DAEMON Fri Feb 20 03:42:19 2004
Return-Path: 
 <lucene-user-return-7208-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9101 invoked from network); 20 Feb 2004 03:42:19 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 20 Feb 2004 03:42:19 -0000
Received: (qmail 25741 invoked by uid 500); 20 Feb 2004 03:41:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 25648 invoked by uid 500); 20 Feb 2004 03:41:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 25332 invoked from network); 20 Feb 2004 03:41:49 -0000
Received: from unknown (HELO mail.motile.net) (203.32.115.2)
  by daedalus.apache.org with SMTP; 20 Feb 2004 03:41:49 -0000
Received: (qmail 26227 invoked by uid 1008); 20 Feb 2004 03:41:32 -0000
Received: from unknown (HELO iapetus) (esmond.pitt@motile.net@203.32.113.2)
  by 0 with SMTP; 20 Feb 2004 03:41:32 -0000
Message-ID: <008901c3f763$7cc95c60$34fafc0a@iapetus>
From: "Esmond Pitt" <esmond.pitt@motile.net>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <400E5566.60505@newsmonster.org>
 <007801c3e00b$44e5d180$1100a8c0@ARIEL> <400E9CE8.6090809@apache.org>
 <40357D02.3010204@newsmonster.org>
Subject: Re: Vector -> LinkedList for performance reasons...
Date: Fri, 20 Feb 2004 14:41:56 +1100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The internal array copy happens each time the array is grown, and by default
it is grown by doubling with an initial size of 10, so the array copy
happens log2(final size-10) times.

EJP

----- Original Message ----- 
From: "Kevin A. Burton" <burton@newsmonster.org>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Friday, February 20, 2004 2:20 PM
Subject: Re: Vector -> LinkedList for performance reasons...


> The major problem is not just the synchronization but also the Vector
> array copy when when the internal object array is exhausted.  Looking at
> the code I expect that this happens often.




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 20 03:44:46 2004
Return-Path: 
 <lucene-user-return-7209-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 10131 invoked from network); 20 Feb 2004 03:44:46 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 20 Feb 2004 03:44:46 -0000
Received: (qmail 29772 invoked by uid 500); 20 Feb 2004 03:44:23 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 29622 invoked by uid 500); 20 Feb 2004 03:44:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 29608 invoked from network); 20 Feb 2004 03:44:22 -0000
Received: from unknown (HELO a.mail.sonic.net) (64.142.16.245)
  by daedalus.apache.org with SMTP; 20 Feb 2004 03:44:22 -0000
Received: from ANANDXP2 (bugsy.mmlive.com [207.138.176.254])
	by a.mail.sonic.net (8.12.10/8.12.7) with ESMTP id i1K3iUkb028134;
	Thu, 19 Feb 2004 19:44:30 -0800
From: "Anand Stephen" <anand@sonic.net>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>,
        <tatu@hypermall.net>
Subject: RE: Lock obtain timed out
Date: Thu, 19 Feb 2004 19:44:08 -0800
Message-ID: <81BCB6FDA8961C4A82D175DEDBF45EF902EEB783@mercury.mmlive.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
In-Reply-To: <81BCB6FDA8961C4A82D175DEDBF45EF90862046A@mercury.mmlive.com>
Importance: Normal
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



> -----Original Message-----
> From: Tatu Saloranta [mailto:tatu@hypermall.net]
> Sent: Tuesday, December 16, 2003 7:23 AM
> To: Lucene Users List
> Subject: Re: Lock obtain timed out
> 
> On Tuesday 16 December 2003 03:37, Hohwiller, Joerg wrote:
> > Hi there,
> >
> > I have not yet got any response about my problem.
> >
> > While debugging into the depth of lucene (really hard to read deep
> insde) I
> > discovered that it is possible to disable the Locks using a System
> > property.
> ...
> > Am I safe disabling the locking???
> > Can anybody tell me where to get documentation about the Locking
> > strategy (I still would like to know why I have that problem) ???
> >
> > Or does anybody know where to get an official example of how to
> > handle concurrent index modification and searches?
> 
> One problem I have seen, and am still trying to solve, is that if my
web
> app
> is terminated (running from console during development, ctrl+c on
unix),
> sometimes it seems "commit.lock" file is left. Now problem is that
> apparently
[Anand Stephen]  You could attach the current Thread to Runtime shut
down hook and release all resources when (ctrl +c) or the app shuts
down. This works for me. 

<code-snip>
        Thread t = new Thread(this.getClass().getName()) {
            public void run() {
                logger.info("Closing Lucene indexer; releasing
resources.");
                try {

                    if (writer != null) {
                        logger.info("Writer is open closing it!");
                        writer.close();
                    }
                    if (reader != null) {
                        logger.info("reader is still open, closing
it!");
                        reader.close();
                    }

                } catch (Exception e) {
                    logger.info("Error occurred shutting down Lucene
indexer.   " + e.getMessage(), e);
                }
            }
        };
        Runtime.getRuntime().addShutdownHook(t);

</code-snip>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 20 09:06:29 2004
Return-Path: 
 <lucene-user-return-7210-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 51733 invoked from network); 20 Feb 2004 09:06:29 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 20 Feb 2004 09:06:29 -0000
Received: (qmail 42420 invoked by uid 500); 20 Feb 2004 09:05:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 42293 invoked by uid 500); 20 Feb 2004 09:05:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 42273 invoked from network); 20 Feb 2004 09:05:57 -0000
Received: from unknown (HELO hotmail.com) (64.4.49.61)
  by daedalus.apache.org with SMTP; 20 Feb 2004 09:05:57 -0000
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Fri, 20 Feb 2004 01:06:09 -0800
Received: from 143.127.3.10 by by14fd.bay14.hotmail.msn.com with HTTP;
	Fri, 20 Feb 2004 09:06:09 GMT
X-Originating-IP: [143.127.3.10]
X-Originating-Email: [dhruba_borthakur@hotmail.com]
X-Sender: dhruba_borthakur@hotmail.com
From: "Dhruba Borthakur" <dhruba_borthakur@hotmail.com>
To: lucene-user@jakarta.apache.org
Bcc: 
Subject: Re:can't delete from an index using IndexReader.delete() 
Date: Fri, 20 Feb 2004 01:06:09 -0800
Mime-Version: 1.0
Content-Type: multipart/mixed; boundary="----=_NextPart_000_2db8_7440_4be1"
Message-ID: <BAY14-F61i30d6nesQG0001da2b@hotmail.com>
X-OriginalArrivalTime: 20 Feb 2004 09:06:09.0987 (UTC)
 FILETIME=[C808B130:01C3F790]
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_2db8_7440_4be1
Content-Type: text/plain; format=flowed

Hi folks,

I am using the latest and greatest Lucene jar file and am facing a problem 
with
deleting documents from the index. Browsing the mail archive, I found that 
the
following email (June 2003) listed the exact problem that I am encountering.

In short: I am using Field.text("id", "value") to mark a document. Then I 
use
reader.delete(new Term("id", "value")) to remove the document: this
call returns 0 and fails to delete the document. The attached sample program
shows this behaviour.

i would appreciate it a lot if anybody in this list has encountered this 
problem
and would like to share his/her solution with me.

thanks,
dhruba


From: Robert Koberg <rob@koberg.com>
Subject: can't delete from an index using IndexReader.delete()
Date: Mon, 23 Jun 2003 14:38:25 -0700
Content-Type: text/plain;
charset="us-ascii"

Here is a simple class that can reproduce the problem (happens with the last
stable release too). Let me know if you would prefer this as an attachment.

Call like this:
java TestReaderDelete existing_id new_label
- or -

Try:
java TestReaderDelete B724547 ppppppp

and then try:
java TestReaderDelete a266122794 ppppppp

If an index has not been created it will create one. Keep running the one of
the above example commands (with and without deleting the index directory)
and see what happens to the System.out.println's



import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.Term;
import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.document.DateField;

import org.xml.sax.*;
import org.xml.sax.helpers.*;
import org.xml.sax.Attributes;
import javax.xml.parsers.*;

import java.io.*;
import java.util.*;


class TestReaderDelete {



public static void main(String[] args)
  throws IOException
{
  File index = new File("./testindex");
  if (!index.exists()) {
    HashMap test_map = new HashMap();
    test_map.put("preamble_content", "Preamble content bbb");
    test_map.put("art_01_section_01", "Article 1, Section 1");
    test_map.put("toc_tester", "Test TOC XML bbb");
    test_map.put("B724547", "bio example");
    test_map.put("a266122794", "tester");
    indexFiles(index, test_map);
  }
  String identifier = args[0];
  String new_label = args[1];
  testDeleteAndAdd(index, identifier, new_label);
}


public static void indexFiles(File index, HashMap test_map)
{
  try {
    IndexWriter writer = new IndexWriter(index, new StandardAnalyzer(),
true);
    for (Iterator i=test_map.entrySet().iterator(); i.hasNext(); ) {
      Map.Entry e = (Map.Entry) i.next();
System.out.println("Adding: " + e.getKey() + " = " + e.getValue());
      Document doc = new Document();
      doc.add(Field.Text("id", (String)e.getKey()));
      doc.add(Field.Text("label", (String)e.getValue()));
      writer.addDocument(doc);
    }
    writer.optimize();
    writer.close();
  } catch (Exception e) {
    System.out.println(" caught a " + e.getClass() +
"\n with message: " + e.getMessage());
  }
}


public static void testDeleteAndAdd(File index, String identifier, String
new_label)
  throws IOException
{
  IndexReader reader = IndexReader.open(index);
System.out.println("!!! reader.numDocs() : " + reader.numDocs());
System.out.println("reader.indexExists(): " + reader.indexExists(index));

System.out.println("term field: " + new Term("id", identifier).field());
System.out.println("term text: " + new Term("id", identifier).text());
System.out.println("reader.docFreq: " + reader.docFreq(new Term("id",
identifier)));
System.out.println("deleting target now...");
  int deleted_num = reader.delete(new Term("id", identifier));
System.out.println("*** deleted_num: " + deleted_num);
  reader.close();
  try {
    IndexWriter writer = new IndexWriter(index, new StandardAnalyzer(),
false);
    String ident = identifier;
    Document doc = new Document();
    doc.add(Field.Text("id", identifier));
    doc.add(Field.Text("label", new_label));
    writer.addDocument(doc);
    writer.optimize();
    writer.close();
  } catch (Exception e) {
    System.out.println(" caught a " + e.getClass() +
"\n with message: " + e.getMessage());
  }

System.out.println("!!! reader.numDocs() after deleting and adding : " +
reader.numDocs());
}

}



   -----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
Sent: Sunday, June 22, 2003 9:42 PM
To: Lucene Users List

The code looks fine.  Unfortunately, the provided code is not a full,
self-sufficient class that I can run on my machine to verify the
behaviour that you are describing.

Otis

_________________________________________________________________
Stay informed on Election 2004 and the race to Super Tuesday. 
http://special.msn.com/msn/election2004.armx


Return-Path: <dhruba_borthakur@hotmail.com>
Received: (qmail 30363 invoked from network); 20 Feb 2004 08:58:38 -0000
Received: from unknown (HELO hotmail.com) (64.4.49.60)
by daedalus.apache.org with SMTP; 20 Feb 2004 08:58:38 -0000
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
Fri, 20 Feb 2004 00:58:50 -0800
Received: from 143.127.3.10 by by14fd.bay14.hotmail.msn.com with HTTP;
Fri, 20 Feb 2004 08:58:50 GMT
X-Originating-IP: [143.127.3.10]
X-Originating-Email: [dhruba_borthakur@hotmail.com]
X-Sender: dhruba_borthakur@hotmail.com
From: "Dhruba Borthakur" <dhruba_borthakur@hotmail.com>
To: lucene-user@jakarta.apache.org
Bcc:
Date: Fri, 20 Feb 2004 00:58:50 -0800
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
Message-ID: <BAY14-F60TQpE9jy0fA0001d990@hotmail.com>
X-OriginalArrivalTime: 20 Feb 2004 08:58:50.0984 (UTC) 
FILETIME=[C25E2680:01C3F78F]
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N

Hi folks,

I am using the latest and greatest Lucene jar file and am facing a problem
with
deleting documents from the index. Browsing the mail archive, I found that
the
following email (June 2003) listed the exact problem that I am encountering.

In short: I am using Field.text("id", "value") to mark a document. Then I
use
reader.delete(new Term("id", "value")) to remove the document: this
call returns 0 and fails to delete the document. The attached sample program
shows this behaviour.

i would appreciate it a lot if anybody in this list has encountered this
problem before
and would like to share his/her solution with me.

thanks,
dhruba



From: Robert Koberg <rob@koberg.com>
Subject: can't delete from an index using IndexReader.delete()
Date: Mon, 23 Jun 2003 14:38:25 -0700
Content-Type: text/plain;
charset="us-ascii"

Here is a simple class that can reproduce the problem (happens with the last
stable release too). Let me know if you would prefer this as an attachment.

Call like this:
java TestReaderDelete existing_id new_label
- or -

Try:
java TestReaderDelete B724547 ppppppp

and then try:
java TestReaderDelete a266122794 ppppppp

If an index has not been created it will create one. Keep running the one of
the above example commands (with and without deleting the index directory)
and see what happens to the System.out.println's



import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.Term;
import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.document.DateField;

import org.xml.sax.*;
import org.xml.sax.helpers.*;
import org.xml.sax.Attributes;
import javax.xml.parsers.*;

import java.io.*;
import java.util.*;


class TestReaderDelete {



public static void main(String[] args)
   throws IOException
{
   File index = new File("./testindex");
   if (!index.exists()) {
     HashMap test_map = new HashMap();
     test_map.put("preamble_content", "Preamble content bbb");
     test_map.put("art_01_section_01", "Article 1, Section 1");
     test_map.put("toc_tester", "Test TOC XML bbb");
     test_map.put("B724547", "bio example");
     test_map.put("a266122794", "tester");
     indexFiles(index, test_map);
   }
   String identifier = args[0];
   String new_label = args[1];
   testDeleteAndAdd(index, identifier, new_label);
}


public static void indexFiles(File index, HashMap test_map)
{
   try {
     IndexWriter writer = new IndexWriter(index, new StandardAnalyzer(),
true);
     for (Iterator i=test_map.entrySet().iterator(); i.hasNext(); ) {
       Map.Entry e = (Map.Entry) i.next();
System.out.println("Adding: " + e.getKey() + " = " + e.getValue());
       Document doc = new Document();
       doc.add(Field.Text("id", (String)e.getKey()));
       doc.add(Field.Text("label", (String)e.getValue()));
       writer.addDocument(doc);
     }
     writer.optimize();
     writer.close();
   } catch (Exception e) {
     System.out.println(" caught a " + e.getClass() +
"\n with message: " + e.getMessage());
   }
}


public static void testDeleteAndAdd(File index, String identifier, String
new_label)
   throws IOException
{
   IndexReader reader = IndexReader.open(index);
System.out.println("!!! reader.numDocs() : " + reader.numDocs());
System.out.println("reader.indexExists(): " + reader.indexExists(index));

System.out.println("term field: " + new Term("id", identifier).field());
System.out.println("term text: " + new Term("id", identifier).text());
System.out.println("reader.docFreq: " + reader.docFreq(new Term("id",
identifier)));
System.out.println("deleting target now...");
   int deleted_num = reader.delete(new Term("id", identifier));
System.out.println("*** deleted_num: " + deleted_num);
   reader.close();
   try {
     IndexWriter writer = new IndexWriter(index, new StandardAnalyzer(),
false);
     String ident = identifier;
     Document doc = new Document();
     doc.add(Field.Text("id", identifier));
     doc.add(Field.Text("label", new_label));
     writer.addDocument(doc);
     writer.optimize();
     writer.close();
   } catch (Exception e) {
     System.out.println(" caught a " + e.getClass() +
"\n with message: " + e.getMessage());
   }

System.out.println("!!! reader.numDocs() after deleting and adding : " +
reader.numDocs());
}

}



    -----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
Sent: Sunday, June 22, 2003 9:42 PM
To: Lucene Users List

The code looks fine.  Unfortunately, the provided code is not a full,
self-sufficient class that I can run on my machine to verify the
behaviour that you are describing.

Otis

_________________________________________________________________
Find and compare great deals on Broadband access at the MSN High-Speed 
Marketplace. http://click.atdmt.com/AVE/go/onm00200360ave/direct/01/

------=_NextPart_000_2db8_7440_4be1
Content-Type: text/plain; format=flowed


Return-Path: <dhruba_borthakur@hotmail.com>
Received: (qmail 33315 invoked from network); 20 Feb 2004 09:00:36 -0000
Received: from unknown (HELO hotmail.com) (64.4.49.40)
  by daedalus.apache.org with SMTP; 20 Feb 2004 09:00:36 -0000
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Fri, 20 Feb 2004 01:00:49 -0800
Received: from 143.127.3.10 by by14fd.bay14.hotmail.msn.com with HTTP;
	Fri, 20 Feb 2004 09:00:49 GMT
X-Originating-IP: [143.127.3.10]
X-Originating-Email: [dhruba_borthakur@hotmail.com]
X-Sender: dhruba_borthakur@hotmail.com
From: "Dhruba Borthakur" <dhruba_borthakur@hotmail.com>
To: lucene-user@jakarta.apache.org
Bcc:
Subject: Re:can't delete from an index using IndexReader.delete()
Date: Fri, 20 Feb 2004 01:00:49 -0800
Mime-Version: 1.0
Content-Type: multipart/mixed; boundary="----=_NextPart_000_3236_702b_6f4e"
Message-ID: <BAY14-F400dqKrjvn0b0001da4f@hotmail.com>
X-OriginalArrivalTime: 20 Feb 2004 09:00:49.0661 (UTC) 
FILETIME=[091AD2D0:01C3F790]
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N

This is a multi-part message in MIME format.

------=_NextPart_000_3236_702b_6f4e
Content-Type: text/plain; format=flowed

Hi folks,

I am using the latest and greatest Lucene jar file and am facing a problem
with
deleting documents from the index. Browsing the mail archive, I found that
the
following email (June 2003) listed the exact problem that I am encountering.

In short: I am using Field.text("id", "value") to mark a document. Then I
use
reader.delete(new Term("id", "value")) to remove the document: this
call returns 0 and fails to delete the document. The attached sample program
shows this behaviour.

i would appreciate it a lot if anybody in this list has encountered this
problem before
and would like to share his/her solution with me.

thanks,
dhruba


From: Robert Koberg <rob@koberg.com>
Subject: can't delete from an index using IndexReader.delete()
Date: Mon, 23 Jun 2003 14:38:25 -0700
Content-Type: text/plain;
charset="us-ascii"

Here is a simple class that can reproduce the problem (happens with the last
stable release too). Let me know if you would prefer this as an attachment.

Call like this:
java TestReaderDelete existing_id new_label
- or -

Try:
java TestReaderDelete B724547 ppppppp

and then try:
java TestReaderDelete a266122794 ppppppp

If an index has not been created it will create one. Keep running the one of
the above example commands (with and without deleting the index directory)
and see what happens to the System.out.println's



import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.Term;
import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.document.DateField;

import org.xml.sax.*;
import org.xml.sax.helpers.*;
import org.xml.sax.Attributes;
import javax.xml.parsers.*;

import java.io.*;
import java.util.*;


class TestReaderDelete {



public static void main(String[] args)
   throws IOException
{
   File index = new File("./testindex");
   if (!index.exists()) {
     HashMap test_map = new HashMap();
     test_map.put("preamble_content", "Preamble content bbb");
     test_map.put("art_01_section_01", "Article 1, Section 1");
     test_map.put("toc_tester", "Test TOC XML bbb");
     test_map.put("B724547", "bio example");
     test_map.put("a266122794", "tester");
     indexFiles(index, test_map);
   }
   String identifier = args[0];
   String new_label = args[1];
   testDeleteAndAdd(index, identifier, new_label);
}


public static void indexFiles(File index, HashMap test_map)
{
   try {
     IndexWriter writer = new IndexWriter(index, new StandardAnalyzer(),
true);
     for (Iterator i=test_map.entrySet().iterator(); i.hasNext(); ) {
       Map.Entry e = (Map.Entry) i.next();
System.out.println("Adding: " + e.getKey() + " = " + e.getValue());
       Document doc = new Document();
       doc.add(Field.Text("id", (String)e.getKey()));
       doc.add(Field.Text("label", (String)e.getValue()));
       writer.addDocument(doc);
     }
     writer.optimize();
     writer.close();
   } catch (Exception e) {
     System.out.println(" caught a " + e.getClass() +
"\n with message: " + e.getMessage());
   }
}


public static void testDeleteAndAdd(File index, String identifier, String
new_label)
   throws IOException
{
   IndexReader reader = IndexReader.open(index);
System.out.println("!!! reader.numDocs() : " + reader.numDocs());
System.out.println("reader.indexExists(): " + reader.indexExists(index));

System.out.println("term field: " + new Term("id", identifier).field());
System.out.println("term text: " + new Term("id", identifier).text());
System.out.println("reader.docFreq: " + reader.docFreq(new Term("id",
identifier)));
System.out.println("deleting target now...");
   int deleted_num = reader.delete(new Term("id", identifier));
System.out.println("*** deleted_num: " + deleted_num);
   reader.close();
   try {
     IndexWriter writer = new IndexWriter(index, new StandardAnalyzer(),
false);
     String ident = identifier;
     Document doc = new Document();
     doc.add(Field.Text("id", identifier));
     doc.add(Field.Text("label", new_label));
     writer.addDocument(doc);
     writer.optimize();
     writer.close();
   } catch (Exception e) {
     System.out.println(" caught a " + e.getClass() +
"\n with message: " + e.getMessage());
   }

System.out.println("!!! reader.numDocs() after deleting and adding : " +
reader.numDocs());
}

}



    -----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
Sent: Sunday, June 22, 2003 9:42 PM
To: Lucene Users List

The code looks fine.  Unfortunately, the provided code is not a full,
self-sufficient class that I can run on my machine to verify the
behaviour that you are describing.

Otis

_________________________________________________________________
Stay informed on Election 2004 and the race to Super Tuesday.
http://special.msn.com/msn/election2004.armx

------=_NextPart_000_3236_702b_6f4e
Content-Type: text/plain; format=flowed


Return-Path: <dhruba_borthakur@hotmail.com>
Received: (qmail 30363 invoked from network); 20 Feb 2004 08:58:38 -0000
Received: from unknown (HELO hotmail.com) (64.4.49.60)
  by daedalus.apache.org with SMTP; 20 Feb 2004 08:58:38 -0000
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Fri, 20 Feb 2004 00:58:50 -0800
Received: from 143.127.3.10 by by14fd.bay14.hotmail.msn.com with HTTP;
	Fri, 20 Feb 2004 08:58:50 GMT
X-Originating-IP: [143.127.3.10]
X-Originating-Email: [dhruba_borthakur@hotmail.com]
X-Sender: dhruba_borthakur@hotmail.com
From: "Dhruba Borthakur" <dhruba_borthakur@hotmail.com>
To: lucene-user@jakarta.apache.org
Bcc:
Date: Fri, 20 Feb 2004 00:58:50 -0800
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
Message-ID: <BAY14-F60TQpE9jy0fA0001d990@hotmail.com>
X-OriginalArrivalTime: 20 Feb 2004 08:58:50.0984 (UTC)
FILETIME=[C25E2680:01C3F78F]
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N

Hi folks,

I am using the latest and greatest Lucene jar file and am facing a problem
with
deleting documents from the index. Browsing the mail archive, I found that
the
following email (June 2003) listed the exact problem that I am encountering.

In short: I am using Field.text("id", "value") to mark a document. Then I
use
reader.delete(new Term("id", "value")) to remove the document: this
call returns 0 and fails to delete the document. The attached sample program
shows this behaviour.

i would appreciate it a lot if anybody in this list has encountered this
problem before
and would like to share his/her solution with me.

thanks,
dhruba



From: Robert Koberg <rob@koberg.com>
Subject: can't delete from an index using IndexReader.delete()
Date: Mon, 23 Jun 2003 14:38:25 -0700
Content-Type: text/plain;
	charset="us-ascii"

Here is a simple class that can reproduce the problem (happens with the last
stable release too). Let me know if you would prefer this as an attachment.

Call like this:
java TestReaderDelete existing_id new_label
- or -

Try:
java TestReaderDelete B724547 ppppppp

and then try:
java TestReaderDelete a266122794 ppppppp

If an index has not been created it will create one. Keep running the one of
the above example commands (with and without deleting the index directory)
and see what happens to the System.out.println's



import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.Term;
import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.document.DateField;

import org.xml.sax.*;
import org.xml.sax.helpers.*;
import org.xml.sax.Attributes;
import javax.xml.parsers.*;

import java.io.*;
import java.util.*;


class TestReaderDelete {



  public static void main(String[] args)
    throws IOException
  {
    File index = new File("./testindex");
    if (!index.exists()) {
      HashMap test_map = new HashMap();
      test_map.put("preamble_content", "Preamble content bbb");
      test_map.put("art_01_section_01", "Article 1, Section 1");
      test_map.put("toc_tester", "Test TOC XML bbb");
      test_map.put("B724547", "bio example");
      test_map.put("a266122794", "tester");
      indexFiles(index, test_map);
    }
    String identifier = args[0];
    String new_label = args[1];
    testDeleteAndAdd(index, identifier, new_label);
  }


  public static void indexFiles(File index, HashMap test_map)
  {
    try {
      IndexWriter writer = new IndexWriter(index, new StandardAnalyzer(),
true);
      for (Iterator i=test_map.entrySet().iterator(); i.hasNext(); ) {
        Map.Entry e = (Map.Entry) i.next();
System.out.println("Adding: " + e.getKey() + " = " + e.getValue());
        Document doc = new Document();
        doc.add(Field.Text("id", (String)e.getKey()));
        doc.add(Field.Text("label", (String)e.getValue()));
        writer.addDocument(doc);
      }
      writer.optimize();
      writer.close();
    } catch (Exception e) {
      System.out.println(" caught a " + e.getClass() +
			 "\n with message: " + e.getMessage());
    }
  }


  public static void testDeleteAndAdd(File index, String identifier, String
new_label)
    throws IOException
  {
    IndexReader reader = IndexReader.open(index);
System.out.println("!!! reader.numDocs() : " + reader.numDocs());
System.out.println("reader.indexExists(): " + reader.indexExists(index));

System.out.println("term field: " + new Term("id", identifier).field());
System.out.println("term text: " + new Term("id", identifier).text());
System.out.println("reader.docFreq: " + reader.docFreq(new Term("id",
identifier)));
System.out.println("deleting target now...");
    int deleted_num = reader.delete(new Term("id", identifier));
System.out.println("*** deleted_num: " + deleted_num);
    reader.close();
    try {
      IndexWriter writer = new IndexWriter(index, new StandardAnalyzer(),
false);
      String ident = identifier;
      Document doc = new Document();
      doc.add(Field.Text("id", identifier));
      doc.add(Field.Text("label", new_label));
      writer.addDocument(doc);
      writer.optimize();
      writer.close();
    } catch (Exception e) {
      System.out.println(" caught a " + e.getClass() +
			 "\n with message: " + e.getMessage());
    }

System.out.println("!!! reader.numDocs() after deleting and adding : " +
reader.numDocs());
  }

}



>-----Original Message-----
>From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
>Sent: Sunday, June 22, 2003 9:42 PM
>To: Lucene Users List
>
>The code looks fine.  Unfortunately, the provided code is not a full,
>self-sufficient class that I can run on my machine to verify the
>behaviour that you are describing.
>
>Otis

_________________________________________________________________
Take off on a romantic weekend or a family adventure to these great U.S.
locations. http://special.msn.com/local/hotdestinations.armx



------=_NextPart_000_3236_702b_6f4e--




------=_NextPart_000_2db8_7440_4be1
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
------=_NextPart_000_2db8_7440_4be1--

From MAILER-DAEMON Fri Feb 20 09:33:29 2004
Return-Path: 
 <lucene-user-return-7211-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64986 invoked from network); 20 Feb 2004 09:33:29 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 20 Feb 2004 09:33:29 -0000
Received: (qmail 87193 invoked by uid 500); 20 Feb 2004 09:32:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 87171 invoked by uid 500); 20 Feb 2004 09:32:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 87158 invoked from network); 20 Feb 2004 09:32:57 -0000
Received: from unknown (HELO mail.tanto-xipolis.de) (213.61.178.42)
  by daedalus.apache.org with SMTP; 20 Feb 2004 09:32:57 -0000
Received: from tucholsky.office.tanto.de (morus.xipolis.net [10.0.1.4])
	by mail.tanto-xipolis.de (Postfix on SuSE Linux 7.3 (i386)) with ESMTP id
 AB9C619B736
	for <lucene-user@jakarta.apache.org>; Fri, 20 Feb 2004 10:33:09 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id
 i1K9X9lT007092
	for <lucene-user@jakarta.apache.org>; Fri, 20 Feb 2004 10:33:09 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id i1K9X8Kb007088;
	Fri, 20 Feb 2004 10:33:08 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16437.54356.729753.411978@tanto-xipolis.de>
Date: Fri, 20 Feb 2004 10:33:08 +0100
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Re:can't delete from an index using IndexReader.delete() 
In-Reply-To: <BAY14-F61i30d6nesQG0001da2b@hotmail.com>
References: <BAY14-F61i30d6nesQG0001da2b@hotmail.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Dhruba Borthakur writes:
> Hi folks,
> 
> I am using the latest and greatest Lucene jar file and am facing a problem 
> with
> deleting documents from the index. Browsing the mail archive, I found that 
> the
> following email (June 2003) listed the exact problem that I am encountering.
> 
> In short: I am using Field.text("id", "value") to mark a document. Then I 
> use
> reader.delete(new Term("id", "value")) to remove the document: this
> call returns 0 and fails to delete the document. The attached sample program
> shows this behaviour.
> 
You don't tell us how your ids look like, but Field.text("id", value)
tokenizes value, that is splits value into whatever the analyzer considers
to be a token, and creates a term for each token. 
Whereas new Term("id", value) creates one term containing value.

So I guess your ids are considered several token by the analyzer you use
and therefore they won't be matched by the term you construct for the delete.

Using keyword fields instead of text fields for the id should help.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 20 11:23:37 2004
Return-Path: 
 <lucene-user-return-7212-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 26135 invoked from network); 20 Feb 2004 11:23:37 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 20 Feb 2004 11:23:37 -0000
Received: (qmail 38238 invoked by uid 500); 20 Feb 2004 11:23:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 38212 invoked by uid 500); 20 Feb 2004 11:23:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 38195 invoked from network); 20 Feb 2004 11:23:04 -0000
Received: from unknown (HELO mwinf0901.wanadoo.fr) (193.252.22.22)
  by daedalus.apache.org with SMTP; 20 Feb 2004 11:23:04 -0000
Received: from diderot (ABordeaux-202-2-1-206.w80-11.abo.wanadoo.fr
 [80.11.9.206])
	by mwinf0901.wanadoo.fr (SMTP Server) with ESMTP id D41F3180017D
	for <lucene-user@jakarta.apache.org>; Fri, 20 Feb 2004 12:23:17 +0100 (CET)
From: "Rasik Pandey" <rasik.pandey@ajlsm.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE : MultiReader
Date: Fri, 20 Feb 2004 12:23:17 +0100
Message-ID: <000001c3f7a3$f024cf60$ac7ba8c0@diderot>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
Importance: Normal
In-Reply-To: <403500B9.6010808@apache.org>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

> I just committed one!  This was really already there, in
> SegmentsReader,
> but it was not public and needed a few minor changes.  Enjoy.
>=20
> Doug

Great....thanks! Do you feel as though, managing an index made up of =
numerous smaller indices is an effective use of the MultiReader and =
MultiSearcher? Ignoring for a moment the potential of causing a "Too =
many open files" error, I feel as though it may be decent/reasonable way =
in which one could ensure overall index integrity by managing smaller =
parts.

As a side note, regarding the "Too many open files" issue, has anyone =
noticed that this could be related to the JVM? For instance, I have a =
coworker who tried to run a number of "optimized" indexes in a JVM =
instance and a received the "Too many open files" error. With the same =
number of available file descriptors (on linux ulimit =3D ulimited), he =
split the number of indicies over too JVM instances his problem =
disappeared.  He also tested the problem by increasing the available =
memory to the JVM instance, via the -Xmx parameter, with all indicies =
running in one JVM instance and again the problem disappeared. I think =
the issue deserves more testing to pin-point the exact problem, but I =
was just wondering if anyone has already experienced anything similar or =
if this information could be of use to anyone, in which case we should =
probably start a new thread dedicated to this issue.


Regards,
Rasik

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 20 11:41:21 2004
Return-Path: 
 <lucene-user-return-7213-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 34134 invoked from network); 20 Feb 2004 11:41:21 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 20 Feb 2004 11:41:21 -0000
Received: (qmail 63761 invoked by uid 500); 20 Feb 2004 11:41:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 63734 invoked by uid 500); 20 Feb 2004 11:41:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 63719 invoked from network); 20 Feb 2004 11:41:15 -0000
Received: from unknown (HELO mail.tanto-xipolis.de) (213.61.178.42)
  by daedalus.apache.org with SMTP; 20 Feb 2004 11:41:15 -0000
Received: from tucholsky.office.tanto.de (morus.xipolis.net [10.0.1.4])
	by mail.tanto-xipolis.de (Postfix on SuSE Linux 7.3 (i386)) with ESMTP id
 7814619B756
	for <lucene-user@jakarta.apache.org>; Fri, 20 Feb 2004 12:41:14 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id
 i1KBfElT007957
	for <lucene-user@jakarta.apache.org>; Fri, 20 Feb 2004 12:41:14 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id i1KBfENP007953;
	Fri, 20 Feb 2004 12:41:14 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16437.62041.994823.499199@tanto-xipolis.de>
Date: Fri, 20 Feb 2004 12:41:13 +0100
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: open files under linux
In-Reply-To: <000001c3f7a3$f024cf60$ac7ba8c0@diderot>
References: <403500B9.6010808@apache.org>
	<000001c3f7a3$f024cf60$ac7ba8c0@diderot>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Rasik Pandey writes:
 
> As a side note, regarding the "Too many open files" issue, has anyone noticed that this could be related to the JVM? For instance, I have a coworker who tried to run a number of "optimized" indexes in a JVM instance and a received the "Too many open files" error. With the same number of available file descriptors (on linux ulimit = ulimited), he split the number of indicies over too JVM instances his problem disappeared.  He also tested the problem by increasing the available memory to the JVM instance, via the -Xmx parameter, with all indicies running in one JVM instance and again the problem disappeared. I think the issue deserves more testing to pin-point the exact problem, but I was just wondering if anyone has already experienced anything similar or if this information could be of use to anyone, in which case we should probably start a new thread dedicated to this issue.
> 
The limit is per process. Two JVM make two processes.
(There's a per system limit too, but it's much higher; I think you find
it in /proc/sys/fs/file-max and it's default value depends on the amount
of memory the system has)

AFAIK there's no way of setting openfiles to unlimited. At least neither
bash nor tcsh accepts that.
But it should not be a problem to set it to very high values.
And you should be able to increase the system wide limit by writing to
/proc/sys/fs/file-max as long as you have enough memory.

I never used this, though.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 20 12:31:45 2004
Return-Path: 
 <lucene-user-return-7214-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58275 invoked from network); 20 Feb 2004 12:31:45 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 20 Feb 2004 12:31:45 -0000
Received: (qmail 17640 invoked by uid 500); 20 Feb 2004 12:31:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 17610 invoked by uid 500); 20 Feb 2004 12:31:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 17575 invoked from network); 20 Feb 2004 12:31:37 -0000
Received: from unknown (HELO tibor.swiftdsl.com.au) (202.154.92.226)
  by daedalus.apache.org with SMTP; 20 Feb 2004 12:31:37 -0000
Received: (qmail 22890 invoked from network); 20 Feb 2004 12:37:55 -0000
Received: from unknown (HELO madeinozlaptop) ([218.214.161.196])
          (envelope-sender <seaton@gateway.net.au>)
          by tibor.swiftdsl.com.au (qmail-ldap-1.03) with SMTP
          for <lucene-user@jakarta.apache.org>; 20 Feb 2004 12:37:55 -0000
From: "Stephen Eaton" <seaton@gateway.net.au>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: open files under linux
Date: Fri, 20 Feb 2004 20:31:34 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <16437.62041.994823.499199@tanto-xipolis.de>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
Thread-Index: AcP3pnLZGF5cvEdLTo6SL/7w0UwYRwABXk3g
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Easiest way is to use sysctl to view and change the max files setting. For
some reason the max-files is set to 8000 or something small (is for mandrake
anyway)

Sysctl fs.file-nr to view what is currently in use and what the max is set
for.  It reports file usage in the format of xxx yyy zzz  where xxx= max
that has been used by the system, yyy=currently being used, zzz=max
allocated.  So yyy should never get near zzz, if it does then you will get
the out of file errors.  Try using the command when you are getting the
issue and see what the system values are. 

To change use
Sysctl -w fs.file-max="32768"  to give it something decent.

Should solve your problems.

Stephen...


> -----Original Message-----
> From: Morus Walter [mailto:morus.walter@tanto.de] 
> Sent: Friday, 20 February 2004 7:41 PM
> To: Lucene Users List
> Subject: open files under linux
> 
> Rasik Pandey writes:
>  
> > As a side note, regarding the "Too many open files" issue, 
> has anyone noticed that this could be related to the JVM? For 
> instance, I have a coworker who tried to run a number of 
> "optimized" indexes in a JVM instance and a received the "Too 
> many open files" error. With the same number of available 
> file descriptors (on linux ulimit = ulimited), he split the 
> number of indicies over too JVM instances his problem 
> disappeared.  He also tested the problem by increasing the 
> available memory to the JVM instance, via the -Xmx parameter, 
> with all indicies running in one JVM instance and again the 
> problem disappeared. I think the issue deserves more testing 
> to pin-point the exact problem, but I was just wondering if 
> anyone has already experienced anything similar or if this 
> information could be of use to anyone, in which case we 
> should probably start a new thread dedicated to this issue.
> > 
> The limit is per process. Two JVM make two processes.
> (There's a per system limit too, but it's much higher; I 
> think you find it in /proc/sys/fs/file-max and it's default 
> value depends on the amount of memory the system has)
> 
> AFAIK there's no way of setting openfiles to unlimited. At 
> least neither bash nor tcsh accepts that.
> But it should not be a problem to set it to very high values.
> And you should be able to increase the system wide limit by 
> writing to /proc/sys/fs/file-max as long as you have enough memory.
> 
> I never used this, though.
> 
> Morus
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 
> __________ NOD32 1.628 (20040218) Information __________
> 
> This message was checked by NOD32 antivirus system.
> http://www.nod32.com
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 20 13:11:00 2004
Return-Path: 
 <lucene-user-return-7215-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 77256 invoked from network); 20 Feb 2004 13:11:00 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 20 Feb 2004 13:11:00 -0000
Received: (qmail 72035 invoked by uid 500); 20 Feb 2004 13:10:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 72014 invoked by uid 500); 20 Feb 2004 13:10:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 72001 invoked from network); 20 Feb 2004 13:10:52 -0000
Received: from unknown (HELO hotmail.com) (65.54.247.11)
  by daedalus.apache.org with SMTP; 20 Feb 2004 13:10:52 -0000
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Fri, 20 Feb 2004 05:10:53 -0800
Received: from 194.191.169.70 by by2fd.bay2.hotmail.msn.com with HTTP;
	Fri, 20 Feb 2004 13:10:52 GMT
X-Originating-IP: [194.191.169.70]
X-Originating-Email: [lufc4@hotmail.com]
X-Sender: lufc4@hotmail.com
From: "Alan Smith" <lufc4@hotmail.com>
To: lucene-user@jakarta.apache.org
Bcc: 
Subject: Concurrency
Date: Fri, 20 Feb 2004 13:10:52 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
Message-ID: <BAY2-F11q3kqL44RFJM00021678@hotmail.com>
X-OriginalArrivalTime: 20 Feb 2004 13:10:53.0051 (UTC)
 FILETIME=[F7D274B0:01C3F7B2]
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi

Ive just got a couple of questions which i cant quite work out...wondered if 
someone could help me with them:

1. What happens if i make a backup (copy) of an index while documents are 
being added? Can it cause problems, and if so is there a way to safely do 
this?

2. When I create a new IndexSearcher, what method does Lucene use to take a 
'snapshot' of the index (because if i add documents after the search object 
is created they dont appear in the search results)?

Many thanks

Al

_________________________________________________________________
It's fast, it's easy and it's free. Get MSN Messenger today! 
http://www.msn.co.uk/messenger


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 20 13:26:12 2004
Return-Path: 
 <lucene-user-return-7216-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 86030 invoked from network); 20 Feb 2004 13:26:12 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 20 Feb 2004 13:26:12 -0000
Received: (qmail 97808 invoked by uid 500); 20 Feb 2004 13:26:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 97663 invoked by uid 500); 20 Feb 2004 13:26:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 97642 invoked from network); 20 Feb 2004 13:26:04 -0000
Received: from unknown (HELO web12706.mail.yahoo.com) (216.136.173.243)
  by daedalus.apache.org with SMTP; 20 Feb 2004 13:26:04 -0000
Message-ID: <20040220132604.84569.qmail@web12706.mail.yahoo.com>
Received: from [194.152.226.120] by web12706.mail.yahoo.com via HTTP;
 Fri, 20 Feb 2004 05:26:04 PST
Date: Fri, 20 Feb 2004 05:26:04 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Concurrency
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <BAY2-F11q3kqL44RFJM00021678@hotmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> Ive just got a couple of questions which i cant quite work
> out...wondered if 
> someone could help me with them:
> 
> 1. What happens if i make a backup (copy) of an index while documents
> are 
> being added? Can it cause problems, and if so is there a way to
> safely do 
> this?

You should be okay.  When new documents are added, they are added to
new segments.  A 'table of contents' of all valid segments is in
'segments' file.  Even if you copy extra segments, your index will
still work, it's just that your searches may not search newly created
segments, whose existence was not registered in segments file, when you
copied the index.

> 2. When I create a new IndexSearcher, what method does Lucene use to
> take a 
> 'snapshot' of the index (because if i add documents after the search
> object 
> is created they dont appear in the search results)?

This is related to the answer under 1.  New documents are not seen with
an old IndexSearcher, because the old IndexSearcher is not aware of new
segments.
It would have to re-read the segments file and read any new segments
found, in order to become aware of new segments and documents in them.

Otis


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 20 16:41:37 2004
Return-Path: 
 <lucene-user-return-7217-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 13281 invoked from network); 20 Feb 2004 16:41:37 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 20 Feb 2004 16:41:37 -0000
Received: (qmail 44465 invoked by uid 500); 20 Feb 2004 16:41:25 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 44432 invoked by uid 500); 20 Feb 2004 16:41:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 44389 invoked from network); 20 Feb 2004 16:41:24 -0000
Received: from unknown (HELO dougal.magus.co.uk) (193.130.109.2)
  by daedalus.apache.org with SMTP; 20 Feb 2004 16:41:24 -0000
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Concurrency
X-MimeOLE: Produced By Microsoft Exchange V6.0.6249.0
Date: Fri, 20 Feb 2004 16:37:57 -0000
Message-ID: <51194813DA293D4CA3FC4AD392F8D99305B0F369@dougal.magus.co.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Concurrency
Thread-Index: AcP3tJ7h3K8IRo6JQq61p6GOG47RbgAGpn3w
From: "David Townsend" <david.townsend@magus.co.uk>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Does this mean that if an IndexSearcher has hold of a segment file, then =
the index is optimised, any subsequent search will use a list of files =
that probably don't exist anymore?

David Townsend

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
Sent: 20 February 2004 13:26
To: Lucene Users List
Subject: Re: Concurrency


> Ive just got a couple of questions which i cant quite work
> out...wondered if=20
> someone could help me with them:
>=20
> 1. What happens if i make a backup (copy) of an index while documents
> are=20
> being added? Can it cause problems, and if so is there a way to
> safely do=20
> this?

You should be okay.  When new documents are added, they are added to
new segments.  A 'table of contents' of all valid segments is in
'segments' file.  Even if you copy extra segments, your index will
still work, it's just that your searches may not search newly created
segments, whose existence was not registered in segments file, when you
copied the index.

> 2. When I create a new IndexSearcher, what method does Lucene use to
> take a=20
> 'snapshot' of the index (because if i add documents after the search
> object=20
> is created they dont appear in the search results)?

This is related to the answer under 1.  New documents are not seen with
an old IndexSearcher, because the old IndexSearcher is not aware of new
segments.
It would have to re-read the segments file and read any new segments
found, in order to become aware of new segments and documents in them.

Otis


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 20 16:43:14 2004
Return-Path: 
 <lucene-user-return-7218-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 13945 invoked from network); 20 Feb 2004 16:43:14 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 20 Feb 2004 16:43:14 -0000
Received: (qmail 48820 invoked by uid 500); 20 Feb 2004 16:43:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 48672 invoked by uid 500); 20 Feb 2004 16:43:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 48659 invoked from network); 20 Feb 2004 16:43:03 -0000
Received: from unknown (HELO sccrmhc13.comcast.net) (204.127.202.64)
  by daedalus.apache.org with SMTP; 20 Feb 2004 16:43:03 -0000
Received: from apache.org (c-24-5-145-151.client.comcast.net[24.5.145.151])
          by comcast.net (sccrmhc13) with ESMTP
          id <2004022016430501600n8hr9e>; Fri, 20 Feb 2004 16:43:05 +0000
Message-ID: <40363915.2020208@apache.org>
Date: Fri, 20 Feb 2004 08:43:01 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040116
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Concurrency
References: <BAY2-F11q3kqL44RFJM00021678@hotmail.com>
In-Reply-To: <BAY2-F11q3kqL44RFJM00021678@hotmail.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Alan Smith wrote:
> 1. What happens if i make a backup (copy) of an index while documents 
> are being added? Can it cause problems, and if so is there a way to 
> safely do this?

This is not in general safe.  A copy may not be a usable index.  The 
segments file points to the current set of files.  An IndexWriter 
periodically rewrites the segments file, and then may delete files which 
are no longer used.  If you copy the segments file, then, before you 
copy all the files, the segments file is re-written and some files are 
deleted, your copied index will be incoherent.  Or, vice versa, you 
might copy the segments file last, and it may refer to newly created 
files which you failed to copy.

The safest way to do this is to use an IndexReader to make your backup, 
with something like:

   IndexReader reader = IndexReader.open("index");
   IndexWriter writer = new IndexWriter("backup", analyzer, true);
   writer.addIndexes(new IndexReader[] { reader });
   writer.close();
   reader.close();

This will use Lucene's locking code to make sure all is safe.

> 2. When I create a new IndexSearcher, what method does Lucene use to 
> take a 'snapshot' of the index (because if i add documents after the 
> search object is created they dont appear in the search results)?

It keeps the existing set of files open.  As described above, Lucene 
modifies an index by adding new files and removing old ones.  But an 
open index never changes its set of files.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 20 16:56:18 2004
Return-Path: 
 <lucene-user-return-7219-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21951 invoked from network); 20 Feb 2004 16:56:18 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 20 Feb 2004 16:56:18 -0000
Received: (qmail 85724 invoked by uid 500); 20 Feb 2004 16:56:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 85696 invoked by uid 500); 20 Feb 2004 16:56:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 85669 invoked from network); 20 Feb 2004 16:56:05 -0000
Received: from unknown (HELO sccrmhc12.comcast.net) (204.127.202.56)
  by daedalus.apache.org with SMTP; 20 Feb 2004 16:56:05 -0000
Received: from apache.org (c-24-5-145-151.client.comcast.net[24.5.145.151])
          by comcast.net (sccrmhc12) with ESMTP
          id <2004022016560701200fotlue>; Fri, 20 Feb 2004 16:56:08 +0000
Message-ID: <40363C24.3060500@apache.org>
Date: Fri, 20 Feb 2004 08:56:04 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040116
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Concurrency
References: <51194813DA293D4CA3FC4AD392F8D99305B0F369@dougal.magus.co.uk>
In-Reply-To: <51194813DA293D4CA3FC4AD392F8D99305B0F369@dougal.magus.co.uk>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

David Townsend wrote:
> Does this mean that if an IndexSearcher has hold of a segment file, then the index is optimised, any subsequent search will use a list of files that probably don't exist anymore?

The IndexSearcher (through an IndexReader) has the files open, so it is 
still valid, and may be searched.  On Unix, the may have already been 
deleted, since Unix lets you delete files which are open, reclaiming the 
disk space when they're closed (or the process exits).  On Win32 one 
cannot delete open files and Lucene must queue deletions.

So, yes, on Unix you may be searching index files that have been 
deleted.  Whether such files exist or not is a matter for philosophers.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 20 17:05:26 2004
Return-Path: 
 <lucene-user-return-7220-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 29036 invoked from network); 20 Feb 2004 17:05:26 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 20 Feb 2004 17:05:26 -0000
Received: (qmail 7517 invoked by uid 500); 20 Feb 2004 17:05:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 7485 invoked by uid 500); 20 Feb 2004 17:05:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 7470 invoked from network); 20 Feb 2004 17:05:13 -0000
Received: from unknown (HELO sn2.cwihosting.com) (66.216.127.33)
  by daedalus.apache.org with SMTP; 20 Feb 2004 17:05:13 -0000
Received: from h00e07dd8f05b.ne.client2.attbi.com ([24.60.185.190]
 helo=mgiles-office.visionstudio.com)
	by sn2.cwihosting.com with esmtp (Exim 4.24)
	id 1AuE5U-00017C-Pw
	for lucene-user@jakarta.apache.org; Fri, 20 Feb 2004 11:05:16 -0600
Message-Id: <6.0.0.22.0.20040220115914.04f895f8@mail.visionstudio.com>
X-Sender: mgiles%visionstudio.com@mail.visionstudio.com (Unverified)
X-Mailer: QUALCOMM Windows Eudora Version 6.0.0.22
Date: Fri, 20 Feb 2004 12:05:55 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: Michael Giles <mgiles@visionstudio.com>
Subject: Re: Concurrency
In-Reply-To: <40363915.2020208@apache.org>
References: <BAY2-F11q3kqL44RFJM00021678@hotmail.com>
 <40363915.2020208@apache.org>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-AntiAbuse: This header was added to track abuse,
 please include it with any abuse report
X-AntiAbuse: Primary Hostname - sn2.cwihosting.com
X-AntiAbuse: Original Domain - jakarta.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - visionstudio.com
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

It would be great if we could come up with way to integrate the Lucene 
locking information with something more incremental like rsync.  At Furl ( 
http://www.furl.net ) we have this problem in spades because we have 
thousands (and thousands) of indexes that need to be backed up.  Currently, 
we run rsync frequently (i.e. hourly) with "safe" (i.e. stopped server) 
daily snapshots (that rollover, etc.).  Essentially we are playing the odds 
on the frequent backups since indexes are only open for the moment that a 
new item is saved (i.e. they are reopened/closed each time) and we also 
have all of the data to recreate them if need be.  But this is definitely a 
topic we have discussed and it would be nice to have a solution to it.

Any other ideas out there (i.e. a way to check the locks and then retry a 
bit later)?

-Mike

At 11:43 AM 2/20/2004, you wrote:
>Alan Smith wrote:
>>1. What happens if i make a backup (copy) of an index while documents are 
>>being added? Can it cause problems, and if so is there a way to safely do this?
>
>This is not in general safe.  A copy may not be a usable index.  The 
>segments file points to the current set of files.  An IndexWriter 
>periodically rewrites the segments file, and then may delete files which 
>are no longer used.  If you copy the segments file, then, before you copy 
>all the files, the segments file is re-written and some files are deleted, 
>your copied index will be incoherent.  Or, vice versa, you might copy the 
>segments file last, and it may refer to newly created files which you 
>failed to copy.
>
>The safest way to do this is to use an IndexReader to make your backup, 
>with something like:
>
>   IndexReader reader = IndexReader.open("index");
>   IndexWriter writer = new IndexWriter("backup", analyzer, true);
>   writer.addIndexes(new IndexReader[] { reader });
>   writer.close();
>   reader.close();
>
>This will use Lucene's locking code to make sure all is safe.
>
>>2. When I create a new IndexSearcher, what method does Lucene use to take 
>>a 'snapshot' of the index (because if i add documents after the search 
>>object is created they dont appear in the search results)?
>
>It keeps the existing set of files open.  As described above, Lucene 
>modifies an index by adding new files and removing old ones.  But an open 
>index never changes its set of files.
>
>Doug
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 20 17:18:47 2004
Return-Path: 
 <lucene-user-return-7221-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 40623 invoked from network); 20 Feb 2004 17:18:47 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 20 Feb 2004 17:18:47 -0000
Received: (qmail 51969 invoked by uid 500); 20 Feb 2004 17:18:35 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 51948 invoked by uid 500); 20 Feb 2004 17:18:35 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 51935 invoked from network); 20 Feb 2004 17:18:35 -0000
Received: from unknown (HELO hotmail.com) (65.54.247.123)
  by daedalus.apache.org with SMTP; 20 Feb 2004 17:18:35 -0000
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Fri, 20 Feb 2004 09:18:38 -0800
Received: from 194.191.169.70 by by2fd.bay2.hotmail.msn.com with HTTP;
	Fri, 20 Feb 2004 17:18:38 GMT
X-Originating-IP: [194.191.169.70]
X-Originating-Email: [lufc4@hotmail.com]
X-Sender: lufc4@hotmail.com
From: "Alan Smith" <lufc4@hotmail.com>
To: lucene-user@jakarta.apache.org
Bcc: 
Subject: Concurrency
Date: Fri, 20 Feb 2004 17:18:38 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
Message-ID: <BAY2-F123J3r2D6lTsv00022075@hotmail.com>
X-OriginalArrivalTime: 20 Feb 2004 17:18:38.0701 (UTC)
 FILETIME=[9470A1D0:01C3F7D5]
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks Doug and Otis. Thats very helpful.

So if an IndexSearcher is open, new documents are just added to existing 
index files which remain under the same name yeah? And an IndexSearcher 
which continues to search these changed files will still return the same 
results (i.e. the modifications won't affect the searches)...is that right?

Cheers

Al

Alan Smith wrote:
>1. What happens if i make a backup (copy) of an index while documents are 
>being added? Can it cause problems, and if so is there a way to safely do 
>this?

This is not in general safe.  A copy may not be a usable index.  The
segments file points to the current set of files.  An IndexWriter
periodically rewrites the segments file, and then may delete files which
are no longer used.  If you copy the segments file, then, before you
copy all the files, the segments file is re-written and some files are
deleted, your copied index will be incoherent.  Or, vice versa, you
might copy the segments file last, and it may refer to newly created
files which you failed to copy.

The safest way to do this is to use an IndexReader to make your backup,
with something like:

   IndexReader reader = IndexReader.open("index");
   IndexWriter writer = new IndexWriter("backup", analyzer, true);
   writer.addIndexes(new IndexReader[] { reader });
   writer.close();
   reader.close();

This will use Lucene's locking code to make sure all is safe.

>2. When I create a new IndexSearcher, what method does Lucene use to take a 
>'snapshot' of the index (because if i add documents after the search object 
>is created they dont appear in the search results)?

It keeps the existing set of files open.  As described above, Lucene
modifies an index by adding new files and removing old ones.  But an
open index never changes its set of files.

Doug

_________________________________________________________________
Express yourself with cool new emoticons http://www.msn.co.uk/specials/myemo


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 20 22:39:08 2004
Return-Path: 
 <lucene-user-return-7222-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 26355 invoked from network); 20 Feb 2004 22:39:08 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 20 Feb 2004 22:39:08 -0000
Received: (qmail 87981 invoked by uid 500); 20 Feb 2004 22:38:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 87959 invoked by uid 500); 20 Feb 2004 22:38:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 87931 invoked from network); 20 Feb 2004 22:38:47 -0000
Received: from unknown (HELO smartdatainc.com) (203.129.220.82)
  by daedalus.apache.org with SMTP; 20 Feb 2004 22:38:47 -0000
Received: from raman ([192.168.199.212])
	by smartdatainc.com ([192.168.199.92])
	with SMTP (MDaemon.PRO.v6.5.2.R)
	for <lucene-user@jakarta.apache.org>; Sat, 21 Feb 2004 04:08:47 +0530
Message-ID: <00a001c3f801$d3a7a160$d4c7a8c0@raman>
From: "Raman" <ramang@smartdatainc.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: using relative paths
Date: Sat, 21 Feb 2004 04:05:19 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_009D_01C3F82F.EB5B5AD0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-MDRemoteIP: 192.168.199.212
X-Return-Path: ramang@smartdatainc.com
X-MDaemon-Deliver-To: lucene-user@jakarta.apache.org
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_009D_01C3F82F.EB5B5AD0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi
I am using Lucene with Struts framework in my web application.
I am using Tomcat and have my application in webapp directory. I want to =
create indexes for all the HTMLs lying in html folder.=20
I am facing problem in giving relative paths for the source and index =
folders in my fn to create index.

indexDocs(root, index, create);    // add new docs

How can i give relative paths for that..
Pls give me some example.. that will be helpful

Thanks..
Raman Garg



-- Raman
------=_NextPart_000_009D_01C3F82F.EB5B5AD0--


From MAILER-DAEMON Fri Feb 20 23:08:08 2004
Return-Path: 
 <lucene-user-return-7223-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 37811 invoked from network); 20 Feb 2004 23:08:08 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 20 Feb 2004 23:08:08 -0000
Received: (qmail 15473 invoked by uid 500); 20 Feb 2004 23:07:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 15452 invoked by uid 500); 20 Feb 2004 23:07:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 15437 invoked from network); 20 Feb 2004 23:07:48 -0000
Received: from unknown (HELO germany.prod.thop-ny.triplehop.com)
 (216.74.150.80)
  by daedalus.apache.org with SMTP; 20 Feb 2004 23:07:48 -0000
Received: from hui2000 ([208.246.29.6]) by germany.prod.thop-ny.triplehop.com
 with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 20 Feb 2004 18:07:15 -0500
From: "hui" <hui@triplehop.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: using previous lucene lock with 1.3 final
Date: Fri, 20 Feb 2004 18:09:57 -0500
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_014C_01C3F7DC.BFCACA70"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <00a001c3f801$d3a7a160$d4c7a8c0@raman>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
thread-index: AcP4Aj/EIf81DeuoQai3myEs2oJvXADJic1g
Message-ID: <GERMANYs0Z60e28wBNE000017df@germany.prod.thop-ny.triplehop.com>
X-OriginalArrivalTime: 20 Feb 2004 23:07:15.0819 (UTC)
 FILETIME=[48038BB0:01C3F806]
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_014C_01C3F7DC.BFCACA70
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,
To use latest release 1.3 and make the existing application based on Lucene
1.3 RC1 to be back compatible, did little change on makeLock  method of
FSDirectory.java so the lock file for each index is going to still stay in
the same directory with the "write.lock" name. Just add one flag
"traditionalLock", by set the default value to true, the lock file is going
to be created as 1.3RC1. It seems works fine with 1.3 final release.
Does anyone foresee some potential issues here?

Regards,
Hui

------=_NextPart_000_014C_01C3F7DC.BFCACA70
Content-Type: java/*;
	name="FSDirectory.java"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="FSDirectory.java"

package org.apache.lucene.store;=0A=
=0A=
/* =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A=
 * The Apache Software License, Version 1.1=0A=
 *=0A=
 * Copyright (c) 2001, 2003 The Apache Software Foundation.  All=0A=
 * rights reserved.=0A=
 *=0A=
 * Redistribution and use in source and binary forms, with or without=0A=
 * modification, are permitted provided that the following conditions=0A=
 * are met:=0A=
 *=0A=
 * 1. Redistributions of source code must retain the above copyright=0A=
 *    notice, this list of conditions and the following disclaimer.=0A=
 *=0A=
 * 2. Redistributions in binary form must reproduce the above copyright=0A=
 *    notice, this list of conditions and the following disclaimer in=0A=
 *    the documentation and/or other materials provided with the=0A=
 *    distribution.=0A=
 *=0A=
 * 3. The end-user documentation included with the redistribution,=0A=
 *    if any, must include the following acknowledgment:=0A=
 *       "This product includes software developed by the=0A=
 *        Apache Software Foundation (http://www.apache.org/)."=0A=
 *    Alternately, this acknowledgment may appear in the software itself,=0A=
 *    if and wherever such third-party acknowledgments normally appear.=0A=
 *=0A=
 * 4. The names "Apache" and "Apache Software Foundation" and=0A=
 *    "Apache Lucene" must not be used to endorse or promote products=0A=
 *    derived from this software without prior written permission. For=0A=
 *    written permission, please contact apache@apache.org.=0A=
 *=0A=
 * 5. Products derived from this software may not be called "Apache",=0A=
 *    "Apache Lucene", nor may "Apache" appear in their name, without=0A=
 *    prior written permission of the Apache Software Foundation.=0A=
 *=0A=
 * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED=0A=
 * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES=0A=
 * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE=0A=
 * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR=0A=
 * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,=0A=
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT=0A=
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF=0A=
 * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND=0A=
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,=0A=
 * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT=0A=
 * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF=0A=
 * SUCH DAMAGE.=0A=
 * =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A=
 *=0A=
 * This software consists of voluntary contributions made by many=0A=
 * individuals on behalf of the Apache Software Foundation.  For more=0A=
 * information on the Apache Software Foundation, please see=0A=
 * <http://www.apache.org/>.=0A=
 */=0A=
=0A=
import java.io.IOException;=0A=
import java.io.File;=0A=
import java.io.RandomAccessFile;=0A=
import java.io.FileInputStream;=0A=
import java.io.FileOutputStream;=0A=
import java.util.Hashtable;=0A=
import java.security.MessageDigest;=0A=
import java.security.NoSuchAlgorithmException;=0A=
=0A=
import org.apache.lucene.util.Constants;=0A=
=0A=
/**=0A=
 * Straightforward implementation of {@link Directory} as a directory of =
files.=0A=
 * <p>If the system property 'disableLuceneLocks' has the String value of=0A=
 * "true", lock creation will be disabled.=0A=
 *=0A=
 * @see Directory=0A=
 * @author Doug Cutting=0A=
 */=0A=
public final class FSDirectory extends Directory {=0A=
  /** This cache of directories ensures that there is a unique Directory=0A=
   * instance per path, so that synchronization on the Directory can be =
used to=0A=
   * synchronize access between readers and writers.=0A=
   *=0A=
   * This should be a WeakHashMap, so that entries can be GC'd, but that =
would=0A=
   * require Java 1.2.  Instead we use refcounts...=0A=
   */=0A=
  private static final Hashtable DIRECTORIES =3D new Hashtable();=0A=
=0A=
  private static final boolean DISABLE_LOCKS =3D=0A=
      Boolean.getBoolean("disableLuceneLocks") || Constants.JAVA_1_1;=0A=
=0A=
  private static MessageDigest DIGESTER;=0A=
=0A=
  private static boolean traditionalLock =3D true;=0A=
=0A=
  static {=0A=
    try {=0A=
      DIGESTER =3D MessageDigest.getInstance("MD5");=0A=
    } catch (NoSuchAlgorithmException e) {=0A=
        throw new RuntimeException(e.toString());=0A=
    }=0A=
    if (System.getProperty("traditionalLock")!=3D null)=0A=
    {=0A=
      if("true".equals(System.getProperty("traditionalLock")))=0A=
        traditionalLock =3D true;=0A=
      if("false".equals(System.getProperty("traditionalLock")))=0A=
        traditionalLock =3D false;=0A=
      =0A=
    }=0A=
  }=0A=
=0A=
  /** A buffer optionally used in renameTo method */=0A=
  private byte[] buffer =3D null;=0A=
=0A=
  /** Returns the directory instance for the named location.=0A=
   *=0A=
   * <p>Directories are cached, so that, for a given canonical path, the =
same=0A=
   * FSDirectory instance will always be returned.  This permits=0A=
   * synchronization on directories.=0A=
   *=0A=
   * @param path the path to the directory.=0A=
   * @param create if true, create, or erase any existing contents.=0A=
   * @return the FSDirectory for the named file.  */=0A=
  public static FSDirectory getDirectory(String path, boolean create)=0A=
      throws IOException {=0A=
    return getDirectory(new File(path), create);=0A=
  }=0A=
=0A=
  /** Returns the directory instance for the named location.=0A=
   *=0A=
   * <p>Directories are cached, so that, for a given canonical path, the =
same=0A=
   * FSDirectory instance will always be returned.  This permits=0A=
   * synchronization on directories.=0A=
   *=0A=
   * @param file the path to the directory.=0A=
   * @param create if true, create, or erase any existing contents.=0A=
   * @return the FSDirectory for the named file.  */=0A=
  public static FSDirectory getDirectory(File file, boolean create)=0A=
    throws IOException {=0A=
    file =3D new File(file.getCanonicalPath());=0A=
    FSDirectory dir;=0A=
    synchronized (DIRECTORIES) {=0A=
      dir =3D (FSDirectory)DIRECTORIES.get(file);=0A=
      if (dir =3D=3D null) {=0A=
        dir =3D new FSDirectory(file, create);=0A=
        DIRECTORIES.put(file, dir);=0A=
      } else if (create) {=0A=
        dir.create();=0A=
      }=0A=
    }=0A=
    synchronized (dir) {=0A=
      dir.refCount++;=0A=
    }=0A=
    return dir;=0A=
  }=0A=
=0A=
  private File directory =3D null;=0A=
  private int refCount;=0A=
=0A=
  private FSDirectory(File path, boolean create) throws IOException {=0A=
    directory =3D path;=0A=
=0A=
    if (create)=0A=
      create();=0A=
=0A=
    if (!directory.isDirectory())=0A=
      throw new IOException(path + " not a directory");=0A=
  }=0A=
=0A=
  private synchronized void create() throws IOException {=0A=
    if (!directory.exists())=0A=
      if (!directory.mkdir())=0A=
        throw new IOException("Cannot create directory: " + directory);=0A=
=0A=
    String[] files =3D directory.list();            // clear old files=0A=
    for (int i =3D 0; i < files.length; i++) {=0A=
      File file =3D new File(directory, files[i]);=0A=
      if (!file.delete())=0A=
        throw new IOException("couldn't delete " + files[i]);=0A=
    }=0A=
    if (!this.isTraditionalLock())=0A=
    {=0A=
      String lockPrefix =3D getLockPrefix().toString(); // clear old =
locks=0A=
      File tmpdir =3D new File(System.getProperty("java.io.tmpdir"));=0A=
      files =3D tmpdir.list();=0A=
      for (int i =3D 0; i < files.length; i++) {=0A=
        if (!files[i].startsWith(lockPrefix))=0A=
          continue;=0A=
        File file =3D new File(tmpdir, files[i]);=0A=
        if (!file.delete())=0A=
          throw new IOException("couldn't delete " + files[i]);=0A=
      }=0A=
    }=0A=
  }=0A=
=0A=
  /** Returns an array of strings, one for each file in the directory. */=0A=
  public final String[] list() throws IOException {=0A=
    return directory.list();=0A=
  }=0A=
=0A=
  /** Returns true iff a file with the given name exists. */=0A=
  public final boolean fileExists(String name) throws IOException {=0A=
    File file =3D new File(directory, name);=0A=
    return file.exists();=0A=
  }=0A=
=0A=
  /** Returns the time the named file was last modified. */=0A=
  public final long fileModified(String name) throws IOException {=0A=
    File file =3D new File(directory, name);=0A=
    return file.lastModified();=0A=
  }=0A=
=0A=
  /** Returns the time the named file was last modified. */=0A=
  public static final long fileModified(File directory, String name)=0A=
       throws IOException {=0A=
    File file =3D new File(directory, name);=0A=
    return file.lastModified();=0A=
  }=0A=
=0A=
  /** Set the modified time of an existing file to now. */=0A=
  public void touchFile(String name) throws IOException {=0A=
    File file =3D new File(directory, name);=0A=
    file.setLastModified(System.currentTimeMillis());=0A=
  }=0A=
=0A=
  /** Returns the length in bytes of a file in the directory. */=0A=
  public final long fileLength(String name) throws IOException {=0A=
    File file =3D new File(directory, name);=0A=
    return file.length();=0A=
  }=0A=
=0A=
  /** Removes an existing file in the directory. */=0A=
  public final void deleteFile(String name) throws IOException {=0A=
    File file =3D new File(directory, name);=0A=
    if (!file.delete())=0A=
      throw new IOException("couldn't delete " + name);=0A=
  }=0A=
=0A=
  /** Renames an existing file in the directory. */=0A=
  public final synchronized void renameFile(String from, String to)=0A=
      throws IOException {=0A=
    File old =3D new File(directory, from);=0A=
    File nu =3D new File(directory, to);=0A=
=0A=
    /* This is not atomic.  If the program crashes between the call to=0A=
       delete() and the call to renameTo() then we're screwed, but I've=0A=
       been unable to figure out how else to do this... */=0A=
=0A=
    if (nu.exists())=0A=
      if (!nu.delete())=0A=
        throw new IOException("couldn't delete " + to);=0A=
=0A=
    // Rename the old file to the new one. Unfortunately, the renameTo()=0A=
    // method does not work reliably under some JVMs.  Therefore, if the=0A=
    // rename fails, we manually rename by copying the old file to the =
new one=0A=
    if (!old.renameTo(nu)) {=0A=
      java.io.InputStream in =3D null;=0A=
      java.io.OutputStream out =3D null;=0A=
      try {=0A=
        in =3D new FileInputStream(old);=0A=
        out =3D new FileOutputStream(nu);=0A=
        // see if the buffer needs to be initialized. Initialization is=0A=
        // only done on-demand since many VM's will never run into the =
renameTo=0A=
        // bug and hence shouldn't waste 1K of mem for no reason.=0A=
        if (buffer =3D=3D null) {=0A=
          buffer =3D new byte[1024];=0A=
        }=0A=
        int len;=0A=
        while ((len =3D in.read(buffer)) >=3D 0) {=0A=
          out.write(buffer, 0, len);=0A=
        }=0A=
=0A=
        // delete the old file.=0A=
        old.delete();=0A=
      }=0A=
      catch (IOException ioe) {=0A=
        throw new IOException("couldn't rename " + from + " to " + to);=0A=
      }=0A=
      finally {=0A=
        if (in !=3D null) {=0A=
          try {=0A=
            in.close();=0A=
          } catch (IOException e) {=0A=
            throw new RuntimeException("could not close input stream: " =
+ e.getMessage());=0A=
          }=0A=
        }=0A=
        if (out !=3D null) {=0A=
          try {=0A=
            out.close();=0A=
          } catch (IOException e) {=0A=
            throw new RuntimeException("could not close output stream: " =
+ e.getMessage());=0A=
          }=0A=
        }=0A=
      }=0A=
    }=0A=
  }=0A=
=0A=
  /** Creates a new, empty file in the directory with the given name.=0A=
      Returns a stream writing this file. */=0A=
  public final OutputStream createFile(String name) throws IOException {=0A=
    return new FSOutputStream(new File(directory, name));=0A=
  }=0A=
=0A=
  /** Returns a stream reading an existing file. */=0A=
  public final InputStream openFile(String name) throws IOException {=0A=
    return new FSInputStream(new File(directory, name));=0A=
  }=0A=
=0A=
  /**=0A=
   * So we can do some byte-to-hexchar conversion below=0A=
   */=0A=
  private static final char[] HEX_DIGITS =3D=0A=
  {'0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f'};=0A=
=0A=
  /** Constructs a {@link Lock} with the specified name.  Locks are =
implemented=0A=
   * with {@link File#createNewFile() }.=0A=
   *=0A=
   * <p>In JDK 1.1 or if system property <I>disableLuceneLocks</I> is the=0A=
   * string "true", locks are disabled.  Assigning this property any =
other=0A=
   * string will <B>not</B> prevent creation of lock files.  This is =
useful for=0A=
   * using Lucene on read-only medium, such as CD-ROM.=0A=
   *=0A=
   * @param name the name of the lock file=0A=
   * @return an instance of <code>Lock</code> holding the lock=0A=
   */=0A=
  public final Lock makeLock(String name) {=0A=
=0A=
 	  final File lockFile ;=0A=
  	if (traditionalLock){=0A=
  	  lockFile =3D new File(directory, name);=0A=
    }=0A=
  	else{=0A=
      StringBuffer buf =3D getLockPrefix();=0A=
      buf.append("-");=0A=
      buf.append(name);=0A=
=0A=
      // make the lock file in tmp, where anyone can create files.=0A=
      lockFile =3D new File(System.getProperty("java.io.tmpdir"),=0A=
                                   buf.toString());=0A=
	  }=0A=
=0A=
    return new Lock() {=0A=
      public boolean obtain() throws IOException {=0A=
        if (DISABLE_LOCKS)=0A=
          return true;=0A=
        return lockFile.createNewFile();=0A=
      }=0A=
      public void release() {=0A=
        if (DISABLE_LOCKS)=0A=
          return;=0A=
        lockFile.delete();=0A=
      }=0A=
      public boolean isLocked() {=0A=
        if (DISABLE_LOCKS)=0A=
          return false;=0A=
        return lockFile.exists();=0A=
      }=0A=
=0A=
      public String toString() {=0A=
        return "Lock@" + lockFile;=0A=
      }=0A=
    };=0A=
  }=0A=
=0A=
  private StringBuffer getLockPrefix() {=0A=
    String dirName;                               // name to be hashed=0A=
    try {=0A=
      dirName =3D directory.getCanonicalPath();=0A=
    } catch (IOException e) {=0A=
      throw new RuntimeException(e.toString());=0A=
    }=0A=
=0A=
    byte digest[];=0A=
    synchronized (DIGESTER) {=0A=
      digest =3D DIGESTER.digest(dirName.getBytes());=0A=
    }=0A=
    StringBuffer buf =3D new StringBuffer();=0A=
    buf.append("lucene-");=0A=
    for (int i =3D 0; i < digest.length; i++) {=0A=
      int b =3D digest[i];=0A=
      buf.append(HEX_DIGITS[(b >> 4) & 0xf]);=0A=
      buf.append(HEX_DIGITS[b & 0xf]);=0A=
    }=0A=
=0A=
    return buf;=0A=
  }=0A=
=0A=
  /** Closes the store to future operations. */=0A=
  public final synchronized void close() throws IOException {=0A=
    if (--refCount <=3D 0) {=0A=
      synchronized (DIRECTORIES) {=0A=
        DIRECTORIES.remove(directory);=0A=
      }=0A=
    }=0A=
  }=0A=
=0A=
  /** For debug output. */=0A=
  public String toString() {=0A=
    return "FSDirectory@" + directory;=0A=
  }=0A=
=0A=
  public final static boolean isTraditionalLock()=0A=
  {=0A=
	  return traditionalLock;=0A=
  }=0A=
=0A=
  public final static void setTraditionalLock(boolean traditionallock)=0A=
  {=0A=
	  traditionalLock =3D traditionallock;=0A=
  }    =0A=
}=0A=
=0A=
=0A=
final class FSInputStream extends InputStream {=0A=
  private class Descriptor extends RandomAccessFile {=0A=
    /* DEBUG */=0A=
    //private String name;=0A=
    /* DEBUG */=0A=
    public long position;=0A=
    public Descriptor(File file, String mode) throws IOException {=0A=
      super(file, mode);=0A=
      /* DEBUG */=0A=
      //name =3D file.toString();=0A=
      //debug_printInfo("OPEN");=0A=
      /* DEBUG */=0A=
    }=0A=
=0A=
    /* DEBUG */=0A=
    //public void close() throws IOException {=0A=
    //  debug_printInfo("CLOSE");=0A=
    //    super.close();=0A=
    //}=0A=
    //=0A=
    //private void debug_printInfo(String op) {=0A=
    //  try { throw new Exception(op + " <" + name + ">");=0A=
    //  } catch (Exception e) {=0A=
    //    java.io.StringWriter sw =3D new java.io.StringWriter();=0A=
    //    java.io.PrintWriter pw =3D new java.io.PrintWriter(sw);=0A=
    //    e.printStackTrace(pw);=0A=
    //    System.out.println(sw.getBuffer().toString());=0A=
    //  }=0A=
    //}=0A=
    /* DEBUG */=0A=
  }=0A=
=0A=
  Descriptor file =3D null;=0A=
  boolean isClone;=0A=
=0A=
  public FSInputStream(File path) throws IOException {=0A=
    file =3D new Descriptor(path, "r");=0A=
    length =3D file.length();=0A=
  }=0A=
=0A=
  /** InputStream methods */=0A=
  protected final void readInternal(byte[] b, int offset, int len)=0A=
       throws IOException {=0A=
    synchronized (file) {=0A=
      long position =3D getFilePointer();=0A=
      if (position !=3D file.position) {=0A=
        file.seek(position);=0A=
        file.position =3D position;=0A=
      }=0A=
      int total =3D 0;=0A=
      do {=0A=
        int i =3D file.read(b, offset+total, len-total);=0A=
        if (i =3D=3D -1)=0A=
          throw new IOException("read past EOF");=0A=
        file.position +=3D i;=0A=
        total +=3D i;=0A=
      } while (total < len);=0A=
    }=0A=
  }=0A=
=0A=
  public final void close() throws IOException {=0A=
    if (!isClone)=0A=
      file.close();=0A=
  }=0A=
=0A=
  /** Random-access methods */=0A=
  protected final void seekInternal(long position) throws IOException {=0A=
  }=0A=
=0A=
  protected final void finalize() throws IOException {=0A=
    close();            // close the file=0A=
  }=0A=
=0A=
  public Object clone() {=0A=
    FSInputStream clone =3D (FSInputStream)super.clone();=0A=
    clone.isClone =3D true;=0A=
    return clone;=0A=
  }=0A=
=0A=
  /** Method used for testing. Returns true if the underlying=0A=
   *  file descriptor is valid.=0A=
   */=0A=
  boolean isFDValid() throws IOException {=0A=
    return file.getFD().valid();=0A=
  }=0A=
=0A=
=0A=
}=0A=
=0A=
=0A=
final class FSOutputStream extends OutputStream {=0A=
  RandomAccessFile file =3D null;=0A=
=0A=
  public FSOutputStream(File path) throws IOException {=0A=
    file =3D new RandomAccessFile(path, "rw");=0A=
  }=0A=
=0A=
  /** output methods: */=0A=
  public final void flushBuffer(byte[] b, int size) throws IOException {=0A=
    file.write(b, 0, size);=0A=
  }=0A=
  public final void close() throws IOException {=0A=
    super.close();=0A=
    file.close();=0A=
  }=0A=
=0A=
  /** Random-access methods */=0A=
  public final void seek(long pos) throws IOException {=0A=
    super.seek(pos);=0A=
    file.seek(pos);=0A=
  }=0A=
  public final long length() throws IOException {=0A=
    return file.length();=0A=
  }=0A=
=0A=
  protected final void finalize() throws IOException {=0A=
    file.close();          // close the file=0A=
  }=0A=
=0A=
}=0A=


------=_NextPart_000_014C_01C3F7DC.BFCACA70
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
------=_NextPart_000_014C_01C3F7DC.BFCACA70--


From MAILER-DAEMON Sat Feb 21 09:42:30 2004
Return-Path: 
 <lucene-user-return-7224-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8032 invoked from network); 21 Feb 2004 09:42:30 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 21 Feb 2004 09:42:30 -0000
Received: (qmail 50162 invoked by uid 500); 21 Feb 2004 09:42:01 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49878 invoked by uid 500); 21 Feb 2004 09:41:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49863 invoked from network); 21 Feb 2004 09:41:58 -0000
Received: from unknown (HELO smtprelay01.ispgateway.de) (62.67.200.156)
  by daedalus.apache.org with SMTP; 21 Feb 2004 09:41:58 -0000
Received: (qmail 13753 invoked from network); 21 Feb 2004 09:42:10 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.234.253])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 21 Feb 2004 09:42:10 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 001A5257E
	for <lucene-user@jakarta.apache.org>; Sat, 21 Feb 2004 10:42:09 +0100 (CET)
From: lucene@nitwit.de
To: lucene-user@jakarta.apache.org
Subject: Lucene scalability/clustering
Date: Sat, 21 Feb 2004 10:42:09 +0100
User-Agent: KMail/1.6
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Message-Id: <200402211042.09673.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi!

How well does Lucene scale? Is it able to handle 100.000 (more or less 
complex) queries a day (i.e. 9 to 5) on an index with half a million docs?

What hardware is recommended for that demand? What to do if it cannot handle 
it quickly enough?

Regards,
Timo

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sat Feb 21 19:24:24 2004
Return-Path: 
 <lucene-user-return-7225-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 78191 invoked from network); 21 Feb 2004 19:24:24 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 21 Feb 2004 19:24:24 -0000
Received: (qmail 39587 invoked by uid 500); 21 Feb 2004 19:24:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 39453 invoked by uid 500); 21 Feb 2004 19:24:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 39438 invoked from network); 21 Feb 2004 19:24:09 -0000
Received: from unknown (HELO web12708.mail.yahoo.com) (216.136.173.245)
  by daedalus.apache.org with SMTP; 21 Feb 2004 19:24:09 -0000
Message-ID: <20040221192414.84231.qmail@web12708.mail.yahoo.com>
Received: from [195.29.132.228] by web12708.mail.yahoo.com via HTTP;
 Sat, 21 Feb 2004 11:24:14 PST
Date: Sat, 21 Feb 2004 11:24:14 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene scalability/clustering
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <200402211042.09673.lucene@nitwit.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

http://jakarta.apache.org/lucene/docs/benchmarks.html

--- lucene@nitwit.de wrote:
> Hi!
> 
> How well does Lucene scale? Is it able to handle 100.000 (more or
> less 
> complex) queries a day (i.e. 9 to 5) on an index with half a million
> docs?
> 
> What hardware is recommended for that demand? What to do if it cannot
> handle 
> it quickly enough?
> 
> Regards,
> Timo
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb 22 15:25:18 2004
Return-Path: 
 <lucene-user-return-7226-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74649 invoked from network); 22 Feb 2004 15:25:18 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 22 Feb 2004 15:25:18 -0000
Received: (qmail 83014 invoked by uid 500); 22 Feb 2004 15:25:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 82959 invoked by uid 500); 22 Feb 2004 15:25:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 82945 invoked from network); 22 Feb 2004 15:25:06 -0000
Received: from unknown (HELO mail.gmx.net) (213.165.64.20)
  by daedalus.apache.org with SMTP; 22 Feb 2004 15:25:06 -0000
Received: (qmail 31934 invoked by uid 0); 22 Feb 2004 15:25:07 -0000
Received: from 193.63.235.44 by www53.gmx.net with HTTP;
	Sun, 22 Feb 2004 16:25:07 +0100 (MET)
Date: Sun, 22 Feb 2004 16:25:07 +0100 (MET)
From: TheRanger@gmx.net
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Subject: Exchange Scoring algorithm
X-Priority: 3 (Normal)
X-Authenticated: #21808356
Message-ID: <17183.1077463507@www53.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello group,

how can I exchange the existing scoring (the way the score is calculated
using TF/IDF, term boost, etc) with my own score. I know there is a way to
overwrite the Similariy class. However I am missing a good example. Could somebody
provide a good example which would show how to exchange the existing
DefaultSimilarity with MySimilarity. I think this would be necessary to implement
common Relevance Feedback algorthms. Did somebody do that and can give me some
hints?

Kind Regards,
Karl

-- 
GMX ProMail (250 MB Mailbox, 50 FreeSMS, Virenschutz, 2,99 EUR/Monat...)
jetzt 3 Monate GRATIS + 3x DER SPIEGEL +++ http://www.gmx.net/derspiegel +++


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb 22 15:38:55 2004
Return-Path: 
 <lucene-user-return-7227-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 80043 invoked from network); 22 Feb 2004 15:38:55 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 22 Feb 2004 15:38:55 -0000
Received: (qmail 92236 invoked by uid 500); 22 Feb 2004 15:38:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 92216 invoked by uid 500); 22 Feb 2004 15:38:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 92203 invoked from network); 22 Feb 2004 15:38:44 -0000
Received: from unknown (HELO smtprelay02.ispgateway.de) (62.67.200.157)
  by daedalus.apache.org with SMTP; 22 Feb 2004 15:38:44 -0000
Received: (qmail 28758 invoked from network); 22 Feb 2004 15:38:45 -0000
Received: from unknown (HELO tcn.local) ([pbs]652696@[217.231.252.123])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with AES256-SHA
 encrypted SMTP
          for <lucene-user@jakarta.apache.org>; 22 Feb 2004 15:38:45 -0000
Received: from localhost (localhost [127.0.0.1])
	by tcn.local (Postfix) with ESMTP id 52B17257E
	for <lucene-user@jakarta.apache.org>; Sun, 22 Feb 2004 16:38:44 +0100 (CET)
From: lucene@nitwit.de
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Lucene scalability/clustering
Date: Sun, 22 Feb 2004 16:38:43 +0100
User-Agent: KMail/1.6
References: <20040221192414.84231.qmail@web12708.mail.yahoo.com>
In-Reply-To: <20040221192414.84231.qmail@web12708.mail.yahoo.com>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200402221638.44084.lucene@nitwit.de>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Saturday 21 February 2004 20:24, Otis Gospodnetic wrote:
> http://jakarta.apache.org/lucene/docs/benchmarks.html

BTW, where can I get Peter Halacsy's IndexSearcherCache?

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb 22 18:24:08 2004
Return-Path: 
 <lucene-user-return-7228-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 33156 invoked from network); 22 Feb 2004 18:24:08 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 22 Feb 2004 18:24:08 -0000
Received: (qmail 8234 invoked by uid 500); 22 Feb 2004 18:23:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 8210 invoked by uid 500); 22 Feb 2004 18:23:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 8197 invoked from network); 22 Feb 2004 18:23:54 -0000
Received: from unknown (HELO mail2.catalyst.net.nz) (202.49.159.12)
  by daedalus.apache.org with SMTP; 22 Feb 2004 18:23:54 -0000
Received: from leibniz.catalyst.net.nz ([202.49.159.7] helo=catalyst.net.nz)
	by mail2.catalyst.net.nz with esmtp (Exim 3.35 #1 (Debian))
	id 1AuyGj-0000QH-02
	for <lucene-user@jakarta.apache.org>; Mon, 23 Feb 2004 07:23:57 +1300
Message-ID: <4038F3BC.5080004@catalyst.net.nz>
Date: Mon, 23 Feb 2004 07:23:56 +1300
From: Hamish Carpenter <hamish@catalyst.net.nz>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US;
 rv:1.6) Gecko/20040122 Debian/1.6-1
X-Accept-Language: en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Lucene scalability/clustering
References: <20040221192414.84231.qmail@web12708.mail.yahoo.com>
 <200402221638.44084.lucene@nitwit.de>
In-Reply-To: <200402221638.44084.lucene@nitwit.de>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-System-Filter-Id: mail2.catalyst.net.nz 1AuyGj-0000QH-02
X-Virus-Scanned-By: Amavis with CLAM Anti Virus on mail2.catalyst.net.nz
X-Spam-Checker-Version: SpamAssassin 2.61 (1.212.2.1-2003-12-09-exp) on godel
X-Spam-Status: No,
 hits=-5.9 required=5.0 tests=BAYES_00,CATALYST autolearn=no version=2.61
X-Spam-Level: 
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi All,

I'm Hamish Carpenter who contributed the benchmarks with the comment
about the IndexSearcherCache.  Using this solved our issues with too
many files open under linux.

The original IndexSearcherCache email is here:
http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg01967.html

See here for a copy of the above message and a download link:
http://www.geocities.com/haytona/lucene/
The mailing list doesn't like attachments.  The source is 10K in size.

HTH

Hamish Carpenter.

lucene@nitwit.de wrote:
 > BTW, where can I get Peter Halacsy's IndexSearcherCache?

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb 22 22:16:16 2004
Return-Path: 
 <lucene-user-return-7229-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9600 invoked from network); 22 Feb 2004 22:16:16 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 22 Feb 2004 22:16:16 -0000
Received: (qmail 18572 invoked by uid 500); 22 Feb 2004 22:15:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 18550 invoked by uid 500); 22 Feb 2004 22:15:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18537 invoked from network); 22 Feb 2004 22:15:58 -0000
Received: from unknown (HELO mail.fulfilnet.com.au) (203.111.107.196)
  by daedalus.apache.org with SMTP; 22 Feb 2004 22:15:58 -0000
From: "Anson Lau" <alau@fulfil-net.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Lucene scalability/clustering
Date: Mon, 23 Feb 2004 09:17:01 +1100
Message-ID: <002e01c3f991$9884f3d0$86d4a8c0@fulfilnet.com.au>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
In-Reply-To: <4038F3BC.5080004@catalyst.net.nz>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Further on this topic - has anyone tried implementing a distributed
search with Lucene?  How does it work and does it work well?


Anson


-----Original Message-----
From: Hamish Carpenter [mailto:hamish@catalyst.net.nz]
Sent: Monday, February 23, 2004 5:24 AM
To: Lucene Users List
Subject: Re: Lucene scalability/clustering

Hi All,

I'm Hamish Carpenter who contributed the benchmarks with the comment
about the IndexSearcherCache.  Using this solved our issues with too
many files open under linux.

The original IndexSearcherCache email is here:
http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg01967.html

See here for a copy of the above message and a download link:
http://www.geocities.com/haytona/lucene/
The mailing list doesn't like attachments.  The source is 10K in size.

HTH

Hamish Carpenter.

lucene@nitwit.de wrote:
 > BTW, where can I get Peter Halacsy's IndexSearcherCache?

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 23 06:31:52 2004
Return-Path: 
 <lucene-user-return-7230-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 87040 invoked from network); 23 Feb 2004 06:31:52 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 23 Feb 2004 06:31:52 -0000
Received: (qmail 58764 invoked by uid 500); 23 Feb 2004 06:31:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58488 invoked by uid 500); 23 Feb 2004 06:31:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58474 invoked from network); 23 Feb 2004 06:31:24 -0000
Received: from unknown (HELO rwcrmhc12.comcast.net) (216.148.227.85)
  by daedalus.apache.org with SMTP; 23 Feb 2004 06:31:24 -0000
Received: from loki (c-24-5-91-118.client.comcast.net[24.5.91.118])
          by comcast.net (rwcrmhc12) with SMTP
          id <20040223063136014008guf0e>; Mon, 23 Feb 2004 06:31:36 +0000
Message-ID: <01c001c3f9d6$9dde1240$0300a8c0@attbi.com>
From: "Michael A. Schoen" <schoenm@earthlink.net>
To: <lucene-user@jakarta.apache.org>
Subject: problem with SearchFiles demo
Date: Sun, 22 Feb 2004 22:31:00 -0800
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_01BA_01C3F993.8C538B60"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_01BA_01C3F993.8C538B60
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

I'm sure there's some obvious explanation for this that I'm missing -- I
can't get the SearchFiles demo class to work. I can successfully use the
IndexFiles class to index a directory, but searching doesn't work; I just
get a NullPointerException.

So I wrote my own Search class, which is basically just a slightly tweaked
version of SearchFiles. And I get a NullPointerException there as well. I
added a stack trace, which shows the exception coming from
IndexSearcher.explain().

Any ideas?

I've attached the source for Search.java, and below is the stack trace.

thanks,
Michael


> $ java Search
> Query: casino
> Searching for: casino
>  caught a class java.lang.NullPointerException
>  with message: null
> java.lang.NullPointerException
>         at
org.apache.lucene.search.IndexSearcher.explain(IndexSearcher.java:196)
>         at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:93)
>         at org.apache.lucene.search.Hits.<init>(Hits.java:80)
>         at org.apache.lucene.search.Searcher.search(Searcher.java:71)
>         at org.apache.lucene.search.Searcher.search(Searcher.java:65)
>         at Search.main(Search.java:35)
>
>


------=_NextPart_000_01BA_01C3F993.8C538B60
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
------=_NextPart_000_01BA_01C3F993.8C538B60--


From MAILER-DAEMON Mon Feb 23 10:46:42 2004
Return-Path: 
 <lucene-user-return-7231-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 17416 invoked from network); 23 Feb 2004 10:46:42 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 23 Feb 2004 10:46:42 -0000
Received: (qmail 5028 invoked by uid 500); 23 Feb 2004 10:46:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 4999 invoked by uid 500); 23 Feb 2004 10:46:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 4962 invoked from network); 23 Feb 2004 10:46:04 -0000
Received: from unknown (HELO mwinf0902.wanadoo.fr) (193.252.22.22)
  by daedalus.apache.org with SMTP; 23 Feb 2004 10:46:04 -0000
Received: from diderot (ABordeaux-202-2-1-206.w80-11.abo.wanadoo.fr
 [80.11.9.206])
	by mwinf0902.wanadoo.fr (SMTP Server) with ESMTP id 113A51800273
	for <lucene-user@jakarta.apache.org>; Mon, 23 Feb 2004 11:46:18 +0100 (CET)
From: "Rasik Pandey" <rasik.pandey@ajlsm.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE : Lucene scalability/clustering
Date: Mon, 23 Feb 2004 11:46:15 +0100
Message-ID: <001101c3f9fa$436f1740$ac7ba8c0@diderot>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
In-Reply-To: <002e01c3f991$9884f3d0$86d4a8c0@fulfilnet.com.au>
Importance: Normal
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> Further on this topic - has anyone tried implementing a
> distributed
> search with Lucene?  How does it work and does it work well?

I assume you are referring to RMI based search? It works well as does =
MultiSearcher.=20

RBP


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 23 11:11:32 2004
Return-Path: 
 <lucene-user-return-7232-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 28389 invoked from network); 23 Feb 2004 11:11:32 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 23 Feb 2004 11:11:32 -0000
Received: (qmail 40008 invoked by uid 500); 23 Feb 2004 11:11:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 39976 invoked by uid 500); 23 Feb 2004 11:11:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 39963 invoked from network); 23 Feb 2004 11:10:59 -0000
Received: from unknown (HELO web12701.mail.yahoo.com) (216.136.173.238)
  by daedalus.apache.org with SMTP; 23 Feb 2004 11:10:59 -0000
Message-ID: <20040223111113.4094.qmail@web12701.mail.yahoo.com>
Received: from [195.29.48.86] by web12701.mail.yahoo.com via HTTP;
 Mon, 23 Feb 2004 03:11:13 PST
Date: Mon, 23 Feb 2004 03:11:13 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: problem with SearchFiles demo
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <01c001c3f9d6$9dde1240$0300a8c0@attbi.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I remember somebody reporting a similar problem a few months ago.  The
problem has been fixed since then.  You need 1.3-final version Lucene. 
You didn't say if that is what you are using.

Otis

--- "Michael A. Schoen" <schoenm@earthlink.net> wrote:
> I'm sure there's some obvious explanation for this that I'm missing
> -- I
> can't get the SearchFiles demo class to work. I can successfully use
> the
> IndexFiles class to index a directory, but searching doesn't work; I
> just
> get a NullPointerException.
> 
> So I wrote my own Search class, which is basically just a slightly
> tweaked
> version of SearchFiles. And I get a NullPointerException there as
> well. I
> added a stack trace, which shows the exception coming from
> IndexSearcher.explain().
> 
> Any ideas?
> 
> I've attached the source for Search.java, and below is the stack
> trace.
> 
> thanks,
> Michael
> 
> 
> > $ java Search
> > Query: casino
> > Searching for: casino
> >  caught a class java.lang.NullPointerException
> >  with message: null
> > java.lang.NullPointerException
> >         at
>
org.apache.lucene.search.IndexSearcher.explain(IndexSearcher.java:196)
> >         at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:93)
> >         at org.apache.lucene.search.Hits.<init>(Hits.java:80)
> >         at
> org.apache.lucene.search.Searcher.search(Searcher.java:71)
> >         at
> org.apache.lucene.search.Searcher.search(Searcher.java:65)
> >         at Search.main(Search.java:35)
> >
> >
> 
> >
---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 23 11:22:19 2004
Return-Path: 
 <lucene-user-return-7233-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 33523 invoked from network); 23 Feb 2004 11:22:19 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 23 Feb 2004 11:22:19 -0000
Received: (qmail 60568 invoked by uid 500); 23 Feb 2004 11:21:47 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 60544 invoked by uid 500); 23 Feb 2004 11:21:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 60531 invoked from network); 23 Feb 2004 11:21:46 -0000
Received: from unknown (HELO web25009.mail.ukl.yahoo.com) (217.12.10.45)
  by daedalus.apache.org with SMTP; 23 Feb 2004 11:21:46 -0000
Message-ID: <20040223112200.16169.qmail@web25009.mail.ukl.yahoo.com>
Received: from [217.26.77.145] by web25009.mail.ukl.yahoo.com via HTTP;
 Mon, 23 Feb 2004 11:22:00 GMT
Date: Mon, 23 Feb 2004 11:22:00 +0000 (GMT)
From: =?iso-8859-1?q?Clandes=20Tino?= <clandestino_bgd@yahoo.co.uk>
Subject: Lucene and Message Driven Bean
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi all, 
I am new at this mailing list, although I have been
using Lucene for a quite long time.
I have implemented Lucene API for a pretty big
multi-language groupware application, but I still have
some problems and dilemmas.
I should not use Lucene indexing in schedule procedure
(as I found like common way to use Lucene), because I
am supposed to provide searchable item, as soon as it
is uploaded (document, meeting, forum article etc)
So, I made a solution (described under) and would like
to hear from experts in this field if it is a good or
bad one in general, suggestions and opinions. 
1. Indexing process:
After upload (parallel storage in DB and File System)
I call my Stateless Session Bean which puts uploaded
item (wrapped in JMS Message) in Queue. Message Driven
Bean (configured as One Instance in Pool � under
JBoss) receives message and calls Lucene methods which
then perform indexing stuff.
Dilemma: Is there better way to do this, providing the
same functionality?
Problem: I face the situation that IOException is
raised after call IndexWriter constructor
IndexWriter(Directory d, Analyzer a, final boolean
create) with different messages.
- Index locked for write
- Lock obtain timed out
- Other messages if index is corrupted (no segments
file e.g - I deleted it on purpose)
The thing I would like to do is:
- If Index is locked due to any reason, rollback the
transaction � bring the message back into queue.
- If Index is corrupted, discard the messages in queue
and send mail to administrator.
Do you find an idea to subclass IOException and
somehow treat differently situation when index is
locked from when it is corrupted, appropriate?

Thanks a lot in advance.
Next problem � dilemma is regarding analyzing content
and is to be followed.
Best regards
Milan Agatonovic



	
	
		
___________________________________________________________
Yahoo! Messenger - Communicate instantly..."Ping" 
your friends today! Download Messenger Now 
http://uk.messenger.yahoo.com/download/index.html

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 23 11:49:50 2004
Return-Path: 
 <lucene-user-return-7234-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 52268 invoked from network); 23 Feb 2004 11:49:50 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 23 Feb 2004 11:49:50 -0000
Received: (qmail 91797 invoked by uid 500); 23 Feb 2004 11:49:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 91766 invoked by uid 500); 23 Feb 2004 11:49:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 91750 invoked from network); 23 Feb 2004 11:49:44 -0000
Received: from unknown (HELO web25010.mail.ukl.yahoo.com) (217.12.10.46)
  by daedalus.apache.org with SMTP; 23 Feb 2004 11:49:44 -0000
Message-ID: <20040223114943.46562.qmail@web25010.mail.ukl.yahoo.com>
Received: from [217.26.77.145] by web25010.mail.ukl.yahoo.com via HTTP;
 Mon, 23 Feb 2004 11:49:43 GMT
Date: Mon, 23 Feb 2004 11:49:43 +0000 (GMT)
From: =?iso-8859-1?q?Clandes=20Tino?= <clandestino_bgd@yahoo.co.uk>
Subject: Multilanguage and wildcard support
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi, all.
I would like to describe my dilemma about analyzing
stuff.

2. Multilanguage and wildcard support
In Lucene 1.3 Final I have found very useful class
PerFieldAnalyzerWrapper, which helped me to specify
separate analyzer for each field.
But, full text content - obtained after parsing word,
excel, xml or other kind of document) should be
searchable using stemming capabilities and also should
support wildcard queries.
I implemented this solution:
- indexing of full content is done in two separate
fields, because wildcard queries do not pass through
analyzer, as I have read in this mailing archive.
Field1 (�stemmingbody�) - matching snowball analyzer
is used.
Field2 (�plainbody�) - Whitespace analyzer is used.
So, when user searches for some term in item�s
content, I parse the query and if it contains wild
character, search in "plainbody" is performed;
otherwise I search in "stemmingbody", expecting better
search results, that way.
Is there a better way to do this, e.g. not to index
full content in two separate fields, but only one (I
tokenize it, index it, but not store it)?

Thanks for any opinion or suggestion in advance!
Best regards
Milan Agatonovic 



	
	
		
___________________________________________________________
Yahoo! Messenger - Communicate instantly..."Ping" 
your friends today! Download Messenger Now 
http://uk.messenger.yahoo.com/download/index.html

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 23 17:24:15 2004
Return-Path: 
 <lucene-user-return-7235-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 94516 invoked from network); 23 Feb 2004 17:24:15 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 23 Feb 2004 17:24:15 -0000
Received: (qmail 99618 invoked by uid 500); 23 Feb 2004 17:23:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 99565 invoked by uid 500); 23 Feb 2004 17:23:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 99517 invoked from network); 23 Feb 2004 17:23:57 -0000
Received: from unknown (HELO fsv-extmail1.looksmart.com) (64.241.242.93)
  by daedalus.apache.org with SMTP; 23 Feb 2004 17:23:57 -0000
Received: from LOOKSMART10574 ([172.16.128.20])
	by fsv-extmail1.looksmart.com (8.12.10/8.12.10) with SMTP id i1NHO0QJ026508
	for <lucene-user@jakarta.apache.org>; Mon, 23 Feb 2004 09:24:01 -0800
Message-ID: <003501c3fa31$a46f87a0$514011ac@LOOKSMART10574>
From: "Michael A. Schoen" <schoenm@earthlink.net>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20040223111113.4094.qmail@web12701.mail.yahoo.com>
Subject: Re: problem with SearchFiles demo
Date: Mon, 23 Feb 2004 09:22:35 -0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I am using 1.3-final. Specifically I'm using the jar files from
lucene-1.3-final.zip.

Any other ideas?

----- Original Message ----- 
From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Monday, February 23, 2004 3:11 AM
Subject: Re: problem with SearchFiles demo


> I remember somebody reporting a similar problem a few months ago.  The
> problem has been fixed since then.  You need 1.3-final version Lucene.
> You didn't say if that is what you are using.
>
> Otis
>
> --- "Michael A. Schoen" <schoenm@earthlink.net> wrote:
> > I'm sure there's some obvious explanation for this that I'm missing
> > -- I
> > can't get the SearchFiles demo class to work. I can successfully use
> > the
> > IndexFiles class to index a directory, but searching doesn't work; I
> > just
> > get a NullPointerException.
> >
> > So I wrote my own Search class, which is basically just a slightly
> > tweaked
> > version of SearchFiles. And I get a NullPointerException there as
> > well. I
> > added a stack trace, which shows the exception coming from
> > IndexSearcher.explain().
> >
> > Any ideas?
> >
> > I've attached the source for Search.java, and below is the stack
> > trace.
> >
> > thanks,
> > Michael
> >
> >
> > > $ java Search
> > > Query: casino
> > > Searching for: casino
> > >  caught a class java.lang.NullPointerException
> > >  with message: null
> > > java.lang.NullPointerException
> > >         at
> >
> org.apache.lucene.search.IndexSearcher.explain(IndexSearcher.java:196)
> > >         at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:93)
> > >         at org.apache.lucene.search.Hits.<init>(Hits.java:80)
> > >         at
> > org.apache.lucene.search.Searcher.search(Searcher.java:71)
> > >         at
> > org.apache.lucene.search.Searcher.search(Searcher.java:65)
> > >         at Search.main(Search.java:35)
> > >
> > >
> >
> > >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 23 17:32:00 2004
Return-Path: 
 <lucene-user-return-7236-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 99094 invoked from network); 23 Feb 2004 17:32:00 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 23 Feb 2004 17:32:00 -0000
Received: (qmail 18085 invoked by uid 500); 23 Feb 2004 17:31:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 18058 invoked by uid 500); 23 Feb 2004 17:31:47 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18045 invoked from network); 23 Feb 2004 17:31:47 -0000
Received: from unknown (HELO rwcrmhc11.comcast.net) (204.127.198.35)
  by daedalus.apache.org with SMTP; 23 Feb 2004 17:31:47 -0000
Received: from apache.org (c-24-5-145-151.client.comcast.net[24.5.145.151])
          by comcast.net (rwcrmhc11) with ESMTP
          id <2004022317315101300q7u1ee>; Mon, 23 Feb 2004 17:31:51 +0000
Message-ID: <403A3904.9020204@apache.org>
Date: Mon, 23 Feb 2004 09:31:48 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040116
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: problem with SearchFiles demo
References: <20040223111113.4094.qmail@web12701.mail.yahoo.com>
 <003501c3fa31$a46f87a0$514011ac@LOOKSMART10574>
In-Reply-To: <003501c3fa31$a46f87a0$514011ac@LOOKSMART10574>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Michael,

What JVM and OS are you using?

Your attachment did not make it through.  If you continue to have 
problems please submit a bug report and attach test code there.

Thanks,

Doug

Michael A. Schoen wrote:
> I am using 1.3-final. Specifically I'm using the jar files from
> lucene-1.3-final.zip.
> 
> Any other ideas?
> 
> ----- Original Message ----- 
> From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Monday, February 23, 2004 3:11 AM
> Subject: Re: problem with SearchFiles demo
> 
> 
> 
>>I remember somebody reporting a similar problem a few months ago.  The
>>problem has been fixed since then.  You need 1.3-final version Lucene.
>>You didn't say if that is what you are using.
>>
>>Otis
>>
>>--- "Michael A. Schoen" <schoenm@earthlink.net> wrote:
>>
>>>I'm sure there's some obvious explanation for this that I'm missing
>>>-- I
>>>can't get the SearchFiles demo class to work. I can successfully use
>>>the
>>>IndexFiles class to index a directory, but searching doesn't work; I
>>>just
>>>get a NullPointerException.
>>>
>>>So I wrote my own Search class, which is basically just a slightly
>>>tweaked
>>>version of SearchFiles. And I get a NullPointerException there as
>>>well. I
>>>added a stack trace, which shows the exception coming from
>>>IndexSearcher.explain().
>>>
>>>Any ideas?
>>>
>>>I've attached the source for Search.java, and below is the stack
>>>trace.
>>>
>>>thanks,
>>>Michael
>>>
>>>
>>>
>>>>$ java Search
>>>>Query: casino
>>>>Searching for: casino
>>>> caught a class java.lang.NullPointerException
>>>> with message: null
>>>>java.lang.NullPointerException
>>>>        at
>>>
>>org.apache.lucene.search.IndexSearcher.explain(IndexSearcher.java:196)
>>
>>>>        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:93)
>>>>        at org.apache.lucene.search.Hits.<init>(Hits.java:80)
>>>>        at
>>>
>>>org.apache.lucene.search.Searcher.search(Searcher.java:71)
>>>
>>>>        at
>>>
>>>org.apache.lucene.search.Searcher.search(Searcher.java:65)
>>>
>>>>        at Search.main(Search.java:35)
>>>>
>>>>
>>>
>>---------------------------------------------------------------------
>>
>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 23 18:48:44 2004
Return-Path: 
 <lucene-user-return-7237-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 60288 invoked from network); 23 Feb 2004 18:48:44 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 23 Feb 2004 18:48:44 -0000
Received: (qmail 41400 invoked by uid 500); 23 Feb 2004 18:48:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 41281 invoked by uid 500); 23 Feb 2004 18:48:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 41267 invoked from network); 23 Feb 2004 18:48:29 -0000
Received: from unknown (HELO fsv-extmail1.looksmart.com) (64.241.242.93)
  by daedalus.apache.org with SMTP; 23 Feb 2004 18:48:29 -0000
Received: from LOOKSMART10574 ([172.16.128.20])
	by fsv-extmail1.looksmart.com (8.12.10/8.12.10) with SMTP id i1NImXQJ002368
	for <lucene-user@jakarta.apache.org>; Mon, 23 Feb 2004 10:48:33 -0800
Message-ID: <00a001c3fa3d$7432a110$514011ac@LOOKSMART10574>
From: "Michael A. Schoen" <schoenm@earthlink.net>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20040223111113.4094.qmail@web12701.mail.yahoo.com>
 <003501c3fa31$a46f87a0$514011ac@LOOKSMART10574> <403A3904.9020204@apache.org>
Subject: Re: problem with SearchFiles demo
Date: Mon, 23 Feb 2004 10:47:08 -0800
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_009D_01C3F9FA.62799020"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_009D_01C3F9FA.62799020
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit


$ java -version
java version "1.3.0_02"

$ uname -a
SunOS qadyn1i.looksmart.com 5.8 Generic_108528-20 sun4u sparc SUNW,Ultra-250

I entered a bug into BugZilla, but curiously it doesn't allow me to enter a
bug against 1.3-final -- so I chose "unspecified". Bug 27174. This is my
first bug post, so please let me know if you need more detail.

I've attached the source to this message as well.

thanks,
Michael

----- Original Message ----- 
From: "Doug Cutting" <cutting@apache.org>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Monday, February 23, 2004 9:31 AM
Subject: Re: problem with SearchFiles demo


> Michael,
>
> What JVM and OS are you using?
>
> Your attachment did not make it through.  If you continue to have
> problems please submit a bug report and attach test code there.
>
> Thanks,
>
> Doug
>
> Michael A. Schoen wrote:
> > I am using 1.3-final. Specifically I'm using the jar files from
> > lucene-1.3-final.zip.
> >
> > Any other ideas?
> >
> > ----- Original Message ----- 
> > From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
> > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > Sent: Monday, February 23, 2004 3:11 AM
> > Subject: Re: problem with SearchFiles demo
> >
> >
> >
> >>I remember somebody reporting a similar problem a few months ago.  The
> >>problem has been fixed since then.  You need 1.3-final version Lucene.
> >>You didn't say if that is what you are using.
> >>
> >>Otis
> >>
> >>--- "Michael A. Schoen" <schoenm@earthlink.net> wrote:
> >>
> >>>I'm sure there's some obvious explanation for this that I'm missing
> >>>-- I
> >>>can't get the SearchFiles demo class to work. I can successfully use
> >>>the
> >>>IndexFiles class to index a directory, but searching doesn't work; I
> >>>just
> >>>get a NullPointerException.
> >>>
> >>>So I wrote my own Search class, which is basically just a slightly
> >>>tweaked
> >>>version of SearchFiles. And I get a NullPointerException there as
> >>>well. I
> >>>added a stack trace, which shows the exception coming from
> >>>IndexSearcher.explain().
> >>>
> >>>Any ideas?
> >>>
> >>>I've attached the source for Search.java, and below is the stack
> >>>trace.
> >>>
> >>>thanks,
> >>>Michael
> >>>
> >>>
> >>>
> >>>>$ java Search
> >>>>Query: casino
> >>>>Searching for: casino
> >>>> caught a class java.lang.NullPointerException
> >>>> with message: null
> >>>>java.lang.NullPointerException
> >>>>        at
> >>>
> >>org.apache.lucene.search.IndexSearcher.explain(IndexSearcher.java:196)
> >>
> >>>>        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:93)
> >>>>        at org.apache.lucene.search.Hits.<init>(Hits.java:80)
> >>>>        at
> >>>
> >>>org.apache.lucene.search.Searcher.search(Searcher.java:71)
> >>>
> >>>>        at
> >>>
> >>>org.apache.lucene.search.Searcher.search(Searcher.java:65)
> >>>
> >>>>        at Search.main(Search.java:35)
> >>>>
> >>>>
> >>>
> >>---------------------------------------------------------------------
> >>
> >>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>
> >>
> >>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


------=_NextPart_000_009D_01C3F9FA.62799020
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
------=_NextPart_000_009D_01C3F9FA.62799020--


From MAILER-DAEMON Mon Feb 23 19:18:08 2004
Return-Path: 
 <lucene-user-return-7238-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 85227 invoked from network); 23 Feb 2004 19:18:08 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 23 Feb 2004 19:18:08 -0000
Received: (qmail 99834 invoked by uid 500); 23 Feb 2004 19:17:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 99788 invoked by uid 500); 23 Feb 2004 19:17:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 99701 invoked from network); 23 Feb 2004 19:17:51 -0000
Received: from unknown (HELO mail.office.vtourist.com) (69.104.69.114)
  by daedalus.apache.org with SMTP; 23 Feb 2004 19:17:51 -0000
Received: from supun.office (adsl-69-104-69-113.dsl.irvnca.pacbell.net
 [69.104.69.113])
	(authenticated bits=0)
	by mail.office.vtourist.com (8.12.8/8.12.8) with ESMTP id i1NJHsXa024246
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <lucene-user@jakarta.apache.org>; Mon, 23 Feb 2004 11:17:55 -0800
Subject: Re: advice on a query
From: Supun Edirisinghe <supun@office.vtourist.com>
Reply-To: supun@office.vtourist.com
To: lucene-user@jakarta.apache.org
In-Reply-To: <1077237855.20627.43.camel@supun.office>
References: <1077237855.20627.43.camel@supun.office>
Content-Type: text/plain
Organization: VirtualTourist.com, Inc.
Message-Id: <1077563873.4323.9.camel@supun.office>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.2.2 (1.2.2-5) 
Date: 23 Feb 2004 11:17:54 -0800
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'm thinking I need to write my own parser that can create the below
queries.

where is a good starting point? any cool or interesting parsers out
there that you like? (hoping that there will be on like what I'm looking
for)

thanks


On Thu, 2004-02-19 at 16:44, Supun Edirisinghe wrote:
> Hi,
> 
> I'm still new to Lucene and I'm slowly learning it.
> 
> I'm trying to think of how to build a query for this situation:
> I have an index of Foods.
> I have a field called Name that is Indexed and Untokenized
> it holds values like "chicken soup" "roast duck" "chicken pot pie"
> 
> users are going to search with strings like
> "how to make chicken soup" or "cooking chicken" or "chicken soup
> history" or "bbq chicken wings"
> basically a term held in the index's Name field can appear anywhere in
> the search's input string.
> 
> if a user inputs "how to make chicken soup" or "chicken soup history" I
> want to only display documents with Name containing "chicken soup" (not
> "bbq chicken wings" or "chicken")
> 
> The problem I'm confused about is that the Name term can appear anywhere
> in the string and can be any number of words long. 
> 
> is there a better way to do this other than creating  a PhraseQuery with
> every possible combination of consecutive words and checking against the
> Name field with them? 
> 
> thanks
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 23 19:42:10 2004
Return-Path: 
 <lucene-user-return-7239-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 5400 invoked from network); 23 Feb 2004 19:42:10 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 23 Feb 2004 19:42:10 -0000
Received: (qmail 54358 invoked by uid 500); 23 Feb 2004 19:41:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 54335 invoked by uid 500); 23 Feb 2004 19:41:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 54322 invoked from network); 23 Feb 2004 19:41:55 -0000
Received: from unknown (HELO germany.prod.thop-ny.triplehop.com)
 (216.74.150.80)
  by daedalus.apache.org with SMTP; 23 Feb 2004 19:41:55 -0000
Received: from hui2000 ([208.246.29.6]) by germany.prod.thop-ny.triplehop.com
 with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 23 Feb 2004 14:41:21 -0500
From: "hui" <hui@triplehop.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: problem with SearchFiles demo
Date: Mon, 23 Feb 2004 14:44:02 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
thread-index: AcP6PZB0xABAdCWMQe2+369vr2zpXgAB5pAg
In-Reply-To: <00a001c3fa3d$7432a110$514011ac@LOOKSMART10574>
Message-ID: <GERMANYw0f0gh0eTZ2M00001d97@germany.prod.thop-ny.triplehop.com>
X-OriginalArrivalTime: 23 Feb 2004 19:41:21.0312 (UTC)
 FILETIME=[0364A200:01C3FA45]
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I got same problem when upgrading from 1.2 to 1.3RC1. Upgrading to JDK1.3.1
up solved the problem. It may work for you too.

-----Original Message-----
From: Michael A. Schoen [mailto:schoenm@earthlink.net] 
Sent: Monday, February 23, 2004 1:47 PM
To: Lucene Users List
Subject: Re: problem with SearchFiles demo


$ java -version
java version "1.3.0_02"

$ uname -a
SunOS qadyn1i.looksmart.com 5.8 Generic_108528-20 sun4u sparc SUNW,Ultra-250

I entered a bug into BugZilla, but curiously it doesn't allow me to enter a
bug against 1.3-final -- so I chose "unspecified". Bug 27174. This is my
first bug post, so please let me know if you need more detail.

I've attached the source to this message as well.

thanks,
Michael

----- Original Message ----- 
From: "Doug Cutting" <cutting@apache.org>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Monday, February 23, 2004 9:31 AM
Subject: Re: problem with SearchFiles demo


> Michael,
>
> What JVM and OS are you using?
>
> Your attachment did not make it through.  If you continue to have
> problems please submit a bug report and attach test code there.
>
> Thanks,
>
> Doug
>
> Michael A. Schoen wrote:
> > I am using 1.3-final. Specifically I'm using the jar files from
> > lucene-1.3-final.zip.
> >
> > Any other ideas?
> >
> > ----- Original Message ----- 
> > From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
> > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > Sent: Monday, February 23, 2004 3:11 AM
> > Subject: Re: problem with SearchFiles demo
> >
> >
> >
> >>I remember somebody reporting a similar problem a few months ago.  The
> >>problem has been fixed since then.  You need 1.3-final version Lucene.
> >>You didn't say if that is what you are using.
> >>
> >>Otis
> >>
> >>--- "Michael A. Schoen" <schoenm@earthlink.net> wrote:
> >>
> >>>I'm sure there's some obvious explanation for this that I'm missing
> >>>-- I
> >>>can't get the SearchFiles demo class to work. I can successfully use
> >>>the
> >>>IndexFiles class to index a directory, but searching doesn't work; I
> >>>just
> >>>get a NullPointerException.
> >>>
> >>>So I wrote my own Search class, which is basically just a slightly
> >>>tweaked
> >>>version of SearchFiles. And I get a NullPointerException there as
> >>>well. I
> >>>added a stack trace, which shows the exception coming from
> >>>IndexSearcher.explain().
> >>>
> >>>Any ideas?
> >>>
> >>>I've attached the source for Search.java, and below is the stack
> >>>trace.
> >>>
> >>>thanks,
> >>>Michael
> >>>
> >>>
> >>>
> >>>>$ java Search
> >>>>Query: casino
> >>>>Searching for: casino
> >>>> caught a class java.lang.NullPointerException
> >>>> with message: null
> >>>>java.lang.NullPointerException
> >>>>        at
> >>>
> >>org.apache.lucene.search.IndexSearcher.explain(IndexSearcher.java:196)
> >>
> >>>>        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:93)
> >>>>        at org.apache.lucene.search.Hits.<init>(Hits.java:80)
> >>>>        at
> >>>
> >>>org.apache.lucene.search.Searcher.search(Searcher.java:71)
> >>>
> >>>>        at
> >>>
> >>>org.apache.lucene.search.Searcher.search(Searcher.java:65)
> >>>
> >>>>        at Search.main(Search.java:35)
> >>>>
> >>>>
> >>>
> >>---------------------------------------------------------------------
> >>
> >>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>
> >>
> >>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 23 21:54:04 2004
Return-Path: 
 <lucene-user-return-7240-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 16238 invoked from network); 23 Feb 2004 21:54:04 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 23 Feb 2004 21:54:04 -0000
Received: (qmail 91193 invoked by uid 500); 23 Feb 2004 21:53:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 91165 invoked by uid 500); 23 Feb 2004 21:53:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 91145 invoked from network); 23 Feb 2004 21:53:44 -0000
Received: from unknown (HELO fsv-extmail1.looksmart.com) (64.241.242.93)
  by daedalus.apache.org with SMTP; 23 Feb 2004 21:53:44 -0000
Received: from LOOKSMART10574 ([172.16.128.20])
	by fsv-extmail1.looksmart.com (8.12.10/8.12.10) with SMTP id i1NLrnQJ018362
	for <lucene-user@jakarta.apache.org>; Mon, 23 Feb 2004 13:53:50 -0800
Message-ID: <00c401c3fa57$560961a0$514011ac@LOOKSMART10574>
From: "Michael A. Schoen" <schoenm@earthlink.net>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <GERMANYw0f0gh0eTZ2M00001d97@germany.prod.thop-ny.triplehop.com>
Subject: Re: problem with SearchFiles demo
Date: Mon, 23 Feb 2004 13:52:25 -0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

That was it -- using 1.3.1.6 solved the problem. Thanks Hui.

Doug: should I close the bug, or was this supposed to work properly on
1.3.0_02?

----- Original Message ----- 
From: "hui" <hui@triplehop.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Sent: Monday, February 23, 2004 11:44 AM
Subject: RE: problem with SearchFiles demo


> I got same problem when upgrading from 1.2 to 1.3RC1. Upgrading to
JDK1.3.1
> up solved the problem. It may work for you too.
>
> -----Original Message-----
> From: Michael A. Schoen [mailto:schoenm@earthlink.net]
> Sent: Monday, February 23, 2004 1:47 PM
> To: Lucene Users List
> Subject: Re: problem with SearchFiles demo
>
>
> $ java -version
> java version "1.3.0_02"
>
> $ uname -a
> SunOS qadyn1i.looksmart.com 5.8 Generic_108528-20 sun4u sparc
SUNW,Ultra-250
>
> I entered a bug into BugZilla, but curiously it doesn't allow me to enter
a
> bug against 1.3-final -- so I chose "unspecified". Bug 27174. This is my
> first bug post, so please let me know if you need more detail.
>
> I've attached the source to this message as well.
>
> thanks,
> Michael
>
> ----- Original Message ----- 
> From: "Doug Cutting" <cutting@apache.org>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Monday, February 23, 2004 9:31 AM
> Subject: Re: problem with SearchFiles demo
>
>
> > Michael,
> >
> > What JVM and OS are you using?
> >
> > Your attachment did not make it through.  If you continue to have
> > problems please submit a bug report and attach test code there.
> >
> > Thanks,
> >
> > Doug
> >
> > Michael A. Schoen wrote:
> > > I am using 1.3-final. Specifically I'm using the jar files from
> > > lucene-1.3-final.zip.
> > >
> > > Any other ideas?
> > >
> > > ----- Original Message ----- 
> > > From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
> > > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > > Sent: Monday, February 23, 2004 3:11 AM
> > > Subject: Re: problem with SearchFiles demo
> > >
> > >
> > >
> > >>I remember somebody reporting a similar problem a few months ago.  The
> > >>problem has been fixed since then.  You need 1.3-final version Lucene.
> > >>You didn't say if that is what you are using.
> > >>
> > >>Otis
> > >>
> > >>--- "Michael A. Schoen" <schoenm@earthlink.net> wrote:
> > >>
> > >>>I'm sure there's some obvious explanation for this that I'm missing
> > >>>-- I
> > >>>can't get the SearchFiles demo class to work. I can successfully use
> > >>>the
> > >>>IndexFiles class to index a directory, but searching doesn't work; I
> > >>>just
> > >>>get a NullPointerException.
> > >>>
> > >>>So I wrote my own Search class, which is basically just a slightly
> > >>>tweaked
> > >>>version of SearchFiles. And I get a NullPointerException there as
> > >>>well. I
> > >>>added a stack trace, which shows the exception coming from
> > >>>IndexSearcher.explain().
> > >>>
> > >>>Any ideas?
> > >>>
> > >>>I've attached the source for Search.java, and below is the stack
> > >>>trace.
> > >>>
> > >>>thanks,
> > >>>Michael
> > >>>
> > >>>
> > >>>
> > >>>>$ java Search
> > >>>>Query: casino
> > >>>>Searching for: casino
> > >>>> caught a class java.lang.NullPointerException
> > >>>> with message: null
> > >>>>java.lang.NullPointerException
> > >>>>        at
> > >>>
> > >>org.apache.lucene.search.IndexSearcher.explain(IndexSearcher.java:196)
> > >>
> > >>>>        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:93)
> > >>>>        at org.apache.lucene.search.Hits.<init>(Hits.java:80)
> > >>>>        at
> > >>>
> > >>>org.apache.lucene.search.Searcher.search(Searcher.java:71)
> > >>>
> > >>>>        at
> > >>>
> > >>>org.apache.lucene.search.Searcher.search(Searcher.java:65)
> > >>>
> > >>>>        at Search.main(Search.java:35)
> > >>>>
> > >>>>
> > >>>
> > >>---------------------------------------------------------------------
> > >>
> > >>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > >>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > >>
> > >>
> > >>---------------------------------------------------------------------
> > >>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > >>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > >>
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Mon Feb 23 23:17:10 2004
Return-Path: 
 <lucene-user-return-7241-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 71386 invoked from network); 23 Feb 2004 23:17:10 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 23 Feb 2004 23:17:10 -0000
Received: (qmail 47530 invoked by uid 500); 23 Feb 2004 23:11:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 47507 invoked by uid 500); 23 Feb 2004 23:11:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 47483 invoked from network); 23 Feb 2004 23:11:07 -0000
Received: from unknown (HELO mail.fulfilnet.com.au) (203.111.107.196)
  by daedalus.apache.org with SMTP; 23 Feb 2004 23:11:07 -0000
From: "Anson Lau" <alau@fulfil-net.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: RE : Lucene scalability/clustering
Date: Tue, 24 Feb 2004 10:12:11 +1100
Message-ID: <003a01c3fa62$77be6010$86d4a8c0@fulfilnet.com.au>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
In-Reply-To: <001101c3f9fa$436f1740$ac7ba8c0@diderot>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'm trying to see what are some common ways to scale lucene onto
multiple boxes.  Is RMI based search and using a MultiSearcher the
general approach?

There doesn't seem to be many articles on the web on how to implement a
lucene search cluster.  If anyone knows a good article can you please
post it here?

Thanks,

Anson

-----Original Message-----
From: Rasik Pandey [mailto:rasik.pandey@ajlsm.com]
Sent: Monday, February 23, 2004 9:46 PM
To: 'Lucene Users List'
Subject: RE : Lucene scalability/clustering

> Further on this topic - has anyone tried implementing a
> distributed
> search with Lucene?  How does it work and does it work well?

I assume you are referring to RMI based search? It works well as does
MultiSearcher. 

RBP


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 24 10:34:02 2004
Return-Path: 
 <lucene-user-return-7242-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 84843 invoked from network); 24 Feb 2004 10:34:02 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 24 Feb 2004 10:34:02 -0000
Received: (qmail 85407 invoked by uid 500); 24 Feb 2004 10:33:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 85362 invoked by uid 500); 24 Feb 2004 10:33:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 85310 invoked from network); 24 Feb 2004 10:33:29 -0000
Received: from unknown (HELO mwinf0504.wanadoo.fr) (193.252.22.26)
  by daedalus.apache.org with SMTP; 24 Feb 2004 10:33:29 -0000
Received: from diderot (ABordeaux-202-2-1-104.w80-11.abo.wanadoo.fr
 [80.11.9.104])
	by mwinf0504.wanadoo.fr (SMTP Server) with ESMTP id 80F4E1000334
	for <lucene-user@jakarta.apache.org>; Tue, 24 Feb 2004 11:33:41 +0100 (CET)
From: "Rasik Pandey" <rasik.pandey@ajlsm.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE : RE : Lucene scalability/clustering
Date: Tue, 24 Feb 2004 11:33:39 +0100
Message-ID: <000101c3fac1$aac9f460$ac7ba8c0@diderot>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
Importance: Normal
In-Reply-To: <003a01c3fa62$77be6010$86d4a8c0@fulfilnet.com.au>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> I'm trying to see what are some common ways to scale lucene
> onto
> multiple boxes.  Is RMI based search and using a MultiSearcher
> the
> general approach?

More details about what you are attempting would be helpful.


RBP


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 24 16:02:29 2004
Return-Path: 
 <lucene-user-return-7243-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 51823 invoked from network); 24 Feb 2004 16:02:29 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 24 Feb 2004 16:02:29 -0000
Received: (qmail 31923 invoked by uid 500); 24 Feb 2004 16:02:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 31883 invoked by uid 500); 24 Feb 2004 16:02:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 31833 invoked from network); 24 Feb 2004 16:02:17 -0000
Received: from unknown (HELO mailer.denali.be) (194.183.235.197)
  by daedalus.apache.org with SMTP; 24 Feb 2004 16:02:17 -0000
Received: from denali.be (unknown [192.168.3.254])
	by mailer.denali.be (Postfix) with ESMTP id 7BB0B47634
	for <lucene-user@jakarta.apache.org>; Tue, 24 Feb 2004 17:02:35 +0100 (CET)
Date: Tue, 24 Feb 2004 17:02:18 +0100
Mime-Version: 1.0 (Apple Message framework v552)
Content-Type: multipart/alternative; boundary=Apple-Mail-4-547090943
Subject: TermDocs
From: Damien Lust <dlust@denali.be>
To: lucene-user@jakarta.apache.org
Message-Id: <D27671A8-66E2-11D8-892E-000393AE344A@denali.be>
X-Mailer: Apple Mail (2.552)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--Apple-Mail-4-547090943
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed


I used the class TermDocs to have the <freq,doc (a number)> of a term.

I would like to retrieve the <freq,Document > of a term.

Any Ideas?

Thanks.


Here you are my code:

  // Create an IndexReader on a specific Directory
Directory directory = FSDirectory.getDirectory(lucenePathIndex,false);
IndexReader reader = IndexReader.open(directory);
	
// Enumeration of all the terms of the lucene files
TermEnum enum = reader.terms();
while (enum.next()){
	          Term term = enum.term();
			// Return the object that contains the document number and the 
frequence of the term in the doc
	        	TermDocs termDocs = reader.termDocs(term);
}
--Apple-Mail-4-547090943--


From MAILER-DAEMON Tue Feb 24 16:35:50 2004
Return-Path: 
 <lucene-user-return-7244-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 87066 invoked from network); 24 Feb 2004 16:35:50 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 24 Feb 2004 16:35:50 -0000
Received: (qmail 8204 invoked by uid 500); 24 Feb 2004 16:35:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 8178 invoked by uid 500); 24 Feb 2004 16:35:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 8164 invoked from network); 24 Feb 2004 16:35:38 -0000
Received: from unknown (HELO web12701.mail.yahoo.com) (216.136.173.238)
  by daedalus.apache.org with SMTP; 24 Feb 2004 16:35:38 -0000
Message-ID: <20040224163538.94147.qmail@web12701.mail.yahoo.com>
Received: from [194.152.226.78] by web12701.mail.yahoo.com via HTTP;
 Tue, 24 Feb 2004 08:35:38 PST
Date: Tue, 24 Feb 2004 08:35:38 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene and Message Driven Bean
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20040223112200.16169.qmail@web25009.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

IOException has been discussed here, but never really itched anyone
enough to change the code.
Look at IndexReader methods for checking whether index is locked and
whether it exists.

Missing segments file, index being locked, etc. are signs of possible
mis-understanding/mis-use of IndexReader and IndexWriter.

Otis

--- Clandes Tino <clandestino_bgd@yahoo.co.uk> wrote:
> Hi all, 
> I am new at this mailing list, although I have been
> using Lucene for a quite long time.
> I have implemented Lucene API for a pretty big
> multi-language groupware application, but I still have
> some problems and dilemmas.
> I should not use Lucene indexing in schedule procedure
> (as I found like common way to use Lucene), because I
> am supposed to provide searchable item, as soon as it
> is uploaded (document, meeting, forum article etc)
> So, I made a solution (described under) and would like
> to hear from experts in this field if it is a good or
> bad one in general, suggestions and opinions. 
> 1. Indexing process:
> After upload (parallel storage in DB and File System)
> I call my Stateless Session Bean which puts uploaded
> item (wrapped in JMS Message) in Queue. Message Driven
> Bean (configured as One Instance in Pool � under
> JBoss) receives message and calls Lucene methods which
> then perform indexing stuff.
> Dilemma: Is there better way to do this, providing the
> same functionality?
> Problem: I face the situation that IOException is
> raised after call IndexWriter constructor
> IndexWriter(Directory d, Analyzer a, final boolean
> create) with different messages.
> - Index locked for write
> - Lock obtain timed out
> - Other messages if index is corrupted (no segments
> file e.g - I deleted it on purpose)
> The thing I would like to do is:
> - If Index is locked due to any reason, rollback the
> transaction � bring the message back into queue.
> - If Index is corrupted, discard the messages in queue
> and send mail to administrator.
> Do you find an idea to subclass IOException and
> somehow treat differently situation when index is
> locked from when it is corrupted, appropriate?
> 
> Thanks a lot in advance.
> Next problem � dilemma is regarding analyzing content
> and is to be followed.
> Best regards
> Milan Agatonovic
> 
> 
> 
> 	
> 	
> 		
> ___________________________________________________________
> Yahoo! Messenger - Communicate instantly..."Ping" 
> your friends today! Download Messenger Now 
> http://uk.messenger.yahoo.com/download/index.html
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 24 20:08:42 2004
Return-Path: 
 <lucene-user-return-7245-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 30918 invoked from network); 24 Feb 2004 20:08:42 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 24 Feb 2004 20:08:42 -0000
Received: (qmail 73417 invoked by uid 500); 24 Feb 2004 20:08:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 73383 invoked by uid 500); 24 Feb 2004 20:08:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 73337 invoked from network); 24 Feb 2004 20:08:08 -0000
Received: from unknown (HELO dev.sofari.com) (12.43.53.196)
  by daedalus.apache.org with SMTP; 24 Feb 2004 20:08:08 -0000
Received: from newsmonster.org ([12.43.53.196])
	(authenticated bits=0)
	by dev.sofari.com (8.12.10/8.12.10) with ESMTP id i1OK8EtG010004
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <lucene-user@jakarta.apache.org>; Tue, 24 Feb 2004 12:08:14 -0800
Message-ID: <403BAF2C.8030904@newsmonster.org>
Date: Tue, 24 Feb 2004 12:08:12 -0800
From: "Kevin A. Burton" <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040113
X-Accept-Language: en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Lucene HARD lock during indexing... BAD bug!?
X-Enigmail-Version: 0.83.1.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Content-Type: multipart/signed; micalg=pgp-sha1;
 protocol="application/pgp-signature";
 boundary="------------enigF46775213D246DF8D265B7C1"
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------enigF46775213D246DF8D265B7C1
Content-Type: multipart/mixed;
 boundary="------------030802070008030109010601"

This is a multi-part message in MIME format.
--------------030802070008030109010601
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

I've recently noticed this major problem with our indexer.

It only seems to happen running on 1.3 final and not on 1.3 RC2.

Essentially we have about 80 threads doing indexing... they all add to a 
RAMDirectory which after 10k documents does a commit to disk.

This appears to be a problem with FSDirectory .. which was not modified 
in 1.3 final (same as in RC2)

If anyone has any suggestions they would be appreciated!

Here's the full stacktrace ...

"ksa-task-thread-32" prio=1 tid=0x89d04140 nid=0x4666 runnable 
[ba7ff000..ba7ff8d0]
        at java.io.RandomAccessFile.readBytes(Native Method)
        at java.io.RandomAccessFile.read(RandomAccessFile.java:307)
        at 
org.apache.lucene.store.FSInputStream.readInternal(FSDirectory.java:433)
        - locked <0x46df74a0> (a 
org.apache.lucene.store.FSInputStream$Descriptor)
        at org.apache.lucene.store.InputStream.refill(InputStream.java:196)
        at org.apache.lucene.store.InputStream.readByte(InputStream.java:81)
        at 
org.apache.lucene.store.InputStream.readVLong(InputStream.java:141)
        at 
org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:117)
        at 
org.apache.lucene.index.TermInfosReader.readIndex(TermInfosReader.java:110)
        at 
org.apache.lucene.index.TermInfosReader.<init>(TermInfosReader.java:82)
        at 
org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:141)
        at 
org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:120)
        at 
org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:118)
        at org.apache.lucene.store.Lock$With.run(Lock.java:148)
        at org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
        - locked <0x4ccc3790> (a org.apache.lucene.store.FSDirectory)
        at 
ksa.index.AdvancedIndexWriter.doDeleteByResource(AdvancedIndexWriter.java:264)
        at 
ksa.index.AdvancedIndexWriter.commit(AdvancedIndexWriter.java:172)
        - locked <0x497cfde0> (a java.lang.Object)
        at 
ksa.index.IndexManager.getAdvancedIndexWriter(IndexManager.java:282)
        - locked <0x497e0a50> (a java.lang.Object)
        at 
ksa.robot.FeedTaskParserListener.onItemEnd(FeedTaskParserListener.java:315)
        at 
org.apache.commons.feedparser.RSSFeedParser.doParseItem(RSSFeedParser.java:260)
        at 
org.apache.commons.feedparser.RSSFeedParser.parse(RSSFeedParser.java:126)
        at 
org.apache.commons.feedparser.FeedParser.parse(FeedParser.java:146)
        at 
org.apache.commons.feedparser.FeedParser.parse(FeedParser.java:113)
        at ksa.robot.FeedTask.doUpdate(FeedTask.java:375)
        at ksa.robot.FeedTask.doUpdate(FeedTask.java:331)
        at ksa.robot.FeedTask.run(FeedTask.java:147)
        at ksa.robot.TaskThread.doProcessTask(TaskThread.java:213)
        at ksa.robot.TaskThread.run(TaskThread.java:78)

-- 

Please reply using PGP:

    http://peerfear.org/pubkey.asc    

    NewsMonster - http://www.newsmonster.org/
    
Kevin A. Burton, Location - San Francisco, CA, Cell - 415.595.9965
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
  IRC - freenode.net #infoanarchy | #p2p-hackers | #newsmonster


--------------030802070008030109010601
Content-Type: text/x-vcard; charset=utf8;
 name="burton.vcf"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
 filename="burton.vcf"

begin:vcard
fn:Kevin Burton
n:Burton;Kevin
email;internet:burton@newsmonster.org
x-mozilla-html:TRUE
version:2.1
end:vcard


--------------030802070008030109010601--

--------------enigF46775213D246DF8D265B7C1
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.1 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFAO68s6E2NBJnxRBIRAhPUAKClaqv0urRbfOoZYavHfTZVvETJgwCfWe7m
5CrhqBv/kHTpgM/bOL/tjcU=
=wFMj
-----END PGP SIGNATURE-----

--------------enigF46775213D246DF8D265B7C1--

From MAILER-DAEMON Tue Feb 24 20:24:24 2004
Return-Path: 
 <lucene-user-return-7246-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 48753 invoked from network); 24 Feb 2004 20:24:24 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 24 Feb 2004 20:24:24 -0000
Received: (qmail 8174 invoked by uid 500); 24 Feb 2004 20:23:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 8148 invoked by uid 500); 24 Feb 2004 20:23:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 8060 invoked from network); 24 Feb 2004 20:23:56 -0000
Received: from unknown (HELO dev.sofari.com) (12.43.53.196)
  by daedalus.apache.org with SMTP; 24 Feb 2004 20:23:56 -0000
Received: from newsmonster.org ([12.43.53.196])
	(authenticated bits=0)
	by dev.sofari.com (8.12.10/8.12.10) with ESMTP id i1OKO2tG010042
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <lucene-user@jakarta.apache.org>; Tue, 24 Feb 2004 12:24:02 -0800
Message-ID: <403BB2E0.8070605@newsmonster.org>
Date: Tue, 24 Feb 2004 12:24:00 -0800
From: "Kevin A. Burton" <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040113
X-Accept-Language: en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Lucene HARD lock during indexing... BAD bug!?
References: <403BAF2C.8030904@newsmonster.org>
In-Reply-To: <403BAF2C.8030904@newsmonster.org>
X-Enigmail-Version: 0.83.1.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Content-Type: multipart/signed; micalg=pgp-sha1;
 protocol="application/pgp-signature";
 boundary="------------enig51CDB268D9D7A9645949D004"
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------enig51CDB268D9D7A9645949D004
Content-Type: multipart/mixed;
 boundary="------------040207000300070802010105"

This is a multi-part message in MIME format.
--------------040207000300070802010105
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Kevin A. Burton wrote:

> I've recently noticed this major problem with our indexer.
>
> It only seems to happen running on 1.3 final and not on 1.3 RC2.
>
> Essentially we have about 80 threads doing indexing... they all add to 
> a RAMDirectory which after 10k documents does a commit to disk.

... also.  This seems to only happen when I delete items from the index.

Kevin

-- 

Please reply using PGP:

    http://peerfear.org/pubkey.asc    

    NewsMonster - http://www.newsmonster.org/
    
Kevin A. Burton, Location - San Francisco, CA, Cell - 415.595.9965
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
  IRC - freenode.net #infoanarchy | #p2p-hackers | #newsmonster


--------------040207000300070802010105
Content-Type: text/x-vcard; charset=utf8;
 name="burton.vcf"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
 filename="burton.vcf"

begin:vcard
fn:Kevin Burton
n:Burton;Kevin
email;internet:burton@newsmonster.org
x-mozilla-html:TRUE
version:2.1
end:vcard


--------------040207000300070802010105--

--------------enig51CDB268D9D7A9645949D004
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.1 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFAO7Lg6E2NBJnxRBIRAodBAJ9hpNw1ah4PGfkBWyk+Ipa6kw6KDgCdGY3u
LdXEjBTSO7a1bBmmc4N55bU=
=t1Js
-----END PGP SIGNATURE-----

--------------enig51CDB268D9D7A9645949D004--

From MAILER-DAEMON Tue Feb 24 20:25:49 2004
Return-Path: 
 <lucene-user-return-7247-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 49534 invoked from network); 24 Feb 2004 20:25:49 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 24 Feb 2004 20:25:49 -0000
Received: (qmail 12829 invoked by uid 500); 24 Feb 2004 20:25:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12787 invoked by uid 500); 24 Feb 2004 20:25:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 12745 invoked from network); 24 Feb 2004 20:25:23 -0000
Received: from unknown (HELO dev.sofari.com) (12.43.53.196)
  by daedalus.apache.org with SMTP; 24 Feb 2004 20:25:23 -0000
Received: from newsmonster.org ([12.43.53.196])
	(authenticated bits=0)
	by dev.sofari.com (8.12.10/8.12.10) with ESMTP id i1OKPTtG010048
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <lucene-user@jakarta.apache.org>; Tue, 24 Feb 2004 12:25:30 -0800
Message-ID: <403BB338.6000909@newsmonster.org>
Date: Tue, 24 Feb 2004 12:25:28 -0800
From: "Kevin A. Burton" <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040113
X-Accept-Language: en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: can't delete from an index using IndexReader.delete()
References: <BAY14-F61i30d6nesQG0001da2b@hotmail.com>
In-Reply-To: <BAY14-F61i30d6nesQG0001da2b@hotmail.com>
X-Enigmail-Version: 0.83.1.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Content-Type: multipart/signed; micalg=pgp-sha1;
 protocol="application/pgp-signature";
 boundary="------------enig0F05C360D275C8AB4C710FA6"
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------enig0F05C360D275C8AB4C710FA6
Content-Type: multipart/mixed;
 boundary="------------050806010204030706000508"

This is a multi-part message in MIME format.
--------------050806010204030706000508
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Dhruba Borthakur wrote:

> Hi folks,
>
> I am using the latest and greatest Lucene jar file and am facing a 
> problem with
> deleting documents from the index. Browsing the mail archive, I found 
> that the
> following email (June 2003) listed the exact problem that I am 
> encountering.
>
> In short: I am using Field.text("id", "value") to mark a document. 
> Then I use
> reader.delete(new Term("id", "value")) to remove the document: this
> call returns 0 and fails to delete the document. The attached sample 
> program
> shows this behaviour.

Agreed... you're values might be indexed... try adding them as Tokens...

Kevin

-- 

Please reply using PGP:

    http://peerfear.org/pubkey.asc    

    NewsMonster - http://www.newsmonster.org/
    
Kevin A. Burton, Location - San Francisco, CA, Cell - 415.595.9965
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
  IRC - freenode.net #infoanarchy | #p2p-hackers | #newsmonster


--------------050806010204030706000508
Content-Type: text/x-vcard; charset=utf8;
 name="burton.vcf"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
 filename="burton.vcf"

begin:vcard
fn:Kevin Burton
n:Burton;Kevin
email;internet:burton@newsmonster.org
x-mozilla-html:TRUE
version:2.1
end:vcard


--------------050806010204030706000508--

--------------enig0F05C360D275C8AB4C710FA6
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.1 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFAO7M46E2NBJnxRBIRAkawAKCDe6zGvbfYEj1tVI0Y6E9h8Fj/YgCfVXLG
QvO18SlHu5VV0y1rqTNsA/g=
=vuxG
-----END PGP SIGNATURE-----

--------------enig0F05C360D275C8AB4C710FA6--

From MAILER-DAEMON Tue Feb 24 20:53:29 2004
Return-Path: 
 <lucene-user-return-7248-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68256 invoked from network); 24 Feb 2004 20:53:29 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 24 Feb 2004 20:53:29 -0000
Received: (qmail 73827 invoked by uid 500); 24 Feb 2004 20:53:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 73645 invoked by uid 500); 24 Feb 2004 20:53:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 73631 invoked from network); 24 Feb 2004 20:53:11 -0000
Received: from unknown (HELO rwcrmhc11.comcast.net) (204.127.198.35)
  by daedalus.apache.org with SMTP; 24 Feb 2004 20:53:11 -0000
Received: from apache.org (c-24-5-145-151.client.comcast.net[24.5.145.151])
          by comcast.net (rwcrmhc11) with ESMTP
          id <20040224205317013008umjae>; Tue, 24 Feb 2004 20:53:17 +0000
Message-ID: <403BB9B4.10201@apache.org>
Date: Tue, 24 Feb 2004 12:53:08 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040116
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: RE : Lucene scalability/clustering
References: <003a01c3fa62$77be6010$86d4a8c0@fulfilnet.com.au>
In-Reply-To: <003a01c3fa62$77be6010$86d4a8c0@fulfilnet.com.au>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Anson Lau wrote:
> I'm trying to see what are some common ways to scale lucene onto
> multiple boxes.  Is RMI based search and using a MultiSearcher the
> general approach?

Yes, although you probably want to use ParallelMultiSearcher.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Tue Feb 24 23:35:52 2004
Return-Path: 
 <lucene-user-return-7249-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 85963 invoked from network); 24 Feb 2004 23:35:52 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 24 Feb 2004 23:35:52 -0000
Received: (qmail 59488 invoked by uid 500); 24 Feb 2004 23:35:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 59469 invoked by uid 500); 24 Feb 2004 23:35:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 59449 invoked from network); 24 Feb 2004 23:35:31 -0000
Received: from unknown (HELO mail.fulfilnet.com.au) (203.111.107.196)
  by daedalus.apache.org with SMTP; 24 Feb 2004 23:35:31 -0000
From: "Anson Lau" <alau@fulfil-net.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE : Lucene scalability/clustering
Date: Wed, 25 Feb 2004 10:36:37 +1100
Message-ID: <007001c3fb2f$0ba4f2e0$86d4a8c0@fulfilnet.com.au>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
In-Reply-To: <000101c3fac1$aac9f460$ac7ba8c0@diderot>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

RBP,

I'm implementing a search engine for a project at work.  It's going to
index approx 1.5 rows in a database.

I am trying to get a feel of what my options are when scalability
becomes an issue.  I also want to know if those options require me to
implement my app in a different way right from the start.

Anson

-----Original Message-----
From: Rasik Pandey [mailto:rasik.pandey@ajlsm.com] 
Sent: Tuesday, February 24, 2004 9:34 PM
To: 'Lucene Users List'
Subject: RE : RE : Lucene scalability/clustering

> I'm trying to see what are some common ways to scale lucene
> onto multiple boxes.  Is RMI based search and using a 
> MultiSearcher the general approach?

More details about what you are attempting would be helpful.


RBP


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 25 00:10:16 2004
Return-Path: 
 <lucene-user-return-7250-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 5392 invoked from network); 25 Feb 2004 00:10:16 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 25 Feb 2004 00:10:16 -0000
Received: (qmail 7148 invoked by uid 500); 25 Feb 2004 00:09:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 7125 invoked by uid 500); 25 Feb 2004 00:09:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 7109 invoked from network); 25 Feb 2004 00:09:55 -0000
Received: from unknown (HELO dev.sofari.com) (12.43.53.196)
  by daedalus.apache.org with SMTP; 25 Feb 2004 00:09:55 -0000
Received: from newsmonster.org ([12.43.53.196])
	(authenticated bits=0)
	by dev.sofari.com (8.12.10/8.12.10) with ESMTP id i1P0A4tG010319
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <lucene-user@jakarta.apache.org>; Tue, 24 Feb 2004 16:10:04 -0800
Message-ID: <403BE7D8.9050606@newsmonster.org>
Date: Tue, 24 Feb 2004 16:10:00 -0800
From: "Kevin A. Burton" <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040113
X-Accept-Language: en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Prevent duplicate results?
X-Enigmail-Version: 0.83.1.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Content-Type: multipart/signed; micalg=pgp-sha1;
 protocol="application/pgp-signature";
 boundary="------------enigE9F63D3230C9C54E5E9CAD33"
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------enigE9F63D3230C9C54E5E9CAD33
Content-Type: multipart/mixed;
 boundary="------------010608060908060104020909"

This is a multi-part message in MIME format.
--------------010608060908060104020909
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Is there any way to prevent lucene from returning duplicate (but 
'older') results from returning within a search result?

Kevin

-- 

Please reply using PGP:

    http://peerfear.org/pubkey.asc    

    NewsMonster - http://www.newsmonster.org/
    
Kevin A. Burton, Location - San Francisco, CA, Cell - 415.595.9965
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
  IRC - freenode.net #infoanarchy | #p2p-hackers | #newsmonster


--------------010608060908060104020909
Content-Type: text/x-vcard; charset=utf8;
 name="burton.vcf"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
 filename="burton.vcf"

begin:vcard
fn:Kevin Burton
n:Burton;Kevin
email;internet:burton@newsmonster.org
x-mozilla-html:TRUE
version:2.1
end:vcard


--------------010608060908060104020909--

--------------enigE9F63D3230C9C54E5E9CAD33
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.1 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFAO+fa6E2NBJnxRBIRAtkVAKCEme225/TU3VN6IjMHyWrR0p531gCfTH7K
pd1n85gpe3mIiXlp8Wfbt4o=
=jliQ
-----END PGP SIGNATURE-----

--------------enigE9F63D3230C9C54E5E9CAD33--

From MAILER-DAEMON Wed Feb 25 00:22:58 2004
Return-Path: 
 <lucene-user-return-7251-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 11435 invoked from network); 25 Feb 2004 00:22:58 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 25 Feb 2004 00:22:58 -0000
Received: (qmail 20583 invoked by uid 500); 25 Feb 2004 00:22:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 20551 invoked by uid 500); 25 Feb 2004 00:22:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 20538 invoked from network); 25 Feb 2004 00:22:37 -0000
Received: from unknown (HELO rlx13.zapatec.com) (66.117.144.213)
  by daedalus.apache.org with SMTP; 25 Feb 2004 00:22:37 -0000
Received: from rlx11.zapatec.com (rlx11.pr.zapatec.com [192.168.1.132])
	by rlx13.zapatec.com (Postfix) with ESMTP id B5A04A941
	for <lucene-user@jakarta.apache.org>; Tue, 24 Feb 2004 16:22:45 -0800 (PST)
Received: (from dror@localhost)
	by rlx11.zapatec.com (8.12.3/8.12.3/Submit) id i1P0Mjjx065746
	for lucene-user@jakarta.apache.org; Tue, 24 Feb 2004 16:22:45 -0800 (PST)
	(envelope-from dror)
Date: Tue, 24 Feb 2004 16:22:45 -0800
From: Dror Matalon <dror@zapatec.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Prevent duplicate results?
Message-ID: <20040225002245.GT26787@rlx11.zapatec.com>
References: <403BE7D8.9050606@newsmonster.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <403BE7D8.9050606@newsmonster.org>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The short answer is no. 
The longer answer is that the best way to achieve this is by first
seeing if the entry is already in the Index and replacing the old entry
with the new entry.

Dror

On Tue, Feb 24, 2004 at 04:10:00PM -0800, Kevin A. Burton wrote:
> Is there any way to prevent lucene from returning duplicate (but 
> 'older') results from returning within a search result?
> 
> Kevin
> 
> -- 
> 
> Please reply using PGP:
> 
>    http://peerfear.org/pubkey.asc    
> 
>    NewsMonster - http://www.newsmonster.org/
>    
> Kevin A. Burton, Location - San Francisco, CA, Cell - 415.595.9965
>       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
> GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
>  IRC - freenode.net #infoanarchy | #p2p-hackers | #newsmonster
> 





-- 
Dror Matalon
Zapatec Inc 
1700 MLK Way
Berkeley, CA 94709
http://www.fastbuzz.com
http://www.zapatec.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 25 09:45:20 2004
Return-Path: 
 <lucene-user-return-7252-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67708 invoked from network); 25 Feb 2004 09:45:20 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 25 Feb 2004 09:45:20 -0000
Received: (qmail 42254 invoked by uid 500); 25 Feb 2004 09:44:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 42042 invoked by uid 500); 25 Feb 2004 09:44:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 42028 invoked from network); 25 Feb 2004 09:44:50 -0000
Received: from unknown (HELO hotmail.com) (64.4.49.36)
  by daedalus.apache.org with SMTP; 25 Feb 2004 09:44:50 -0000
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Wed, 25 Feb 2004 01:45:03 -0800
Received: from 143.127.3.10 by by14fd.bay14.hotmail.msn.com with HTTP;
	Wed, 25 Feb 2004 09:45:03 GMT
X-Originating-IP: [143.127.3.10]
X-Originating-Email: [dhruba_borthakur@hotmail.com]
X-Sender: dhruba_borthakur@hotmail.com
From: "Dhruba Borthakur" <dhruba_borthakur@hotmail.com>
To: lucene-user@jakarta.apache.org
Bcc: 
Subject: Re: Re:can't delete from an index using IndexReader.delete()
Date: Wed, 25 Feb 2004 01:45:03 -0800
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
Message-ID: <BAY14-F36MtwGtYm2FD0001146a@hotmail.com>
X-OriginalArrivalTime: 25 Feb 2004 09:45:03.0504 (UTC)
 FILETIME=[0AFBE100:01C3FB84]
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The solution you suggested works fine. Thanks a lot for your help.

dhruba


>From: Morus Walter <morus.walter@tanto.de>
>Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>Subject: Re: Re:can't delete from an index using IndexReader.delete() Date: 
>Fri, 20 Feb 2004 10:33:08 +0100
>
>Dhruba Borthakur writes:
> > Hi folks,
> >
> > I am using the latest and greatest Lucene jar file and am facing a 
>problem
> > with
> > deleting documents from the index. Browsing the mail archive, I found 
>that
> > the
> > following email (June 2003) listed the exact problem that I am 
>encountering.
> >
> > In short: I am using Field.text("id", "value") to mark a document. Then 
>I
> > use
> > reader.delete(new Term("id", "value")) to remove the document: this
> > call returns 0 and fails to delete the document. The attached sample 
>program
> > shows this behaviour.
> >
>You don't tell us how your ids look like, but Field.text("id", value)
>tokenizes value, that is splits value into whatever the analyzer considers
>to be a token, and creates a term for each token.
>Whereas new Term("id", value) creates one term containing value.
>
>So I guess your ids are considered several token by the analyzer you use
>and therefore they won't be matched by the term you construct for the 
>delete.
>
>Using keyword fields instead of text fields for the id should help.
>
>Morus
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

_________________________________________________________________
Find and compare great deals on Broadband access at the MSN High-Speed 
Marketplace. http://click.atdmt.com/AVE/go/onm00200360ave/direct/01/


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 25 18:07:33 2004
Return-Path: 
 <lucene-user-return-7253-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 44706 invoked from network); 25 Feb 2004 18:07:33 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 25 Feb 2004 18:07:33 -0000
Received: (qmail 77524 invoked by uid 500); 25 Feb 2004 18:07:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77488 invoked by uid 500); 25 Feb 2004 18:06:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77444 invoked from network); 25 Feb 2004 18:06:59 -0000
Received: from unknown (HELO rwcrmhc12.comcast.net) (216.148.227.85)
  by daedalus.apache.org with SMTP; 25 Feb 2004 18:06:59 -0000
Received: from apache.org (c-24-5-145-151.client.comcast.net[24.5.145.151])
          by comcast.net (rwcrmhc12) with ESMTP
          id <20040225180702014001tu2ie>; Wed, 25 Feb 2004 18:07:02 +0000
Message-ID: <403CE446.90701@apache.org>
Date: Wed, 25 Feb 2004 10:07:02 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040116
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Prevent duplicate results?
References: <403BE7D8.9050606@newsmonster.org>
In-Reply-To: <403BE7D8.9050606@newsmonster.org>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

How could Lucene know that something is "duplicate but older"?  Sounds 
like an application-specific thing.

Doug

Kevin A. Burton wrote:
> Is there any way to prevent lucene from returning duplicate (but 
> 'older') results from returning within a search result?
> 
> Kevin
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 25 20:47:59 2004
Return-Path: 
 <lucene-user-return-7254-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 33059 invoked from network); 25 Feb 2004 20:47:59 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 25 Feb 2004 20:47:59 -0000
Received: (qmail 60504 invoked by uid 500); 25 Feb 2004 20:47:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 60436 invoked by uid 500); 25 Feb 2004 20:47:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 60421 invoked from network); 25 Feb 2004 20:47:39 -0000
Received: from unknown (HELO jive.servlets.net) (209.162.192.250)
  by daedalus.apache.org with SMTP; 25 Feb 2004 20:47:39 -0000
Received: from jivesoftware.com
 (CPE00045ade8fc4-CM024370005574.cpe.net.cable.rogers.com [65.50.38.86])
	(authenticated bits=0)
	by jive.servlets.net (8.12.8/8.12.8) with ESMTP id i1PKlaBv030703
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=OK)
	for <lucene-user@jakarta.apache.org>; Wed, 25 Feb 2004 12:47:41 -0800
Message-ID: <403D09EC.3040606@jivesoftware.com>
Date: Wed, 25 Feb 2004 15:47:40 -0500
From: Bruce Ritchie <bruce@jivesoftware.com>
Organization: Jive Software
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;
 rv:1.6) Gecko/20040113
X-Accept-Language: en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: MoreLikeThis Query generator - Re: code for "more like this"
 query "expansion" - was - Re: setMaxClauseCount ??
References: <20040212104313.51470.qmail@web12707.mail.yahoo.com>
 <402BDC58.2010502@tropo.com>
In-Reply-To: <402BDC58.2010502@tropo.com>
Content-Type: multipart/signed; protocol="application/x-pkcs7-signature";
 micalg=sha1; boundary="------------ms050309020005080600070109"
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------ms050309020005080600070109
Content-Type: multipart/mixed;
 boundary="------------050907020703000703000807"

This is a multi-part message in MIME format.
--------------050907020703000703000807
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

David Spencer wrote:

> Code rewritten, automagically chooses lots of defaults, lets you override
> the defs thru the static vars at the bottom or the non-static vars also 
> at the bottom.

I've taken the liberty to update this code to handle multiple fields and use the new term vector 
support in CVS so that retokenizing a document's text isn't necessary if you have a document ID that 
has indexed and term vector supported fields. I've added the apache 2.0 license to the top however 
if that isn't the licence you want this code to be released under let me know and I'll change it 
immediately.


Regards,

Bruce Ritchie
http://www.jivesoftware.com/

--------------050907020703000703000807
Content-Type: application/x-httpd-cgi;
 name="MoreLikeThis.java"
Content-Transfer-Encoding: base64
Content-Disposition: inline;
 filename="MoreLikeThis.java"

LyoqDQogKiBDb3B5cmlnaHQgMjAwNCBUaGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24u
DQogKg0KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIu
MCAodGhlICJMaWNlbnNlIik7DQogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2Vw
dCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuDQogKiBZb3UgbWF5IG9idGFpbiBh
IGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiAgICAgaHR0cDovL3d3dy5hcGFjaGUu
b3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wDQogKg0KICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFw
cGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQ0KICogZGlz
dHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElT
IiBCQVNJUywNCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBL
SU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLg0KICogU2VlIHRoZSBMaWNlbnNlIGZv
ciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZA0KICog
bGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuDQogKi8NCnBhY2thZ2UgY29tLmppdmVz
b2Z0d2FyZS51dGlsLnNlYXJjaDsNCg0KaW1wb3J0IGphdmEuaW8uKjsNCmltcG9ydCBqYXZh
LnV0aWwuKjsNCmltcG9ydCBqYXZhLm5ldC4qOw0KDQppbXBvcnQgb3JnLmFwYWNoZS5sdWNl
bmUuYW5hbHlzaXMuKjsNCmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5hbmFseXNpcy5zdGFu
ZGFyZC4qOw0KaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50Lio7DQppbXBvcnQg
b3JnLmFwYWNoZS5sdWNlbmUuc2VhcmNoLio7DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUu
aW5kZXguKjsNCmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS51dGlsLio7DQoNCi8qKg0KICog
R2VuZXJhdGUgIm1vcmUgbGlrZSB0aGlzIiBzaW1pbGFyaXR5IHF1ZXJpZXMuDQogKiBCYXNl
ZCBvbiB0aGlzIG1haWw6DQogKiA8cC8+DQogKiBMdWNlbmUgZG9lcyBsZXQgeW91IGFjY2Vz
cyB0aGUgZG9jdW1lbnQgZnJlcXVlbmN5IG9mIHRlcm1zLCB3aXRoIEluZGV4UmVhZGVyLmRv
Y0ZyZXEoKS4NCiAqIFRlcm0gZnJlcXVlbmNpZXMgY2FuIGJlIGNvbXB1dGVkIGJ5IHJlLXRv
a2VuaXppbmcgdGhlIHRleHQsIHdoaWNoLCBmb3IgYSBzaW5nbGUgZG9jdW1lbnQsDQogKiBp
cyB1c3VhbGx5IGZhc3QgZW5vdWdoLiAgQnV0IGxvb2tpbmcgdXAgdGhlIGRvY0ZyZXEoKSBv
ZiBldmVyeSB0ZXJtIGluIHRoZSBkb2N1bWVudCBpcw0KICogcHJvYmFibHkgdG9vIHNsb3cu
DQogKiA8cC8+DQogKiBZb3UgY2FuIHVzZSBzb21lIGhldXJpc3RpY3MgdG8gcHJ1bmUgdGhl
IHNldCBvZiB0ZXJtcywgdG8gYXZvaWQgY2FsbGluZyBkb2NGcmVxKCkgdG9vIG11Y2gsDQog
KiBvciBhdCBhbGwuICBTaW5jZSB5b3UncmUgdHJ5aW5nIHRvIG1heGltaXplIGEgdGYqaWRm
IHNjb3JlLCB5b3UncmUgcHJvYmFibHkgbW9zdCBpbnRlcmVzdGVkDQogKiBpbiB0ZXJtcyB3
aXRoIGEgaGlnaCB0Zi4gQ2hvb3NpbmcgYSB0ZiB0aHJlc2hvbGQgZXZlbiBhcyBsb3cgYXMg
dHdvIG9yIHRocmVlIHdpbGwgcmFkaWNhbGx5DQogKiByZWR1Y2UgdGhlIG51bWJlciBvZiB0
ZXJtcyB1bmRlciBjb25zaWRlcmF0aW9uLiAgQW5vdGhlciBoZXVyaXN0aWMgaXMgdGhhdCB0
ZXJtcyB3aXRoIGENCiAqIGhpZ2ggaWRmIChpLmUuLCBhIGxvdyBkZikgdGVuZCB0byBiZSBs
b25nZXIuICBTbyB5b3UgY291bGQgdGhyZXNob2xkIHRoZSB0ZXJtcyBieSB0aGUNCiAqIG51
bWJlciBvZiBjaGFyYWN0ZXJzLCBub3Qgc2VsZWN0aW5nIGFueXRoaW5nIGxlc3MgdGhhbiwg
ZS5nLiwgc2l4IG9yIHNldmVuIGNoYXJhY3RlcnMuDQogKiBXaXRoIHRoZXNlIHNvcnRzIG9m
IGhldXJpc3RpY3MgeW91IGNhbiB1c3VhbGx5IGZpbmQgc21hbGwgc2V0IG9mLCBlLmcuLCB0
ZW4gb3IgZmV3ZXIgdGVybXMNCiAqIHRoYXQgZG8gYSBwcmV0dHkgZ29vZCBqb2Igb2YgY2hh
cmFjdGVyaXppbmcgYSBkb2N1bWVudC4NCiAqIDxwLz4NCiAqIEl0IGFsbCBkZXBlbmRzIG9u
IHdoYXQgeW91J3JlIHRyeWluZyB0byBkby4gIElmIHlvdSdyZSB0cnlpbmcgdG8gZWVrIG91
dCB0aGF0IGxhc3QgcGVyY2VudA0KICogb2YgcHJlY2lzaW9uIGFuZCByZWNhbGwgcmVnYXJk
bGVzcyBvZiBjb21wdXRhdGlvbmFsIGRpZmZpY3VsdHkgc28gdGhhdCB5b3UgY2FuIHdpbiBh
IFRSRUMNCiAqIGNvbXBldGl0aW9uLCB0aGVuIHRoZSB0ZWNobmlxdWVzIEkgbWVudGlvbiBh
Ym92ZSBhcmUgdXNlbGVzcy4gIEJ1dCBpZiB5b3UncmUgdHJ5aW5nIHRvDQogKiBwcm92aWRl
IGEgIm1vcmUgbGlrZSB0aGlzIiBidXR0b24gb24gYSBzZWFyY2ggcmVzdWx0cyBwYWdlIHRo
YXQgZG9lcyBhIGRlY2VudCBqb2IgYW5kIGhhcw0KICogZ29vZCBwZXJmb3JtYW5jZSwgc3Vj
aCB0ZWNobmlxdWVzIG1pZ2h0IGJlIHVzZWZ1bC4NCiAqIDxwLz4NCiAqIEFuIGVmZmljaWVu
dCwgZWZmZWN0aXZlICJtb3JlLWxpa2UtdGhpcyIgcXVlcnkgZ2VuZXJhdG9yIHdvdWxkIGJl
IGEgZ3JlYXQgY29udHJpYnV0aW9uLCBpZg0KICogYW55b25lJ3MgaW50ZXJlc3RlZC4gIEkn
ZCBpbWFnaW5lIHRoYXQgaXQgd291bGQgdGFrZSBhIFJlYWRlciBvciBhIFN0cmluZyAodGhl
IGRvY3VtZW50J3MNCiAqIHRleHQpLCBhbmFseXplciBBbmFseXplciwgYW5kIHJldHVybiBh
IHNldCBvZiByZXByZXNlbnRhdGl2ZSB0ZXJtcyB1c2luZyBoZXVyaXN0aWNzIGxpa2UgdGhv
c2UNCiAqIGFib3ZlLiAgVGhlIGZyZXF1ZW5jeSBhbmQgbGVuZ3RoIHRocmVzaG9sZHMgY291
bGQgYmUgcGFyYW1ldGVycywgZXRjLg0KICogPHAvPg0KICogRG91Zw0KICoNCiAqIEBhdXRo
b3IgRGF2aWQgU3BlbmNlcg0KICogQGF1dGhvciBCcnVjZSBSaXRjaGllDQogKi8NCnB1Ymxp
YyBmaW5hbCBjbGFzcyBNb3JlTGlrZVRoaXMgew0KDQogICAgLyoqDQogICAgICogRGVmYXVs
dCBhbmFseXplciB0byBwYXJzZSBzb3VyY2UgZG9jIHdpdGguDQogICAgICovDQogICAgcHVi
bGljIHN0YXRpYyBmaW5hbCBBbmFseXplciBERUZBVUxUX0FOQUxZWkVSID0gbmV3IFN0YW5k
YXJkQW5hbHl6ZXIoKTsNCg0KICAgIC8qKg0KICAgICAqIElnbm9yZSB0ZXJtcyB3aXRoIGxl
c3MgdGhhbiB0aGlzIGZyZXF1ZW5jeSBpbiB0aGUgc291cmNlIGRvYy4NCiAgICAgKi8NCiAg
ICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBERUZBVUxUX01JTl9URVJNX0ZSRVEgPSAyOw0K
DQogICAgLyoqDQogICAgICogSWdub3JlIHdvcmRzIHdoaWNoIGRvIG5vdCBvY2N1ciBpbiBh
dCBsZWFzdCB0aGlzIG1hbnkgZG9jcy4NCiAgICAgKi8NCiAgICBwdWJsaWMgc3RhdGljIGZp
bmFsIGludCBERUZBTFRfTUlOX0RPQ19GUkVRID0gNTsNCg0KICAgIC8qKg0KICAgICAqIEJv
b3N0IHRlcm1zIGluIHF1ZXJ5IGJhc2VkIG9uICJzY29yZSI/DQogICAgICovDQogICAgcHVi
bGljIHN0YXRpYyBmaW5hbCBib29sZWFuIERFRkFVTFRfQk9PU1QgPSBmYWxzZTsNCg0KICAg
IC8qKg0KICAgICAqIERlZmF1bHQgZmllbGQgbmFtZXMuIE51bGwgaXMgdXNlZCB0byBzcGVj
aWZ5IHRoYXQgdGhlIGZpZWxkIG5hbWVzIHNob3VsZCBiZSBsb29rZWQNCiAgICAgKiB1cCBh
dCBydW50aW1lIGZyb20gdGhlIHByb3ZpZGVkIHJlYWRlci4NCiAgICAgKi8NCiAgICBwdWJs
aWMgc3RhdGljIGZpbmFsIFN0cmluZ1tdIERFRkFVTFRfRklFTERfTkFNRVMgPSBudWxsOw0K
DQogICAgLyoqDQogICAgICogSWdub3JlIHdvcmRzIGxlc3MgdGhhbiB0aGlzIGxlbmd0aCBv
ciBpZiAwIHRoZW4gdGhpcyBoYXMgbm8gZWZmZWN0Lg0KICAgICAqLw0KICAgIHB1YmxpYyBz
dGF0aWMgZmluYWwgaW50IERFRkFVTFRfTUlOX1dPUkRfTEVOR1RIID0gMDsNCg0KICAgIC8q
Kg0KICAgICAqIElnbm9yZSB3b3JkcyBncmVhdGVyIHRoYW4gdGhpcyBsZW5ndGggb3IgaWYg
MCB0aGVuIHRoaXMgaGFzIG5vIGVmZmVjdC4NCiAgICAgKi8NCiAgICBwdWJsaWMgc3RhdGlj
IGZpbmFsIGludCBERUZBVUxUX01BWF9XT1JEX0xFTkdUSCA9IDA7DQoNCiAgICAvKioNCiAg
ICAgKiBSZXR1cm4gYSBRdWVyeSB3aXRoIG5vIG1vcmUgdGhhbiB0aGlzIG1hbnkgdGVybXMu
DQogICAgICoNCiAgICAgKiBAc2VlIEJvb2xlYW5RdWVyeSNnZXRNYXhDbGF1c2VDb3VudA0K
ICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IERFRkFVTFRfTUFYX1FVRVJZ
X1RFUk1TID0gMjU7DQoNCiAgICAvKioNCiAgICAgKiBBbmFseXplciB0aGF0IHdpbGwgYmUg
dXNlZCB0byBwYXJzZSB0aGUgZG9jLg0KICAgICAqLw0KICAgIHByaXZhdGUgQW5hbHl6ZXIg
YW5hbHl6ZXIgPSBERUZBVUxUX0FOQUxZWkVSOw0KDQogICAgLyoqDQogICAgICogSWdub3Jl
IHdvcmRzIGxlc3MgZnJlcWVudCB0aGF0IHRoaXMuDQogICAgICovDQogICAgcHJpdmF0ZSBp
bnQgbWluVGVybUZyZXEgPSBERUZBVUxUX01JTl9URVJNX0ZSRVE7DQoNCiAgICAvKioNCiAg
ICAgKiBJZ25vcmUgd29yZHMgd2hpY2ggZG8gbm90IG9jY3VyIGluIGF0IGxlYXN0IHRoaXMg
bWFueSBkb2NzLg0KICAgICAqLw0KICAgIHByaXZhdGUgaW50IG1pbkRvY0ZyZXEgPSBERUZB
TFRfTUlOX0RPQ19GUkVROw0KDQogICAgLyoqDQogICAgICogU2hvdWxkIHdlIGFwcGx5IGEg
Ym9vc3QgdG8gdGhlIFF1ZXJ5IGJhc2VkIG9uIHRoZSBzY29yZXM/DQogICAgICovDQogICAg
cHJpdmF0ZSBib29sZWFuIGJvb3N0ID0gREVGQVVMVF9CT09TVDsNCg0KICAgIC8qKg0KICAg
ICAqIEZpZWxkIG5hbWUgd2UnbGwgYW5hbHl6ZS4NCiAgICAgKi8NCiAgICBwcml2YXRlIFN0
cmluZ1tdIGZpZWxkTmFtZXMgPSBERUZBVUxUX0ZJRUxEX05BTUVTOw0KDQogICAgLyoqDQog
ICAgICogSWdub3JlIHdvcmRzIGlmIGxlc3MgdGhhbiB0aGlzIGxlbi4NCiAgICAgKi8NCiAg
ICBwcml2YXRlIGludCBtaW5Xb3JkTGVuID0gREVGQVVMVF9NSU5fV09SRF9MRU5HVEg7DQoN
CiAgICAvKioNCiAgICAgKiBJZ25vcmUgd29yZHMgaWYgZ3JlYXRlciB0aGFuIHRoaXMgbGVu
Lg0KICAgICAqLw0KICAgIHByaXZhdGUgaW50IG1heFdvcmRMZW4gPSBERUZBVUxUX01BWF9X
T1JEX0xFTkdUSDsNCg0KICAgIC8qKg0KICAgICAqIERvbid0IHJldHVybiBhIHF1ZXJ5IGxv
bmdlciB0aGFuIHRoaXMuDQogICAgICovDQogICAgcHJpdmF0ZSBpbnQgbWF4UXVlcnlUZXJt
cyA9IERFRkFVTFRfTUFYX1FVRVJZX1RFUk1TOw0KDQogICAgLyoqDQogICAgICogRm9yIGlk
ZigpIGNhbGN1bGF0aW9ucy4NCiAgICAgKi8NCiAgICBwcml2YXRlIFNpbWlsYXJpdHkgc2lt
aWxhcml0eSA9IG5ldyBEZWZhdWx0U2ltaWxhcml0eSgpOw0KDQogICAgLyoqDQogICAgICog
SW5kZXhSZWFkZXIgdG8gdXNlDQogICAgICovDQogICAgcHJpdmF0ZSBmaW5hbCBJbmRleFJl
YWRlciBpcjsNCg0KICAgIC8qKg0KICAgICAqIENvbnN0cnVjdG9yIHJlcXVpcmluZyBhbiBJ
bmRleFJlYWRlci4NCiAgICAgKi8NCiAgICBwdWJsaWMgTW9yZUxpa2VUaGlzKEluZGV4UmVh
ZGVyIGlyKSB7DQogICAgICAgIHRoaXMuaXIgPSBpcjsNCiAgICB9DQoNCiAgICAvKioNCiAg
ICAgKiBSZXR1cm5zIGFuIGFuYWx5emVyIHRoYXQgd2lsbCBiZSB1c2VkIHRvIHBhcnNlIHNv
dXJjZSBkb2Mgd2l0aC4gVGhlIGRlZmF1bHQgYW5hbHl6ZXINCiAgICAgKiBpcyB0aGUge0Bs
aW5rICNERUZBVUxUX0FOQUxZWkVSfS4NCiAgICAgKg0KICAgICAqIEByZXR1cm4gdGhlIGFu
YWx5emVyIHRoYXQgd2lsbCBiZSB1c2VkIHRvIHBhcnNlIHNvdXJjZSBkb2Mgd2l0aC4NCiAg
ICAgKi8NCiAgICBwdWJsaWMgQW5hbHl6ZXIgZ2V0QW5hbHl6ZXIoKSB7DQogICAgICAgIHJl
dHVybiBhbmFseXplcjsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBTZXRzIHRoZSBhbmFs
eXplciB0byB1c2UuIEFuIGFuYWx5emVyIGlzIG5vdCByZXF1aXJlZCBmb3IgZ2VuZXJhdGlu
ZyBhIHF1ZXJ5IHdpdGggdGhlDQogICAgICoge0BsaW5rICNsaWtlKGludCl9IG1ldGhvZCwg
YWxsIG90aGVyICdsaWtlJyBtZXRob2RzIHJlcXVpcmUgYW4gYW5hbHl6ZXIuDQogICAgICoN
CiAgICAgKiBAcGFyYW0gYW5hbHl6ZXIgdGhlIGFuYWx5emVyIHRvIHVzZSB0byB0b2tlbml6
ZSB0ZXh0Lg0KICAgICAqLw0KICAgIHB1YmxpYyB2b2lkIHNldEFuYWx5emVyKEFuYWx5emVy
IGFuYWx5emVyKSB7DQogICAgICAgIHRoaXMuYW5hbHl6ZXIgPSBhbmFseXplcjsNCiAgICB9
DQoNCiAgICAvKioNCiAgICAgKiBSZXR1cm5zIHRoZSBmcmVxdWVuY3kgYmVsb3cgd2hpY2gg
dGVybXMgd2lsbCBiZSBpZ25vcmVkIGluIHRoZSBzb3VyY2UgZG9jLiBUaGUgZGVmYXVsdA0K
ICAgICAqIGZyZXF1ZW5jeSBpcyB0aGUge0BsaW5rICNERUZBVUxUX01JTl9URVJNX0ZSRVF9
Lg0KICAgICAqDQogICAgICogQHJldHVybiB0aGUgZnJlcXVlbmN5IGJlbG93IHdoaWNoIHRl
cm1zIHdpbGwgYmUgaWdub3JlZCBpbiB0aGUgc291cmNlIGRvYy4NCiAgICAgKi8NCiAgICBw
dWJsaWMgaW50IGdldE1pblRlcm1GcmVxKCkgew0KICAgICAgICByZXR1cm4gbWluVGVybUZy
ZXE7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogU2V0cyB0aGUgZnJlcXVlbmN5IGJlbG93
IHdoaWNoIHRlcm1zIHdpbGwgYmUgaWdub3JlZCBpbiB0aGUgc291cmNlIGRvYy4NCiAgICAg
Kg0KICAgICAqIEBwYXJhbSBtaW5UZXJtRnJlcSB0aGUgZnJlcXVlbmN5IGJlbG93IHdoaWNo
IHRlcm1zIHdpbGwgYmUgaWdub3JlZCBpbiB0aGUgc291cmNlIGRvYy4NCiAgICAgKi8NCiAg
ICBwdWJsaWMgdm9pZCBzZXRNaW5UZXJtRnJlcShpbnQgbWluVGVybUZyZXEpIHsNCiAgICAg
ICAgdGhpcy5taW5UZXJtRnJlcSA9IG1pblRlcm1GcmVxOw0KICAgIH0NCg0KICAgIC8qKg0K
ICAgICAqIFJldHVybnMgdGhlIGZyZXF1ZW5jeSBhdCB3aGljaCB3b3JkcyB3aWxsIGJlIGln
bm9yZWQgd2hpY2ggZG8gbm90IG9jY3VyIGluIGF0IGxlYXN0IHRoaXMNCiAgICAgKiBtYW55
IGRvY3MuIFRoZSBkZWZhdWx0IGZyZXF1ZW5jeSBpcyB7QGxpbmsgI0RFRkFMVF9NSU5fRE9D
X0ZSRVF9Lg0KICAgICAqDQogICAgICogQHJldHVybiB0aGUgZnJlcXVlbmN5IGF0IHdoaWNo
IHdvcmRzIHdpbGwgYmUgaWdub3JlZCB3aGljaCBkbyBub3Qgb2NjdXIgaW4gYXQgbGVhc3Qg
dGhpcw0KICAgICAqIG1hbnkgZG9jcy4NCiAgICAgKi8NCiAgICBwdWJsaWMgaW50IGdldE1p
bkRvY0ZyZXEoKSB7DQogICAgICAgIHJldHVybiBtaW5Eb2NGcmVxOw0KICAgIH0NCg0KICAg
IC8qKg0KICAgICAqIFNldHMgdGhlIGZyZXF1ZW5jeSBhdCB3aGljaCB3b3JkcyB3aWxsIGJl
IGlnbm9yZWQgd2hpY2ggZG8gbm90IG9jY3VyIGluIGF0IGxlYXN0IHRoaXMNCiAgICAgKiBt
YW55IGRvY3MuDQogICAgICoNCiAgICAgKiBAcGFyYW0gbWluRG9jRnJlcSB0aGUgZnJlcXVl
bmN5IGF0IHdoaWNoIHdvcmRzIHdpbGwgYmUgaWdub3JlZCB3aGljaCBkbyBub3Qgb2NjdXIg
aW4gYXQNCiAgICAgKiBsZWFzdCB0aGlzIG1hbnkgZG9jcy4NCiAgICAgKi8NCiAgICBwdWJs
aWMgdm9pZCBzZXRNaW5Eb2NGcmVxKGludCBtaW5Eb2NGcmVxKSB7DQogICAgICAgIHRoaXMu
bWluRG9jRnJlcSA9IG1pbkRvY0ZyZXE7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUmV0
dXJucyB3aGV0aGVyIHRvIGJvb3N0IHRlcm1zIGluIHF1ZXJ5IGJhc2VkIG9uICJzY29yZSIg
b3Igbm90LiBUaGUgZGVmYXVsdCBpcw0KICAgICAqIHtAbGluayAjREVGQVVMVF9CT09TVH0u
DQogICAgICoNCiAgICAgKiBAcmV0dXJuIHdoZXRoZXIgdG8gYm9vc3QgdGVybXMgaW4gcXVl
cnkgYmFzZWQgb24gInNjb3JlIiBvciBub3QuDQogICAgICovDQogICAgcHVibGljIGJvb2xl
YW4gaXNCb29zdCgpIHsNCiAgICAgICAgcmV0dXJuIGJvb3N0Ow0KICAgIH0NCg0KICAgIC8q
Kg0KICAgICAqIFNldHMgd2hldGhlciB0byBib29zdCB0ZXJtcyBpbiBxdWVyeSBiYXNlZCBv
biAic2NvcmUiIG9yIG5vdC4NCiAgICAgKg0KICAgICAqIEBwYXJhbSBib29zdCB0cnVlIHRv
IGJvb3N0IHRlcm1zIGluIHF1ZXJ5IGJhc2VkIG9uICJzY29yZSIsIGZhbHNlIG90aGVyd2lz
ZS4NCiAgICAgKi8NCiAgICBwdWJsaWMgdm9pZCBzZXRCb29zdChib29sZWFuIGJvb3N0KSB7
DQogICAgICAgIHRoaXMuYm9vc3QgPSBib29zdDsNCiAgICB9DQoNCiAgICAvKioNCiAgICAg
KiBSZXR1cm5zIHRoZSBmaWVsZCBuYW1lcyB0aGF0IHdpbGwgYmUgdXNlZCB3aGVuIGdlbmVy
YXRpbmcgdGhlICdNb3JlIExpa2UgVGhpcycgcXVlcnkuDQogICAgICogVGhlIGRlZmF1bHQg
ZmllbGQgbmFtZXMgdGhhdCB3aWxsIGJlIHVzZWQgaXMge0BsaW5rICNERUZBVUxUX0ZJRUxE
X05BTUVTfS4NCiAgICAgKg0KICAgICAqIEByZXR1cm4gdGhlIGZpZWxkIG5hbWVzIHRoYXQg
d2lsbCBiZSB1c2VkIHdoZW4gZ2VuZXJhdGluZyB0aGUgJ01vcmUgTGlrZSBUaGlzJyBxdWVy
eS4NCiAgICAgKi8NCiAgICBwdWJsaWMgU3RyaW5nW10gZ2V0RmllbGROYW1lcygpIHsNCiAg
ICAgICAgcmV0dXJuIGZpZWxkTmFtZXM7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogU2V0
cyB0aGUgZmllbGQgbmFtZXMgdGhhdCB3aWxsIGJlIHVzZWQgd2hlbiBnZW5lcmF0aW5nIHRo
ZSAnTW9yZSBMaWtlIFRoaXMnIHF1ZXJ5Lg0KICAgICAqIFNldCB0aGlzIHRvIG51bGwgZm9y
IHRoZSBmaWVsZCBuYW1lcyB0byBiZSBkZXRlcm1pbmVkIGF0IHJ1bnRpbWUgZnJvbSB0aGUg
SW5kZXhSZWFkZXINCiAgICAgKiBwcm92aWRlZCBpbiB0aGUgY29uc3RydWN0b3IuDQogICAg
ICoNCiAgICAgKiBAcGFyYW0gZmllbGROYW1lcyB0aGUgZmllbGQgbmFtZXMgdGhhdCB3aWxs
IGJlIHVzZWQgd2hlbiBnZW5lcmF0aW5nIHRoZSAnTW9yZSBMaWtlIFRoaXMnDQogICAgICog
cXVlcnkuDQogICAgICovDQogICAgcHVibGljIHZvaWQgc2V0RmllbGROYW1lcyhTdHJpbmdb
XSBmaWVsZE5hbWVzKSB7DQogICAgICAgIHRoaXMuZmllbGROYW1lcyA9IGZpZWxkTmFtZXM7
DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUmV0dXJucyB0aGUgbWluaW11bSB3b3JkIGxl
bmd0aCBiZWxvdyB3aGljaCB3b3JkcyB3aWxsIGJlIGlnbm9yZWQuIFNldCB0aGlzIHRvIDAg
Zm9yIG5vDQogICAgICogbWluaW11bSB3b3JkIGxlbmd0aC4gVGhlIGRlZmF1bHQgaXMge0Bs
aW5rICNERUZBVUxUX01JTl9XT1JEX0xFTkdUSH0uDQogICAgICoNCiAgICAgKiBAcmV0dXJu
IHRoZSBtaW5pbXVtIHdvcmQgbGVuZ3RoIGJlbG93IHdoaWNoIHdvcmRzIHdpbGwgYmUgaWdu
b3JlZC4NCiAgICAgKi8NCiAgICBwdWJsaWMgaW50IGdldE1pbldvcmRMZW4oKSB7DQogICAg
ICAgIHJldHVybiBtaW5Xb3JkTGVuOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFNldHMg
dGhlIG1pbmltdW0gd29yZCBsZW5ndGggYmVsb3cgd2hpY2ggd29yZHMgd2lsbCBiZSBpZ25v
cmVkLg0KICAgICAqDQogICAgICogQHBhcmFtIG1pbldvcmRMZW4gdGhlIG1pbmltdW0gd29y
ZCBsZW5ndGggYmVsb3cgd2hpY2ggd29yZHMgd2lsbCBiZSBpZ25vcmVkLg0KICAgICAqLw0K
ICAgIHB1YmxpYyB2b2lkIHNldE1pbldvcmRMZW4oaW50IG1pbldvcmRMZW4pIHsNCiAgICAg
ICAgdGhpcy5taW5Xb3JkTGVuID0gbWluV29yZExlbjsNCiAgICB9DQoNCiAgICAvKioNCiAg
ICAgKiBSZXR1cm5zIHRoZSBtYXhpbXVtIHdvcmQgbGVuZ3RoIGFib3ZlIHdoaWNoIHdvcmRz
IHdpbGwgYmUgaWdub3JlZC4gU2V0IHRoaXMgdG8gMCBmb3Igbm8NCiAgICAgKiBtYXhpbXVt
IHdvcmQgbGVuZ3RoLiBUaGUgZGVmYXVsdCBpcyB7QGxpbmsgI0RFRkFVTFRfTUFYX1dPUkRf
TEVOR1RIfS4NCiAgICAgKg0KICAgICAqIEByZXR1cm4gdGhlIG1heGltdW0gd29yZCBsZW5n
dGggYWJvdmUgd2hpY2ggd29yZHMgd2lsbCBiZSBpZ25vcmVkLg0KICAgICAqLw0KICAgIHB1
YmxpYyBpbnQgZ2V0TWF4V29yZExlbigpIHsNCiAgICAgICAgcmV0dXJuIG1heFdvcmRMZW47
DQogICAgfQ0KDQogICAgLyoqDQogICAgICogU2V0cyB0aGUgbWF4aW11bSB3b3JkIGxlbmd0
aCBhYm92ZSB3aGljaCB3b3JkcyB3aWxsIGJlIGlnbm9yZWQuDQogICAgICoNCiAgICAgKiBA
cGFyYW0gbWF4V29yZExlbiB0aGUgbWF4aW11bSB3b3JkIGxlbmd0aCBhYm92ZSB3aGljaCB3
b3JkcyB3aWxsIGJlIGlnbm9yZWQuDQogICAgICovDQogICAgcHVibGljIHZvaWQgc2V0TWF4
V29yZExlbihpbnQgbWF4V29yZExlbikgew0KICAgICAgICB0aGlzLm1heFdvcmRMZW4gPSBt
YXhXb3JkTGVuOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFJldHVybnMgdGhlIG1heGlt
dW0gbnVtYmVyIG9mIHF1ZXJ5IHRlcm1zIHRoYXQgd2lsbCBiZSBpbmNsdWRlZCBpbiBhbnkg
Z2VuZXJhdGVkIHF1ZXJ5Lg0KICAgICAqIFRoZSBkZWZhdWx0IGlzIHtAbGluayAjREVGQVVM
VF9NQVhfUVVFUllfVEVSTVN9Lg0KICAgICAqDQogICAgICogQHJldHVybiB0aGUgbWF4aW11
bSBudW1iZXIgb2YgcXVlcnkgdGVybXMgdGhhdCB3aWxsIGJlIGluY2x1ZGVkIGluIGFueSBn
ZW5lcmF0ZWQgcXVlcnkuDQogICAgICovDQogICAgcHVibGljIGludCBnZXRNYXhRdWVyeVRl
cm1zKCkgew0KICAgICAgICByZXR1cm4gbWF4UXVlcnlUZXJtczsNCiAgICB9DQoNCiAgICAv
KioNCiAgICAgKiBTZXRzIHRoZSBtYXhpbXVtIG51bWJlciBvZiBxdWVyeSB0ZXJtcyB0aGF0
IHdpbGwgYmUgaW5jbHVkZWQgaW4gYW55IGdlbmVyYXRlZCBxdWVyeS4NCiAgICAgKg0KICAg
ICAqIEBwYXJhbSBtYXhRdWVyeVRlcm1zIHRoZSBtYXhpbXVtIG51bWJlciBvZiBxdWVyeSB0
ZXJtcyB0aGF0IHdpbGwgYmUgaW5jbHVkZWQgaW4gYW55DQogICAgICogZ2VuZXJhdGVkIHF1
ZXJ5Lg0KICAgICAqLw0KICAgIHB1YmxpYyB2b2lkIHNldE1heFF1ZXJ5VGVybXMoaW50IG1h
eFF1ZXJ5VGVybXMpIHsNCiAgICAgICAgdGhpcy5tYXhRdWVyeVRlcm1zID0gbWF4UXVlcnlU
ZXJtczsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBSZXR1cm4gYSBxdWVyeSB0aGF0IHdp
bGwgcmV0dXJuIGRvY3MgbGlrZSB0aGUgcGFzc2VkIGx1Y2VuZSBkb2N1bWVudCBJRC4NCiAg
ICAgKg0KICAgICAqIEBwYXJhbSBkb2NOdW0gdGhlIGRvY3VtZW50SUQgb2YgdGhlIGx1Y2Vu
ZSBkb2MgdG8gZ2VuZXJhdGUgdGhlICdNb3JlIExpa2UgVGhpcyIgcXVlcnkgZm9yLg0KICAg
ICAqIEByZXR1cm4gYSBxdWVyeSB0aGF0IHdpbGwgcmV0dXJuIGRvY3MgbGlrZSB0aGUgcGFz
c2VkIGx1Y2VuZSBkb2N1bWVudCBJRC4NCiAgICAgKi8NCiAgICBwdWJsaWMgUXVlcnkgbGlr
ZShpbnQgZG9jTnVtKSB0aHJvd3MgSU9FeGNlcHRpb24gew0KICAgICAgICBpZiAoZmllbGRO
YW1lcyA9PSBudWxsKSB7DQogICAgICAgICAgICAvLyBnYXRoZXIgbGlzdCBvZiB2YWxpZCBm
aWVsZHMgZnJvbSBsdWNlbmUNCiAgICAgICAgICAgIENvbGxlY3Rpb24gZmllbGRzID0gaXIu
Z2V0RmllbGROYW1lcyh0cnVlKTsNCiAgICAgICAgICAgIGZpZWxkTmFtZXMgPSAoU3RyaW5n
W10pIGZpZWxkcy50b0FycmF5KG5ldyBTdHJpbmdbZmllbGRzLnNpemUoKV0pOw0KICAgICAg
ICB9DQoNCiAgICAgICAgcmV0dXJuIGNyZWF0ZVF1ZXJ5KHJldHJpZXZlVGVybXMoZG9jTnVt
KSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUmV0dXJuIGEgcXVlcnkgdGhhdCB3aWxs
IHJldHVybiBkb2NzIGxpa2UgdGhlIHBhc3NlZCBmaWxlLg0KICAgICAqDQogICAgICogQHJl
dHVybiBhIHF1ZXJ5IHRoYXQgd2lsbCByZXR1cm4gZG9jcyBsaWtlIHRoZSBwYXNzZWQgZmls
ZS4NCiAgICAgKi8NCiAgICBwdWJsaWMgUXVlcnkgbGlrZShGaWxlIGYpIHRocm93cyBJT0V4
Y2VwdGlvbiB7DQogICAgICAgIGlmIChmaWVsZE5hbWVzID09IG51bGwpIHsNCiAgICAgICAg
ICAgIC8vIGdhdGhlciBsaXN0IG9mIHZhbGlkIGZpZWxkcyBmcm9tIGx1Y2VuZQ0KICAgICAg
ICAgICAgQ29sbGVjdGlvbiBmaWVsZHMgPSBpci5nZXRGaWVsZE5hbWVzKHRydWUpOw0KICAg
ICAgICAgICAgZmllbGROYW1lcyA9IChTdHJpbmdbXSkgZmllbGRzLnRvQXJyYXkobmV3IFN0
cmluZ1tmaWVsZHMuc2l6ZSgpXSk7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gbGlr
ZShuZXcgRmlsZVJlYWRlcihmKSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUmV0dXJu
IGEgcXVlcnkgdGhhdCB3aWxsIHJldHVybiBkb2NzIGxpa2UgdGhlIHBhc3NlZCBVUkwuDQog
ICAgICoNCiAgICAgKiBAcmV0dXJuIGEgcXVlcnkgdGhhdCB3aWxsIHJldHVybiBkb2NzIGxp
a2UgdGhlIHBhc3NlZCBVUkwuDQogICAgICovDQogICAgcHVibGljIFF1ZXJ5IGxpa2UoVVJM
IHUpIHRocm93cyBJT0V4Y2VwdGlvbiB7DQogICAgICAgIHJldHVybiBsaWtlKG5ldyBJbnB1
dFN0cmVhbVJlYWRlcih1Lm9wZW5Db25uZWN0aW9uKCkuZ2V0SW5wdXRTdHJlYW0oKSkpOw0K
ICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFJldHVybiBhIHF1ZXJ5IHRoYXQgd2lsbCByZXR1
cm4gZG9jcyBsaWtlIHRoZSBwYXNzZWQgc3RyZWFtLg0KICAgICAqDQogICAgICogQHJldHVy
biBhIHF1ZXJ5IHRoYXQgd2lsbCByZXR1cm4gZG9jcyBsaWtlIHRoZSBwYXNzZWQgc3RyZWFt
Lg0KICAgICAqLw0KICAgIHB1YmxpYyBRdWVyeSBsaWtlKGphdmEuaW8uSW5wdXRTdHJlYW0g
aXMpIHRocm93cyBJT0V4Y2VwdGlvbiB7DQogICAgICAgIHJldHVybiBsaWtlKG5ldyBJbnB1
dFN0cmVhbVJlYWRlcihpcykpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFJldHVybiBh
IHF1ZXJ5IHRoYXQgd2lsbCByZXR1cm4gZG9jcyBsaWtlIHRoZSBwYXNzZWQgUmVhZGVyLg0K
ICAgICAqDQogICAgICogQHJldHVybiBhIHF1ZXJ5IHRoYXQgd2lsbCByZXR1cm4gZG9jcyBs
aWtlIHRoZSBwYXNzZWQgUmVhZGVyLg0KICAgICAqLw0KICAgIHB1YmxpYyBRdWVyeSBsaWtl
KFJlYWRlciByKSB0aHJvd3MgSU9FeGNlcHRpb24gew0KICAgICAgICByZXR1cm4gY3JlYXRl
UXVlcnkocmV0cmlldmVUZXJtcyhyKSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogQ3Jl
YXRlIHRoZSBNb3JlIGxpa2UgcXVlcnkgZnJvbSBhIFByaW9yaXR5UXVldWUNCiAgICAgKi8N
CiAgICBwcml2YXRlIFF1ZXJ5IGNyZWF0ZVF1ZXJ5KFByaW9yaXR5UXVldWUgcSkgew0KICAg
ICAgICBCb29sZWFuUXVlcnkgcXVlcnkgPSBuZXcgQm9vbGVhblF1ZXJ5KCk7DQogICAgICAg
IE9iamVjdCBjdXI7DQogICAgICAgIGludCBxdGVybXMgPSAwOw0KICAgICAgICBmbG9hdCBi
ZXN0U2NvcmUgPSAwOw0KDQogICAgICAgIHdoaWxlICgoKGN1ciA9IHEucG9wKCkpICE9IG51
bGwpKSB7DQogICAgICAgICAgICBPYmplY3RbXSBhciA9IChPYmplY3RbXSkgY3VyOw0KICAg
ICAgICAgICAgVGVybVF1ZXJ5IHRxID0gbmV3IFRlcm1RdWVyeShuZXcgVGVybSgoU3RyaW5n
KSBhclsxXSwgKFN0cmluZykgYXJbMF0pKTsNCg0KICAgICAgICAgICAgaWYgKGJvb3N0KSB7
DQogICAgICAgICAgICAgICAgaWYgKHF0ZXJtcyA9PSAwKSB7DQogICAgICAgICAgICAgICAg
ICAgIGJlc3RTY29yZSA9ICgoRmxvYXQpIGFyWzJdKS5mbG9hdFZhbHVlKCk7DQogICAgICAg
ICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGZsb2F0IG15U2NvcmUgPSAoKEZsb2F0KSBh
clsyXSkuZmxvYXRWYWx1ZSgpOw0KDQogICAgICAgICAgICAgICAgdHEuc2V0Qm9vc3QobXlT
Y29yZSAvIGJlc3RTY29yZSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHRyeSB7
DQogICAgICAgICAgICAgICAgcXVlcnkuYWRkKHRxLCBmYWxzZSwgZmFsc2UpOw0KICAgICAg
ICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2ggKEJvb2xlYW5RdWVyeS5Ub29NYW55Q2xhdXNl
cyBpZ25vcmUpIHsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCg0K
ICAgICAgICAgICAgcXRlcm1zKys7DQogICAgICAgICAgICBpZiAobWF4UXVlcnlUZXJtcyA+
IDAgJiYgcXRlcm1zID49IG1heFF1ZXJ5VGVybXMpIHsNCiAgICAgICAgICAgICAgICBicmVh
azsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBxdWVyeTsN
CiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBDcmVhdGUgYSBQcmlvcml0eVF1ZXVlIGZyb20g
YSB3b3JkLT50ZiBtYXAuDQogICAgICoNCiAgICAgKiBAcGFyYW0gd29yZHMgYSBtYXAgb2Yg
d29yZHMga2V5ZWQgb24gdGhlIHdvcmQoU3RyaW5nKSB3aXRoIEludCBvYmplY3RzIGFzIHRo
ZSB2YWx1ZXMuDQogICAgICovDQogICAgcHJpdmF0ZSBQcmlvcml0eVF1ZXVlIGNyZWF0ZVF1
ZXVlKE1hcCB3b3JkcykgdGhyb3dzIElPRXhjZXB0aW9uIHsNCiAgICAgICAgLy8gaGF2ZSBj
b2xsZWN0ZWQgYWxsIHdvcmRzIGluIGRvYyBhbmQgdGhlaXIgZnJlcXMNCiAgICAgICAgaW50
IG51bURvY3MgPSBpci5udW1Eb2NzKCk7DQogICAgICAgIEZyZXFRIHJlcyA9IG5ldyBGcmVx
USh3b3Jkcy5zaXplKCkpOyAvLyB3aWxsIG9yZGVyIHdvcmRzIGJ5IHNjb3JlDQoNCiAgICAg
ICAgSXRlcmF0b3IgaXQgPSB3b3Jkcy5rZXlTZXQoKS5pdGVyYXRvcigpOw0KICAgICAgICB3
aGlsZSAoaXQuaGFzTmV4dCgpKSB7IC8vIGZvciBldmVyeSB3b3JkDQogICAgICAgICAgICBT
dHJpbmcgd29yZCA9IChTdHJpbmcpIGl0Lm5leHQoKTsNCg0KICAgICAgICAgICAgaW50IHRm
ID0gKChJbnQpIHdvcmRzLmdldCh3b3JkKSkueDsgLy8gdGVybSBmcmVxIGluIHRoZSBzb3Vy
Y2UgZG9jDQogICAgICAgICAgICBpZiAobWluVGVybUZyZXEgPiAwICYmIHRmIDwgbWluVGVy
bUZyZXEpIHsNCiAgICAgICAgICAgICAgICBjb250aW51ZTsgLy8gZmlsdGVyIG91dCB3b3Jk
cyB0aGF0IGRvbid0IG9jY3VyIGVub3VnaCB0aW1lcyBpbiB0aGUgc291cmNlDQogICAgICAg
ICAgICB9DQoNCiAgICAgICAgICAgIC8vIGdvIHRocm91Z2ggYWxsIHRoZSBmaWVsZHMgYW5k
IGZpbmQgdGhlIGxhcmdlc3QgZG9jdW1lbnQgZnJlcXVlbmN5DQogICAgICAgICAgICBTdHJp
bmcgdG9wRmllbGQgPSBmaWVsZE5hbWVzWzBdOw0KICAgICAgICAgICAgaW50IGRvY0ZyZXEg
PSAwOw0KICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBmaWVsZE5hbWVzLmxlbmd0
aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgaW50IGZyZXEgPSBpci5kb2NGcmVxKG5ldyBU
ZXJtKGZpZWxkTmFtZXNbaV0sIHdvcmQpKTsNCiAgICAgICAgICAgICAgICB0b3BGaWVsZCA9
IChmcmVxID4gZG9jRnJlcSkgPyBmaWVsZE5hbWVzW2ldIDogdG9wRmllbGQ7DQogICAgICAg
ICAgICAgICAgZG9jRnJlcSA9IChmcmVxID4gZG9jRnJlcSkgPyBmcmVxIDogZG9jRnJlcTsN
CiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKG1pbkRvY0ZyZXEgPiAwICYmIGRv
Y0ZyZXEgPCBtaW5Eb2NGcmVxKSB7DQogICAgICAgICAgICAgICAgY29udGludWU7IC8vIGZp
bHRlciBvdXQgd29yZHMgdGhhdCBkb24ndCBvY2N1ciBpbiBlbm91Z2ggZG9jcw0KICAgICAg
ICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoZG9jRnJlcSA9PSAwKSB7DQogICAgICAgICAg
ICAgICAgY29udGludWU7IC8vIGluZGV4IHVwZGF0ZSBwcm9ibGVtPw0KICAgICAgICAgICAg
fQ0KDQogICAgICAgICAgICBmbG9hdCBpZGYgPSBzaW1pbGFyaXR5LmlkZihkb2NGcmVxLCBu
dW1Eb2NzKTsNCiAgICAgICAgICAgIGZsb2F0IHNjb3JlID0gdGYgKiBpZGY7DQoNCiAgICAg
ICAgICAgIC8vIG9ubHkgcmVhbGx5IG5lZWQgMXN0IDMgZW50cmllcywgb3RoZXIgb25lcyBh
cmUgZm9yIHRyb3VibGVzaG9vdGluZw0KICAgICAgICAgICAgcmVzLmluc2VydChuZXcgT2Jq
ZWN0W117d29yZCwgICAgICAgICAgICAgICAgICAgLy8gdGhlIHdvcmQNCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHRvcEZpZWxkLCAgICAgICAgICAgICAgIC8vIHRo
ZSB0b3AgZmllbGQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBG
bG9hdChzY29yZSksICAgICAgIC8vIG92ZXJhbGwgc2NvcmUNCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIG5ldyBGbG9hdChpZGYpLCAgICAgICAgIC8vIGlkZg0KICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEludGVnZXIoZG9jRnJlcSks
ICAgLy8gZnJlcSBpbiBhbGwgZG9jcw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgbmV3IEludGVnZXIodGYpDQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAg
ICAgICByZXR1cm4gcmVzOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIERlc2NyaWJlIHRo
ZSBwYXJhbWV0ZXJzIHRoYXQgY29udHJvbCBob3cgdGhlICJtb3JlIGxpa2UgdGhpcyIgcXVl
cnkgaXMgZm9ybWVkLg0KICAgICAqLw0KICAgIHB1YmxpYyBTdHJpbmcgZGVzY3JpYmVQYXJh
bXMoKSB7DQogICAgICAgIFN0cmluZ0J1ZmZlciBzYiA9IG5ldyBTdHJpbmdCdWZmZXIoKTsN
CiAgICAgICAgc2IuYXBwZW5kKCJcdCIgKyAibWF4UXVlcnlUZXJtcyAgOiAiICsgbWF4UXVl
cnlUZXJtcyArICJcbiIpOw0KICAgICAgICBzYi5hcHBlbmQoIlx0IiArICJtaW5Xb3JkTGVu
ICAgICA6ICIgKyBtaW5Xb3JkTGVuICsgIlxuIik7DQogICAgICAgIHNiLmFwcGVuZCgiXHQi
ICsgIm1heFdvcmRMZW4gICAgIDogIiArIG1heFdvcmRMZW4gKyAiXG4iKTsNCiAgICAgICAg
c2IuYXBwZW5kKCJcdCIgKyAiZmllbGROYW1lcyAgICAgOiBcIiIpOw0KICAgICAgICBTdHJp
bmcgZGVsaW0gPSAiIjsNCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBmaWVsZE5hbWVz
Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBTdHJpbmcgZmllbGROYW1lID0gZmllbGRO
YW1lc1tpXTsNCiAgICAgICAgICAgIHNiLmFwcGVuZChkZWxpbSkuYXBwZW5kKGZpZWxkTmFt
ZSk7DQogICAgICAgICAgICBkZWxpbSA9ICIsICI7DQogICAgICAgIH0NCiAgICAgICAgc2Iu
YXBwZW5kKCJcbiIpOw0KICAgICAgICBzYi5hcHBlbmQoIlx0IiArICJib29zdCAgICAgICAg
ICA6ICIgKyBib29zdCArICJcbiIpOw0KICAgICAgICBzYi5hcHBlbmQoIlx0IiArICJtaW5U
ZXJtRnJlcSAgICA6ICIgKyBtaW5UZXJtRnJlcSArICJcbiIpOw0KICAgICAgICBzYi5hcHBl
bmQoIlx0IiArICJtaW5Eb2NGcmVxICAgICA6ICIgKyBtaW5Eb2NGcmVxICsgIlxuIik7DQog
ICAgICAgIHJldHVybiBzYi50b1N0cmluZygpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAq
IFRlc3QgZHJpdmVyLg0KICAgICAqIFBhc3MgaW4gIi1pIElOREVYIiBhbmQgdGhlbiBlaXRo
ZXIgIi1mbiBGSUxFIiBvciAiLXVybCBVUkwiLg0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0
aWMgdm9pZCBtYWluKFN0cmluZ1tdIGEpIHRocm93cyBUaHJvd2FibGUgew0KICAgICAgICBT
dHJpbmcgaW5kZXhOYW1lID0gImxvY2FsaG9zdF9pbmRleCI7DQogICAgICAgIFN0cmluZyBm
biA9ICJjOi9Qcm9ncmFtIEZpbGVzL0FwYWNoZSBHcm91cC9BcGFjaGUvaHRkb2NzL21hbnVh
bC92aG9zdHMvaW5kZXguaHRtbC5lbiI7DQogICAgICAgIFVSTCB1cmwgPSBudWxsOw0KICAg
ICAgICBmb3IgKGludCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAg
IGlmIChhW2ldLmVxdWFscygiLWkiKSkgew0KICAgICAgICAgICAgICAgIGluZGV4TmFtZSA9
IGFbKytpXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKGFbaV0uZXF1
YWxzKCItZiIpKSB7DQogICAgICAgICAgICAgICAgZm4gPSBhWysraV07DQogICAgICAgICAg
ICB9DQogICAgICAgICAgICBlbHNlIGlmIChhW2ldLmVxdWFscygiLXVybCIpKSB7DQogICAg
ICAgICAgICAgICAgdXJsID0gbmV3IFVSTChhWysraV0pOw0KICAgICAgICAgICAgfQ0KICAg
ICAgICB9DQoNCiAgICAgICAgUHJpbnRTdHJlYW0gbyA9IFN5c3RlbS5vdXQ7DQogICAgICAg
IEluZGV4UmVhZGVyIHIgPSBJbmRleFJlYWRlci5vcGVuKGluZGV4TmFtZSk7DQogICAgICAg
IG8ucHJpbnRsbigiT3BlbiBpbmRleCAiICsgaW5kZXhOYW1lICsgIiB3aGljaCBoYXMgIiAr
IHIubnVtRG9jcygpICsgIiBkb2NzIik7DQoNCiAgICAgICAgTW9yZUxpa2VUaGlzIG1sdCA9
IG5ldyBNb3JlTGlrZVRoaXMocik7DQoNCiAgICAgICAgby5wcmludGxuKCJRdWVyeSBnZW5l
cmF0aW9uIHBhcmFtZXRlcnM6Iik7DQogICAgICAgIG8ucHJpbnRsbihtbHQuZGVzY3JpYmVQ
YXJhbXMoKSk7DQogICAgICAgIG8ucHJpbnRsbigpOw0KDQogICAgICAgIFF1ZXJ5IHF1ZXJ5
ID0gbnVsbDsNCiAgICAgICAgaWYgKHVybCAhPSBudWxsKSB7DQogICAgICAgICAgICBvLnBy
aW50bG4oIlBhcnNpbmcgVVJMOiAiICsgdXJsKTsNCiAgICAgICAgICAgIHF1ZXJ5ID0gbWx0
Lmxpa2UodXJsKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmIChmbiAhPSBudWxsKSB7
DQogICAgICAgICAgICBvLnByaW50bG4oIlBhcnNpbmcgZmlsZTogIiArIGZuKTsNCiAgICAg
ICAgICAgIHF1ZXJ5ID0gbWx0Lmxpa2UobmV3IEZpbGUoZm4pKTsNCiAgICAgICAgfQ0KDQog
ICAgICAgIG8ucHJpbnRsbigicTogIiArIHF1ZXJ5KTsNCiAgICAgICAgby5wcmludGxuKCk7
DQogICAgICAgIEluZGV4U2VhcmNoZXIgc2VhcmNoZXIgPSBuZXcgSW5kZXhTZWFyY2hlcihp
bmRleE5hbWUpOw0KDQogICAgICAgIEhpdHMgaGl0cyA9IHNlYXJjaGVyLnNlYXJjaChxdWVy
eSk7DQogICAgICAgIGludCBsZW4gPSBoaXRzLmxlbmd0aCgpOw0KICAgICAgICBvLnByaW50
bG4oImZvdW5kOiAiICsgbGVuICsgIiBkb2N1bWVudHMgbWF0Y2hpbmciKTsNCiAgICAgICAg
by5wcmludGxuKCk7DQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTWF0aC5taW4oMjUs
IGxlbik7IGkrKykgew0KICAgICAgICAgICAgRG9jdW1lbnQgZCA9IGhpdHMuZG9jKGkpOw0K
ICAgICAgICAgICAgby5wcmludGxuKCJzY29yZSAgOiAiICsgaGl0cy5zY29yZShpKSk7DQog
ICAgICAgICAgICBvLnByaW50bG4oInVybCAgICA6ICIgKyBkLmdldCgidXJsIikpOw0KICAg
ICAgICAgICAgby5wcmludGxuKCJcdHRpdGxlICA6ICIgKyBkLmdldCgidGl0bGUiKSk7DQog
ICAgICAgICAgICBvLnByaW50bG4oIlx0c3VtbWFyeTogIiArIGQuZ2V0KCJzdW1tYXJ5Iikp
Ow0KICAgICAgICAgICAgby5wcmludGxuKCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAv
KioNCiAgICAgKiBGaW5kIHdvcmRzIGZvciBhIG1vcmUtbGlrZS10aGlzIHF1ZXJ5IGZvcm1l
ci4NCiAgICAgKg0KICAgICAqIEBwYXJhbSBkb2NOdW0gdGhlIGlkIG9mIHRoZSBsdWNlbmUg
ZG9jdW1lbnQgZnJvbSB3aGljaCB0byBmaW5kIHRlcm1zDQogICAgICovDQogICAgcHJpdmF0
ZSBQcmlvcml0eVF1ZXVlIHJldHJpZXZlVGVybXMoaW50IGRvY051bSkgdGhyb3dzIElPRXhj
ZXB0aW9uIHsNCiAgICAgICAgTWFwIHdvcmRzID0gbmV3IEhhc2hNYXAoKTsNCiAgICAgICAg
Zm9yIChpbnQgaSA9IDA7IGkgPCBmaWVsZE5hbWVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAg
ICAgICBTdHJpbmcgZmllbGROYW1lID0gZmllbGROYW1lc1tpXTsNCiAgICAgICAgICAgIFRl
cm1GcmVxVmVjdG9yIHZlY3RvciA9IGlyLmdldFRlcm1GcmVxVmVjdG9yKGRvY051bSwgZmll
bGROYW1lKTsNCg0KICAgICAgICAgICAgLy8gZmllbGQgZG9lcyBub3Qgc3RvcmUgdGVybSB2
ZWN0b3IgaW5mbw0KICAgICAgICAgICAgaWYgKHZlY3RvciA9PSBudWxsKSB7DQogICAgICAg
ICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIFN0cmlu
Z1tdIHRlcm1zID0gdmVjdG9yLmdldFRlcm1zKCk7DQogICAgICAgICAgICBmb3IgKGludCBq
ID0gMDsgaiA8IHRlcm1zLmxlbmd0aDsgaisrKSB7DQogICAgICAgICAgICAgICAgU3RyaW5n
IHRlcm0gPSB0ZXJtc1tqXTsNCg0KICAgICAgICAgICAgICAgIC8vIGZpbHRlciBvdXQgd29y
a3MgdG9vIHNtYWxsIG9yIGxhcmdlDQogICAgICAgICAgICAgICAgaWYgKG1pbldvcmRMZW4g
PiAwICYmIHRlcm0ubGVuZ3RoKCkgPCBtaW5Xb3JkTGVuKSB7DQogICAgICAgICAgICAgICAg
ICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAo
bWF4V29yZExlbiA+IDAgJiYgdGVybS5sZW5ndGgoKSA8IG1heFdvcmRMZW4pIHsNCiAgICAg
ICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAg
ICAgICAgIC8vIGluY3JlbWVudCBmcmVxdWVuY3kNCiAgICAgICAgICAgICAgICBJbnQgY250
ID0gKEludCkgd29yZHMuZ2V0KHRlcm0pOw0KICAgICAgICAgICAgICAgIGlmIChjbnQgPT0g
bnVsbCkgew0KICAgICAgICAgICAgICAgICAgICB3b3Jkcy5wdXQodGVybSwgbmV3IEludCgp
KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAg
ICAgICAgICAgICAgIGNudC54Kys7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAg
fQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIGNyZWF0ZVF1ZXVlKHdvcmRzKTsNCiAg
ICB9DQoNCiAgICAvKioNCiAgICAgKiBGaW5kIHdvcmRzIGZvciBhIG1vcmUtbGlrZS10aGlz
IHF1ZXJ5IGZvcm1lci4NCiAgICAgKg0KICAgICAqIEBwYXJhbSByIHRoZSByZWFkZXIgdGhh
dCBoYXMgdGhlIGNvbnRlbnQgb2YgdGhlIGRvY3VtZW50DQogICAgICovDQogICAgcHJpdmF0
ZSBQcmlvcml0eVF1ZXVlIHJldHJpZXZlVGVybXMoUmVhZGVyIHIpIHRocm93cyBJT0V4Y2Vw
dGlvbiB7DQogICAgICAgIE1hcCB3b3JkcyA9IG5ldyBIYXNoTWFwKCk7DQogICAgICAgIGZv
ciAoaW50IGkgPSAwOyBpIDwgZmllbGROYW1lcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAg
ICAgU3RyaW5nIGZpZWxkTmFtZSA9IGZpZWxkTmFtZXNbaV07DQoNCiAgICAgICAgICAgIFRv
a2VuU3RyZWFtIHRzID0gYW5hbHl6ZXIudG9rZW5TdHJlYW0oZmllbGROYW1lLCByKTsNCiAg
ICAgICAgICAgIG9yZy5hcGFjaGUubHVjZW5lLmFuYWx5c2lzLlRva2VuIHRva2VuOw0KDQog
ICAgICAgICAgICB3aGlsZSAoKHRva2VuID0gdHMubmV4dCgpKSAhPSBudWxsKSB7IC8vIGZv
ciBldmVyeSB0b2tlbg0KICAgICAgICAgICAgICAgIFN0cmluZyB3b3JkID0gdG9rZW4udGVy
bVRleHQoKTsNCiAgICAgICAgICAgICAgICBpbnQgbGVuID0gd29yZC5sZW5ndGgoKTsNCg0K
ICAgICAgICAgICAgICAgIC8vIGZpbHRlciBvdXQgd29ya3MgdG9vIHNtYWxsIG9yIGxhcmdl
DQogICAgICAgICAgICAgICAgaWYgKG1pbldvcmRMZW4gPiAwICYmIGxlbiA8IG1pbldvcmRM
ZW4pIHsNCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAg
fQ0KICAgICAgICAgICAgICAgIGlmIChtYXhXb3JkTGVuID4gMCAmJiBsZW4gPCBtYXhXb3Jk
TGVuKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAg
IH0NCg0KICAgICAgICAgICAgICAgIC8vIGluY3JlbWVudCBmcmVxdWVuY3kNCiAgICAgICAg
ICAgICAgICBJbnQgY250ID0gKEludCkgd29yZHMuZ2V0KHdvcmQpOw0KICAgICAgICAgICAg
ICAgIGlmIChjbnQgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICB3b3Jkcy5wdXQo
d29yZCwgbmV3IEludCgpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAg
ZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGNudC54Kys7DQogICAgICAgICAgICAgICAg
fQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIGNyZWF0ZVF1
ZXVlKHdvcmRzKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBQcmlvcml0eVF1ZXVlIHRo
YXQgb3JkZXJzIHdvcmRzIGJ5IHNjb3JlLg0KICAgICAqLw0KICAgIHByaXZhdGUgc3RhdGlj
IGNsYXNzIEZyZXFRIGV4dGVuZHMgUHJpb3JpdHlRdWV1ZSB7DQogICAgICAgIEZyZXFRIChp
bnQgcykgew0KICAgICAgICAgICAgaW5pdGlhbGl6ZShzKTsNCiAgICAgICAgfQ0KDQogICAg
ICAgIHByb3RlY3RlZCBib29sZWFuIGxlc3NUaGFuKE9iamVjdCBhLCBPYmplY3QgYikgew0K
ICAgICAgICAgICAgT2JqZWN0W10gYWEgPSAoT2JqZWN0W10pIGE7DQogICAgICAgICAgICBP
YmplY3RbXSBiYiA9IChPYmplY3RbXSkgYjsNCiAgICAgICAgICAgIEZsb2F0IGZhID0gKEZs
b2F0KSBhYVsyXTsNCiAgICAgICAgICAgIEZsb2F0IGZiID0gKEZsb2F0KSBiYlsyXTsNCiAg
ICAgICAgICAgIHJldHVybiBmYS5mbG9hdFZhbHVlKCkgPiBmYi5mbG9hdFZhbHVlKCk7DQog
ICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBVc2UgZm9yIGZyZXF1ZW5jaWVz
IGFuZCB0byBhdm9pZCByZW5ld2luZyBJbnRlZ2Vycy4NCiAgICAgKi8NCiAgICBwcml2YXRl
IHN0YXRpYyBjbGFzcyBJbnQgew0KICAgICAgICBpbnQgeDsNCg0KICAgICAgICBJbnQoKSB7
DQogICAgICAgICAgICB4ID0gMTsNCiAgICAgICAgfQ0KICAgIH0NCn0=
--------------050907020703000703000807--

--------------ms050309020005080600070109
Content-Type: application/x-pkcs7-signature; name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="smime.p7s"
Content-Description: S/MIME Cryptographic Signature

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIII/TCC
AtkwggJCoAMCAQICAwrLgDANBgkqhkiG9w0BAQQFADBiMQswCQYDVQQGEwJaQTElMCMGA1UE
ChMcVGhhd3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNv
bmFsIEZyZWVtYWlsIElzc3VpbmcgQ0EwHhcNMDMwOTIzMTkzNjM3WhcNMDQwOTIyMTkzNjM3
WjBIMR8wHQYDVQQDExZUaGF3dGUgRnJlZW1haWwgTWVtYmVyMSUwIwYJKoZIhvcNAQkBFhZi
cnVjZUBqaXZlc29mdHdhcmUuY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA
ozJPHo8aUH2MrrLnFrmybY38uC8nlm26vBAPgGhSMthJlA0ShY9zAs4qGPyX1fIcANCKw0yP
QDESRRySYPcRYMBnwaeqtIwldTb1GTA6DAvZ/jpkM16DbAId17O86+4NeV7WoR+IguiyEUJq
IqecxdGiJsLi8xNM0rPan91sWTA+30kPvW12IU6MIa4XInPUazLqzZmA3CHoQJ2qorYCUx1c
P3VW2fbWMjpfis67MalWcFuBtThFuq5qsZMBEkFekoKPu2cpmjlKddrGj9+54U1CWBVQMl+9
HSB1/qhl1La8BYRhaZ5UG3c0za9yultXL9k1GxfZYVqDy2iMI5+ejQIDAQABozMwMTAhBgNV
HREEGjAYgRZicnVjZUBqaXZlc29mdHdhcmUuY29tMAwGA1UdEwEB/wQCMAAwDQYJKoZIhvcN
AQEEBQADgYEAEwi3SlYetSCzK5DLkClPMgTOM+P0qrIAFt+ar8uMZwr3xqFOxZlt6/qMHoXA
aOEWhZkHJ2dq8ebxjSdGXQF6/jKB42CEmYXmP6umb/2DBE6bVTy9aksnMnKeSyuqP1HWwlCf
5+Vk811biLueAupunISEh7P0bQXUgVtVVbOtAfIwggLZMIICQqADAgECAgMKy4AwDQYJKoZI
hvcNAQEEBQAwYjELMAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQ
dHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENB
MB4XDTAzMDkyMzE5MzYzN1oXDTA0MDkyMjE5MzYzN1owSDEfMB0GA1UEAxMWVGhhd3RlIEZy
ZWVtYWlsIE1lbWJlcjElMCMGCSqGSIb3DQEJARYWYnJ1Y2VAaml2ZXNvZnR3YXJlLmNvbTCC
ASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKMyTx6PGlB9jK6y5xa5sm2N/LgvJ5Zt
urwQD4BoUjLYSZQNEoWPcwLOKhj8l9XyHADQisNMj0AxEkUckmD3EWDAZ8GnqrSMJXU29Rkw
OgwL2f46ZDNeg2wCHdezvOvuDXle1qEfiILoshFCaiKnnMXRoibC4vMTTNKz2p/dbFkwPt9J
D71tdiFOjCGuFyJz1Gsy6s2ZgNwh6ECdqqK2AlMdXD91Vtn21jI6X4rOuzGpVnBbgbU4Rbqu
arGTARJBXpKCj7tnKZo5SnXaxo/fueFNQlgVUDJfvR0gdf6oZdS2vAWEYWmeVBt3NM2vcrpb
Vy/ZNRsX2WFag8tojCOfno0CAwEAAaMzMDEwIQYDVR0RBBowGIEWYnJ1Y2VAaml2ZXNvZnR3
YXJlLmNvbTAMBgNVHRMBAf8EAjAAMA0GCSqGSIb3DQEBBAUAA4GBABMIt0pWHrUgsyuQy5Ap
TzIEzjPj9KqyABbfmq/LjGcK98ahTsWZbev6jB6FwGjhFoWZBydnavHm8Y0nRl0Bev4ygeNg
hJmF5j+rpm/9gwROm1U8vWpLJzJynksrqj9R1sJQn+flZPNdW4i7ngLqbpyEhIez9G0F1IFb
VVWzrQHyMIIDPzCCAqigAwIBAgIBDTANBgkqhkiG9w0BAQUFADCB0TELMAkGA1UEBhMCWkEx
FTATBgNVBAgTDFdlc3Rlcm4gQ2FwZTESMBAGA1UEBxMJQ2FwZSBUb3duMRowGAYDVQQKExFU
aGF3dGUgQ29uc3VsdGluZzEoMCYGA1UECxMfQ2VydGlmaWNhdGlvbiBTZXJ2aWNlcyBEaXZp
c2lvbjEkMCIGA1UEAxMbVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWlsIENBMSswKQYJKoZIhvcN
AQkBFhxwZXJzb25hbC1mcmVlbWFpbEB0aGF3dGUuY29tMB4XDTAzMDcxNzAwMDAwMFoXDTEz
MDcxNjIzNTk1OVowYjELMAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5n
IChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5n
IENBMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDEpjxVc1X7TrnKmVoeaMB1BHCd3+n/
ox7svc31W/Iadr1/DDph8r9RzgHU5VAKMNcCY1osiRVwjt3J8CuFWqo/cVbLrzwLB+fxH5E2
JCoTzyvV84J3PQO+K/67GD4Hv0CAAmTXp6a7n2XRxSpUhQ9IBH+nttE8YQRAHmQZcmC3+wID
AQABo4GUMIGRMBIGA1UdEwEB/wQIMAYBAf8CAQAwQwYDVR0fBDwwOjA4oDagNIYyaHR0cDov
L2NybC50aGF3dGUuY29tL1RoYXd0ZVBlcnNvbmFsRnJlZW1haWxDQS5jcmwwCwYDVR0PBAQD
AgEGMCkGA1UdEQQiMCCkHjAcMRowGAYDVQQDExFQcml2YXRlTGFiZWwyLTEzODANBgkqhkiG
9w0BAQUFAAOBgQBIjNFQg+oLLswNo2asZw9/r6y+whehQ5aUnX9MIbj4Nh+qLZ82L8D0HFAg
k3A8/a3hYWLD2ToZfoSxmRsAxRoLgnSeJVCUYsfbJ3FXJY3dqZw5jowgT2Vfldr394fWxghO
rvbqNOUQGls1TXfjViF4gtwhGTXeJLHTHUb/XV9lTzGCAzswggM3AgEBMGkwYjELMAkGA1UE
BhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMT
I1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBAgMKy4AwCQYFKw4DAhoFAKCC
AacwGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAcBgkqhkiG9w0BCQUxDxcNMDQwMjI1MjA0
NzQwWjAjBgkqhkiG9w0BCQQxFgQUHl2vqSH/mu6a3F/sQHEfkM0N9jcwUgYJKoZIhvcNAQkP
MUUwQzAKBggqhkiG9w0DBzAOBggqhkiG9w0DAgICAIAwDQYIKoZIhvcNAwICAUAwBwYFKw4D
AgcwDQYIKoZIhvcNAwICASgweAYJKwYBBAGCNxAEMWswaTBiMQswCQYDVQQGEwJaQTElMCMG
A1UEChMcVGhhd3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBl
cnNvbmFsIEZyZWVtYWlsIElzc3VpbmcgQ0ECAwrLgDB6BgsqhkiG9w0BCRACCzFroGkwYjEL
MAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAq
BgNVBAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBAgMKy4AwDQYJKoZI
hvcNAQEBBQAEggEAHfo7r4dtIeGN2rGfnC/QLrmthViLf7aAk0wpIjXHJ5etJL62yOR3QwpR
XZHQfy7wviY9A+H6PA2J8WUaI6RzD6QXQeN14fQSAqcV7Hkuq3BVHva4QEhVai5JDp0zVTBS
Sxd9R1VDqkeU+1z8V4UOs961FMIek60Emwk0nRMuf64hhtFTwR4/rQGPZ0PLcPeBrOr3ip/G
OFiDlhq376KgUEZepMzR8Sip3T0CmTg/GsrEJXDShcj/32nnEkzsmpymbhaC9LxPdOlzL9cI
crkiThTeQVaYND7wmkTvfbSp1AuQ3AG7FXGTdZIQg0KfMLhTZAQ7FimJtWlJ8fClmhGU3AAA
AAAAAA==
--------------ms050309020005080600070109--

From MAILER-DAEMON Wed Feb 25 21:02:14 2004
Return-Path: 
 <lucene-user-return-7255-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 41118 invoked from network); 25 Feb 2004 21:02:14 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 25 Feb 2004 21:02:14 -0000
Received: (qmail 82899 invoked by uid 500); 25 Feb 2004 21:01:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 82875 invoked by uid 500); 25 Feb 2004 21:01:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 82862 invoked from network); 25 Feb 2004 21:01:57 -0000
Received: from unknown (HELO web9903.mail.yahoo.com) (216.136.129.246)
  by daedalus.apache.org with SMTP; 25 Feb 2004 21:01:57 -0000
Message-ID: <20040225210149.71093.qmail@web9903.mail.yahoo.com>
Received: from [12.161.223.174] by web9903.mail.yahoo.com via HTTP;
 Wed, 25 Feb 2004 13:01:49 PST
Date: Wed, 25 Feb 2004 13:01:49 -0800 (PST)
From: sam xia <hopexia@yahoo.com>
Subject: segments question
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

My pages can be sorted to about 10000 sub categories. 
Each category could have up to 1 million html pages.
(of course, right now I do not have this yet. I am on
the early staging of thinking...) The index will be
stored in hard disk.

A user may be interested in 10 out of the 10000 sub
categories depending on the query string. I would like
to have the search within the 10 sub categories. I do
not want to waste time searching on 9990 categories.

One approach is to build each category into a segment.
Then there will be 10000 segments. So the query will
be run within the 10 segments. But putting 10000 sub
folders to a hard drive could slow things down, since
hard disk seek is slow.

Or should I build the whole thing into one big segment
and use the filter to do this. There is a DateFilter.
Is there a way to implement a category filter?

What is the best way to accomplish this?


Thanks very much



__________________________________
Do you Yahoo!?
Yahoo! Mail SpamGuard - Read only the mail you want.
http://antispam.yahoo.com/tools

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 25 23:10:28 2004
Return-Path: 
 <lucene-user-return-7256-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 11543 invoked from network); 25 Feb 2004 23:10:28 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 25 Feb 2004 23:10:28 -0000
Received: (qmail 26173 invoked by uid 500); 25 Feb 2004 23:10:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26149 invoked by uid 500); 25 Feb 2004 23:10:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26135 invoked from network); 25 Feb 2004 23:10:09 -0000
Received: from unknown (HELO mta.micromuse.com) (194.131.185.92)
  by daedalus.apache.org with SMTP; 25 Feb 2004 23:10:09 -0000
Received: from tropo.com ([10.0.0.157])
	(authenticated (0 bits))
	by mta.micromuse.com (Switch-2.2.8/Switch-2.2.8) with ESMTP id i1PNAAH31760
	(using TLSv1/SSLv3 with cipher RC4-MD5 (128 bits) verified NO)
	for <lucene-user@jakarta.apache.org>; Wed, 25 Feb 2004 23:10:14 GMT
Message-ID: <403D2B52.30306@tropo.com>
Date: Wed, 25 Feb 2004 15:10:10 -0800
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;
 rv:1.6a) Gecko/20031030
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: MoreLikeThis Query generator - Re: code for "more like this"
 query "expansion" - was - Re: setMaxClauseCount ??
References: <20040212104313.51470.qmail@web12707.mail.yahoo.com>
 <402BDC58.2010502@tropo.com> <403D09EC.3040606@jivesoftware.com>
In-Reply-To: <403D09EC.3040606@jivesoftware.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Bruce Ritchie wrote:

> David Spencer wrote:
>
>> Code rewritten, automagically chooses lots of defaults, lets you 
>> override
>> the defs thru the static vars at the bottom or the non-static vars 
>> also at the bottom.
>
>
> I've taken the liberty to update this code to handle multiple fields 
> and use the new term vector support in CVS so that retokenizing a 
> document's text isn't necessary if you have a document ID that has 
> indexed and term vector supported fields. I've added the apache 2.0 
> license to the top however if that isn't the licence you want this code to

Thank you for doing this - I'm sure the license is fine. I have not 
tested your changes but will try to do so soonish.

 - Dave

> be released under let me know and I'll change it immediately.
>
>
> Regards,
>
> Bruce Ritchie
> http://www.jivesoftware.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Wed Feb 25 23:27:18 2004
Return-Path: 
 <lucene-user-return-7257-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 18394 invoked from network); 25 Feb 2004 23:27:18 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 25 Feb 2004 23:27:18 -0000
Received: (qmail 52740 invoked by uid 500); 25 Feb 2004 23:26:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52705 invoked by uid 500); 25 Feb 2004 23:26:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 52366 invoked from network); 25 Feb 2004 23:26:50 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.34.190)
  by daedalus.apache.org with SMTP; 25 Feb 2004 23:26:50 -0000
Received: (cpmta 18923 invoked from network); 25 Feb 2004 15:26:36 -0800
Received: from 24.51.109.181 (HELO ?192.168.1.102?)
  by smtp.hatcher.net (209.228.34.190) with SMTP; 25 Feb 2004 15:26:36 -0800
X-Sent: 25 Feb 2004 23:26:36 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <20040225210149.71093.qmail@web9903.mail.yahoo.com>
References: <20040225210149.71093.qmail@web9903.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <0ADCEECE-67EA-11D8-BAD1-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: segments question
Date: Wed, 25 Feb 2004 18:26:30 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 25, 2004, at 4:01 PM, sam xia wrote:
> Or should I build the whole thing into one big segment
> and use the filter to do this. There is a DateFilter.
> Is there a way to implement a category filter?
>
> What is the best way to accomplish this?

I'd recommend a pool of filters for each category.  Regenerate them 
when the index changes, otherwise leave the instances alive and reuse 
them for queries - this will speed things up pretty dramatically I'd 
guess.  There is a QueryFilter you could use, or write a custom one 
that could be faster.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 26 00:59:17 2004
Return-Path: 
 <lucene-user-return-7258-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 55817 invoked from network); 26 Feb 2004 00:59:17 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 26 Feb 2004 00:59:17 -0000
Received: (qmail 66591 invoked by uid 500); 26 Feb 2004 00:58:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 66563 invoked by uid 500); 26 Feb 2004 00:58:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 66549 invoked from network); 26 Feb 2004 00:58:56 -0000
Received: from unknown (HELO web9905.mail.yahoo.com) (216.136.129.248)
  by daedalus.apache.org with SMTP; 26 Feb 2004 00:58:56 -0000
Message-ID: <20040226005859.18050.qmail@web9905.mail.yahoo.com>
Received: from [68.38.107.32] by web9905.mail.yahoo.com via HTTP;
 Wed, 25 Feb 2004 16:58:59 PST
Date: Wed, 25 Feb 2004 16:58:59 -0800 (PST)
From: sam xia <hopexia@yahoo.com>
Subject: Re: segments question
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <0ADCEECE-67EA-11D8-BAD1-000393A564E6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


> I'd recommend a pool of filters for each category. 
> Regenerate them 
> when the index changes, otherwise leave the
> instances alive and reuse 
> them for queries - this will speed things up pretty
> dramatically I'd 
> guess.  There is a QueryFilter you could use, or
> write a custom one 
> that could be faster.
> 
> 	Erik
> 
thanks for your quick response, Erik. BTW, I checked
your web site, the logo is cool. 

Is there a way to store the filter cache to hard
drive? Then I can just read it from hard drive. Since
I have lots of categories, it might be impossible to
cashe every query filter bitsets in memory.

How about I keep every category to one segment? Then I
have 10000 segements to work with. Is it going to be
faster than the filter solution?

------
Plus:
I am looking forward to your lucene book. I found one
in Amazon.com. Not sure if any good.

Professional Portal Development with Apache Tools :
Jetspeed, Lucene, James, Slide (Wrox Press)
by W. Clay Richardson (Author), Donald Avondolio
(Author), Joe Vitale (Author), Peter Len (Author),
Kevin T. Smith (Author) 

-- thank you 


__________________________________
Do you Yahoo!?
Yahoo! Mail SpamGuard - Read only the mail you want.
http://antispam.yahoo.com/tools

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 26 01:31:45 2004
Return-Path: 
 <lucene-user-return-7259-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 66955 invoked from network); 26 Feb 2004 01:31:45 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 26 Feb 2004 01:31:45 -0000
Received: (qmail 1239 invoked by uid 500); 26 Feb 2004 01:31:23 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 1202 invoked by uid 500); 26 Feb 2004 01:31:23 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 1187 invoked from network); 26 Feb 2004 01:31:23 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.66)
  by daedalus.apache.org with SMTP; 26 Feb 2004 01:31:23 -0000
Received: (cpmta 11491 invoked from network); 25 Feb 2004 17:31:30 -0800
Received: from 24.51.109.181 (HELO ?192.168.1.102?)
  by smtp.hatcher.net (209.228.32.66) with SMTP; 25 Feb 2004 17:31:30 -0800
X-Sent: 26 Feb 2004 01:31:30 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <20040226005859.18050.qmail@web9905.mail.yahoo.com>
References: <20040226005859.18050.qmail@web9905.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <7CA3D14B-67FB-11D8-A426-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: segments question
Date: Wed, 25 Feb 2004 20:31:23 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 25, 2004, at 7:58 PM, sam xia wrote:
>
>> I'd recommend a pool of filters for each category.
>> Regenerate them
>> when the index changes, otherwise leave the
>> instances alive and reuse
>> them for queries - this will speed things up pretty
>> dramatically I'd
>> guess.  There is a QueryFilter you could use, or
>> write a custom one
>> that could be faster.
>>
>> 	Erik
>>
> thanks for your quick response, Erik. BTW, I checked
> your web site, the logo is cool.

haha.... I'll take that a hint that I should put more there than a 
"splash" page :)

> Is there a way to store the filter cache to hard
> drive? Then I can just read it from hard drive. Since
> I have lots of categories, it might be impossible to
> cashe every query filter bitsets in memory.

BitSet's are tiny - so you'd have to have a *lot* of categories to fill 
up a decent sized RAM.

But Filter is Serializable, so you could (in theory) persist them 
somewhere.

> How about I keep every category to one segment?

I'm not sure how you'd ensure that.  Never optimize?

You could have a separate index per category, but you already mentioned 
that I think and it would take up file handles.

>  Then I
> have 10000 segements to work with. Is it going to be
> faster than the filter solution?

Filters are fast.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 26 04:49:36 2004
Return-Path: 
 <lucene-user-return-7260-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 40321 invoked from network); 26 Feb 2004 04:49:36 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 26 Feb 2004 04:49:36 -0000
Received: (qmail 99449 invoked by uid 500); 26 Feb 2004 04:49:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 99426 invoked by uid 500); 26 Feb 2004 04:49:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 99412 invoked from network); 26 Feb 2004 04:49:10 -0000
Received: from unknown (HELO shardagate.mahindrabt.com) (210.18.48.2)
  by daedalus.apache.org with SMTP; 26 Feb 2004 04:49:10 -0000
Received: from mahindrabt.com (mailscan.sharda.mahindrabt.com [10.5.0.5])
	by shardagate.mahindrabt.com (8.12.10/8.12.10) with ESMTP id i1Q4nAj3012496
	for <lucene-user@jakarta.apache.org>; Thu, 26 Feb 2004 10:19:16 +0530
Resent-Message-Id: <200402260449.i1Q4nAj3012496@shardagate.mahindrabt.com>
Received: from intranet.sharda.mahindrabt.com [10.5.0.15] by mahindrabt.com ;
 Thu, 26 Feb 2004 10:28:29 +0530
Resent-Date: Thu, 26 Feb 2004 10:28:29 +0530
Resent-From: <psingh@mahindrabt.com>
X-Originating-IP: 10.5.0.15
X-Auth-User: psingh@mahindrabt.com
Received: from dscp02272 ([10.5.9.255])
	by intranet.sharda.mahindrabt.com  with SMTP id i1Q4vluR031738
	for <lucene-user@jakarta.apache.org>; Thu, 26 Feb 2004 10:27:47 +0530
Message-ID: <00fd01c3fc24$d194adb0$ff09050a@dscp02272>
From: "Parminder Singh" <psingh@mahindrabt.com>
To: <lucene-user@jakarta.apache.org>
Subject: Database
Date: Thu, 26 Feb 2004 10:25:56 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00FA_01C3FC52.EB45E4D0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.50.4927.1200
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4927.1200
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_00FA_01C3FC52.EB45E4D0
Content-Type: text/plain;
	charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable

I've a CMS application that deploys metadata to a database. Is it =
possible to use lucene to search this database instead of it's =
(lucene's) index. If you could tell me the steps that would be involved =
in doing this, it'd be great help. I'm new to Lucene.=20

Thank You.

Parminder Singh

-------------------------------------------------------------------------=
-------

In war: resolution. In defeat: defiance. In victory: magnanimity. In =
peace: goodwill. - Sir Winston Leonard Spencer Churchill

*********************************************************
Disclaimer

This message (including any attachments) contains=20
confidential information intended for a specific=20
individual and purpose, and is protected by law.=20
If you are not the intended recipient, you should=20
delete this message and are hereby notified that=20
any disclosure, copying, or distribution of this
message, or the taking of any action based on it,=20
is strictly prohibited.

*********************************************************
Visit us at http://www.mahindrabt.com


------=_NextPart_000_00FA_01C3FC52.EB45E4D0--



From MAILER-DAEMON Thu Feb 26 06:42:07 2004
Return-Path: 
 <lucene-user-return-7261-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 82812 invoked from network); 26 Feb 2004 06:42:07 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 26 Feb 2004 06:42:07 -0000
Received: (qmail 3699 invoked by uid 500); 26 Feb 2004 06:41:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 3665 invoked by uid 500); 26 Feb 2004 06:41:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 3640 invoked from network); 26 Feb 2004 06:41:39 -0000
Received: from unknown (HELO rs9.luxsci.com) (66.216.98.59)
  by daedalus.apache.org with SMTP; 26 Feb 2004 06:41:39 -0000
Received: from ctx.com.au (ppp152-63.lns1.cbr1.internode.on.net
 [150.101.152.63])
	(authenticated bits=0)
	by rs9.luxsci.com (8.12.10/8.12.10) with ESMTP id i1Q6fn0s013977
	for <lucene-user@jakarta.apache.org>; Thu, 26 Feb 2004 00:41:51 -0600
Message-ID: <403D9567.5010705@ctx.com.au>
Date: Thu, 26 Feb 2004 17:42:47 +1100
From: Matt Quail <matt@ctx.com.au>
User-Agent: Mozilla Thunderbird 0.5 (Windows/20040207)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Iterating TermEnum backwards
References: <00fd01c3fc24$d194adb0$ff09050a@dscp02272>
In-Reply-To: <00fd01c3fc24$d194adb0$ff09050a@dscp02272>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi all,

Is there any way to iterate through a TermEnum backwards? Okay, I know
that there isn't a way to do this via the TermEnum class, but is it
"implementable" on top of the underlying Lucene datastore?

My particular problem is this:

I have an index of documents, each document has a "date" field (I'm
using DateField). Most documents have a different date, so the number of
unique dates is close to the number of documents.

I want to find the top N most recent dates, but I don't want to have to
iterate through ALL of them first. NB: With DateField, the earlier dates
are lexocographically smaller. (I also want to find the most recent N
less than some date D).

I know I could "invert" my dates (something like MAX_LONG - date) to get
the REVERSE order, but I want to be able to do "least recent" and "most
recent".

Is iterating over a TermEnum "impossible", or should I dig further, and
possibly submit a patch?


=Matt

PS: my current solution is to do a binary search between MIN and MAX,
halving my search space until I find close to N matching documents.



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 26 15:39:04 2004
Return-Path: 
 <lucene-user-return-7262-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 83451 invoked from network); 26 Feb 2004 15:39:04 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 26 Feb 2004 15:39:04 -0000
Received: (qmail 98516 invoked by uid 500); 26 Feb 2004 15:38:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 98476 invoked by uid 500); 26 Feb 2004 15:38:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 98463 invoked from network); 26 Feb 2004 15:38:53 -0000
Received: from unknown (HELO smtpgw2.turner.com) (64.236.240.147)
  by daedalus.apache.org with SMTP; 26 Feb 2004 15:38:53 -0000
Received: from cnncimss01.turner.com (CNNCIMSS01.turner.com [10.188.144.157])
	by smtpgw2.turner.com (8.12.10/8.12.10) with ESMTP id i1QFcs3S020194
	for <lucene-user@jakarta.apache.org>; Thu, 26 Feb 2004 10:38:54 -0500 (EST)
Received: from cnncmx10.turner.com ([157.166.99.185]) by cnncimss01.turner.com
 with InterScan Messaging Security Suite; Thu, 26 Feb 2004 10:38:54 -0500
Received: by cnncmx10.turner.com with Internet Mail Service (5.5.2657.72)
	id <FWQX2KCL>; Thu, 26 Feb 2004 10:39:39 -0500
Message-ID: <E9F4363712218647B3899436327F88EE0B427D4C@cnncex03.turner.com>
From: "Saltysiak, Byron" <Byron.Saltysiak@turner.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Database
Date: Thu, 26 Feb 2004 10:38:54 -0500
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C3FC7E.5FB8BBBA"
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C3FC7E.5FB8BBBA
Content-Type: text/plain;
	charset="iso-8859-1"

I have integrated with a database by creating Document objects based on rows from the database and then creating indexes as normal. That was rather easy to implement.

Let me know if there is an easier or more direct way to use Lucene with the database.


- Byron Saltysiak

-----Original Message-----
From: Parminder Singh [mailto:psingh@mahindrabt.com]
Sent: Wednesday, February 25, 2004 11:56 PM
To: lucene-user@jakarta.apache.org
Subject: Database


I've a CMS application that deploys metadata to a database. Is it possible to use lucene to search this database instead of it's (lucene's) index. If you could tell me the steps that would be involved in doing this, it'd be great help. I'm new to Lucene. 

Thank You.

Parminder Singh

--------------------------------------------------------------------------------

In war: resolution. In defeat: defiance. In victory: magnanimity. In peace: goodwill. - Sir Winston Leonard Spencer Churchill

*********************************************************
Disclaimer

This message (including any attachments) contains 
confidential information intended for a specific 
individual and purpose, and is protected by law. 
If you are not the intended recipient, you should 
delete this message and are hereby notified that 
any disclosure, copying, or distribution of this
message, or the taking of any action based on it, 
is strictly prohibited.

*********************************************************
Visit us at http://www.mahindrabt.com


------_=_NextPart_001_01C3FC7E.5FB8BBBA--

From MAILER-DAEMON Thu Feb 26 16:45:13 2004
Return-Path: 
 <lucene-user-return-7263-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 28263 invoked from network); 26 Feb 2004 16:45:13 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 26 Feb 2004 16:45:13 -0000
Received: (qmail 58683 invoked by uid 500); 26 Feb 2004 16:45:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58656 invoked by uid 500); 26 Feb 2004 16:45:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58639 invoked from network); 26 Feb 2004 16:44:59 -0000
Received: from unknown (HELO server1.hostmon.com) (66.139.76.19)
  by daedalus.apache.org with SMTP; 26 Feb 2004 16:44:59 -0000
Received: (qmail 4738 invoked by uid 532); 26 Feb 2004 16:42:05 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with
 qmail-scanner-1.16
 (spamassassin: 2.61.  Clear:.
 Processed in 0.180804 secs); 26 Feb 2004 16:42:05 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 26 Feb 2004 16:42:05 -0000
Message-ID: <403E228D.6020900@tropo.com>
Date: Thu, 26 Feb 2004 08:45:01 -0800
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;
 rv:1.5) Gecko/20031007
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Iterating TermEnum backwards
References: <00fd01c3fc24$d194adb0$ff09050a@dscp02272>
 <403D9567.5010705@ctx.com.au>
In-Reply-To: <403D9567.5010705@ctx.com.au>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Matt Quail wrote:

> Hi all,
>
> Is there any way to iterate through a TermEnum backwards? Okay, I know
> that there isn't a way to do this via the TermEnum class, but is it
> "implementable" on top of the underlying Lucene datastore?
>
> My particular problem is this:
>
> I have an index of documents, each document has a "date" field (I'm
> using DateField). Most documents have a different date, so the number of
> unique dates is close to the number of documents.
>
> I want to find the top N most recent dates, but I don't want to have to
> iterate through ALL of them first. NB: With DateField, the earlier dates
> are lexocographically smaller. (I also want to find the most recent N
> less than some date D).
>
> I know I could "invert" my dates (something like MAX_LONG - date) to get
> the REVERSE order, but I want to be able to do "least recent" and "most
> recent".

Maybe add another field, a "backwards" date, such that existing api will 
return more recent ones first?!

>
> Is iterating over a TermEnum "impossible", or should I dig further, and
> possibly submit a patch?
>
>
> =Matt
>
> PS: my current solution is to do a binary search between MIN and MAX,
> halving my search space until I find close to N matching documents.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 26 16:47:58 2004
Return-Path: 
 <lucene-user-return-7264-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 30203 invoked from network); 26 Feb 2004 16:47:58 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 26 Feb 2004 16:47:58 -0000
Received: (qmail 64325 invoked by uid 500); 26 Feb 2004 16:47:47 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 64101 invoked by uid 500); 26 Feb 2004 16:47:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 64087 invoked from network); 26 Feb 2004 16:47:46 -0000
Received: from unknown (HELO server1.hostmon.com) (66.139.76.19)
  by daedalus.apache.org with SMTP; 26 Feb 2004 16:47:46 -0000
Received: (qmail 4791 invoked by uid 532); 26 Feb 2004 16:44:51 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with
 qmail-scanner-1.16
 (spamassassin: 2.61.  Clear:.
 Processed in 0.189023 secs); 26 Feb 2004 16:44:51 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 26 Feb 2004 16:44:51 -0000
Message-ID: <403E2334.9000600@tropo.com>
Date: Thu, 26 Feb 2004 08:47:48 -0800
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;
 rv:1.5) Gecko/20031007
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Database
References: <00fd01c3fc24$d194adb0$ff09050a@dscp02272>
In-Reply-To: <00fd01c3fc24$d194adb0$ff09050a@dscp02272>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Parminder Singh wrote:

>I've a CMS application that deploys metadata to a database. Is it possible to use lucene to search this database instead of it's (lucene's) index. If you could tell me the steps that would be involved in doing this, it'd be great help. I'm new to Lucene. 
>  
>
I've done this extensively. Basically you create documents out of the 
database and in my case I generated a URL for each doc which would be 
fed to users after a query.  This is one of those things where Lucene 
stands apart from what seemed to be the alternatives a few years ago 
(htdig was one thing I used) -- it doesn't have to spider a web site, 
and if you have a dynamic web site (pages generated from db queries) 
then the indexing is in a way more efficient as you don't have to parse 
html to extract what may or may not be the actual text - the db will 
have your exact content so you index off the db, not from web pages..

>Thank You.
>
>Parminder Singh
>
>--------------------------------------------------------------------------------
>
>In war: resolution. In defeat: defiance. In victory: magnanimity. In peace: goodwill. - Sir Winston Leonard Spencer Churchill
>
>*********************************************************
>Disclaimer
>
>This message (including any attachments) contains 
>confidential information intended for a specific 
>individual and purpose, and is protected by law. 
>If you are not the intended recipient, you should 
>delete this message and are hereby notified that 
>any disclosure, copying, or distribution of this
>message, or the taking of any action based on it, 
>is strictly prohibited.
>
>*********************************************************
>Visit us at http://www.mahindrabt.com
>
>
>  
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 26 18:25:05 2004
Return-Path: 
 <lucene-user-return-7265-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 85876 invoked from network); 26 Feb 2004 18:25:05 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 26 Feb 2004 18:25:05 -0000
Received: (qmail 12528 invoked by uid 500); 26 Feb 2004 18:24:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12506 invoked by uid 500); 26 Feb 2004 18:24:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 12486 invoked from network); 26 Feb 2004 18:24:51 -0000
Received: from unknown (HELO rwcrmhc11.comcast.net) (204.127.198.35)
  by daedalus.apache.org with SMTP; 26 Feb 2004 18:24:51 -0000
Received: from apache.org (c-24-5-145-151.client.comcast.net[24.5.145.151])
          by comcast.net (rwcrmhc11) with ESMTP
          id <2004022618245501300ogkhke>; Thu, 26 Feb 2004 18:24:55 +0000
Message-ID: <403E39F4.20403@apache.org>
Date: Thu, 26 Feb 2004 10:24:52 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040116
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Iterating TermEnum backwards
References: <00fd01c3fc24$d194adb0$ff09050a@dscp02272>
 <403D9567.5010705@ctx.com.au>
In-Reply-To: <403D9567.5010705@ctx.com.au>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Matt Quail wrote:
> Is there any way to iterate through a TermEnum backwards? Okay, I know
> that there isn't a way to do this via the TermEnum class, but is it
> "implementable" on top of the underlying Lucene datastore?

Not really.  The best you can do is skip back to the previous "indexed" 
term in TermInfosReader.indexTerms, and scan forward from there.  You 
could try adding a method to that class like:

   final synchronized void seekBefore(Term term) throws IOException {
     int offset = getIndexOffset(term);
     seekEnum(offset > 0 ? offset - 1 : offset);
   }

Then you'd need to add stuff to MultiReader, SegmentReader and 
IndexReader, to take advantage of this.  It could get a little tricky, 
but it is possible.  I'm not convinced this is your best route.

> My particular problem is this:
> 
> I have an index of documents, each document has a "date" field (I'm
> using DateField). Most documents have a different date, so the number of
> unique dates is close to the number of documents.

Are you adding documents in date order?  If so, then you could look at 
the date of the document numbered maxDoc() - N and scan forward from 
there.  To be safe, you could start at maxDoc() - N*2 or something.

> I want to find the top N most recent dates, but I don't want to have to
> iterate through ALL of them first. NB: With DateField, the earlier dates
> are lexocographically smaller. (I also want to find the most recent N
> less than some date D).
> 
> I know I could "invert" my dates (something like MAX_LONG - date) to get
> the REVERSE order, but I want to be able to do "least recent" and "most
> recent".

Why not have two date fields, one inverted and one not?

> PS: my current solution is to do a binary search between MIN and MAX,
> halving my search space until I find close to N matching documents.

That doesn't sound like a bad solution.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 26 19:52:30 2004
Return-Path: 
 <lucene-user-return-7266-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 29268 invoked from network); 26 Feb 2004 19:52:30 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 26 Feb 2004 19:52:30 -0000
Received: (qmail 91744 invoked by uid 500); 26 Feb 2004 19:52:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 91718 invoked by uid 500); 26 Feb 2004 19:52:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 91704 invoked from network); 26 Feb 2004 19:52:14 -0000
Received: from unknown (HELO wall.quontis.com) (66.120.216.177)
  by daedalus.apache.org with SMTP; 26 Feb 2004 19:52:14 -0000
Received: from bigone (unknown [10.6.18.112])
	by wall.quontis.com (Postfix) with ESMTP id 11DFF9EB25
	for <lucene-user@jakarta.apache.org>; Thu, 26 Feb 2004 11:12:43 -0800 (PST)
From: "Jochen Frey" <lucenelist@quontis.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Lucene scalability/clustering
Date: Thu, 26 Feb 2004 11:52:16 -0800
Message-ID: <00af01c3fca2$092ea820$7012060a@bigone>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.4510
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
In-Reply-To: <002e01c3f991$9884f3d0$86d4a8c0@fulfilnet.com.au>
Importance: Normal
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Anson,

	One way of doing it is having subsets of your indexes / data on
different machines. Each machine indexes its own data. You implement a
system that distributes queries to the various machines and merges the
results back.

	The working well completely depends on your implementation of the
distributed search.

	I believe there was a discussion about implementing this using a
MultiSearcher somewhere as well.

	Cheers!
		Jochen


-----Original Message-----
From: Anson Lau [mailto:alau@fulfil-net.com] 
Sent: Sunday, February 22, 2004 2:17 PM
To: 'Lucene Users List'
Subject: RE: Lucene scalability/clustering


Further on this topic - has anyone tried implementing a distributed
search with Lucene?  How does it work and does it work well?


Anson


-----Original Message-----
From: Hamish Carpenter [mailto:hamish@catalyst.net.nz]
Sent: Monday, February 23, 2004 5:24 AM
To: Lucene Users List
Subject: Re: Lucene scalability/clustering

Hi All,

I'm Hamish Carpenter who contributed the benchmarks with the comment
about the IndexSearcherCache.  Using this solved our issues with too
many files open under linux.

The original IndexSearcherCache email is here:
http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg01967.html

See here for a copy of the above message and a download link:
http://www.geocities.com/haytona/lucene/
The mailing list doesn't like attachments.  The source is 10K in size.

HTH

Hamish Carpenter.

lucene@nitwit.de wrote:
 > BTW, where can I get Peter Halacsy's IndexSearcherCache?

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 26 21:38:30 2004
Return-Path: 
 <lucene-user-return-7267-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 92746 invoked from network); 26 Feb 2004 21:38:30 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 26 Feb 2004 21:38:30 -0000
Received: (qmail 93346 invoked by uid 500); 26 Feb 2004 21:38:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 93096 invoked by uid 500); 26 Feb 2004 21:38:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 93081 invoked from network); 26 Feb 2004 21:38:13 -0000
Received: from unknown (HELO server0027.freedom2surf.net) (194.106.33.36)
  by daedalus.apache.org with SMTP; 26 Feb 2004 21:38:13 -0000
Received: from dell ([194.106.34.5])
	by server0027.freedom2surf.net (8.12.6/8.12.6/Debian-7) with SMTP id
 i1QLcHsT027022
	for <lucene-user@jakarta.apache.org>; Thu, 26 Feb 2004 21:38:18 GMT
Date: Thu, 26 Feb 2004 21:38:17 GMT
Message-Id: <200402262138.i1QLcHsT027022@server0027.freedom2surf.net>
From: markharw00d@yahoo.co.uk
To: lucene-user@jakarta.apache.org
Subject: RE: Lucene scalability/clustering
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I tend to think of scaling in two dimensions: scaling by volumes of users and scaling by volumes of data. The former is addressed through replicated indexes 
and the latter by segmented indexes. 
Distribute replicated segments across multiple boxes and create a broker which
a)Determines which segments to query
b)Load balances query requests across the replicated servers for each segment
c) Merges responses

Make sure your communications are batched to avoid too much fine-grained "chatter".

This is the basis of a scalable architecture.

Cheers
Mark


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Thu Feb 26 21:45:29 2004
Return-Path: 
 <lucene-user-return-7268-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 95853 invoked from network); 26 Feb 2004 21:45:29 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 26 Feb 2004 21:45:29 -0000
Received: (qmail 1752 invoked by uid 500); 26 Feb 2004 21:45:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 1722 invoked by uid 500); 26 Feb 2004 21:45:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 1708 invoked from network); 26 Feb 2004 21:45:12 -0000
Received: from unknown (HELO rs9.luxsci.com) (66.216.98.59)
  by daedalus.apache.org with SMTP; 26 Feb 2004 21:45:12 -0000
Received: from ctx.com.au (ppp152-16.lns1.cbr1.internode.on.net
 [150.101.152.16])
	(authenticated bits=0)
	by rs9.luxsci.com (8.12.10/8.12.10) with ESMTP id i1QLjGws029513
	for <lucene-user@jakarta.apache.org>; Thu, 26 Feb 2004 15:45:18 -0600
Message-ID: <403E6926.6050108@ctx.com.au>
Date: Fri, 27 Feb 2004 08:46:14 +1100
From: Matt Quail <matt@ctx.com.au>
User-Agent: Mozilla Thunderbird 0.5 (Windows/20040207)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Iterating TermEnum backwards
References: <00fd01c3fc24$d194adb0$ff09050a@dscp02272>
 <403D9567.5010705@ctx.com.au> <403E39F4.20403@apache.org>
In-Reply-To: <403E39F4.20403@apache.org>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

>> I know I could "invert" my dates (something like MAX_LONG - date) to get
>> the REVERSE order, but I want to be able to do "least recent" and "most
>> recent".
> 
> 
> Why not have two date fields, one inverted and one not?
> 
>> PS: my current solution is to do a binary search between MIN and MAX,
>> halving my search space until I find close to N matching documents.
> 
> 
> That doesn't sound like a bad solution.


Cool, thanks for all your suggestions. I'm getting adequate performance 
from my binary search now, and if it really becomes a performance 
problem, I'll just index an inverted version of the date (we all have 
diskspace to spare!).

=Matt

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 27 03:26:21 2004
Return-Path: 
 <lucene-user-return-7269-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 20563 invoked from network); 27 Feb 2004 03:26:21 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 27 Feb 2004 03:26:21 -0000
Received: (qmail 60611 invoked by uid 500); 27 Feb 2004 03:25:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 60429 invoked by uid 500); 27 Feb 2004 03:25:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 60408 invoked from network); 27 Feb 2004 03:25:56 -0000
Received: from unknown (HELO shardagate.mahindrabt.com) (210.18.48.2)
  by daedalus.apache.org with SMTP; 27 Feb 2004 03:25:56 -0000
Received: from mahindrabt.com (mailscan.sharda.mahindrabt.com [10.5.0.5])
	by shardagate.mahindrabt.com (8.12.10/8.12.10) with ESMTP id i1R3Ptj3004468
	for <lucene-user@jakarta.apache.org>; Fri, 27 Feb 2004 08:56:01 +0530
Resent-Message-Id: <200402270326.i1R3Ptj3004468@shardagate.mahindrabt.com>
Received: from intranet.sharda.mahindrabt.com [10.5.0.15] by mahindrabt.com ;
 Fri, 27 Feb 2004 09:05:15 +0530
Resent-Date: Fri, 27 Feb 2004 09:05:15 +0530
Resent-From: <psingh@mahindrabt.com>
X-Originating-IP: 10.5.0.15
X-Auth-User: psingh@mahindrabt.com
Received: from dscp02272 ([10.5.9.255])
	by intranet.sharda.mahindrabt.com  with SMTP id i1R3Yuah028155
	for <lucene-user@jakarta.apache.org>; Fri, 27 Feb 2004 09:04:57 +0530
Message-ID: <001301c3fce2$5a52a540$ff09050a@mahindrabt.com>
From: "Parminder Singh" <psingh@mahindrabt.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <E9F4363712218647B3899436327F88EE0B427D4C@cnncex03.turner.com>
Subject: Re: Database
Date: Fri, 27 Feb 2004 09:02:39 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.50.4927.1200
X-MIMEOLE: Produced By Microsoft MimeOLE V5.50.4927.1200
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks Byron. That's the way even I've implemented. Each row is a "document"
and each column in the row is a "field".

Thank You.

Parminder Singh
Mahindra-British Telecom Limited
Sharda Center, Erandwane
Pune 411 004. India.
Ph: 91-20-4018100 (Ext: 1847)
Mob: 91-9850053787

In war: resolution. In defeat: defiance. In victory: magnanimity. In peace:
goodwill. - Sir Winston Leonard Spencer Churchill

----- Original Message -----
From: "Saltysiak, Byron" <Byron.Saltysiak@turner.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Sent: Thursday, February 26, 2004 9:08 PM
Subject: RE: Database

> I have integrated with a database by creating Document objects based on
rows from the database and then creating indexes as normal. That was rather
easy to implement.
>
> Let me know if there is an easier or more direct way to use Lucene with
the database.
>
>
> - Byron Saltysiak
>
> -----Original Message-----
> From: Parminder Singh [mailto:psingh@mahindrabt.com]
> Sent: Wednesday, February 25, 2004 11:56 PM
> To: lucene-user@jakarta.apache.org
> Subject: Database
>
>
> I've a CMS application that deploys metadata to a database. Is it possible
to use lucene to search this database instead of it's (lucene's) index. If
you could tell me the steps that would be involved in doing this, it'd be
great help. I'm new to Lucene.
>
> Thank You.
>
> Parminder Singh
>
> --------------------------------------------------------------------------
------
>
> In war: resolution. In defeat: defiance. In victory: magnanimity. In
peace: goodwill. - Sir Winston Leonard Spencer Churchill
>
> *********************************************************
> Disclaimer
>
> This message (including any attachments) contains
> confidential information intended for a specific
> individual and purpose, and is protected by law.
> If you are not the intended recipient, you should
> delete this message and are hereby notified that
> any disclosure, copying, or distribution of this
> message, or the taking of any action based on it,
> is strictly prohibited.
>
> *********************************************************
> Visit us at http://www.mahindrabt.com
>
>

*********************************************************
Disclaimer

This message (including any attachments) contains 
confidential information intended for a specific 
individual and purpose, and is protected by law. 
If you are not the intended recipient, you should 
delete this message and are hereby notified that 
any disclosure, copying, or distribution of this
message, or the taking of any action based on it, 
is strictly prohibited.

*********************************************************
Visit us at http://www.mahindrabt.com




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 27 10:16:58 2004
Return-Path: 
 <lucene-user-return-7270-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 70057 invoked from network); 27 Feb 2004 10:16:58 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 27 Feb 2004 10:16:58 -0000
Received: (qmail 26158 invoked by uid 500); 27 Feb 2004 10:16:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26128 invoked by uid 500); 27 Feb 2004 10:16:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26114 invoked from network); 27 Feb 2004 10:16:26 -0000
Received: from unknown (HELO mailer.oxford-analytica.com) (195.152.1.9)
  by daedalus.apache.org with SMTP; 27 Feb 2004 10:16:26 -0000
Received: by mailer.oxford-analytica.com with Internet Mail Service
 (5.5.2657.72)
	id <FW2Q5CVG>; Fri, 27 Feb 2004 10:16:38 -0000
Message-ID: 
 <E2BD45AC723BD711836900B0D03E0FD709B001@mailer.oxford-analytica.com>
From: Moray McConnachie <mmcconna@oxford-analytica.com>
To: "'lucene-user@jakarta.apache.org'" <lucene-user@jakarta.apache.org>
Subject: Indexing multiple instances of the same field for each document
Date: Fri, 27 Feb 2004 10:16:37 -0000
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I note from previous entries on the mailing list and my own experiments that
you can add many entries to the same field for each document. Example: a
given document belongs to more than one product, ergo I index the product
field with values "PROD_A" and "PROD_B".

If I don't tokenise the fields when adding them to the document, then when
storing the values and printing them out before adding them to the index, so
I can see what the index is recording, I do indeed get

Keyword<product:PROD_A> Keyword <product:PROD_B>

However, a query on product:PROD_A returns no results, neither does a query
on product:PROD_B.

If I tokenize the fields (i.e. the document content reads
Text<product:PROD_A> Text<product:PROD_B), then it works correctly.

[n.b. I am using the .NET implementation of Lucene, but its behaviour is
said to be identical to the Java Lucene.]

1) Is this expected behaviour? 

If so, are multiple fields of the same name to a document silently converted
to a string/array representation of some kind?

2) Is it sensible behaviour?

I ask because it seems to me contrary to instinct, and also because my guess
would be that a Keyword index would be faster to add (and faster to query?)
than a Text index.

Yours,
Moray McConnachie
------------------------------------
Moray McConnachie, IT Manager
Oxford Analytica http://www.oxan.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 27 10:29:39 2004
Return-Path: 
 <lucene-user-return-7271-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 79995 invoked from network); 27 Feb 2004 10:29:39 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 27 Feb 2004 10:29:39 -0000
Received: (qmail 40632 invoked by uid 500); 27 Feb 2004 10:29:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 40603 invoked by uid 500); 27 Feb 2004 10:29:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 40590 invoked from network); 27 Feb 2004 10:29:08 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.65)
  by daedalus.apache.org with SMTP; 27 Feb 2004 10:29:08 -0000
Received: (cpmta 13741 invoked from network); 27 Feb 2004 02:29:21 -0800
Received: from 24.51.109.181 (HELO ?192.168.1.102?)
  by smtp.hatcher.net (209.228.32.65) with SMTP; 27 Feb 2004 02:29:21 -0800
X-Sent: 27 Feb 2004 10:29:21 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: 
 <E2BD45AC723BD711836900B0D03E0FD709B001@mailer.oxford-analytica.com>
References: 
 <E2BD45AC723BD711836900B0D03E0FD709B001@mailer.oxford-analytica.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <CB865F9B-690F-11D8-9DE0-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Indexing multiple instances of the same field for each document
Date: Fri, 27 Feb 2004 05:29:16 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 27, 2004, at 5:16 AM, Moray McConnachie wrote:
> I note from previous entries on the mailing list and my own 
> experiments that
> you can add many entries to the same field for each document. Example: 
> a
> given document belongs to more than one product, ergo I index the 
> product
> field with values "PROD_A" and "PROD_B".
>
> If I don't tokenise the fields when adding them to the document, then 
> when
> storing the values and printing them out before adding them to the 
> index, so
> I can see what the index is recording, I do indeed get
>
> Keyword<product:PROD_A> Keyword <product:PROD_B>
>
> However, a query on product:PROD_A returns no results, neither does a 
> query
> on product:PROD_B.

Are you using QueryParser?  Try using a TermQuery("product", "PROD_A") 
when indexing as a Keyword and see what you get.  If that finds it, 
then you are suffering from analysis paralysis.  QueryParser, Keyword 
fields, and analyzers are a very "interesting" combination.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 27 12:12:55 2004
Return-Path: 
 <lucene-user-return-7272-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 70718 invoked from network); 27 Feb 2004 12:12:55 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 27 Feb 2004 12:12:55 -0000
Received: (qmail 98414 invoked by uid 500); 27 Feb 2004 12:12:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 98274 invoked by uid 500); 27 Feb 2004 12:12:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 98260 invoked from network); 27 Feb 2004 12:12:48 -0000
Received: from unknown (HELO plain.rackshack.net) (207.218.248.80)
  by daedalus.apache.org with SMTP; 27 Feb 2004 12:12:48 -0000
Received: from neo ([61.11.105.10])
	by plain.rackshack.net (8.11.6/8.11.6) with ESMTP id i1RD5Ws14003
	for <lucene-user@jakarta.apache.org>; Fri, 27 Feb 2004 07:05:33 -0600
Message-Id: <200402271305.i1RD5Ws14003@plain.rackshack.net>
Reply-To: <ankurg@brickred.com>
From: "Ankur Goel" <ankurg@brickred.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: CJK Analyzer in lucene 1.3 final
Date: Fri, 27 Feb 2004 17:42:08 +0530
Keywords: Support
Organization: Brickred
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
Thread-Index: AcP3vDwO7FLRdtOuQ0i81NfzQKpCHAFbjjLg
In-Reply-To: <20040220132604.84569.qmail@web12706.mail.yahoo.com>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


 Hi,
In the lucene-1.3-final version's CHANGES.txt it is written that "Fix
StandardTokenizer's handling of CJK characters (Chinese, Japanese and Korean
ideograms)."

Does it mean that for CJK characters we now do not need to use any separate
analyzer, standard analyzer will be sufficient?? 


Regards,
Ankur 


 
-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: Friday, February 20, 2004 6:56 PM
To: Lucene Users List
Subject: Re: Concurrency

> Ive just got a couple of questions which i cant quite work
> out...wondered if 
> someone could help me with them:
> 
> 1. What happens if i make a backup (copy) of an index while documents
> are 
> being added? Can it cause problems, and if so is there a way to
> safely do 
> this?

You should be okay.  When new documents are added, they are added to
new segments.  A 'table of contents' of all valid segments is in
'segments' file.  Even if you copy extra segments, your index will
still work, it's just that your searches may not search newly created
segments, whose existence was not registered in segments file, when you
copied the index.

> 2. When I create a new IndexSearcher, what method does Lucene use to
> take a 
> 'snapshot' of the index (because if i add documents after the search
> object 
> is created they dont appear in the search results)?

This is related to the answer under 1.  New documents are not seen with
an old IndexSearcher, because the old IndexSearcher is not aware of new
segments.
It would have to re-read the segments file and read any new segments
found, in order to become aware of new segments and documents in them.

Otis


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 27 13:29:25 2004
Return-Path: 
 <lucene-user-return-7273-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 46129 invoked from network); 27 Feb 2004 13:29:25 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 27 Feb 2004 13:29:25 -0000
Received: (qmail 59008 invoked by uid 500); 27 Feb 2004 13:29:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58976 invoked by uid 500); 27 Feb 2004 13:29:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58962 invoked from network); 27 Feb 2004 13:29:15 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.77)
  by daedalus.apache.org with SMTP; 27 Feb 2004 13:29:15 -0000
Received: (cpmta 24544 invoked from network); 27 Feb 2004 05:29:16 -0800
Received: from 128.143.26.2 (HELO ?128.143.26.2?)
  by smtp.hatcher.net (209.228.32.77) with SMTP; 27 Feb 2004 05:29:16 -0800
X-Sent: 27 Feb 2004 13:29:16 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <200402271305.i1RD5Ws14003@plain.rackshack.net>
References: <200402271305.i1RD5Ws14003@plain.rackshack.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <ECF51854-6928-11D8-9DE0-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: CJK Analyzer in lucene 1.3 final
Date: Fri, 27 Feb 2004 08:29:10 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 27, 2004, at 7:12 AM, Ankur Goel wrote:
>  Hi,
> In the lucene-1.3-final version's CHANGES.txt it is written that "Fix
> StandardTokenizer's handling of CJK characters (Chinese, Japanese and 
> Korean
> ideograms)."
>
> Does it mean that for CJK characters we now do not need to use any 
> separate
> analyzer, standard analyzer will be sufficient??

You tell us.  Does it work for you?

An analyzer is a pretty personal decision based on your dataset, so it 
is impossible to answer your question directly.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 27 14:28:40 2004
Return-Path: 
 <lucene-user-return-7274-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 163 invoked from network); 27 Feb 2004 14:28:40 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 27 Feb 2004 14:28:40 -0000
Received: (qmail 13427 invoked by uid 500); 27 Feb 2004 14:28:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 13386 invoked by uid 500); 27 Feb 2004 14:28:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 13336 invoked from network); 27 Feb 2004 14:28:19 -0000
Received: from unknown (HELO hotmail.com) (64.4.47.28)
  by daedalus.apache.org with SMTP; 27 Feb 2004 14:28:19 -0000
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Fri, 27 Feb 2004 06:28:20 -0800
Received: from 219.142.133.16 by by9fd.bay9.hotmail.msn.com with HTTP;
	Fri, 27 Feb 2004 14:28:20 GMT
X-Originating-IP: [219.142.133.16]
X-Originating-Email: [chedong@hotmail.com]
X-Sender: chedong@hotmail.com
From: =?gb2312?B?s7Ugtqs=?= <chedong@hotmail.com>
To: lucene-user@jakarta.apache.org
Bcc: 
Subject: Re: CJK Analyzer in lucene 1.3 final
Date: Fri, 27 Feb 2004 22:28:20 +0800
Mime-Version: 1.0
Content-Type: text/plain; charset=gb2312; format=flowed
Message-ID: <BAY9-F28hEqm8DzkUea0001ca58@hotmail.com>
X-OriginalArrivalTime: 27 Feb 2004 14:28:20.0882 (UTC)
 FILETIME=[F3096F20:01C3FD3D]
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

for east asian language without space for word segment in nature, the 
StandardTokenizer now is sigram based C1C2C3 ==> C1 C2 C3, so you search 
C1C2 and C2C1 will return same results

CJKTokenizer is bigram based: C1C2C3 ==> C1C2 C2C3, so you it will result 
return when you search C2C1,
briefly: CJKTotenizer is better than StandardTokenizer for CJK but I don't 
know how to implement bigram based token in StandartTokenzier.

Che Dong
http://www.chedong.com/tech/lucene.html

>From: Erik Hatcher <erik@ehatchersolutions.com>
>Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>Subject: Re: CJK Analyzer in lucene 1.3 final
>Date: Fri, 27 Feb 2004 08:29:10 -0500
>MIME-Version: 1.0 (Apple Message framework v612)
>Received: from mail.apache.org ([208.185.179.12]) by mc11-f27.hotmail.com 
with Microsoft SMTPSVC(5.0.2195.6824); Fri, 27 Feb 2004 05:29:21 -0800
>Received: (qmail 58976 invoked by uid 500); 27 Feb 2004 13:29:16 -0000
>Received: (qmail 58962 invoked from network); 27 Feb 2004 13:29:15 -0000
>Received: from unknown (HELO c000.snv.cp.net) (209.228.32.77)  by 
daedalus.apache.org with SMTP; 27 Feb 2004 13:29:15 -0000
>Received: (cpmta 24544 invoked from network); 27 Feb 2004 05:29:16 -0800
>Received: from 128.143.26.2 (HELO ?128.143.26.2?)  by smtp.hatcher.net 
(209.228.32.77) with SMTP; 27 Feb 2004 05:29:16 -0800
>X-Message-Info: JGTYoYF78jEAnq90Su6PQLeCibywrZOE
>Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
>Precedence: bulk
>List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
>List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
>List-Help: <mailto:lucene-user-help@jakarta.apache.org>
>List-Post: <mailto:lucene-user@jakarta.apache.org>
>List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
>Delivered-To: mailing list lucene-user@jakarta.apache.org
>X-Sent: 27 Feb 2004 13:29:16 GMT
>In-Reply-To: <200402271305.i1RD5Ws14003@plain.rackshack.net>
>References: <200402271305.i1RD5Ws14003@plain.rackshack.net>
>Message-Id: <ECF51854-6928-11D8-9DE0-000393A564E6@ehatchersolutions.com>
>X-Mailer: Apple Mail (2.612)
>X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
>Return-Path: 
lucene-user-return-7273-chedong=hotmail.com@jakarta.apache.org
>X-OriginalArrivalTime: 27 Feb 2004 13:29:21.0631 (UTC) 
FILETIME=[B57A96F0:01C3FD35]
>
>On Feb 27, 2004, at 7:12 AM, Ankur Goel wrote:
>>  Hi,
>>In the lucene-1.3-final version's CHANGES.txt it is written that 
>>"Fix
>>StandardTokenizer's handling of CJK characters (Chinese, Japanese 
>>and Korean
>>ideograms)."
>>
>>Does it mean that for CJK characters we now do not need to use any 
>>separate
>>analyzer, standard analyzer will be sufficient??
>
>You tell us.  Does it work for you?
>
>An analyzer is a pretty personal decision based on your dataset, so 
>it is impossible to answer your question directly.
>
>	Erik
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

_________________________________________________________________
������� MSN Explorer:   http://explorer.msn.com/lccn/  


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 27 14:49:43 2004
Return-Path: 
 <lucene-user-return-7275-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 10849 invoked from network); 27 Feb 2004 14:49:43 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 27 Feb 2004 14:49:43 -0000
Received: (qmail 59983 invoked by uid 500); 27 Feb 2004 14:49:33 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 59961 invoked by uid 500); 27 Feb 2004 14:49:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 59948 invoked from network); 27 Feb 2004 14:49:33 -0000
Received: from unknown (HELO fargus.sitescape.com) (65.202.208.227)
  by daedalus.apache.org with SMTP; 27 Feb 2004 14:49:33 -0000
Received: from Pangloss ([216.195.213.27])
	by fargus.sitescape.com (8.11.6/8.11.6) with ESMTP id i1REiYt10797
	for <lucene-user@jakarta.apache.org>; Fri, 27 Feb 2004 09:44:34 -0500
From: "Roy Klein" <klein@sitescape.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Indexing multiple instances of the same field for each document
Date: Fri, 27 Feb 2004 09:49:27 -0500
Message-ID: <041f01c3fd40$e684c120$3c03a8c0@Pangloss>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
In-Reply-To: <CB865F9B-690F-11D8-9DE0-000393A564E6@ehatchersolutions.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
Importance: Normal
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

If one adds multiple terms to a single fieldname two ways:

    1) Adding a single field with all the content 
    2) Adding that same field several times, each time with a different
term.

E.g.
   doc1.add(Field.indexed("field","the");
   doc1.add(Field.indexed("field","quick");
   doc1.add(Field.indexed("field","brown");
   doc1.add(Field.indexed("field","fox");
   doc1.add(Field.indexed("field","jumped");
   writer.addDocument(doc1);
Vs.
   doc2.add(Field.indexed("field","the quick brown fox jumped");
   writer.addDocument(doc2);


Is there a difference in query performance when I query on fields that
have been added multiple times vs fields which were added with the
entire field contents at once?

Also FYI, I found that phrase queries don't work against a field that's
been added multiple times. If I query the phrase "brown fox", against
the two example docs above, only the second matches.


   Roy

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: Friday, February 27, 2004 5:29 AM
To: Lucene Users List
Subject: Re: Indexing multiple instances of the same field for each
document


On Feb 27, 2004, at 5:16 AM, Moray McConnachie wrote:
> I note from previous entries on the mailing list and my own
> experiments that
> you can add many entries to the same field for each document. Example:

> a
> given document belongs to more than one product, ergo I index the 
> product
> field with values "PROD_A" and "PROD_B".
>
> If I don't tokenise the fields when adding them to the document, then
> when
> storing the values and printing them out before adding them to the 
> index, so
> I can see what the index is recording, I do indeed get
>
> Keyword<product:PROD_A> Keyword <product:PROD_B>
>
> However, a query on product:PROD_A returns no results, neither does a
> query
> on product:PROD_B.

Are you using QueryParser?  Try using a TermQuery("product", "PROD_A") 
when indexing as a Keyword and see what you get.  If that finds it, 
then you are suffering from analysis paralysis.  QueryParser, Keyword 
fields, and analyzers are a very "interesting" combination.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 27 15:00:56 2004
Return-Path: 
 <lucene-user-return-7276-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21072 invoked from network); 27 Feb 2004 15:00:56 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 27 Feb 2004 15:00:56 -0000
Received: (qmail 87480 invoked by uid 500); 27 Feb 2004 15:00:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 87434 invoked by uid 500); 27 Feb 2004 15:00:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 87413 invoked from network); 27 Feb 2004 15:00:44 -0000
Received: from unknown (HELO mailer.oxford-analytica.com) (195.152.1.9)
  by daedalus.apache.org with SMTP; 27 Feb 2004 15:00:44 -0000
Received: by mailer.oxford-analytica.com with Internet Mail Service
 (5.5.2657.72)
	id <FW2Q527R>; Fri, 27 Feb 2004 15:00:45 -0000
Message-ID: 
 <E2BD45AC723BD711836900B0D03E0FD709B006@mailer.oxford-analytica.com>
From: Moray McConnachie <mmcconna@oxford-analytica.com>
To: 'Lucene Users List' <lucene-user@jakarta.apache.org>
Subject: RE: Indexing multiple instances of the same field for each docume
	nt
Date: Fri, 27 Feb 2004 15:00:44 -0000
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


> Are you using QueryParser?  Try using a TermQuery("product", 
> "PROD_A") 
> when indexing as a Keyword and see what you get.  If that finds it, 
> then you are suffering from analysis paralysis.  QueryParser, Keyword 
> fields, and analyzers are a very "interesting" combination.

Yes, it works correctly by using a straight term query.

Does this mean that whenever I want to do keyword searches, I must avoid
QueryParser?

Is it also the case that QueryParser is comparatively slow? I haven't done
any heavy-duty testing of this, and of course the use of the .NET platform
may not be helping, but that is my perception.

Yours,
Moray
------------------------------------
Moray McConnachie, IT Manager
Oxford Analytica http://www.oxan.com 

> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: 27 February 2004 10:29
> To: Lucene Users List
> Subject: Re: Indexing multiple instances of the same field for each
> document
> 
> 
> On Feb 27, 2004, at 5:16 AM, Moray McConnachie wrote:
> > I note from previous entries on the mailing list and my own 
> > experiments that
> > you can add many entries to the same field for each 
> document. Example: 
> > a
> > given document belongs to more than one product, ergo I index the 
> > product
> > field with values "PROD_A" and "PROD_B".
> >
> > If I don't tokenise the fields when adding them to the 
> document, then 
> > when
> > storing the values and printing them out before adding them to the 
> > index, so
> > I can see what the index is recording, I do indeed get
> >
> > Keyword<product:PROD_A> Keyword <product:PROD_B>
> >
> > However, a query on product:PROD_A returns no results, 
> neither does a 
> > query
> > on product:PROD_B.
> 
> Are you using QueryParser?  Try using a TermQuery("product", 
> "PROD_A") 
> when indexing as a Keyword and see what you get.  If that finds it, 
> then you are suffering from analysis paralysis.  QueryParser, Keyword 
> fields, and analyzers are a very "interesting" combination.
> 
> 	Erik
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 27 16:08:54 2004
Return-Path: 
 <lucene-user-return-7277-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 66882 invoked from network); 27 Feb 2004 16:08:54 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 27 Feb 2004 16:08:54 -0000
Received: (qmail 56716 invoked by uid 500); 27 Feb 2004 16:07:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 56686 invoked by uid 500); 27 Feb 2004 16:07:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 56664 invoked from network); 27 Feb 2004 16:07:59 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.83)
  by daedalus.apache.org with SMTP; 27 Feb 2004 16:07:59 -0000
Received: (cpmta 1374 invoked from network); 27 Feb 2004 08:08:01 -0800
Received: from 128.143.26.2 (HELO ?128.143.26.2?)
  by smtp.hatcher.net (209.228.32.83) with SMTP; 27 Feb 2004 08:08:01 -0800
X-Sent: 27 Feb 2004 16:08:01 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: 
 <E2BD45AC723BD711836900B0D03E0FD709B006@mailer.oxford-analytica.com>
References: 
 <E2BD45AC723BD711836900B0D03E0FD709B006@mailer.oxford-analytica.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <1A4E75B8-693F-11D8-8DB7-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Indexing multiple instances of the same field for each docume nt
Date: Fri, 27 Feb 2004 11:07:55 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 27, 2004, at 10:00 AM, Moray McConnachie wrote:
>> Are you using QueryParser?  Try using a TermQuery("product",
>> "PROD_A")
>> when indexing as a Keyword and see what you get.  If that finds it,
>> then you are suffering from analysis paralysis.  QueryParser, Keyword
>> fields, and analyzers are a very "interesting" combination.
>
> Yes, it works correctly by using a straight term query.
>
> Does this mean that whenever I want to do keyword searches, I must 
> avoid
> QueryParser?

Not necessarily.  This is a bit of an involved issue, and I posted a 
more extensive reply on this a few weeks ago (pasting a bit of our 
Lucene in Action discussion on it - perhaps search for 
"KeywordAnalyzer" to find that mail)

Look into PerFieldAnalyzerWrapper.

> Is it also the case that QueryParser is comparatively slow? I haven't 
> done
> any heavy-duty testing of this, and of course the use of the .NET 
> platform
> may not be helping, but that is my perception.

Slow, nah... not on the Java side of things at least.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 27 16:12:23 2004
Return-Path: 
 <lucene-user-return-7278-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68634 invoked from network); 27 Feb 2004 16:12:23 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 27 Feb 2004 16:12:23 -0000
Received: (qmail 67590 invoked by uid 500); 27 Feb 2004 16:12:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 67564 invoked by uid 500); 27 Feb 2004 16:12:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 67545 invoked from network); 27 Feb 2004 16:12:11 -0000
Received: from unknown (HELO plain.rackshack.net) (207.218.248.80)
  by daedalus.apache.org with SMTP; 27 Feb 2004 16:12:11 -0000
Received: from neo ([202.88.151.159])
	by plain.rackshack.net (8.11.6/8.11.6) with ESMTP id i1RH53s15368
	for <lucene-user@jakarta.apache.org>; Fri, 27 Feb 2004 11:05:03 -0600
Message-Id: <200402271705.i1RH53s15368@plain.rackshack.net>
Reply-To: <ankurg@brickred.com>
From: "Ankur Goel" <ankurg@brickred.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: CJK Analyzer in lucene 1.3 final
Date: Fri, 27 Feb 2004 21:41:34 +0530
Keywords: Support
Organization: Brickred
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
Thread-Index: AcP9RV2DTcQh9iXlTJKLGRWzw/NrqgABpxuw
In-Reply-To: <BAY9-F28hEqm8DzkUea0001ca58@hotmail.com>
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



I tried with Standard Analyzer but not able to do so. Then I tried CJk
Anlayzer given using CJK tokenizer but was again unsuccesful. The File =
in
which text to be indexed is contains noth English and Japanese =
Characters.
Can this be a problem.

Regards
Ankur=20

-----Original Message-----
From: ? ? [mailto:chedong@hotmail.com]=20
Sent: Friday, February 27, 2004 7:58 PM
To: lucene-user@jakarta.apache.org
Subject: Re: CJK Analyzer in lucene 1.3 final

for east asian language without space for word segment in nature, the=20
StandardTokenizer now is sigram based C1C2C3 =3D=3D> C1 C2 C3, so you =
search=20
C1C2 and C2C1 will return same results

CJKTokenizer is bigram based: C1C2C3 =3D=3D> C1C2 C2C3, so you it will =
result=20
return when you search C2C1,
briefly: CJKTotenizer is better than StandardTokenizer for CJK but I =
don't=20
know how to implement bigram based token in StandartTokenzier.

Che Dong
http://www.chedong.com/tech/lucene.html

>From: Erik Hatcher <erik@ehatchersolutions.com>
>Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>Subject: Re: CJK Analyzer in lucene 1.3 final
>Date: Fri, 27 Feb 2004 08:29:10 -0500
>MIME-Version: 1.0 (Apple Message framework v612)
>Received: from mail.apache.org ([208.185.179.12]) by =
mc11-f27.hotmail.com=20
with Microsoft SMTPSVC(5.0.2195.6824); Fri, 27 Feb 2004 05:29:21 -0800
>Received: (qmail 58976 invoked by uid 500); 27 Feb 2004 13:29:16 -0000
>Received: (qmail 58962 invoked from network); 27 Feb 2004 13:29:15 =
-0000
>Received: from unknown (HELO c000.snv.cp.net) (209.228.32.77)  by=20
daedalus.apache.org with SMTP; 27 Feb 2004 13:29:15 -0000
>Received: (cpmta 24544 invoked from network); 27 Feb 2004 05:29:16 =
-0800
>Received: from 128.143.26.2 (HELO ?128.143.26.2?)  by smtp.hatcher.net=20
(209.228.32.77) with SMTP; 27 Feb 2004 05:29:16 -0800
>X-Message-Info: JGTYoYF78jEAnq90Su6PQLeCibywrZOE
>Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
>Precedence: bulk
>List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
>List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
>List-Help: <mailto:lucene-user-help@jakarta.apache.org>
>List-Post: <mailto:lucene-user@jakarta.apache.org>
>List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
>Delivered-To: mailing list lucene-user@jakarta.apache.org
>X-Sent: 27 Feb 2004 13:29:16 GMT
>In-Reply-To: <200402271305.i1RD5Ws14003@plain.rackshack.net>
>References: <200402271305.i1RD5Ws14003@plain.rackshack.net>
>Message-Id: =
<ECF51854-6928-11D8-9DE0-000393A564E6@ehatchersolutions.com>
>X-Mailer: Apple Mail (2.612)
>X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
>Return-Path:=20
lucene-user-return-7273-chedong=3Dhotmail.com@jakarta.apache.org
>X-OriginalArrivalTime: 27 Feb 2004 13:29:21.0631 (UTC)=20
FILETIME=3D[B57A96F0:01C3FD35]
>
>On Feb 27, 2004, at 7:12 AM, Ankur Goel wrote:
>>  Hi,
>>In the lucene-1.3-final version's CHANGES.txt it is written that=20
>>"Fix
>>StandardTokenizer's handling of CJK characters (Chinese, Japanese=20
>>and Korean
>>ideograms)."
>>
>>Does it mean that for CJK characters we now do not need to use any=20
>>separate
>>analyzer, standard analyzer will be sufficient??
>
>You tell us.  Does it work for you?
>
>An analyzer is a pretty personal decision based on your dataset, so=20
>it is impossible to answer your question directly.
>
>	Erik
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

_________________________________________________________________
=C3=E2=B7=D1=CF=C2=D4=D8 MSN Explorer:   http://explorer.msn.com/lccn/ =20


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 27 16:27:40 2004
Return-Path: 
 <lucene-user-return-7279-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 77909 invoked from network); 27 Feb 2004 16:27:40 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 27 Feb 2004 16:27:40 -0000
Received: (qmail 3181 invoked by uid 500); 27 Feb 2004 16:27:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 3156 invoked by uid 500); 27 Feb 2004 16:27:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 3141 invoked from network); 27 Feb 2004 16:27:27 -0000
Received: from unknown (HELO rwcrmhc11.comcast.net) (204.127.198.35)
  by daedalus.apache.org with SMTP; 27 Feb 2004 16:27:27 -0000
Received: from apache.org (c-24-5-145-151.client.comcast.net[24.5.145.151])
          by comcast.net (rwcrmhc11) with ESMTP
          id <2004022716272901300hbr9qe>; Fri, 27 Feb 2004 16:27:29 +0000
Message-ID: <403F6FEC.4020803@apache.org>
Date: Fri, 27 Feb 2004 08:27:24 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040116
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Indexing multiple instances of the same field for each document
References: <041f01c3fd40$e684c120$3c03a8c0@Pangloss>
In-Reply-To: <041f01c3fd40$e684c120$3c03a8c0@Pangloss>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Roy Klein wrote:
> E.g.
>    doc1.add(Field.indexed("field","the");
>    doc1.add(Field.indexed("field","quick");
>    doc1.add(Field.indexed("field","brown");
>    doc1.add(Field.indexed("field","fox");
>    doc1.add(Field.indexed("field","jumped");
>    writer.addDocument(doc1);
> Vs.
>    doc2.add(Field.indexed("field","the quick brown fox jumped");
>    writer.addDocument(doc2);
> 
> Is there a difference in query performance when I query on fields that
> have been added multiple times vs fields which were added with the
> entire field contents at once?

No.

> Also FYI, I found that phrase queries don't work against a field that's
> been added multiple times. If I query the phrase "brown fox", against
> the two example docs above, only the second matches.

They should work the same.  I'm not sure what Field.indexed does. 
That's not a normal Lucene method.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 27 17:09:58 2004
Return-Path: 
 <lucene-user-return-7280-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 4392 invoked from network); 27 Feb 2004 17:09:58 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 27 Feb 2004 17:09:58 -0000
Received: (qmail 19892 invoked by uid 500); 27 Feb 2004 17:09:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 19869 invoked by uid 500); 27 Feb 2004 17:09:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 19856 invoked from network); 27 Feb 2004 17:09:45 -0000
Received: from unknown (HELO five.zapatec.com) (66.117.150.100)
  by daedalus.apache.org with SMTP; 27 Feb 2004 17:09:45 -0000
Received: from rlx11.zapatec.com (rlx11.pr.zapatec.com [192.168.1.132])
	by five.zapatec.com (Postfix) with ESMTP id 5BA905D23
	for <lucene-user@jakarta.apache.org>; Fri, 27 Feb 2004 09:09:48 -0800 (PST)
Received: (from dror@localhost)
	by rlx11.zapatec.com (8.12.3/8.12.3/Submit) id i1RH9mgj084083
	for lucene-user@jakarta.apache.org; Fri, 27 Feb 2004 09:09:48 -0800 (PST)
	(envelope-from dror)
Date: Fri, 27 Feb 2004 09:09:48 -0800
From: Dror Matalon <dror@zapatec.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Term Vector support
Message-ID: <20040227170948.GA82930@rlx11.zapatec.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi folks,

I'm trying to get a better understanding of term vector support. Looking
at lucene-dev I'm understanding that with each document you store the
list of terms and their frequencies. Is this correct? 
What uses are there for term vector other than "more like this"?

On Wed, Feb 25, 2004 at 03:47:40PM -0500, Bruce Ritchie wrote:
> David Spencer wrote:
> 
> >Code rewritten, automagically chooses lots of defaults, lets you override
> >the defs thru the static vars at the bottom or the non-static vars also 
> >at the bottom.
> 
> I've taken the liberty to update this code to handle multiple fields and 
> use the new term vector support in CVS so that retokenizing a document's 
> text isn't necessary if you have a document ID that has indexed and term 
> vector supported fields. I've added the apache 2.0 license to the top 
> however if that isn't the licence you want this code to be released under 
> let me know and I'll change it immediately.
> 
> 
> Regards,
> 
> Bruce Ritchie
> http://www.jivesoftware.com/





-- 
Dror Matalon
Zapatec Inc 
1700 MLK Way
Berkeley, CA 94709
http://www.fastbuzz.com
http://www.zapatec.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 27 17:13:19 2004
Return-Path: 
 <lucene-user-return-7281-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 6603 invoked from network); 27 Feb 2004 17:13:19 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 27 Feb 2004 17:13:19 -0000
Received: (qmail 27128 invoked by uid 500); 27 Feb 2004 17:12:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 27028 invoked by uid 500); 27 Feb 2004 17:12:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26975 invoked from network); 27 Feb 2004 17:12:57 -0000
Received: from unknown (HELO fargus.sitescape.com) (65.202.208.227)
  by daedalus.apache.org with SMTP; 27 Feb 2004 17:12:57 -0000
Received: from Pangloss ([216.195.213.27])
	by fargus.sitescape.com (8.11.6/8.11.6) with ESMTP id i1RH7xt14342
	for <lucene-user@jakarta.apache.org>; Fri, 27 Feb 2004 12:07:59 -0500
From: "Roy Klein" <klein@sitescape.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Indexing multiple instances of the same field for each document
Date: Fri, 27 Feb 2004 12:12:52 -0500
Message-ID: <042101c3fd54$efa19490$3c03a8c0@Pangloss>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
In-Reply-To: <403F6FEC.4020803@apache.org>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
Importance: Normal
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Doug,

The query results are different, I'm attaching my test code.

>> Also FYI, I found that phrase queries don't work against a field 
>> that's been added multiple times. If I query the phrase "brown fox", 
>> against the two example docs above, only the second matches.

>They should work the same.  I'm not sure what Field.indexed does. 
>That's not a normal Lucene method.

>Doug

Here's my test code  (my results follow it):
------------------------------------------------------------------------
---

package lucenetest;


import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.analysis.SimpleAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;

import org.apache.lucene.search.Query;
import org.apache.lucene.search.Hits;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.PhraseQuery;
import org.apache.lucene.index.Term;



import java.io.File;
import java.io.IOException;
import java.io.FileReader;

public class test {
    public static void test(File indexDir) throws IOException {

        IndexWriter writer = new IndexWriter(indexDir, new
SimpleAnalyzer(), true);
        //indexDirectory(writer, dataDir);

        Document doc = new Document();
        doc.add(Field.Text("contents", "the"));
        doc.add(Field.Text("contents", "quick"));
        doc.add(Field.Text("contents", "brown"));
        doc.add(Field.Text("contents", "fox"));
        doc.add(Field.Text("contents", "jumped"));
        doc.add(Field.Text("contents", "over"));
        doc.add(Field.Text("contents", "the"));
        doc.add(Field.Text("contents", "lazy"));
        doc.add(Field.Text("contents", "dogs"));
        doc.add(Field.Keyword("docnumber", "1"));
        writer.addDocument(doc);
        doc = new Document();
        doc.add(Field.Text("contents", "the quick brown fox jumped over
the lazy dogs"));
        doc.add(Field.Keyword("docnumber", "2"));
        writer.addDocument(doc);
        writer.close();
    }

    public static void query(File indexDir) throws IOException
    {
        Query query = null;
        PhraseQuery pquery = new PhraseQuery();
        Hits hits = null;

        try {
            query = QueryParser.parse("quick brown", "contents", new
StandardAnalyzer());
        } catch (Exception qe) {System.out.println(qe.toString());}
        if (query == null) return;
        System.out.println("Query: " + query.toString());
        IndexReader reader = IndexReader.open(indexDir);
        IndexSearcher searcher = new IndexSearcher(reader);

        hits = searcher.search(query);
        System.out.println("Hits: " + hits.length());

        for (int i = 0; i < hits.length(); i++)
        {
            System.out.println( hits.doc(i).get("docnumber") + " ");
        }


        pquery.add(new Term("contents", "quick"));
        pquery.add(new Term("contents", "brown"));
        System.out.println("PQuery: " + pquery.toString());
        hits = searcher.search(pquery);
        System.out.println("Phrase Hits: " + hits.length());
        for (int i = 0; i < hits.length(); i++)
        {
            System.out.println( hits.doc(i).get("docnumber") + " ");
        }

        searcher.close();
        reader.close();

    }
    public static void main(String[] args) throws Exception {
        if (args.length != 1) {
            throw new Exception("Usage: " + test.class.getName() + "
<index dir>");
        }
        File indexDir = new File(args[0]);
        test(indexDir);
        query(indexDir);
    }
}

------------------------------------------------------------------------
-------
My results:
Query: contents:quick contents:brown 
Hits: 2 
1  
2  
PQuery: 
contents:"quick brown" 
Phrase Hits: 1 
2 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 27 19:09:51 2004
Return-Path: 
 <lucene-user-return-7282-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 76893 invoked from network); 27 Feb 2004 19:09:51 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 27 Feb 2004 19:09:51 -0000
Received: (qmail 55169 invoked by uid 500); 27 Feb 2004 19:09:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 54980 invoked by uid 500); 27 Feb 2004 19:09:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 54965 invoked from network); 27 Feb 2004 19:09:36 -0000
Received: from unknown (HELO hotmail.com) (64.4.49.40)
  by daedalus.apache.org with SMTP; 27 Feb 2004 19:09:36 -0000
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Fri, 27 Feb 2004 11:09:41 -0800
Received: from 199.68.77.225 by by14fd.bay14.hotmail.msn.com with HTTP;
	Fri, 27 Feb 2004 19:09:40 GMT
X-Originating-IP: [199.68.77.225]
X-Originating-Email: [umamahesh78@hotmail.com]
X-Sender: umamahesh78@hotmail.com
From: "umamahesh bayireddya" <umamahesh78@hotmail.com>
To: lucene-user@jakarta.apache.org
Bcc: 
Subject: want to join in list
Date: Sat, 28 Feb 2004 00:39:40 +0530
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
Message-ID: <BAY14-F40q0pQgkL7TC00003385@hotmail.com>
X-OriginalArrivalTime: 27 Feb 2004 19:09:41.0125 (UTC)
 FILETIME=[40721B50:01C3FD65]
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



_________________________________________________________________
Marriage?  Join BharatMatrimony.com. 
http://www.bharatmatrimony.com/cgi-bin/bmclicks1.cgi?74


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 27 19:12:04 2004
Return-Path: 
 <lucene-user-return-7283-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 78845 invoked from network); 27 Feb 2004 19:12:04 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 27 Feb 2004 19:12:04 -0000
Received: (qmail 63293 invoked by uid 500); 27 Feb 2004 19:11:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 63271 invoked by uid 500); 27 Feb 2004 19:11:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 63258 invoked from network); 27 Feb 2004 19:11:49 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.77)
  by daedalus.apache.org with SMTP; 27 Feb 2004 19:11:49 -0000
Received: (cpmta 1904 invoked from network); 27 Feb 2004 11:11:53 -0800
Received: from 24.51.109.181 (HELO ?192.168.1.102?)
  by smtp.hatcher.net (209.228.32.77) with SMTP; 27 Feb 2004 11:11:53 -0800
X-Sent: 27 Feb 2004 19:11:53 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <042101c3fd54$efa19490$3c03a8c0@Pangloss>
References: <042101c3fd54$efa19490$3c03a8c0@Pangloss>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CA6D714A-6958-11D8-B5F2-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Indexing multiple instances of the same field for each document
Date: Fri, 27 Feb 2004 14:11:48 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Roy,

On Feb 27, 2004, at 12:12 PM, Roy Klein wrote:
>         Document doc = new Document();
>         doc.add(Field.Text("contents", "the"));

Changing these to Field.Keyword gets it to work.  I'm delving a little  
bit to understand why, but it seems if you are adding words  
individually anyway you'd want them to be untokenized, right?

	Erik


>         doc.add(Field.Text("contents", "quick"));
>         doc.add(Field.Text("contents", "brown"));
>         doc.add(Field.Text("contents", "fox"));
>         doc.add(Field.Text("contents", "jumped"));
>         doc.add(Field.Text("contents", "over"));
>         doc.add(Field.Text("contents", "the"));
>         doc.add(Field.Text("contents", "lazy"));
>         doc.add(Field.Text("contents", "dogs"));
>         doc.add(Field.Keyword("docnumber", "1"));
>         writer.addDocument(doc);
>         doc = new Document();
>         doc.add(Field.Text("contents", "the quick brown fox jumped over
> the lazy dogs"));
>         doc.add(Field.Keyword("docnumber", "2"));
>         writer.addDocument(doc);
>         writer.close();
>     }
>
>     public static void query(File indexDir) throws IOException
>     {
>         Query query = null;
>         PhraseQuery pquery = new PhraseQuery();
>         Hits hits = null;
>
>         try {
>             query = QueryParser.parse("quick brown", "contents", new
> StandardAnalyzer());
>         } catch (Exception qe) {System.out.println(qe.toString());}
>         if (query == null) return;
>         System.out.println("Query: " + query.toString());
>         IndexReader reader = IndexReader.open(indexDir);
>         IndexSearcher searcher = new IndexSearcher(reader);
>
>         hits = searcher.search(query);
>         System.out.println("Hits: " + hits.length());
>
>         for (int i = 0; i < hits.length(); i++)
>         {
>             System.out.println( hits.doc(i).get("docnumber") + " ");
>         }
>
>
>         pquery.add(new Term("contents", "quick"));
>         pquery.add(new Term("contents", "brown"));
>         System.out.println("PQuery: " + pquery.toString());
>         hits = searcher.search(pquery);
>         System.out.println("Phrase Hits: " + hits.length());
>         for (int i = 0; i < hits.length(); i++)
>         {
>             System.out.println( hits.doc(i).get("docnumber") + " ");
>         }
>
>         searcher.close();
>         reader.close();
>
>     }
>     public static void main(String[] args) throws Exception {
>         if (args.length != 1) {
>             throw new Exception("Usage: " + test.class.getName() + "
> <index dir>");
>         }
>         File indexDir = new File(args[0]);
>         test(indexDir);
>         query(indexDir);
>     }
> }
>
> ----------------------------------------------------------------------- 
> -
> -------
> My results:
> Query: contents:quick contents:brown
> Hits: 2
> 1
> 2
> PQuery:
> contents:"quick brown"
> Phrase Hits: 1
> 2
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 27 19:54:16 2004
Return-Path: 
 <lucene-user-return-7284-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 248 invoked from network); 27 Feb 2004 19:54:16 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 27 Feb 2004 19:54:16 -0000
Received: (qmail 37075 invoked by uid 500); 27 Feb 2004 19:54:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 36731 invoked by uid 500); 27 Feb 2004 19:54:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 36718 invoked from network); 27 Feb 2004 19:54:00 -0000
Received: from unknown (HELO hotmail.com) (64.4.49.54)
  by daedalus.apache.org with SMTP; 27 Feb 2004 19:54:00 -0000
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Fri, 27 Feb 2004 11:54:05 -0800
Received: from 199.68.77.225 by by14fd.bay14.hotmail.msn.com with HTTP;
	Fri, 27 Feb 2004 19:54:05 GMT
X-Originating-IP: [199.68.77.225]
X-Originating-Email: [umamahesh78@hotmail.com]
X-Sender: umamahesh78@hotmail.com
From: "umamahesh bayireddya" <umamahesh78@hotmail.com>
To: lucene-user@jakarta.apache.org
Bcc: 
Subject: update and search in parallel
Date: Sat, 28 Feb 2004 01:24:05 +0530
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
Message-ID: <BAY14-F54idOKD5WILh0000364d@hotmail.com>
X-OriginalArrivalTime: 27 Feb 2004 19:54:05.0585 (UTC)
 FILETIME=[74967010:01C3FD6B]
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

hi all

I have two question:
1) Is it possible to update and search a document in parallel ?
2) Is it possible to update and delete a document in parallel ?



my code for update:
public void updateIndexDoc(String url) throws Exception {
         PropertiesHandler ph;
        ph = new PropertiesHandler();
        indexdir = ph.getProperty("index");
        File f = new File(url);
        Directory directory = FSDirectory.getDirectory(indexdir, false);

        IndexReader reader = IndexReader.open(directory);

         int j =-1;
        for(int i =0; i<reader.numDocs();i++)
         {
             if(!reader.isDeleted(i))
             {
             Document d = reader.document(i);
             String url1 = d.get("url");
             if(url1.equals(url))
             {
           System.out.println(url1);
                 j=i;

             }
             }
         }
          if(j!=-1)
        reader.delete(j);
        reader.close();
        directory.close();
        create = false;
        writer = new IndexWriter(indexdir, new StandardAnalyzer(), create);
        writer.maxFieldLength = 1000000;
        addIndexDoc(f);
       writer.optimize();
        writer.close();

    }


public void deleteIndexDoc(String url)
            throws IOException {
        PropertiesHandler ph;
        ph = new PropertiesHandler();
        indexdir = ph.getProperty("index");
        File f = new File(url);

        Directory directory = FSDirectory.getDirectory(indexdir, false);

        IndexReader reader = IndexReader.open(directory);


         int j =-1;
        for(int i =0; i<reader.numDocs();i++)
         {
             if(!reader.isDeleted(i))
             {
             Document d = reader.document(i);
             String url1 = d.get("url");
             if(url1.equals(url))
             {
           System.out.println(url1);
                 j=i;

             }
             }
         }

              if(j!=-1)
        reader.delete(j);
        reader.close();
        directory.close();

    }



thanks

mahesh

_________________________________________________________________
INDIA TODAY @ Rs. 5 for 5 years ! 
http://www.indiatoday.com/itoday/intlsubscription/itsubs/it_offer.html 
Subcribe Now ...


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 27 20:02:06 2004
Return-Path: 
 <lucene-user-return-7285-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 5351 invoked from network); 27 Feb 2004 20:02:06 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 27 Feb 2004 20:02:06 -0000
Received: (qmail 54966 invoked by uid 500); 27 Feb 2004 20:01:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 54906 invoked by uid 500); 27 Feb 2004 20:01:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 54849 invoked from network); 27 Feb 2004 20:01:48 -0000
Received: from unknown (HELO hotmail.com) (64.4.49.13)
  by daedalus.apache.org with SMTP; 27 Feb 2004 20:01:48 -0000
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Fri, 27 Feb 2004 12:01:53 -0800
Received: from 199.68.77.225 by by14fd.bay14.hotmail.msn.com with HTTP;
	Fri, 27 Feb 2004 20:01:53 GMT
X-Originating-IP: [199.68.77.225]
X-Originating-Email: [umamahesh78@hotmail.com]
X-Sender: umamahesh78@hotmail.com
From: "umamahesh bayireddya" <umamahesh78@hotmail.com>
To: lucene-user@jakarta.apache.org
Bcc: 
Subject: dynamic summary 
Date: Sat, 28 Feb 2004 01:31:53 +0530
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
Message-ID: <BAY14-F13ymLhtnJkxW0000363b@hotmail.com>
X-OriginalArrivalTime: 27 Feb 2004 20:01:53.0637 (UTC)
 FILETIME=[8B918150:01C3FD6C]
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

hi all

how to generate dynamic summary based on query?

right now i am trying to get the query results, parsing html files which i 
got in query result and displaying the sentence in which query is matched

thanks
mahesh

_________________________________________________________________
Contact brides & grooms FREE! http://www.shaadi.com/ptnr.php?ptnr=hmltag 
Only on www.shaadi.com. Register now!


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 27 21:11:12 2004
Return-Path: 
 <lucene-user-return-7286-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 50060 invoked from network); 27 Feb 2004 21:11:12 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 27 Feb 2004 21:11:12 -0000
Received: (qmail 88532 invoked by uid 500); 27 Feb 2004 21:10:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 88484 invoked by uid 500); 27 Feb 2004 21:10:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 88461 invoked from network); 27 Feb 2004 21:10:54 -0000
Received: from unknown (HELO fargus.sitescape.com) (65.202.208.227)
  by daedalus.apache.org with SMTP; 27 Feb 2004 21:10:54 -0000
Received: from Pangloss ([216.195.213.27])
	by fargus.sitescape.com (8.11.6/8.11.6) with ESMTP id i1RL5wt20067
	for <lucene-user@jakarta.apache.org>; Fri, 27 Feb 2004 16:05:58 -0500
From: "Roy Klein" <klein@sitescape.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Indexing multiple instances of the same field for each document
Date: Fri, 27 Feb 2004 16:10:50 -0500
Message-ID: <042401c3fd76$2def6da0$3c03a8c0@Pangloss>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
In-Reply-To: <CA6D714A-6958-11D8-B5F2-000393A564E6@ehatchersolutions.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
Importance: Normal
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Erik,

While you might be right in this example (using Field.Keyword), I can
see how this would still be a problem in other cases. For instance, if I
were adding more than one word at a time in the example I attached.

    Roy


-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: Friday, February 27, 2004 2:12 PM
To: Lucene Users List
Subject: Re: Indexing multiple instances of the same field for each
document


Roy,

On Feb 27, 2004, at 12:12 PM, Roy Klein wrote:
>         Document doc = new Document();
>         doc.add(Field.Text("contents", "the"));

Changing these to Field.Keyword gets it to work.  I'm delving a little  
bit to understand why, but it seems if you are adding words  
individually anyway you'd want them to be untokenized, right?

	Erik


>         doc.add(Field.Text("contents", "quick"));
>         doc.add(Field.Text("contents", "brown"));
>         doc.add(Field.Text("contents", "fox"));
>         doc.add(Field.Text("contents", "jumped"));
>         doc.add(Field.Text("contents", "over"));
>         doc.add(Field.Text("contents", "the"));
>         doc.add(Field.Text("contents", "lazy"));
>         doc.add(Field.Text("contents", "dogs"));
>         doc.add(Field.Keyword("docnumber", "1"));
>         writer.addDocument(doc);
>         doc = new Document();
>         doc.add(Field.Text("contents", "the quick brown fox jumped 
> over the lazy dogs"));
>         doc.add(Field.Keyword("docnumber", "2"));
>         writer.addDocument(doc);
>         writer.close();
>     }
>
>     public static void query(File indexDir) throws IOException
>     {
>         Query query = null;
>         PhraseQuery pquery = new PhraseQuery();
>         Hits hits = null;
>
>         try {
>             query = QueryParser.parse("quick brown", "contents", new 
> StandardAnalyzer());
>         } catch (Exception qe) {System.out.println(qe.toString());}
>         if (query == null) return;
>         System.out.println("Query: " + query.toString());
>         IndexReader reader = IndexReader.open(indexDir);
>         IndexSearcher searcher = new IndexSearcher(reader);
>
>         hits = searcher.search(query);
>         System.out.println("Hits: " + hits.length());
>
>         for (int i = 0; i < hits.length(); i++)
>         {
>             System.out.println( hits.doc(i).get("docnumber") + " ");
>         }
>
>
>         pquery.add(new Term("contents", "quick"));
>         pquery.add(new Term("contents", "brown"));
>         System.out.println("PQuery: " + pquery.toString());
>         hits = searcher.search(pquery);
>         System.out.println("Phrase Hits: " + hits.length());
>         for (int i = 0; i < hits.length(); i++)
>         {
>             System.out.println( hits.doc(i).get("docnumber") + " ");
>         }
>
>         searcher.close();
>         reader.close();
>
>     }
>     public static void main(String[] args) throws Exception {
>         if (args.length != 1) {
>             throw new Exception("Usage: " + test.class.getName() + " 
> <index dir>");
>         }
>         File indexDir = new File(args[0]);
>         test(indexDir);
>         query(indexDir);
>     }
> }
>
> ----------------------------------------------------------------------
> -
> -
> -------
> My results:
> Query: contents:quick contents:brown
> Hits: 2
> 1
> 2
> PQuery:
> contents:"quick brown"
> Phrase Hits: 1
> 2
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 27 21:34:13 2004
Return-Path: 
 <lucene-user-return-7287-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61067 invoked from network); 27 Feb 2004 21:34:13 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 27 Feb 2004 21:34:13 -0000
Received: (qmail 27317 invoked by uid 500); 27 Feb 2004 21:33:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 27179 invoked by uid 500); 27 Feb 2004 21:33:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 27163 invoked from network); 27 Feb 2004 21:33:55 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.83)
  by daedalus.apache.org with SMTP; 27 Feb 2004 21:33:55 -0000
Received: (cpmta 25472 invoked from network); 27 Feb 2004 13:34:00 -0800
Received: from 24.51.109.181 (HELO ?192.168.1.102?)
  by smtp.hatcher.net (209.228.32.83) with SMTP; 27 Feb 2004 13:34:00 -0800
X-Sent: 27 Feb 2004 21:34:00 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <042401c3fd76$2def6da0$3c03a8c0@Pangloss>
References: <042401c3fd76$2def6da0$3c03a8c0@Pangloss>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <A54C4D76-696C-11D8-85E4-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Indexing multiple instances of the same field for each document
Date: Fri, 27 Feb 2004 16:33:55 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 27, 2004, at 4:10 PM, Roy Klein wrote:
> Hi Erik,
>
> While you might be right in this example (using Field.Keyword), I can
> see how this would still be a problem in other cases. For instance, if 
> I
> were adding more than one word at a time in the example I attached.

I concur that it appears to be a bug.  It is unlikely folks use Lucene 
like this too much though - there probably are not too many scenarios 
where combining things into a single String or Reader is a burden.

I'm interested to know where in the code this oddity occurs so I can 
understand it more.  I did a brief bit of troubleshooting but haven't 
figured it out yet.  Something in DocumentWriter I presume.

	Erik



>
>     Roy
>
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Friday, February 27, 2004 2:12 PM
> To: Lucene Users List
> Subject: Re: Indexing multiple instances of the same field for each
> document
>
>
> Roy,
>
> On Feb 27, 2004, at 12:12 PM, Roy Klein wrote:
>>         Document doc = new Document();
>>         doc.add(Field.Text("contents", "the"));
>
> Changing these to Field.Keyword gets it to work.  I'm delving a little
> bit to understand why, but it seems if you are adding words
> individually anyway you'd want them to be untokenized, right?
>
> 	Erik
>
>
>>         doc.add(Field.Text("contents", "quick"));
>>         doc.add(Field.Text("contents", "brown"));
>>         doc.add(Field.Text("contents", "fox"));
>>         doc.add(Field.Text("contents", "jumped"));
>>         doc.add(Field.Text("contents", "over"));
>>         doc.add(Field.Text("contents", "the"));
>>         doc.add(Field.Text("contents", "lazy"));
>>         doc.add(Field.Text("contents", "dogs"));
>>         doc.add(Field.Keyword("docnumber", "1"));
>>         writer.addDocument(doc);
>>         doc = new Document();
>>         doc.add(Field.Text("contents", "the quick brown fox jumped
>> over the lazy dogs"));
>>         doc.add(Field.Keyword("docnumber", "2"));
>>         writer.addDocument(doc);
>>         writer.close();
>>     }
>>
>>     public static void query(File indexDir) throws IOException
>>     {
>>         Query query = null;
>>         PhraseQuery pquery = new PhraseQuery();
>>         Hits hits = null;
>>
>>         try {
>>             query = QueryParser.parse("quick brown", "contents", new
>> StandardAnalyzer());
>>         } catch (Exception qe) {System.out.println(qe.toString());}
>>         if (query == null) return;
>>         System.out.println("Query: " + query.toString());
>>         IndexReader reader = IndexReader.open(indexDir);
>>         IndexSearcher searcher = new IndexSearcher(reader);
>>
>>         hits = searcher.search(query);
>>         System.out.println("Hits: " + hits.length());
>>
>>         for (int i = 0; i < hits.length(); i++)
>>         {
>>             System.out.println( hits.doc(i).get("docnumber") + " ");
>>         }
>>
>>
>>         pquery.add(new Term("contents", "quick"));
>>         pquery.add(new Term("contents", "brown"));
>>         System.out.println("PQuery: " + pquery.toString());
>>         hits = searcher.search(pquery);
>>         System.out.println("Phrase Hits: " + hits.length());
>>         for (int i = 0; i < hits.length(); i++)
>>         {
>>             System.out.println( hits.doc(i).get("docnumber") + " ");
>>         }
>>
>>         searcher.close();
>>         reader.close();
>>
>>     }
>>     public static void main(String[] args) throws Exception {
>>         if (args.length != 1) {
>>             throw new Exception("Usage: " + test.class.getName() + "
>> <index dir>");
>>         }
>>         File indexDir = new File(args[0]);
>>         test(indexDir);
>>         query(indexDir);
>>     }
>> }
>>
>> ----------------------------------------------------------------------
>> -
>> -
>> -------
>> My results:
>> Query: contents:quick contents:brown
>> Hits: 2
>> 1
>> 2
>> PQuery:
>> contents:"quick brown"
>> Phrase Hits: 1
>> 2
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 27 22:07:08 2004
Return-Path: 
 <lucene-user-return-7288-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 75811 invoked from network); 27 Feb 2004 22:07:08 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 27 Feb 2004 22:07:08 -0000
Received: (qmail 87632 invoked by uid 500); 27 Feb 2004 22:06:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 87612 invoked by uid 500); 27 Feb 2004 22:06:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 87587 invoked from network); 27 Feb 2004 22:06:50 -0000
Received: from unknown (HELO smtp02.mrf.mail.rcn.net) (207.172.4.61)
  by daedalus.apache.org with SMTP; 27 Feb 2004 22:06:50 -0000
Received: from 209-6-197-64.c3-0.smr-ubr1.sbo-smr.ma.cable.rcn.com
 ([209.6.197.64] helo=[10.0.10.99])
	by smtp02.mrf.mail.rcn.net with esmtp (Exim 3.35 #4)
	id 1Awq8G-0004Js-00
	for lucene-user@jakarta.apache.org; Fri, 27 Feb 2004 17:06:56 -0500
Subject: RE: Indexing multiple instances of the same field for each document
From: Boris Goldowsky <boris@alum.mit.edu>
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <042101c3fd54$efa19490$3c03a8c0@Pangloss>
References: <042101c3fd54$efa19490$3c03a8c0@Pangloss>
Content-Type: text/plain
Message-Id: <1077919600.8708.154.camel@yuff.moxyledge.org>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.5 (1.4.5-7) 
Date: Fri, 27 Feb 2004 17:06:56 -0500
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Fri, 2004-02-27 at 12:12, Roy Klein wrote:
> Doug,
> 
> The query results are different, I'm attaching my test code.
> 
> >> Also FYI, I found that phrase queries don't work against a field 
> >> that's been added multiple times. If I query the phrase "brown fox", 
> >> against the two example docs above, only the second matches.

> My results:
> Query: contents:quick contents:brown 
> Hits: 2 
> 1  
> 2  
> PQuery: 
> contents:"quick brown" 
> Phrase Hits: 1 
> 2 

By my intuition, what Lucene is doing here is the correct behavior.  Say
for a moment your field was author, and you index multiple authors by
having multiple occurrences of a Field named author.  So you might have:
author: John Smith
author: Mary Jones

now the query 
  author:smith author:jones 
should return this document, but the query 
  author:"john jones"
should not.  It would be unfortunate if this were "fixed" to return the
document with the phrasal query, since the two words in different fields
do not in fact occur as a phrase.

If you have "the quick brown fox..." as in your example, your indexing
code should combine them all into a single field before adding them to
the Document.

Just my humble opinion, of course...

Boris

-- 
Boris Goldowsky
boris@alum.mit.edu
www.goldowsky.com/consulting


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 27 22:59:08 2004
Return-Path: 
 <lucene-user-return-7289-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2015 invoked from network); 27 Feb 2004 22:59:08 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 27 Feb 2004 22:59:08 -0000
Received: (qmail 96102 invoked by uid 500); 27 Feb 2004 22:58:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 96077 invoked by uid 500); 27 Feb 2004 22:58:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 96063 invoked from network); 27 Feb 2004 22:58:48 -0000
Received: from unknown (HELO fargus.sitescape.com) (65.202.208.227)
  by daedalus.apache.org with SMTP; 27 Feb 2004 22:58:48 -0000
Received: from Pangloss ([216.195.213.27])
	by fargus.sitescape.com (8.11.6/8.11.6) with ESMTP id i1RMrqt22182
	for <lucene-user@jakarta.apache.org>; Fri, 27 Feb 2004 17:53:52 -0500
From: "Roy Klein" <klein@sitescape.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Indexing multiple instances of the same field for each document
Date: Fri, 27 Feb 2004 17:58:49 -0500
Message-ID: <042b01c3fd85$43e143e0$3c03a8c0@Pangloss>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
In-Reply-To: <A54C4D76-696C-11D8-85E4-000393A564E6@ehatchersolutions.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
Importance: Normal
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I think it's got something to do with Document.invertDocument().

When I reverse the words in the phrase, the other document matches the
phrase query.

    Roy

   

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: Friday, February 27, 2004 4:34 PM
To: Lucene Users List
Subject: Re: Indexing multiple instances of the same field for each
document


On Feb 27, 2004, at 4:10 PM, Roy Klein wrote:
> Hi Erik,
>
> While you might be right in this example (using Field.Keyword), I can 
> see how this would still be a problem in other cases. For instance, if

> I were adding more than one word at a time in the example I attached.

I concur that it appears to be a bug.  It is unlikely folks use Lucene 
like this too much though - there probably are not too many scenarios 
where combining things into a single String or Reader is a burden.

I'm interested to know where in the code this oddity occurs so I can 
understand it more.  I did a brief bit of troubleshooting but haven't 
figured it out yet.  Something in DocumentWriter I presume.

	Erik



>
>     Roy
>
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Friday, February 27, 2004 2:12 PM
> To: Lucene Users List
> Subject: Re: Indexing multiple instances of the same field for each 
> document
>
>
> Roy,
>
> On Feb 27, 2004, at 12:12 PM, Roy Klein wrote:
>>         Document doc = new Document();
>>         doc.add(Field.Text("contents", "the"));
>
> Changing these to Field.Keyword gets it to work.  I'm delving a little

> bit to understand why, but it seems if you are adding words 
> individually anyway you'd want them to be untokenized, right?
>
> 	Erik
>
>
>>         doc.add(Field.Text("contents", "quick"));
>>         doc.add(Field.Text("contents", "brown"));
>>         doc.add(Field.Text("contents", "fox"));
>>         doc.add(Field.Text("contents", "jumped"));
>>         doc.add(Field.Text("contents", "over"));
>>         doc.add(Field.Text("contents", "the"));
>>         doc.add(Field.Text("contents", "lazy"));
>>         doc.add(Field.Text("contents", "dogs"));
>>         doc.add(Field.Keyword("docnumber", "1"));
>>         writer.addDocument(doc);
>>         doc = new Document();
>>         doc.add(Field.Text("contents", "the quick brown fox jumped 
>> over the lazy dogs"));
>>         doc.add(Field.Keyword("docnumber", "2"));
>>         writer.addDocument(doc);
>>         writer.close();
>>     }
>>
>>     public static void query(File indexDir) throws IOException
>>     {
>>         Query query = null;
>>         PhraseQuery pquery = new PhraseQuery();
>>         Hits hits = null;
>>
>>         try {
>>             query = QueryParser.parse("quick brown", "contents", new 
>> StandardAnalyzer());
>>         } catch (Exception qe) {System.out.println(qe.toString());}
>>         if (query == null) return;
>>         System.out.println("Query: " + query.toString());
>>         IndexReader reader = IndexReader.open(indexDir);
>>         IndexSearcher searcher = new IndexSearcher(reader);
>>
>>         hits = searcher.search(query);
>>         System.out.println("Hits: " + hits.length());
>>
>>         for (int i = 0; i < hits.length(); i++)
>>         {
>>             System.out.println( hits.doc(i).get("docnumber") + " ");
>>         }
>>
>>
>>         pquery.add(new Term("contents", "quick"));
>>         pquery.add(new Term("contents", "brown"));
>>         System.out.println("PQuery: " + pquery.toString());
>>         hits = searcher.search(pquery);
>>         System.out.println("Phrase Hits: " + hits.length());
>>         for (int i = 0; i < hits.length(); i++)
>>         {
>>             System.out.println( hits.doc(i).get("docnumber") + " ");
>>         }
>>
>>         searcher.close();
>>         reader.close();
>>
>>     }
>>     public static void main(String[] args) throws Exception {
>>         if (args.length != 1) {
>>             throw new Exception("Usage: " + test.class.getName() + " 
>> <index dir>");
>>         }
>>         File indexDir = new File(args[0]);
>>         test(indexDir);
>>         query(indexDir);
>>     }
>> }
>>
>> ---------------------------------------------------------------------
>> -
>> -
>> -
>> -------
>> My results:
>> Query: contents:quick contents:brown
>> Hits: 2
>> 1
>> 2
>> PQuery:
>> contents:"quick brown"
>> Phrase Hits: 1
>> 2
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 27 23:18:05 2004
Return-Path: 
 <lucene-user-return-7290-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9504 invoked from network); 27 Feb 2004 23:18:05 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 27 Feb 2004 23:18:05 -0000
Received: (qmail 29639 invoked by uid 500); 27 Feb 2004 23:17:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 29611 invoked by uid 500); 27 Feb 2004 23:17:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 29564 invoked from network); 27 Feb 2004 23:17:44 -0000
Received: from unknown (HELO rwcrmhc13.comcast.net) (204.127.198.39)
  by daedalus.apache.org with SMTP; 27 Feb 2004 23:17:44 -0000
Received: from apache.org (c-24-5-145-151.client.comcast.net[24.5.145.151])
          by comcast.net (rwcrmhc13) with ESMTP
          id <200402272317510150045raee>; Fri, 27 Feb 2004 23:17:51 +0000
Message-ID: <403FD019.5020404@apache.org>
Date: Fri, 27 Feb 2004 15:17:45 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040116
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Indexing multiple instances of the same field for each document
References: <042b01c3fd85$43e143e0$3c03a8c0@Pangloss>
In-Reply-To: <042b01c3fd85$43e143e0$3c03a8c0@Pangloss>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I think it's document.add().  Fields are pushed onto the front, rather 
than added to the end.

Doug

Roy Klein wrote:
> I think it's got something to do with Document.invertDocument().
> 
> When I reverse the words in the phrase, the other document matches the
> phrase query.
> 
>     Roy
> 
>    
> 
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
> Sent: Friday, February 27, 2004 4:34 PM
> To: Lucene Users List
> Subject: Re: Indexing multiple instances of the same field for each
> document
> 
> 
> On Feb 27, 2004, at 4:10 PM, Roy Klein wrote:
> 
>>Hi Erik,
>>
>>While you might be right in this example (using Field.Keyword), I can 
>>see how this would still be a problem in other cases. For instance, if
> 
> 
>>I were adding more than one word at a time in the example I attached.
> 
> 
> I concur that it appears to be a bug.  It is unlikely folks use Lucene 
> like this too much though - there probably are not too many scenarios 
> where combining things into a single String or Reader is a burden.
> 
> I'm interested to know where in the code this oddity occurs so I can 
> understand it more.  I did a brief bit of troubleshooting but haven't 
> figured it out yet.  Something in DocumentWriter I presume.
> 
> 	Erik
> 
> 
> 
> 
>>    Roy
>>
>>
>>-----Original Message-----
>>From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>>Sent: Friday, February 27, 2004 2:12 PM
>>To: Lucene Users List
>>Subject: Re: Indexing multiple instances of the same field for each 
>>document
>>
>>
>>Roy,
>>
>>On Feb 27, 2004, at 12:12 PM, Roy Klein wrote:
>>
>>>        Document doc = new Document();
>>>        doc.add(Field.Text("contents", "the"));
>>
>>Changing these to Field.Keyword gets it to work.  I'm delving a little
> 
> 
>>bit to understand why, but it seems if you are adding words 
>>individually anyway you'd want them to be untokenized, right?
>>
>>	Erik
>>
>>
>>
>>>        doc.add(Field.Text("contents", "quick"));
>>>        doc.add(Field.Text("contents", "brown"));
>>>        doc.add(Field.Text("contents", "fox"));
>>>        doc.add(Field.Text("contents", "jumped"));
>>>        doc.add(Field.Text("contents", "over"));
>>>        doc.add(Field.Text("contents", "the"));
>>>        doc.add(Field.Text("contents", "lazy"));
>>>        doc.add(Field.Text("contents", "dogs"));
>>>        doc.add(Field.Keyword("docnumber", "1"));
>>>        writer.addDocument(doc);
>>>        doc = new Document();
>>>        doc.add(Field.Text("contents", "the quick brown fox jumped 
>>>over the lazy dogs"));
>>>        doc.add(Field.Keyword("docnumber", "2"));
>>>        writer.addDocument(doc);
>>>        writer.close();
>>>    }
>>>
>>>    public static void query(File indexDir) throws IOException
>>>    {
>>>        Query query = null;
>>>        PhraseQuery pquery = new PhraseQuery();
>>>        Hits hits = null;
>>>
>>>        try {
>>>            query = QueryParser.parse("quick brown", "contents", new 
>>>StandardAnalyzer());
>>>        } catch (Exception qe) {System.out.println(qe.toString());}
>>>        if (query == null) return;
>>>        System.out.println("Query: " + query.toString());
>>>        IndexReader reader = IndexReader.open(indexDir);
>>>        IndexSearcher searcher = new IndexSearcher(reader);
>>>
>>>        hits = searcher.search(query);
>>>        System.out.println("Hits: " + hits.length());
>>>
>>>        for (int i = 0; i < hits.length(); i++)
>>>        {
>>>            System.out.println( hits.doc(i).get("docnumber") + " ");
>>>        }
>>>
>>>
>>>        pquery.add(new Term("contents", "quick"));
>>>        pquery.add(new Term("contents", "brown"));
>>>        System.out.println("PQuery: " + pquery.toString());
>>>        hits = searcher.search(pquery);
>>>        System.out.println("Phrase Hits: " + hits.length());
>>>        for (int i = 0; i < hits.length(); i++)
>>>        {
>>>            System.out.println( hits.doc(i).get("docnumber") + " ");
>>>        }
>>>
>>>        searcher.close();
>>>        reader.close();
>>>
>>>    }
>>>    public static void main(String[] args) throws Exception {
>>>        if (args.length != 1) {
>>>            throw new Exception("Usage: " + test.class.getName() + " 
>>><index dir>");
>>>        }
>>>        File indexDir = new File(args[0]);
>>>        test(indexDir);
>>>        query(indexDir);
>>>    }
>>>}
>>>
>>>---------------------------------------------------------------------
>>>-
>>>-
>>>-
>>>-------
>>>My results:
>>>Query: contents:quick contents:brown
>>>Hits: 2
>>>1
>>>2
>>>PQuery:
>>>contents:"quick brown"
>>>Phrase Hits: 1
>>>2
>>>
>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Fri Feb 27 23:27:08 2004
Return-Path: 
 <lucene-user-return-7291-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 15559 invoked from network); 27 Feb 2004 23:27:08 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 27 Feb 2004 23:27:08 -0000
Received: (qmail 50158 invoked by uid 500); 27 Feb 2004 23:26:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 50031 invoked by uid 500); 27 Feb 2004 23:26:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 50013 invoked from network); 27 Feb 2004 23:26:49 -0000
Received: from unknown (HELO mere.cirano.qc.ca) (207.162.57.103)
  by daedalus.apache.org with SMTP; 27 Feb 2004 23:26:49 -0000
Received: from mere.cirano.qc.ca (localhost.localdomain [127.0.0.1])
	by mere.cirano.qc.ca (8.12.8/8.12.8) with ESMTP id i1RNQtuv010526
	for <lucene-user@jakarta.apache.org>; Fri, 27 Feb 2004 18:26:55 -0500
Received: from localhost (vauchers@localhost)
	by mere.cirano.qc.ca (8.12.8/8.12.8/Submit) with ESMTP id i1RNQt4g010522
	for <lucene-user@jakarta.apache.org>; Fri, 27 Feb 2004 18:26:55 -0500
X-Authentication-Warning: mere.cirano.qc.ca: vauchers owned process doing -bs
Date: Fri, 27 Feb 2004 18:26:55 -0500 (EST)
From: Stephane James Vaucher <vauchers@cirano.qc.ca>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Field boosting Was: Indexing multiple instances of the same field
 for each document
In-Reply-To: <403FD019.5020404@apache.org>
Message-ID: <Pine.LNX.4.44.0402271819430.7960-100000@mere.cirano.qc.ca>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Slightly off topic to this thread, but how would adding different fields 
with the same name deal with boosts? I've looked at the javadoc and FAQ, 
but I think it's not a common use of this feature, any insight?

E.G.
Document doc = new Document();
Field f1 = Field.Keyword("fieldName", "foo");
f1.setBoost(1);
doc.add(f1);

Field f2 = Field.Keyword("fieldName", "bar");
f2.setBoost(2);
doc.add(f2);

Cheers,
sv

On Fri, 27 Feb 2004, Doug Cutting wrote:

> I think it's document.add().  Fields are pushed onto the front, rather 
> than added to the end.
> 
> Doug
> 
> Roy Klein wrote:
> > I think it's got something to do with Document.invertDocument().
> > 
> > When I reverse the words in the phrase, the other document matches the
> > phrase query.
> > 
> >     Roy
> > 
> >    
> > 
> > -----Original Message-----
> > From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
> > Sent: Friday, February 27, 2004 4:34 PM
> > To: Lucene Users List
> > Subject: Re: Indexing multiple instances of the same field for each
> > document
> > 
> > 
> > On Feb 27, 2004, at 4:10 PM, Roy Klein wrote:
> > 
> >>Hi Erik,
> >>
> >>While you might be right in this example (using Field.Keyword), I can 
> >>see how this would still be a problem in other cases. For instance, if
> > 
> > 
> >>I were adding more than one word at a time in the example I attached.
> > 
> > 
> > I concur that it appears to be a bug.  It is unlikely folks use Lucene 
> > like this too much though - there probably are not too many scenarios 
> > where combining things into a single String or Reader is a burden.
> > 
> > I'm interested to know where in the code this oddity occurs so I can 
> > understand it more.  I did a brief bit of troubleshooting but haven't 
> > figured it out yet.  Something in DocumentWriter I presume.
> > 
> > 	Erik
> > 
> > 
> > 
> > 
> >>    Roy
> >>
> >>
> >>-----Original Message-----
> >>From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> >>Sent: Friday, February 27, 2004 2:12 PM
> >>To: Lucene Users List
> >>Subject: Re: Indexing multiple instances of the same field for each 
> >>document
> >>
> >>
> >>Roy,
> >>
> >>On Feb 27, 2004, at 12:12 PM, Roy Klein wrote:
> >>
> >>>        Document doc = new Document();
> >>>        doc.add(Field.Text("contents", "the"));
> >>
> >>Changing these to Field.Keyword gets it to work.  I'm delving a little
> > 
> > 
> >>bit to understand why, but it seems if you are adding words 
> >>individually anyway you'd want them to be untokenized, right?
> >>
> >>	Erik
> >>
> >>
> >>
> >>>        doc.add(Field.Text("contents", "quick"));
> >>>        doc.add(Field.Text("contents", "brown"));
> >>>        doc.add(Field.Text("contents", "fox"));
> >>>        doc.add(Field.Text("contents", "jumped"));
> >>>        doc.add(Field.Text("contents", "over"));
> >>>        doc.add(Field.Text("contents", "the"));
> >>>        doc.add(Field.Text("contents", "lazy"));
> >>>        doc.add(Field.Text("contents", "dogs"));
> >>>        doc.add(Field.Keyword("docnumber", "1"));
> >>>        writer.addDocument(doc);
> >>>        doc = new Document();
> >>>        doc.add(Field.Text("contents", "the quick brown fox jumped 
> >>>over the lazy dogs"));
> >>>        doc.add(Field.Keyword("docnumber", "2"));
> >>>        writer.addDocument(doc);
> >>>        writer.close();
> >>>    }
> >>>
> >>>    public static void query(File indexDir) throws IOException
> >>>    {
> >>>        Query query = null;
> >>>        PhraseQuery pquery = new PhraseQuery();
> >>>        Hits hits = null;
> >>>
> >>>        try {
> >>>            query = QueryParser.parse("quick brown", "contents", new 
> >>>StandardAnalyzer());
> >>>        } catch (Exception qe) {System.out.println(qe.toString());}
> >>>        if (query == null) return;
> >>>        System.out.println("Query: " + query.toString());
> >>>        IndexReader reader = IndexReader.open(indexDir);
> >>>        IndexSearcher searcher = new IndexSearcher(reader);
> >>>
> >>>        hits = searcher.search(query);
> >>>        System.out.println("Hits: " + hits.length());
> >>>
> >>>        for (int i = 0; i < hits.length(); i++)
> >>>        {
> >>>            System.out.println( hits.doc(i).get("docnumber") + " ");
> >>>        }
> >>>
> >>>
> >>>        pquery.add(new Term("contents", "quick"));
> >>>        pquery.add(new Term("contents", "brown"));
> >>>        System.out.println("PQuery: " + pquery.toString());
> >>>        hits = searcher.search(pquery);
> >>>        System.out.println("Phrase Hits: " + hits.length());
> >>>        for (int i = 0; i < hits.length(); i++)
> >>>        {
> >>>            System.out.println( hits.doc(i).get("docnumber") + " ");
> >>>        }
> >>>
> >>>        searcher.close();
> >>>        reader.close();
> >>>
> >>>    }
> >>>    public static void main(String[] args) throws Exception {
> >>>        if (args.length != 1) {
> >>>            throw new Exception("Usage: " + test.class.getName() + " 
> >>><index dir>");
> >>>        }
> >>>        File indexDir = new File(args[0]);
> >>>        test(indexDir);
> >>>        query(indexDir);
> >>>    }
> >>>}
> >>>
> >>>---------------------------------------------------------------------
> >>>-
> >>>-
> >>>-
> >>>-------
> >>>My results:
> >>>Query: contents:quick contents:brown
> >>>Hits: 2
> >>>1
> >>>2
> >>>PQuery:
> >>>contents:"quick brown"
> >>>Phrase Hits: 1
> >>>2
> >>>
> >>>
> >>>---------------------------------------------------------------------
> >>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>
> >>
> >>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>
> >>
> >>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > 
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sat Feb 28 03:28:29 2004
Return-Path: 
 <lucene-user-return-7292-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8024 invoked from network); 28 Feb 2004 03:28:29 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 28 Feb 2004 03:28:29 -0000
Received: (qmail 12807 invoked by uid 500); 28 Feb 2004 03:28:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12781 invoked by uid 500); 28 Feb 2004 03:28:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 12768 invoked from network); 28 Feb 2004 03:28:05 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.65)
  by daedalus.apache.org with SMTP; 28 Feb 2004 03:28:05 -0000
Received: (cpmta 13584 invoked from network); 27 Feb 2004 19:28:14 -0800
Received: from 24.51.109.181 (HELO ?192.168.1.102?)
  by smtp.hatcher.net (209.228.32.65) with SMTP; 27 Feb 2004 19:28:14 -0800
X-Sent: 28 Feb 2004 03:28:14 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <403FD019.5020404@apache.org>
References: <042b01c3fd85$43e143e0$3c03a8c0@Pangloss>
 <403FD019.5020404@apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <21DE5C06-699E-11D8-A87F-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Indexing multiple instances of the same field for each document
Date: Fri, 27 Feb 2004 22:28:10 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 27, 2004, at 6:17 PM, Doug Cutting wrote:
> I think it's document.add().  Fields are pushed onto the front, rather 
> than added to the end.

Ah, ok.... DocumentFieldList/DocumentFieldEnumeration are the culprits.

This is certainly a bug.  With things going in reverse order as they 
are now, a PhraseQuery for "brown quick" matches this document:

     doc.add(Field.Keyword("contents", "quick"));
     doc.add(Field.Keyword("contents", "brown"));

There is merit to what Boris said about phrase queries not matching 
across, but if that effect is desired the position increments can be 
adjusted somehow (but how could someone do this?  a stateful analyzer?)

I don't personally see why you would index text in chunks like this 
rather than aggregating it all into a Reader or String, so certainly 
this is an uncommon usage pattern.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sat Feb 28 03:48:10 2004
Return-Path: 
 <lucene-user-return-7293-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 18197 invoked from network); 28 Feb 2004 03:48:10 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 28 Feb 2004 03:48:10 -0000
Received: (qmail 26377 invoked by uid 500); 28 Feb 2004 03:47:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26157 invoked by uid 500); 28 Feb 2004 03:47:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26144 invoked from network); 28 Feb 2004 03:47:46 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.77)
  by daedalus.apache.org with SMTP; 28 Feb 2004 03:47:46 -0000
Received: (cpmta 1309 invoked from network); 27 Feb 2004 19:47:55 -0800
Received: from 24.51.109.181 (HELO ?192.168.1.102?)
  by smtp.hatcher.net (209.228.32.77) with SMTP; 27 Feb 2004 19:47:55 -0800
X-Sent: 28 Feb 2004 03:47:55 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <Pine.LNX.4.44.0402271819430.7960-100000@mere.cirano.qc.ca>
References: <Pine.LNX.4.44.0402271819430.7960-100000@mere.cirano.qc.ca>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E1E791FC-69A0-11D8-A87F-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Field boosting Was: Indexing multiple instances of the same field
 for each document
Date: Fri, 27 Feb 2004 22:47:51 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 27, 2004, at 6:26 PM, Stephane James Vaucher wrote:
> Slightly off topic to this thread, but how would adding different  
> fields
> with the same name deal with boosts? I've looked at the javadoc and  
> FAQ,
> but I think it's not a common use of this feature, any insight?

There is only one boost per field name.  However, the effect is the  
multiplication of them all interestingly.  So, in your example below,  
the boost of the "fieldName" is 2.

	Erik

>
> E.G.
> Document doc = new Document();
> Field f1 = Field.Keyword("fieldName", "foo");
> f1.setBoost(1);
> doc.add(f1);
>
> Field f2 = Field.Keyword("fieldName", "bar");
> f2.setBoost(2);
> doc.add(f2);
>
> Cheers,
> sv
>
> On Fri, 27 Feb 2004, Doug Cutting wrote:
>
>> I think it's document.add().  Fields are pushed onto the front, rather
>> than added to the end.
>>
>> Doug
>>
>> Roy Klein wrote:
>>> I think it's got something to do with Document.invertDocument().
>>>
>>> When I reverse the words in the phrase, the other document matches  
>>> the
>>> phrase query.
>>>
>>>     Roy
>>>
>>>
>>>
>>> -----Original Message-----
>>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>>> Sent: Friday, February 27, 2004 4:34 PM
>>> To: Lucene Users List
>>> Subject: Re: Indexing multiple instances of the same field for each
>>> document
>>>
>>>
>>> On Feb 27, 2004, at 4:10 PM, Roy Klein wrote:
>>>
>>>> Hi Erik,
>>>>
>>>> While you might be right in this example (using Field.Keyword), I  
>>>> can
>>>> see how this would still be a problem in other cases. For instance,  
>>>> if
>>>
>>>
>>>> I were adding more than one word at a time in the example I  
>>>> attached.
>>>
>>>
>>> I concur that it appears to be a bug.  It is unlikely folks use  
>>> Lucene
>>> like this too much though - there probably are not too many scenarios
>>> where combining things into a single String or Reader is a burden.
>>>
>>> I'm interested to know where in the code this oddity occurs so I can
>>> understand it more.  I did a brief bit of troubleshooting but haven't
>>> figured it out yet.  Something in DocumentWriter I presume.
>>>
>>> 	Erik
>>>
>>>
>>>
>>>
>>>>    Roy
>>>>
>>>>
>>>> -----Original Message-----
>>>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>>>> Sent: Friday, February 27, 2004 2:12 PM
>>>> To: Lucene Users List
>>>> Subject: Re: Indexing multiple instances of the same field for each
>>>> document
>>>>
>>>>
>>>> Roy,
>>>>
>>>> On Feb 27, 2004, at 12:12 PM, Roy Klein wrote:
>>>>
>>>>>        Document doc = new Document();
>>>>>        doc.add(Field.Text("contents", "the"));
>>>>
>>>> Changing these to Field.Keyword gets it to work.  I'm delving a  
>>>> little
>>>
>>>
>>>> bit to understand why, but it seems if you are adding words
>>>> individually anyway you'd want them to be untokenized, right?
>>>>
>>>> 	Erik
>>>>
>>>>
>>>>
>>>>>        doc.add(Field.Text("contents", "quick"));
>>>>>        doc.add(Field.Text("contents", "brown"));
>>>>>        doc.add(Field.Text("contents", "fox"));
>>>>>        doc.add(Field.Text("contents", "jumped"));
>>>>>        doc.add(Field.Text("contents", "over"));
>>>>>        doc.add(Field.Text("contents", "the"));
>>>>>        doc.add(Field.Text("contents", "lazy"));
>>>>>        doc.add(Field.Text("contents", "dogs"));
>>>>>        doc.add(Field.Keyword("docnumber", "1"));
>>>>>        writer.addDocument(doc);
>>>>>        doc = new Document();
>>>>>        doc.add(Field.Text("contents", "the quick brown fox jumped
>>>>> over the lazy dogs"));
>>>>>        doc.add(Field.Keyword("docnumber", "2"));
>>>>>        writer.addDocument(doc);
>>>>>        writer.close();
>>>>>    }
>>>>>
>>>>>    public static void query(File indexDir) throws IOException
>>>>>    {
>>>>>        Query query = null;
>>>>>        PhraseQuery pquery = new PhraseQuery();
>>>>>        Hits hits = null;
>>>>>
>>>>>        try {
>>>>>            query = QueryParser.parse("quick brown", "contents", new
>>>>> StandardAnalyzer());
>>>>>        } catch (Exception qe) {System.out.println(qe.toString());}
>>>>>        if (query == null) return;
>>>>>        System.out.println("Query: " + query.toString());
>>>>>        IndexReader reader = IndexReader.open(indexDir);
>>>>>        IndexSearcher searcher = new IndexSearcher(reader);
>>>>>
>>>>>        hits = searcher.search(query);
>>>>>        System.out.println("Hits: " + hits.length());
>>>>>
>>>>>        for (int i = 0; i < hits.length(); i++)
>>>>>        {
>>>>>            System.out.println( hits.doc(i).get("docnumber") + " ");
>>>>>        }
>>>>>
>>>>>
>>>>>        pquery.add(new Term("contents", "quick"));
>>>>>        pquery.add(new Term("contents", "brown"));
>>>>>        System.out.println("PQuery: " + pquery.toString());
>>>>>        hits = searcher.search(pquery);
>>>>>        System.out.println("Phrase Hits: " + hits.length());
>>>>>        for (int i = 0; i < hits.length(); i++)
>>>>>        {
>>>>>            System.out.println( hits.doc(i).get("docnumber") + " ");
>>>>>        }
>>>>>
>>>>>        searcher.close();
>>>>>        reader.close();
>>>>>
>>>>>    }
>>>>>    public static void main(String[] args) throws Exception {
>>>>>        if (args.length != 1) {
>>>>>            throw new Exception("Usage: " + test.class.getName() + "
>>>>> <index dir>");
>>>>>        }
>>>>>        File indexDir = new File(args[0]);
>>>>>        test(indexDir);
>>>>>        query(indexDir);
>>>>>    }
>>>>> }
>>>>>
>>>>> ------------------------------------------------------------------- 
>>>>> --
>>>>> -
>>>>> -
>>>>> -
>>>>> -------
>>>>> My results:
>>>>> Query: contents:quick contents:brown
>>>>> Hits: 2
>>>>> 1
>>>>> 2
>>>>> PQuery:
>>>>> contents:"quick brown"
>>>>> Phrase Hits: 1
>>>>> 2
>>>>>
>>>>>
>>>>> ------------------------------------------------------------------- 
>>>>> --
>>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>> For additional commands, e-mail:  
>>>>> lucene-user-help@jakarta.apache.org
>>>>
>>>>
>>>> -------------------------------------------------------------------- 
>>>> -
>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>
>>>>
>>>> -------------------------------------------------------------------- 
>>>> -
>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sat Feb 28 03:58:08 2004
Return-Path: 
 <lucene-user-return-7294-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 19826 invoked from network); 28 Feb 2004 03:58:08 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 28 Feb 2004 03:58:08 -0000
Received: (qmail 35456 invoked by uid 500); 28 Feb 2004 03:57:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 35385 invoked by uid 500); 28 Feb 2004 03:57:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 35371 invoked from network); 28 Feb 2004 03:57:43 -0000
Received: from unknown (HELO hercule.cirano.qc.ca) (207.162.57.26)
  by daedalus.apache.org with SMTP; 28 Feb 2004 03:57:43 -0000
Received: from localhost (vauchers@localhost)
	by hercule.cirano.qc.ca (8.11.6/8.11.0) with ESMTP id i1S3vqh22705
	for <lucene-user@jakarta.apache.org>; Fri, 27 Feb 2004 22:57:52 -0500
X-Authentication-Warning: hercule.cirano.qc.ca: vauchers owned process doing
 -bs
Date: Fri, 27 Feb 2004 22:57:52 -0500 (EST)
From: Stephane James Vaucher <vauchers@cirano.qc.ca>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Field boosting Was: Indexing multiple instances of the same
 field for each document
In-Reply-To: <E1E791FC-69A0-11D8-A87F-000393A564E6@ehatchersolutions.com>
Message-ID: <Pine.LNX.4.33.0402272252560.21496-100000@hercule.cirano.qc.ca>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Cheers, I index information in chunks. The reason for this is that I have
an IR tool that returns information ordered by confidence rather than by
the fields I index. I just add fields as they come, but I would be
interested in knowing how other people deal with confidence. Following
your answer, I can't add my confidence as boosts to the terms as I index
them, do you have any suggestions? I'm guessing that I'll probably have to
add multiple copies of my fields to simulate boosting.

sv

On Fri, 27 Feb 2004, Erik Hatcher wrote:

> On Feb 27, 2004, at 6:26 PM, Stephane James Vaucher wrote:
> > Slightly off topic to this thread, but how would adding different
> > fields
> > with the same name deal with boosts? I've looked at the javadoc and
> > FAQ,
> > but I think it's not a common use of this feature, any insight?
>
> There is only one boost per field name.  However, the effect is the
> multiplication of them all interestingly.  So, in your example below,
> the boost of the "fieldName" is 2.
>
> 	Erik
>
> >
> > E.G.
> > Document doc = new Document();
> > Field f1 = Field.Keyword("fieldName", "foo");
> > f1.setBoost(1);
> > doc.add(f1);
> >
> > Field f2 = Field.Keyword("fieldName", "bar");
> > f2.setBoost(2);
> > doc.add(f2);
> >
> > Cheers,
> > sv
> >
> > On Fri, 27 Feb 2004, Doug Cutting wrote:
> >
> >> I think it's document.add().  Fields are pushed onto the front, rather
> >> than added to the end.
> >>
> >> Doug
> >>
> >> Roy Klein wrote:
> >>> I think it's got something to do with Document.invertDocument().
> >>>
> >>> When I reverse the words in the phrase, the other document matches
> >>> the
> >>> phrase query.
> >>>
> >>>     Roy
> >>>
> >>>
> >>>
> >>> -----Original Message-----
> >>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> >>> Sent: Friday, February 27, 2004 4:34 PM
> >>> To: Lucene Users List
> >>> Subject: Re: Indexing multiple instances of the same field for each
> >>> document
> >>>
> >>>
> >>> On Feb 27, 2004, at 4:10 PM, Roy Klein wrote:
> >>>
> >>>> Hi Erik,
> >>>>
> >>>> While you might be right in this example (using Field.Keyword), I
> >>>> can
> >>>> see how this would still be a problem in other cases. For instance,
> >>>> if
> >>>
> >>>
> >>>> I were adding more than one word at a time in the example I
> >>>> attached.
> >>>
> >>>
> >>> I concur that it appears to be a bug.  It is unlikely folks use
> >>> Lucene
> >>> like this too much though - there probably are not too many scenarios
> >>> where combining things into a single String or Reader is a burden.
> >>>
> >>> I'm interested to know where in the code this oddity occurs so I can
> >>> understand it more.  I did a brief bit of troubleshooting but haven't
> >>> figured it out yet.  Something in DocumentWriter I presume.
> >>>
> >>> 	Erik
> >>>
> >>>
> >>>
> >>>
> >>>>    Roy
> >>>>
> >>>>
> >>>> -----Original Message-----
> >>>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> >>>> Sent: Friday, February 27, 2004 2:12 PM
> >>>> To: Lucene Users List
> >>>> Subject: Re: Indexing multiple instances of the same field for each
> >>>> document
> >>>>
> >>>>
> >>>> Roy,
> >>>>
> >>>> On Feb 27, 2004, at 12:12 PM, Roy Klein wrote:
> >>>>
> >>>>>        Document doc = new Document();
> >>>>>        doc.add(Field.Text("contents", "the"));
> >>>>
> >>>> Changing these to Field.Keyword gets it to work.  I'm delving a
> >>>> little
> >>>
> >>>
> >>>> bit to understand why, but it seems if you are adding words
> >>>> individually anyway you'd want them to be untokenized, right?
> >>>>
> >>>> 	Erik
> >>>>
> >>>>
> >>>>
> >>>>>        doc.add(Field.Text("contents", "quick"));
> >>>>>        doc.add(Field.Text("contents", "brown"));
> >>>>>        doc.add(Field.Text("contents", "fox"));
> >>>>>        doc.add(Field.Text("contents", "jumped"));
> >>>>>        doc.add(Field.Text("contents", "over"));
> >>>>>        doc.add(Field.Text("contents", "the"));
> >>>>>        doc.add(Field.Text("contents", "lazy"));
> >>>>>        doc.add(Field.Text("contents", "dogs"));
> >>>>>        doc.add(Field.Keyword("docnumber", "1"));
> >>>>>        writer.addDocument(doc);
> >>>>>        doc = new Document();
> >>>>>        doc.add(Field.Text("contents", "the quick brown fox jumped
> >>>>> over the lazy dogs"));
> >>>>>        doc.add(Field.Keyword("docnumber", "2"));
> >>>>>        writer.addDocument(doc);
> >>>>>        writer.close();
> >>>>>    }
> >>>>>
> >>>>>    public static void query(File indexDir) throws IOException
> >>>>>    {
> >>>>>        Query query = null;
> >>>>>        PhraseQuery pquery = new PhraseQuery();
> >>>>>        Hits hits = null;
> >>>>>
> >>>>>        try {
> >>>>>            query = QueryParser.parse("quick brown", "contents", new
> >>>>> StandardAnalyzer());
> >>>>>        } catch (Exception qe) {System.out.println(qe.toString());}
> >>>>>        if (query == null) return;
> >>>>>        System.out.println("Query: " + query.toString());
> >>>>>        IndexReader reader = IndexReader.open(indexDir);
> >>>>>        IndexSearcher searcher = new IndexSearcher(reader);
> >>>>>
> >>>>>        hits = searcher.search(query);
> >>>>>        System.out.println("Hits: " + hits.length());
> >>>>>
> >>>>>        for (int i = 0; i < hits.length(); i++)
> >>>>>        {
> >>>>>            System.out.println( hits.doc(i).get("docnumber") + " ");
> >>>>>        }
> >>>>>
> >>>>>
> >>>>>        pquery.add(new Term("contents", "quick"));
> >>>>>        pquery.add(new Term("contents", "brown"));
> >>>>>        System.out.println("PQuery: " + pquery.toString());
> >>>>>        hits = searcher.search(pquery);
> >>>>>        System.out.println("Phrase Hits: " + hits.length());
> >>>>>        for (int i = 0; i < hits.length(); i++)
> >>>>>        {
> >>>>>            System.out.println( hits.doc(i).get("docnumber") + " ");
> >>>>>        }
> >>>>>
> >>>>>        searcher.close();
> >>>>>        reader.close();
> >>>>>
> >>>>>    }
> >>>>>    public static void main(String[] args) throws Exception {
> >>>>>        if (args.length != 1) {
> >>>>>            throw new Exception("Usage: " + test.class.getName() + "
> >>>>> <index dir>");
> >>>>>        }
> >>>>>        File indexDir = new File(args[0]);
> >>>>>        test(indexDir);
> >>>>>        query(indexDir);
> >>>>>    }
> >>>>> }
> >>>>>
> >>>>> -------------------------------------------------------------------
> >>>>> --
> >>>>> -
> >>>>> -
> >>>>> -
> >>>>> -------
> >>>>> My results:
> >>>>> Query: contents:quick contents:brown
> >>>>> Hits: 2
> >>>>> 1
> >>>>> 2
> >>>>> PQuery:
> >>>>> contents:"quick brown"
> >>>>> Phrase Hits: 1
> >>>>> 2
> >>>>>
> >>>>>
> >>>>> -------------------------------------------------------------------
> >>>>> --
> >>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>> For additional commands, e-mail:
> >>>>> lucene-user-help@jakarta.apache.org
> >>>>
> >>>>
> >>>> --------------------------------------------------------------------
> >>>> -
> >>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>>
> >>>>
> >>>> --------------------------------------------------------------------
> >>>> -
> >>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>
> >>>
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sat Feb 28 04:41:15 2004
Return-Path: 
 <lucene-user-return-7295-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 29540 invoked from network); 28 Feb 2004 04:41:15 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 28 Feb 2004 04:41:15 -0000
Received: (qmail 57195 invoked by uid 500); 28 Feb 2004 04:40:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 57037 invoked by uid 500); 28 Feb 2004 04:40:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 57022 invoked from network); 28 Feb 2004 04:40:48 -0000
Received: from unknown (HELO mta1.lbl.gov) (128.3.41.24)
  by daedalus.apache.org with SMTP; 28 Feb 2004 04:40:48 -0000
Received: from mta1.lbl.gov (localhost [127.0.0.1])
	by mta1.lbl.gov (8.12.10/8.12.10) with ESMTP id i1S4etqc017063
	for <lucene-user@jakarta.apache.org>; Fri, 27 Feb 2004 20:40:56 -0800 (PST)
Received: from lbl.gov (imapb.lbl.gov [128.3.41.51])
	by mta1.lbl.gov (8.12.10/8.12.10) with ESMTP id i1S4etOW017060
	for <lucene-user@jakarta.apache.org>; Fri, 27 Feb 2004 20:40:55 -0800 (PST)
From: DMGoodstein@lbl.gov
Received: from [198.129.90.96] by imapb.lbl.gov (mshttpd); Fri, 27 Feb
 2004 20:40:55 -0800
To: lucene-user@jakarta.apache.org
Message-ID: <3c55673c50c6.3c50c63c5567@lbl.gov>
Date: Fri, 27 Feb 2004 20:40:55 -0800
X-Mailer: iPlanet Messenger Express 5.2 HotFix 1.21 (built Sep  8 2003)
MIME-Version: 1.0
Content-Language: en
Subject: problems with maxDoc() and RemoteSearchable
X-Accept-Language: en
Priority: normal
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I am instantiating a RemoteSearchable with a
file-based IndexReader:

public static void main(String args[]) throws
Exception {
    System.setSecurityManager(new RMISecurityManager());
    Searchable theLocal = new IndexSearcher(args[0]);



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sat Feb 28 04:51:04 2004
Return-Path: 
 <lucene-user-return-7296-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 31312 invoked from network); 28 Feb 2004 04:51:04 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 28 Feb 2004 04:51:04 -0000
Received: (qmail 61812 invoked by uid 500); 28 Feb 2004 04:50:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 61749 invoked by uid 500); 28 Feb 2004 04:50:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 61735 invoked from network); 28 Feb 2004 04:50:39 -0000
Received: from unknown (HELO mta1.lbl.gov) (128.3.41.24)
  by daedalus.apache.org with SMTP; 28 Feb 2004 04:50:39 -0000
Received: from mta1.lbl.gov (localhost [127.0.0.1])
	by mta1.lbl.gov (8.12.10/8.12.10) with ESMTP id i1S4olqc017573
	for <lucene-user@jakarta.apache.org>; Fri, 27 Feb 2004 20:50:48 -0800 (PST)
Received: from lbl.gov (imapb.lbl.gov [128.3.41.51])
	by mta1.lbl.gov (8.12.10/8.12.10) with ESMTP id i1S4olOW017570
	for <lucene-user@jakarta.apache.org>; Fri, 27 Feb 2004 20:50:47 -0800 (PST)
From: DMGoodstein@lbl.gov
Received: from [198.129.90.96] by imapb.lbl.gov (mshttpd); Fri, 27 Feb
 2004 20:50:47 -0800
To: lucene-user@jakarta.apache.org
Message-ID: <3befa53c1092.3c10923befa5@lbl.gov>
Date: Fri, 27 Feb 2004 20:50:47 -0800
X-Mailer: iPlanet Messenger Express 5.2 HotFix 1.21 (built Sep  8 2003)
MIME-Version: 1.0
Content-Language: en
Subject: maxDoc and RemoteSearchable problems
X-Accept-Language: en
Priority: normal
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I am instantiating a RemoteSearchable with a
file-based IndexReader:

public static void main(String args[]) throws
Exception {
    System.setSecurityManager(new RMISecurityManager());
    Searchable theLocal = new IndexSearcher(args[0]);
theLocal.maxDoc();

the maxDoc() method call causes:

Exception in thread "main"
java.lang.IncompatibleClassChangeError
at
org.apache.lucene.search.RemoteSearchable.maxDoc(RemoteSearchable.java:97)
at
org.apache.lucene.search.RemoteSearchable.main(RemoteSearchable.java:125)

I placed this method call in because a multisearcher
i was attempting to instantiating off of this
RemoteSearchable was choking on the maxDoc() method,
which it (the MultiSearcher) calls in its
constructor.  The index I'm building off of is fine
(i can instantiate an IndexReader and search against
it).  Any ideas what might be causing this would be
welcome.  I'm building from lucene-1.3-final (though
the jar builds as 1.4-rc1-dev) and I'm using
jdk1.4.1_02 on linux 2.4.7

thanks,
--David Goodstein
   Joint Genome Institute







---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sat Feb 28 10:36:44 2004
Return-Path: 
 <lucene-user-return-7297-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 39756 invoked from network); 28 Feb 2004 10:36:44 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 28 Feb 2004 10:36:44 -0000
Received: (qmail 98813 invoked by uid 500); 28 Feb 2004 10:36:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 98788 invoked by uid 500); 28 Feb 2004 10:36:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 98762 invoked from network); 28 Feb 2004 10:36:07 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.65)
  by daedalus.apache.org with SMTP; 28 Feb 2004 10:36:07 -0000
Received: (cpmta 7562 invoked from network); 28 Feb 2004 02:36:21 -0800
Received: from 24.51.109.181 (HELO ?192.168.1.102?)
  by smtp.hatcher.net (209.228.32.65) with SMTP; 28 Feb 2004 02:36:21 -0800
X-Sent: 28 Feb 2004 10:36:21 GMT
Mime-Version: 1.0 (Apple Message framework v612)
Content-Transfer-Encoding: 7bit
Message-Id: <F01A8002-69D9-11D8-8EF8-000393A564E6@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: Lucene List <lucene-dev@jakarta.apache.org>,
 lucene-user@jakarta.apache.org
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Lucene Wiki
Date: Sat, 28 Feb 2004 05:36:16 -0500
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Lucene's wiki has been migrated to:

	http://wiki.apache.org/jakarta-lucene

The old content was migrated to 
<http://wiki.apache.org/jakarta-lucene/LuceneProjectPages>

Doug has gotten on the wiki bandwagon with Nutch also: 
<http://www.nutch.org/cgi-bin/twiki/view/Main/Nutch>

I've started PoweredBy and SandBox pages.  I would like to see us 
migrate the committer maintained "powered by" to the wiki and let the 
community self-organize this, taking us committers out of the loop.

Content changes are e-mailed automatically to 
jakarta-lucene-cvs@apache.org.

Have at it folks!

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sat Feb 28 18:22:31 2004
Return-Path: 
 <lucene-user-return-7298-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 4299 invoked from network); 28 Feb 2004 18:22:31 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 28 Feb 2004 18:22:31 -0000
Received: (qmail 26244 invoked by uid 500); 28 Feb 2004 18:22:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26186 invoked by uid 500); 28 Feb 2004 18:22:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26144 invoked from network); 28 Feb 2004 18:22:03 -0000
Received: from unknown (HELO web12706.mail.yahoo.com) (216.136.173.243)
  by daedalus.apache.org with SMTP; 28 Feb 2004 18:22:03 -0000
Message-ID: <20040228182207.81508.qmail@web12706.mail.yahoo.com>
Received: from [195.29.52.160] by web12706.mail.yahoo.com via HTTP;
 Sat, 28 Feb 2004 10:22:07 PST
Date: Sat, 28 Feb 2004 10:22:07 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: RE: Concurrency
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <51194813DA293D4CA3FC4AD392F8D99305B0F369@dougal.magus.co.uk>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'm not sure what happens on Windows, but this should work just fine
under UNIX.  The files still really do exist on disk, I believe, they
are just not visible after you delete them, and under UNIX the process
will still have a references to deleted index files (inodes is the
proper term in this context, I think) even after optimization, so
IndexSearcher will work.
This is easy to test.

Otis


--- David Townsend <david.townsend@magus.co.uk> wrote:
> Does this mean that if an IndexSearcher has hold of a segment file,
> then the index is optimised, any subsequent search will use a list of
> files that probably don't exist anymore?
> 
> David Townsend
> 
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> Sent: 20 February 2004 13:26
> To: Lucene Users List
> Subject: Re: Concurrency
> 
> 
> > Ive just got a couple of questions which i cant quite work
> > out...wondered if 
> > someone could help me with them:
> > 
> > 1. What happens if i make a backup (copy) of an index while
> documents
> > are 
> > being added? Can it cause problems, and if so is there a way to
> > safely do 
> > this?
> 
> You should be okay.  When new documents are added, they are added to
> new segments.  A 'table of contents' of all valid segments is in
> 'segments' file.  Even if you copy extra segments, your index will
> still work, it's just that your searches may not search newly created
> segments, whose existence was not registered in segments file, when
> you
> copied the index.
> 
> > 2. When I create a new IndexSearcher, what method does Lucene use
> to
> > take a 
> > 'snapshot' of the index (because if i add documents after the
> search
> > object 
> > is created they dont appear in the search results)?
> 
> This is related to the answer under 1.  New documents are not seen
> with
> an old IndexSearcher, because the old IndexSearcher is not aware of
> new
> segments.
> It would have to re-read the segments file and read any new segments
> found, in order to become aware of new segments and documents in
> them.
> 
> Otis
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sat Feb 28 19:50:56 2004
Return-Path: 
 <lucene-user-return-7299-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 28620 invoked from network); 28 Feb 2004 19:50:56 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 28 Feb 2004 19:50:56 -0000
Received: (qmail 10911 invoked by uid 500); 28 Feb 2004 19:50:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 10396 invoked by uid 500); 28 Feb 2004 19:50:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 10383 invoked from network); 28 Feb 2004 19:50:41 -0000
Received: from unknown (HELO mta1.lbl.gov) (128.3.41.24)
  by daedalus.apache.org with SMTP; 28 Feb 2004 19:50:41 -0000
Received: from mta1.lbl.gov (localhost [127.0.0.1])
	by mta1.lbl.gov (8.12.10/8.12.10) with ESMTP id i1SJoiqc005464
	for <lucene-user@jakarta.apache.org>; Sat, 28 Feb 2004 11:50:44 -0800 (PST)
Received: from lbl.gov (imapb.lbl.gov [128.3.41.51])
	by mta1.lbl.gov (8.12.10/8.12.10) with ESMTP id i1SJohOW005461
	for <lucene-user@jakarta.apache.org>; Sat, 28 Feb 2004 11:50:43 -0800 (PST)
From: DMGoodstein@lbl.gov
Received: from [63.195.88.117] by imapb.lbl.gov (mshttpd); Sat, 28 Feb
 2004 11:50:43 -0800
To: Lucene Users List <lucene-user@jakarta.apache.org>
Message-ID: <3c68d03c3250.3c32503c68d0@lbl.gov>
Date: Sat, 28 Feb 2004 11:50:43 -0800
X-Mailer: iPlanet Messenger Express 5.2 HotFix 1.21 (built Sep  8 2003)
MIME-Version: 1.0
Content-Language: en
Subject: Re: maxDoc and RemoteSearchable problems
X-Accept-Language: en
Priority: normal
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

all fixed...it was caused by slightly different versions of the jvm being used to compile vs execute the classes.
--DMG

----- Original Message -----
From: DMGoodstein@lbl.gov
Date: Friday, February 27, 2004 8:50 pm
Subject: maxDoc and RemoteSearchable problems

> I am instantiating a RemoteSearchable with a
> file-based IndexReader:
> 
> public static void main(String args[]) throws
> Exception {
>    System.setSecurityManager(new RMISecurityManager());
>    Searchable theLocal = new IndexSearcher(args[0]);
> theLocal.maxDoc();
> 
> the maxDoc() method call causes:
> 
> Exception in thread "main"
> java.lang.IncompatibleClassChangeError
> at
> org.apache.lucene.search.RemoteSearchable.maxDoc(RemoteSearchable.java:97)
> at
> org.apache.lucene.search.RemoteSearchable.main(RemoteSearchable.java:125)
> 
> I placed this method call in because a multisearcher
> i was attempting to instantiating off of this
> RemoteSearchable was choking on the maxDoc() method,
> which it (the MultiSearcher) calls in its
> constructor.  The index I'm building off of is fine
> (i can instantiate an IndexReader and search against
> it).  Any ideas what might be causing this would be
> welcome.  I'm building from lucene-1.3-final (though
> the jar builds as 1.4-rc1-dev) and I'm using
> jdk1.4.1_02 on linux 2.4.7
> 
> thanks,
> --David Goodstein
>   Joint Genome Institute
> 
> 
> 
> 
> 
> 
> 
> -------------------------------------------------------------------
> --
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sat Feb 28 22:38:44 2004
Return-Path: 
 <lucene-user-return-7300-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 85544 invoked from network); 28 Feb 2004 22:38:44 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 28 Feb 2004 22:38:44 -0000
Received: (qmail 85292 invoked by uid 500); 28 Feb 2004 22:38:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 85136 invoked by uid 500); 28 Feb 2004 22:38:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 85122 invoked from network); 28 Feb 2004 22:38:25 -0000
Received: from unknown (HELO cmailg4.svr.pol.co.uk) (195.92.195.174)
  by daedalus.apache.org with SMTP; 28 Feb 2004 22:38:25 -0000
Received: from modem-2239.leopard.dialup.pol.co.uk ([217.135.152.191]
 helo=mainbox)
	by cmailg4.svr.pol.co.uk with smtp (Exim 4.14)
	id 1AxD6N-0007Zt-0S; Sat, 28 Feb 2004 22:38:31 +0000
Message-ID: <000801c3fe4b$9788e7c0$bf9887d9@mainbox>
From: "Moray McConnachie \(OA\)" <mmcconna@oxford-analytica.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: 
 <E2BD45AC723BD711836900B0D03E0FD709B006@mailer.oxford-analytica.com>
 <1A4E75B8-693F-11D8-8DB7-000393A564E6@ehatchersolutions.com>
Subject: Re: Indexing multiple instances of the same field for each docume nt
Date: Sat, 28 Feb 2004 22:38:30 -0000
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

----- Original Message ----- 
From: "Erik Hatcher" <erik@ehatchersolutions.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Friday, February 27, 2004 4:07 PM
Subject: Re: Indexing multiple instances of the same field for each docume
nt

> > Does this mean that whenever I want to do keyword searches, I must
> > avoid
> > QueryParser?
>
> Not necessarily.  This is a bit of an involved issue, and I posted a
> more extensive reply on this a few weeks ago (pasting a bit of our
> Lucene in Action discussion on it - perhaps search for
> "KeywordAnalyzer" to find that mail)
>
> Look into PerFieldAnalyzerWrapper.

Thanks for this tip, I've mostly done it now using this route - I guess one
could also derive a new Analyzer that does a switch on the basis of
FieldName but that wouldn't be so flexible.

I see from the DocumentWriter class that all keyword fields are indexed
exactly, including case-sensitivity. This really tripped me up, since my
version of the KeywordAnalyzer (left by Eric as an exercise to the reader)
was applying the LowerCaseFilter, and therefore I got no matches.

I guess the best way to handle this problem, other than getting the
application to transform values prior to query or indexing, is actually to
tokenize the field after all, but use the same KeywordAnalyzer to do it!

Yours,
Moray McConnachie


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb 29 00:55:02 2004
Return-Path: 
 <lucene-user-return-7301-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 24064 invoked from network); 29 Feb 2004 00:55:02 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 29 Feb 2004 00:55:02 -0000
Received: (qmail 31785 invoked by uid 500); 29 Feb 2004 00:54:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 31757 invoked by uid 500); 29 Feb 2004 00:54:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 31743 invoked from network); 29 Feb 2004 00:54:41 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.77)
  by daedalus.apache.org with SMTP; 29 Feb 2004 00:54:41 -0000
Received: (cpmta 22457 invoked from network); 28 Feb 2004 16:54:49 -0800
Received: from 128.143.26.2 (HELO ?128.143.26.2?)
  by smtp.hatcher.net (209.228.32.77) with SMTP; 28 Feb 2004 16:54:49 -0800
X-Sent: 29 Feb 2004 00:54:49 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <000801c3fe4b$9788e7c0$bf9887d9@mainbox>
References: 
 <E2BD45AC723BD711836900B0D03E0FD709B006@mailer.oxford-analytica.com>
 <1A4E75B8-693F-11D8-8DB7-000393A564E6@ehatchersolutions.com>
 <000801c3fe4b$9788e7c0$bf9887d9@mainbox>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <DE8670F0-6A51-11D8-89EF-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Indexing multiple instances of the same field for each docume nt
Date: Sat, 28 Feb 2004 19:54:46 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Feb 28, 2004, at 5:38 PM, Moray McConnachie (OA) wrote:
> ----- Original Message -----
> I guess the best way to handle this problem, other than getting the
> application to transform values prior to query or indexing, is 
> actually to
> tokenize the field after all, but use the same KeywordAnalyzer to do 
> it!

Bingo... this is the same thinking I've had on this subject.  Why even 
bother with Field.Keyword and the confusion that occurs with 
QueryParser and such?  Just use a KeywordAnalyzer and 
PerFieldAnalyzerWrapper setup instead for both indexing and 
querying.... at least that seems a more confusion-free route to go in a 
lot of ways.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb 29 03:06:08 2004
Return-Path: 
 <lucene-user-return-7302-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 60884 invoked from network); 29 Feb 2004 03:06:08 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 29 Feb 2004 03:06:08 -0000
Received: (qmail 28343 invoked by uid 500); 29 Feb 2004 03:05:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 28315 invoked by uid 500); 29 Feb 2004 03:05:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 28301 invoked from network); 29 Feb 2004 03:05:44 -0000
Received: from unknown (HELO fargus.sitescape.com) (65.202.208.227)
  by daedalus.apache.org with SMTP; 29 Feb 2004 03:05:44 -0000
Received: from Pangloss ([216.195.213.27])
	by fargus.sitescape.com (8.11.6/8.11.6) with ESMTP id i1T30ft05363
	for <lucene-user@jakarta.apache.org>; Sat, 28 Feb 2004 22:00:41 -0500
From: "Roy Klein" <klein@sitescape.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Indexing multiple instances of the same field for each document
Date: Sat, 28 Feb 2004 22:05:42 -0500
Message-ID: <043301c3fe70$eb010250$3c03a8c0@Pangloss>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
In-Reply-To: <21DE5C06-699E-11D8-A87F-000393A564E6@ehatchersolutions.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
Importance: Normal
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik,

Indexing a single field in chunks solves a design problem I'm working
on. It's not the only way to do it, but, it would certainly be the most
straightforward.  However, if using this method makes phrase searching
unusable, then I'll have to go another route.

Here's a brief example of the type of thing I'm trying to do:

I have a file that contains the words:

The quick brown fox jumped over the lazy dog.

I run that file through a utility that produces the following xml
document:
<document>
  <field name=wordposition1>
    <word>The</word>
  </field>
  <field name=wordposition2>
    <word>quick</word>
    <word>fast</word>
    <word>speedy</word>
  </field>
  <field name=wordposition3>
    <word>brown</word>
    <word>tan</word>
    <word>dark</word>
  </field>
  .
  .
  .

I parse that document (via the digester), and add all the words from
each of the fields to one lucene field: "contents".  The tricky part is
that I want to have each word position contain all the words at that
position in the lucene index.  I.e. word location 1 in the index
contains "The", word location 2: "quick, fast, and speedy", word
location 3: "brown, tan, and dark", etc.

That way, all the following phrase queries will match this document:
	"fast tan"
	"quick brown"
      "fast brown"

I wrote a "TermAnalyzer" that adds all the words from a field into the
index at the same position. (via setPositionIncrement(0)).  That way I
can simply add each set of words to the "contents" field, and it'll just
keep adding them to the same field.  However, since it's reversing them,
I can't match phrases.


    Roy

(I just looked at the Document class, seems like it shouldn't be that
difficult to make the DocumentFieldList add new fields onto the end
instead of the beginning of the list.  I'll try to change it, and submit
a fix once I get it working.)


-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: Friday, February 27, 2004 10:28 PM
To: Lucene Users List
Subject: Re: Indexing multiple instances of the same field for each
document


>I don't personally see why you would index text in chunks like this 
>rather than aggregating it all into a Reader or String, so certainly 
>this is an uncommon usage pattern.
>
>	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb 29 10:45:44 2004
Return-Path: 
 <lucene-user-return-7303-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 94972 invoked from network); 29 Feb 2004 10:45:44 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 29 Feb 2004 10:45:44 -0000
Received: (qmail 44260 invoked by uid 500); 29 Feb 2004 10:45:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 44163 invoked by uid 500); 29 Feb 2004 10:45:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 44136 invoked from network); 29 Feb 2004 10:45:12 -0000
Received: from unknown (HELO mail-in-01.arcor-online.net) (151.189.21.41)
  by daedalus.apache.org with SMTP; 29 Feb 2004 10:45:12 -0000
Received: from arcor.de (dialin-212-144-094-195.arcor-ip.net [212.144.94.195])
	by mail-in-01.arcor-online.net (Postfix) with ESMTP id D5E1099E713
	for <lucene-user@jakarta.apache.org>; Sun, 29 Feb 2004 11:45:24 +0100 (CET)
Message-ID: <4041C2C0.4000809@arcor.de>
Date: Sun, 29 Feb 2004 11:45:20 +0100
From: Markus Spath <mspath@arcor.de>
User-Agent: Mozilla/5.0 (Windows; U; Win98; en-US; rv:1.5) Gecko/20030925
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Indexing multiple instances of the same field for each document
References: <043301c3fe70$eb010250$3c03a8c0@Pangloss>
In-Reply-To: <043301c3fe70$eb010250$3c03a8c0@Pangloss>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Roy Klein wrote:

> Erik,
> 
> Indexing a single field in chunks solves a design problem I'm working
> on. It's not the only way to do it, but, it would certainly be the most
> straightforward.  However, if using this method makes phrase searching
> unusable, then I'll have to go another route.
> 

hmm, wouldn't it be easier to index only one term for a list of synomys instead 
of indexing each synonym for one term?

quick, fast, speedy -> quick (both when building the index and building the query)

this also would solve your problems with the (somehow counterintuative but 
probably well reasoned) behaviour of lucene to add Fields with the same name at 
the beginning instead of appending them.


Markus

> Here's a brief example of the type of thing I'm trying to do:
> 
> I have a file that contains the words:
> 
> The quick brown fox jumped over the lazy dog.
> 
> I run that file through a utility that produces the following xml
> document:
> <document>
>   <field name=wordposition1>
>     <word>The</word>
>   </field>
>   <field name=wordposition2>
>     <word>quick</word>
>     <word>fast</word>
>     <word>speedy</word>
>   </field>
>   <field name=wordposition3>
>     <word>brown</word>
>     <word>tan</word>
>     <word>dark</word>
>   </field>
>   .
>   .
>   .
> 
> I parse that document (via the digester), and add all the words from
> each of the fields to one lucene field: "contents".  The tricky part is
> that I want to have each word position contain all the words at that
> position in the lucene index.  I.e. word location 1 in the index
> contains "The", word location 2: "quick, fast, and speedy", word
> location 3: "brown, tan, and dark", etc.
> 
> That way, all the following phrase queries will match this document:
> 	"fast tan"
> 	"quick brown"
>       "fast brown"
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb 29 13:18:41 2004
Return-Path: 
 <lucene-user-return-7304-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 40608 invoked from network); 29 Feb 2004 13:18:41 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 29 Feb 2004 13:18:41 -0000
Received: (qmail 63478 invoked by uid 500); 29 Feb 2004 13:18:33 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 63374 invoked by uid 500); 29 Feb 2004 13:18:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 63357 invoked from network); 29 Feb 2004 13:18:32 -0000
Received: from unknown (HELO fargus.sitescape.com) (65.202.208.227)
  by daedalus.apache.org with SMTP; 29 Feb 2004 13:18:32 -0000
Received: from Pangloss ([216.195.213.27])
	by fargus.sitescape.com (8.11.6/8.11.6) with ESMTP id i1TDDHt14702
	for <lucene-user@jakarta.apache.org>; Sun, 29 Feb 2004 08:13:17 -0500
From: "Roy Klein" <klein@sitescape.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Indexing multiple instances of the same field for each document
Date: Sun, 29 Feb 2004 08:18:23 -0500
Message-ID: <043401c3fec6$82d93ac0$3c03a8c0@Pangloss>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
In-Reply-To: <4041C2C0.4000809@arcor.de>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
Importance: Normal
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Markus,

What you're saying would work if I wasn't concerned about query
performance.

If I add the synonym's at document index time, then I only process the
word "quick" once (when I insert the doc into the index).

If I process each query to convert "fast" and "speedy" to "quick" at
query time, then I might wind up processing those words millions of
times. (once for each query)   Yes, I could come up with a cache so that
the processing is at a minimum, however, it still makes more sense to do
it once, at index time.

    Roy

-----Original Message-----
From: Markus Spath [mailto:mspath@arcor.de] 
Sent: Sunday, February 29, 2004 5:45 AM
To: Lucene Users List
Subject: Re: Indexing multiple instances of the same field for each
document


Roy Klein wrote:

> Erik,
> 
> Indexing a single field in chunks solves a design problem I'm working 
> on. It's not the only way to do it, but, it would certainly be the 
> most straightforward.  However, if using this method makes phrase 
> searching unusable, then I'll have to go another route.
> 

hmm, wouldn't it be easier to index only one term for a list of synomys
instead 
of indexing each synonym for one term?

quick, fast, speedy -> quick (both when building the index and building
the query)

this also would solve your problems with the (somehow counterintuative
but 
probably well reasoned) behaviour of lucene to add Fields with the same
name at 
the beginning instead of appending them.


Markus

> Here's a brief example of the type of thing I'm trying to do:
> 
> I have a file that contains the words:
> 
> The quick brown fox jumped over the lazy dog.
> 
> I run that file through a utility that produces the following xml
> document:
> <document>
>   <field name=wordposition1>
>     <word>The</word>
>   </field>
>   <field name=wordposition2>
>     <word>quick</word>
>     <word>fast</word>
>     <word>speedy</word>
>   </field>
>   <field name=wordposition3>
>     <word>brown</word>
>     <word>tan</word>
>     <word>dark</word>
>   </field>
>   .
>   .
>   .
> 
> I parse that document (via the digester), and add all the words from 
> each of the fields to one lucene field: "contents".  The tricky part 
> is that I want to have each word position contain all the words at 
> that position in the lucene index.  I.e. word location 1 in the index 
> contains "The", word location 2: "quick, fast, and speedy", word 
> location 3: "brown, tan, and dark", etc.
> 
> That way, all the following phrase queries will match this document:
> 	"fast tan"
> 	"quick brown"
>       "fast brown"
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb 29 13:55:12 2004
Return-Path: 
 <lucene-user-return-7305-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 52558 invoked from network); 29 Feb 2004 13:55:12 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 29 Feb 2004 13:55:12 -0000
Received: (qmail 7101 invoked by uid 500); 29 Feb 2004 13:55:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 7078 invoked by uid 500); 29 Feb 2004 13:55:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 7064 invoked from network); 29 Feb 2004 13:55:03 -0000
Received: from unknown (HELO hotmail.com) (64.4.46.109)
  by daedalus.apache.org with SMTP; 29 Feb 2004 13:55:03 -0000
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Sun, 29 Feb 2004 05:55:05 -0800
Received: from 219.142.134.138 by bay9-dav5.bay9.hotmail.com with DAV;
	Sun, 29 Feb 2004 13:55:05 +0000
X-Originating-IP: [219.142.134.138]
X-Originating-Email: [chedong@hotmail.com]
X-Sender: chedong@hotmail.com
From: "Che Dong" <chedong@hotmail.com>
To: <ankurg@brickred.com>,
	"'Lucene Users List'" <lucene-user@jakarta.apache.org>
References: <200402271705.i1RH53s15368@plain.rackshack.net>
Subject: Re: CJK Analyzer in lucene 1.3 final
Date: Sun, 29 Feb 2004 21:54:59 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: base64
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
Message-ID: <BAY9-DAV5xB6rbe3gNZ00007819@hotmail.com>
X-OriginalArrivalTime: 29 Feb 2004 13:55:05.0290 (UTC)
 FILETIME=[A265C2A0:01C3FECB]
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

aGVyZSBpcyBhIGRlbW8gb24gQmxvZ0NoaW5hLmNvbQ0KaHR0cDovL3d3dy5ibG9nY2hpbmEuY29t
L3dlYmx1Y2VuZS8NCg0KQ2hlIERvbmcNCg0KLS0tLS0gT3JpZ2luYWwgTWVzc2FnZSAtLS0tLSAN
CkZyb206ICJBbmt1ciBHb2VsIiA8YW5rdXJnQGJyaWNrcmVkLmNvbT4NClRvOiAiJ0x1Y2VuZSBV
c2VycyBMaXN0JyIgPGx1Y2VuZS11c2VyQGpha2FydGEuYXBhY2hlLm9yZz4NClNlbnQ6IFNhdHVy
ZGF5LCBGZWJydWFyeSAyOCwgMjAwNCAxMjoxMSBBTQ0KU3ViamVjdDogUkU6IENKSyBBbmFseXpl
ciBpbiBsdWNlbmUgMS4zIGZpbmFsDQoNCg0KDQoNCkkgdHJpZWQgd2l0aCBTdGFuZGFyZCBBbmFs
eXplciBidXQgbm90IGFibGUgdG8gZG8gc28uIFRoZW4gSSB0cmllZCBDSmsNCkFubGF5emVyIGdp
dmVuIHVzaW5nIENKSyB0b2tlbml6ZXIgYnV0IHdhcyBhZ2FpbiB1bnN1Y2Nlc2Z1bC4gVGhlIEZp
bGUgaW4NCndoaWNoIHRleHQgdG8gYmUgaW5kZXhlZCBpcyBjb250YWlucyBub3RoIEVuZ2xpc2gg
YW5kIEphcGFuZXNlIENoYXJhY3RlcnMuDQpDYW4gdGhpcyBiZSBhIHByb2JsZW0uDQoNClJlZ2Fy
ZHMNCkFua3VyIA0KDQotLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KRnJvbTogPyA/IFttYWls
dG86Y2hlZG9uZ0Bob3RtYWlsLmNvbV0gDQpTZW50OiBGcmlkYXksIEZlYnJ1YXJ5IDI3LCAyMDA0
IDc6NTggUE0NClRvOiBsdWNlbmUtdXNlckBqYWthcnRhLmFwYWNoZS5vcmcNClN1YmplY3Q6IFJl
OiBDSksgQW5hbHl6ZXIgaW4gbHVjZW5lIDEuMyBmaW5hbA0KDQpmb3IgZWFzdCBhc2lhbiBsYW5n
dWFnZSB3aXRob3V0IHNwYWNlIGZvciB3b3JkIHNlZ21lbnQgaW4gbmF0dXJlLCB0aGUgDQpTdGFu
ZGFyZFRva2VuaXplciBub3cgaXMgc2lncmFtIGJhc2VkIEMxQzJDMyA9PT4gQzEgQzIgQzMsIHNv
IHlvdSBzZWFyY2ggDQpDMUMyIGFuZCBDMkMxIHdpbGwgcmV0dXJuIHNhbWUgcmVzdWx0cw0KDQpD
SktUb2tlbml6ZXIgaXMgYmlncmFtIGJhc2VkOiBDMUMyQzMgPT0+IEMxQzIgQzJDMywgc28geW91
IGl0IHdpbGwgcmVzdWx0IA0KcmV0dXJuIHdoZW4geW91IHNlYXJjaCBDMkMxLA0KYnJpZWZseTog
Q0pLVG90ZW5pemVyIGlzIGJldHRlciB0aGFuIFN0YW5kYXJkVG9rZW5pemVyIGZvciBDSksgYnV0
IEkgZG9uJ3QgDQprbm93IGhvdyB0byBpbXBsZW1lbnQgYmlncmFtIGJhc2VkIHRva2VuIGluIFN0
YW5kYXJ0VG9rZW56aWVyLg0KDQpDaGUgRG9uZw0KaHR0cDovL3d3dy5jaGVkb25nLmNvbS90ZWNo
L2x1Y2VuZS5odG1sDQoNCj5Gcm9tOiBFcmlrIEhhdGNoZXIgPGVyaWtAZWhhdGNoZXJzb2x1dGlv
bnMuY29tPg0KPlJlcGx5LVRvOiAiTHVjZW5lIFVzZXJzIExpc3QiIDxsdWNlbmUtdXNlckBqYWth
cnRhLmFwYWNoZS5vcmc+DQo+VG86ICJMdWNlbmUgVXNlcnMgTGlzdCIgPGx1Y2VuZS11c2VyQGph
a2FydGEuYXBhY2hlLm9yZz4NCj5TdWJqZWN0OiBSZTogQ0pLIEFuYWx5emVyIGluIGx1Y2VuZSAx
LjMgZmluYWwNCj5EYXRlOiBGcmksIDI3IEZlYiAyMDA0IDA4OjI5OjEwIC0wNTAwDQo+TUlNRS1W
ZXJzaW9uOiAxLjAgKEFwcGxlIE1lc3NhZ2UgZnJhbWV3b3JrIHY2MTIpDQo+UmVjZWl2ZWQ6IGZy
b20gbWFpbC5hcGFjaGUub3JnIChbMjA4LjE4NS4xNzkuMTJdKSBieSBtYzExLWYyNy5ob3RtYWls
LmNvbSANCndpdGggTWljcm9zb2Z0IFNNVFBTVkMoNS4wLjIxOTUuNjgyNCk7IEZyaSwgMjcgRmVi
IDIwMDQgMDU6Mjk6MjEgLTA4MDANCj5SZWNlaXZlZDogKHFtYWlsIDU4OTc2IGludm9rZWQgYnkg
dWlkIDUwMCk7IDI3IEZlYiAyMDA0IDEzOjI5OjE2IC0wMDAwDQo+UmVjZWl2ZWQ6IChxbWFpbCA1
ODk2MiBpbnZva2VkIGZyb20gbmV0d29yayk7IDI3IEZlYiAyMDA0IDEzOjI5OjE1IC0wMDAwDQo+
UmVjZWl2ZWQ6IGZyb20gdW5rbm93biAoSEVMTyBjMDAwLnNudi5jcC5uZXQpICgyMDkuMjI4LjMy
Ljc3KSAgYnkgDQpkYWVkYWx1cy5hcGFjaGUub3JnIHdpdGggU01UUDsgMjcgRmViIDIwMDQgMTM6
Mjk6MTUgLTAwMDANCj5SZWNlaXZlZDogKGNwbXRhIDI0NTQ0IGludm9rZWQgZnJvbSBuZXR3b3Jr
KTsgMjcgRmViIDIwMDQgMDU6Mjk6MTYgLTA4MDANCj5SZWNlaXZlZDogZnJvbSAxMjguMTQzLjI2
LjIgKEhFTE8gPzEyOC4xNDMuMjYuMj8pICBieSBzbXRwLmhhdGNoZXIubmV0IA0KKDIwOS4yMjgu
MzIuNzcpIHdpdGggU01UUDsgMjcgRmViIDIwMDQgMDU6Mjk6MTYgLTA4MDANCj5YLU1lc3NhZ2Ut
SW5mbzogSkdUWW9ZRjc4akVBbnE5MFN1NlBRTGVDaWJ5d3JaT0UNCj5NYWlsaW5nLUxpc3Q6IGNv
bnRhY3QgbHVjZW5lLXVzZXItaGVscEBqYWthcnRhLmFwYWNoZS5vcmc7IHJ1biBieSBlem1sbQ0K
PlByZWNlZGVuY2U6IGJ1bGsNCj5MaXN0LVVuc3Vic2NyaWJlOiA8bWFpbHRvOmx1Y2VuZS11c2Vy
LXVuc3Vic2NyaWJlQGpha2FydGEuYXBhY2hlLm9yZz4NCj5MaXN0LVN1YnNjcmliZTogPG1haWx0
bzpsdWNlbmUtdXNlci1zdWJzY3JpYmVAamFrYXJ0YS5hcGFjaGUub3JnPg0KPkxpc3QtSGVscDog
PG1haWx0bzpsdWNlbmUtdXNlci1oZWxwQGpha2FydGEuYXBhY2hlLm9yZz4NCj5MaXN0LVBvc3Q6
IDxtYWlsdG86bHVjZW5lLXVzZXJAamFrYXJ0YS5hcGFjaGUub3JnPg0KPkxpc3QtSWQ6ICJMdWNl
bmUgVXNlcnMgTGlzdCIgPGx1Y2VuZS11c2VyLmpha2FydGEuYXBhY2hlLm9yZz4NCj5EZWxpdmVy
ZWQtVG86IG1haWxpbmcgbGlzdCBsdWNlbmUtdXNlckBqYWthcnRhLmFwYWNoZS5vcmcNCj5YLVNl
bnQ6IDI3IEZlYiAyMDA0IDEzOjI5OjE2IEdNVA0KPkluLVJlcGx5LVRvOiA8MjAwNDAyMjcxMzA1
LmkxUkQ1V3MxNDAwM0BwbGFpbi5yYWNrc2hhY2submV0Pg0KPlJlZmVyZW5jZXM6IDwyMDA0MDIy
NzEzMDUuaTFSRDVXczE0MDAzQHBsYWluLnJhY2tzaGFjay5uZXQ+DQo+TWVzc2FnZS1JZDogPEVD
RjUxODU0LTY5MjgtMTFEOC05REUwLTAwMDM5M0E1NjRFNkBlaGF0Y2hlcnNvbHV0aW9ucy5jb20+
DQo+WC1NYWlsZXI6IEFwcGxlIE1haWwgKDIuNjEyKQ0KPlgtU3BhbS1SYXRpbmc6IGRhZWRhbHVz
LmFwYWNoZS5vcmcgMS42LjIgMC8xMDAwL04NCj5SZXR1cm4tUGF0aDogDQpsdWNlbmUtdXNlci1y
ZXR1cm4tNzI3My1jaGVkb25nPWhvdG1haWwuY29tQGpha2FydGEuYXBhY2hlLm9yZw0KPlgtT3Jp
Z2luYWxBcnJpdmFsVGltZTogMjcgRmViIDIwMDQgMTM6Mjk6MjEuMDYzMSAoVVRDKSANCkZJTEVU
SU1FPVtCNTdBOTZGMDowMUMzRkQzNV0NCj4NCj5PbiBGZWIgMjcsIDIwMDQsIGF0IDc6MTIgQU0s
IEFua3VyIEdvZWwgd3JvdGU6DQo+PiAgSGksDQo+PkluIHRoZSBsdWNlbmUtMS4zLWZpbmFsIHZl
cnNpb24ncyBDSEFOR0VTLnR4dCBpdCBpcyB3cml0dGVuIHRoYXQgDQo+PiJGaXgNCj4+U3RhbmRh
cmRUb2tlbml6ZXIncyBoYW5kbGluZyBvZiBDSksgY2hhcmFjdGVycyAoQ2hpbmVzZSwgSmFwYW5l
c2UgDQo+PmFuZCBLb3JlYW4NCj4+aWRlb2dyYW1zKS4iDQo+Pg0KPj5Eb2VzIGl0IG1lYW4gdGhh
dCBmb3IgQ0pLIGNoYXJhY3RlcnMgd2Ugbm93IGRvIG5vdCBuZWVkIHRvIHVzZSBhbnkgDQo+PnNl
cGFyYXRlDQo+PmFuYWx5emVyLCBzdGFuZGFyZCBhbmFseXplciB3aWxsIGJlIHN1ZmZpY2llbnQ/
Pw0KPg0KPllvdSB0ZWxsIHVzLiAgRG9lcyBpdCB3b3JrIGZvciB5b3U/DQo+DQo+QW4gYW5hbHl6
ZXIgaXMgYSBwcmV0dHkgcGVyc29uYWwgZGVjaXNpb24gYmFzZWQgb24geW91ciBkYXRhc2V0LCBz
byANCj5pdCBpcyBpbXBvc3NpYmxlIHRvIGFuc3dlciB5b3VyIHF1ZXN0aW9uIGRpcmVjdGx5Lg0K
Pg0KPiBFcmlrDQo+DQo+DQo+LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+VG8gdW5zdWJzY3JpYmUsIGUtbWFpbDog
bHVjZW5lLXVzZXItdW5zdWJzY3JpYmVAamFrYXJ0YS5hcGFjaGUub3JnDQo+Rm9yIGFkZGl0aW9u
YWwgY29tbWFuZHMsIGUtbWFpbDogbHVjZW5lLXVzZXItaGVscEBqYWthcnRhLmFwYWNoZS5vcmcN
Cj4NCg0KX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18NCsPit9HPwtTYIE1TTiBFeHBsb3JlcjogICBodHRwOi8vZXhwbG9yZXIu
bXNuLmNvbS9sY2NuLyAgDQoNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpUbyB1bnN1YnNjcmliZSwgZS1tYWls
OiBsdWNlbmUtdXNlci11bnN1YnNjcmliZUBqYWthcnRhLmFwYWNoZS5vcmcNCkZvciBhZGRpdGlv
bmFsIGNvbW1hbmRzLCBlLW1haWw6IGx1Y2VuZS11c2VyLWhlbHBAamFrYXJ0YS5hcGFjaGUub3Jn
DQoNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tDQpUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBsdWNlbmUtdXNlci11
bnN1YnNjcmliZUBqYWthcnRhLmFwYWNoZS5vcmcNCkZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBl
LW1haWw6IGx1Y2VuZS11c2VyLWhlbHBAamFrYXJ0YS5hcGFjaGUub3JnDQoNCg==


From MAILER-DAEMON Sun Feb 29 14:01:11 2004
Return-Path: 
 <lucene-user-return-7306-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54818 invoked from network); 29 Feb 2004 14:01:11 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 29 Feb 2004 14:01:11 -0000
Received: (qmail 15624 invoked by uid 500); 29 Feb 2004 14:00:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 15596 invoked by uid 500); 29 Feb 2004 14:00:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 15555 invoked from network); 29 Feb 2004 14:00:58 -0000
Received: from unknown (HELO hotmail.com) (64.4.46.19)
  by daedalus.apache.org with SMTP; 29 Feb 2004 14:00:58 -0000
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Sun, 29 Feb 2004 06:01:00 -0800
Received: from 219.142.134.138 by bay9-dav47.bay9.hotmail.com with DAV;
	Sun, 29 Feb 2004 14:00:59 +0000
X-Originating-IP: [219.142.134.138]
X-Originating-Email: [chedong@hotmail.com]
X-Sender: chedong@hotmail.com
From: "Che Dong" <chedong@hotmail.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <BAY14-F13ymLhtnJkxW0000363b@hotmail.com>
Subject: Re: dynamic summary
Date: Sun, 29 Feb 2004 22:00:58 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: base64
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
Message-ID: <BAY9-DAV47TOLs8GdWt00007883@hotmail.com>
X-OriginalArrivalTime: 29 Feb 2004 14:01:00.0286 (UTC)
 FILETIME=[75FDD9E0:01C3FECC]
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

V2ViTHVjZW5lIHdpdGggYSBzdW1tYXJ5IHBhY2thZ2U6DQpodHRwOi8vc291cmNlZm9yZ2UubmV0
L3Byb2plY3RzL3dlYmx1Y2VuZS8NCg0KQ2hlIERvbmcNCi0tLS0tIE9yaWdpbmFsIE1lc3NhZ2Ug
LS0tLS0gDQpGcm9tOiAidW1hbWFoZXNoIGJheWlyZWRkeWEiIDx1bWFtYWhlc2g3OEBob3RtYWls
LmNvbT4NClRvOiA8bHVjZW5lLXVzZXJAamFrYXJ0YS5hcGFjaGUub3JnPg0KU2VudDogU2F0dXJk
YXksIEZlYnJ1YXJ5IDI4LCAyMDA0IDQ6MDEgQU0NClN1YmplY3Q6IGR5bmFtaWMgc3VtbWFyeSAN
Cg0KDQo+IGhpIGFsbA0KPiANCj4gaG93IHRvIGdlbmVyYXRlIGR5bmFtaWMgc3VtbWFyeSBiYXNl
ZCBvbiBxdWVyeT8NCj4gDQo+IHJpZ2h0IG5vdyBpIGFtIHRyeWluZyB0byBnZXQgdGhlIHF1ZXJ5
IHJlc3VsdHMsIHBhcnNpbmcgaHRtbCBmaWxlcyB3aGljaCBpIA0KPiBnb3QgaW4gcXVlcnkgcmVz
dWx0IGFuZCBkaXNwbGF5aW5nIHRoZSBzZW50ZW5jZSBpbiB3aGljaCBxdWVyeSBpcyBtYXRjaGVk
DQo+IA0KPiB0aGFua3MNCj4gbWFoZXNoDQo+IA0KPiBfX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXw0KPiBDb250YWN0IGJyaWRl
cyAmIGdyb29tcyBGUkVFISBodHRwOi8vd3d3LnNoYWFkaS5jb20vcHRuci5waHA/cHRucj1obWx0
YWcgDQo+IE9ubHkgb24gd3d3LnNoYWFkaS5jb20uIFJlZ2lzdGVyIG5vdyENCj4gDQo+IA0KPiAt
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0NCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogbHVjZW5lLXVzZXItdW5zdWJz
Y3JpYmVAamFrYXJ0YS5hcGFjaGUub3JnDQo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1h
aWw6IGx1Y2VuZS11c2VyLWhlbHBAamFrYXJ0YS5hcGFjaGUub3JnDQo+IA0KPiA=


From MAILER-DAEMON Sun Feb 29 14:10:07 2004
Return-Path: 
 <lucene-user-return-7307-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 57836 invoked from network); 29 Feb 2004 14:10:07 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 29 Feb 2004 14:10:07 -0000
Received: (qmail 21709 invoked by uid 500); 29 Feb 2004 14:09:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 21510 invoked by uid 500); 29 Feb 2004 14:09:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 21497 invoked from network); 29 Feb 2004 14:09:58 -0000
Received: from unknown (HELO c000.snv.cp.net) (209.228.32.71)
  by daedalus.apache.org with SMTP; 29 Feb 2004 14:09:58 -0000
Received: (cpmta 18377 invoked from network); 29 Feb 2004 06:09:59 -0800
Received: from 128.143.26.2 (HELO ?128.143.26.2?)
  by smtp.hatcher.net (209.228.32.71) with SMTP; 29 Feb 2004 06:09:59 -0800
X-Sent: 29 Feb 2004 14:09:59 GMT
Mime-Version: 1.0 (Apple Message framework v612)
In-Reply-To: <043301c3fe70$eb010250$3c03a8c0@Pangloss>
References: <043301c3fe70$eb010250$3c03a8c0@Pangloss>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <F469B915-6AC0-11D8-A970-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Indexing multiple instances of the same field for each document
Date: Sun, 29 Feb 2004 09:09:57 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.612)
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

What you are doing is really the job of an Analyzer.  You are doing 
pre-analysis, when instead you could do all of this within the context 
of a custom analyzer and avoid many of these issues altogether.

Do you use the XML only during indexing?  If so, you could bypass the 
whole conversion to XML and then back through Digester all within an 
analyzer.

Or am I missing something that prevents you from doing it this way?

	Erik


On Feb 28, 2004, at 10:05 PM, Roy Klein wrote:
> Erik,
> Here's a brief example of the type of thing I'm trying to do:
>
> I have a file that contains the words:
>
> The quick brown fox jumped over the lazy dog.
>
> I run that file through a utility that produces the following xml
> document:
> <document>
>   <field name=wordposition1>
>     <word>The</word>
>   </field>
>   <field name=wordposition2>
>     <word>quick</word>
>     <word>fast</word>
>     <word>speedy</word>
>   </field>
>   <field name=wordposition3>
>     <word>brown</word>
>     <word>tan</word>
>     <word>dark</word>
>   </field>
>   .
>   .
>   .
>
> I parse that document (via the digester), and add all the words from
> each of the fields to one lucene field: "contents".  The tricky part is
> that I want to have each word position contain all the words at that
> position in the lucene index.  I.e. word location 1 in the index
> contains "The", word location 2: "quick, fast, and speedy", word
> location 3: "brown, tan, and dark", etc.
>
> That way, all the following phrase queries will match this document:
> 	"fast tan"
> 	"quick brown"
>       "fast brown"
>
> I wrote a "TermAnalyzer" that adds all the words from a field into the
> index at the same position. (via setPositionIncrement(0)).  That way I
> can simply add each set of words to the "contents" field, and it'll 
> just
> keep adding them to the same field.  However, since it's reversing 
> them,
> I can't match phrases.
>
>
>     Roy


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From MAILER-DAEMON Sun Feb 29 22:54:45 2004
Return-Path: 
 <lucene-user-return-7308-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 33835 invoked from network); 29 Feb 2004 22:54:45 -0000
Received: from daedalus.apache.org (HELO mail.apache.org) (208.185.179.12)
  by minotaur-2.apache.org with SMTP; 29 Feb 2004 22:54:45 -0000
Received: (qmail 63493 invoked by uid 500); 29 Feb 2004 22:54:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 63459 invoked by uid 500); 29 Feb 2004 22:54:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 63446 invoked from network); 29 Feb 2004 22:54:26 -0000
Received: from unknown (HELO server0027.freedom2surf.net) (194.106.33.36)
  by daedalus.apache.org with SMTP; 29 Feb 2004 22:54:26 -0000
Received: from dell ([194.106.34.5])
	by server0027.freedom2surf.net (8.12.6/8.12.6/Debian-7) with SMTP id
 i1TMsWdA020794
	for <lucene-user@jakarta.apache.org>; Sun, 29 Feb 2004 22:54:32 GMT
Date: Sun, 29 Feb 2004 22:54:32 GMT
Message-Id: <200402292254.i1TMsWdA020794@server0027.freedom2surf.net>
From: markharw00d@yahoo.co.uk
To: lucene-user@jakarta.apache.org
Subject: More Like This Query updated plus benchmarks
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I have updated the MoreLikeThis query generator to address a few issues.
The code is available here: http://home.clara.net/markharwood/lucene/MoreLikeThis.java
I have added comments at the top of the class to describe the changes.

I was interested in the benefits of the new TermVector code so I benchmarked 
it's effect on average time to generate a "MoreLikeThis" Query object for varying sized example 
docs from indexes with and without TermVector support:

For avg example doc size of 250 bytes :
VectorIndex  21 msecs
NoVectorIndex   37 msecs

For avg example doc size of 1,000 bytes :
VectorIndex  25 msecs
NoVectorIndex   48 msecs

For avg example doc size of 16,000 bytes :
VectorIndex 235 ms 
NoneVectorIndex356 ms

For avg example doc size of 150,000 bytes :
VectorIndex 533 ms 
NoneVectorIndex1809 ms


TermVector support is beneficial and its effects are more noticeable in larger docs.
However, once you get into 200k sized docs you probably want to look at ways to improve 
performance. 

A tokenizing size limit is an obvious way to optimise performance for large docs without term vectors
This cuts down on tokenizing time but may reduce the quality of results.
I introduced a default "5000" term limit on tokenization and this cut the 1809ms in the above 
results down to 612 ms
I haven't been able to test for the quality of results produced by this query (my 150k docs were made 
by concatenating several smaller, docs of different subject matter together).
Looking at the query terms produced however it seems to compare reasonably with the vector-produced one:

* 5k tokenize limit query=: colchest our essex home us we you from flower uk site click your ship compani new servic page 01206 fashion gift here music florist busi 

* Full vector query=: colchest our essex you flower we us click home school from your suffolk florist site about here servic uk new deliveri gift page an 01206



I'm not currently sure what the approach would be to optimising performance for TermVector-backed queries
when using large example docs.


On a related subject: now that I understand the TermVector feature better (and found there is no 
position data) I can't see a way that it is of any benefit to optimising the highlighter code.
I'd previously thought term sequence was in there.


Cheers
Mark









---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


